function um_wc_display_order(e,r){if(void 0===r&&void 0!==e.currentTarget){e.preventDefault(e),r=jQuery(e.currentTarget).parents("tr").data("order_id");var t=jQuery(e.currentTarget).get(0);r||"string"!=typeof t.hash||(r=t.hash.replace(/\D/,"")),window.history.pushState("string","Orders",t.href)}return wp.ajax.send("um_woocommerce_get_order",{data:{order_id:r,nonce:um_scripts.nonce},beforeSend:prepare_Modal,success:function(e){e?(show_Modal(e),responsive_Modal(),jQuery(".um-popup:visible").addClass("um-popup-order").show()):remove_Modal()},error:function(e){remove_Modal(),console.log("===UM Woocommerce error===",e)}})}function um_wc_display_subscription(e,r){if(void 0===r&&void 0!==e.currentTarget){e.preventDefault(e);var t=jQuery(e.currentTarget).get(0);r="string"==typeof t.hash?t.hash.replace(/\D/,""):(t=jQuery(e.currentTarget).closest("tr").find("td.subscription-id a")).text().replace(/\D/,""),window.history.pushState("string","Subscriptions",t.href)}return wp.ajax.send("um_woocommerce_get_subscription",{data:{subscription_id:r,nonce:um_scripts.nonce},beforeSend:function(){jQuery(".woocommerce_account_subscriptions").css({cursor:"wait",opacity:"0.7"})},success:function(e){"string"==typeof e.content&&(jQuery(".woocommerce_account_subscriptions").hide().after(e.content),jQuery(".um_account_subscription").fadeIn()),"object"==typeof e.script_params&&(WCSViewSubscription=e.script_params),"string"==typeof e.script_ready&&jQuery.globalEval(e.script_ready)},error:function(e){console.log("===UM Woocommerce error===",e)}})}function um_wc_refresh_address(e,t,r){var o,n=0;if(jQuery(r).closest(".um-field[id]").length){var i=jQuery(r).closest(".um-field[id]").attr("id").match(/um_field_(\d+)_(billing|shipping)_country/i);"object"==typeof i&&3===i.length&&(n=parseInt(i[1]))}if(!n&&jQuery(r).closest("form").find('input[name="form_id"]').length)n=parseInt(jQuery(r).closest("form").find('input[name="form_id"]').val());wp.ajax.send("um_woocommerce_refresh_address",{data:{nonce:um_scripts.nonce,country:e,type:t,form_id:n},success:function(e){var r=".um-field-billing_state";"shipping_country"===t&&(r=".um-field-shipping_state"),0<jQuery(r+" .um-field-error").length&&(o=jQuery(r+" .um-field-error").clone()),jQuery(r).html(e).contents().unwrap(),0<jQuery(r+" select").length?jQuery(r+" select").select2({width:"100%"}):0<jQuery(r+' input[type = "hidden"]').length?jQuery(r).hide():jQuery(r).show(),o&&jQuery(r).append(o)},error:function(e){console.log("===UM Woocommerce error===",e)}})}jQuery(document).ready(function(e){jQuery(".um-woo-review-avg").length&&jQuery(".um-woo-review-avg").um_raty({half:!0,starType:"i",number:function(){return jQuery(this).attr("data-number")},score:function(){return jQuery(this).attr("data-score")},hints:["1 Star","2 Star","3 Star","4 Star","5 Star"],space:!1,readOnly:!0});var r=jQuery(".um-field #billing_country"),t=jQuery(".um-field #shipping_country");r.length&&um_wc_refresh_address(r.val(),r.data("key"),r);t.length&&um_wc_refresh_address(t.val(),t.data("key"),t);if(jQuery(document.body).on("change",".um-field #billing_country, .um-field #shipping_country",function(){um_wc_refresh_address(jQuery(this).val(),jQuery(this).data("key"),jQuery(this))}),jQuery(".um-account-tab select.country_select, .um-account-tab select.state_select, .um-custom-shortcode-tab select").length&&jQuery(".um-account-tab select.country_select, .um-account-tab select.state_select, .um-custom-shortcode-tab select").select2({width:"100%"}),0<jQuery(".um-account-tab .um-field-state .um-field-error").length){var o=jQuery(".um-account-tab .um-field-country:visible select");um_wc_refresh_address(o.val(),o.data("key"),o)}(jQuery(document.body).on("click",".um-woo-orders .my_account_orders .um-woo-view-order, .um-woo-orders .my_account_orders a.view",um_wc_display_order),jQuery(document.body).on("click",".um-woo-order-hide",function(e){return e.preventDefault(),window.history.pushState("string","Orders",window.location.pathname),remove_Modal(),!1}),-1<window.location.href.indexOf("/orders/"))&&(window.location.hash&&um_wc_display_order(e,window.location.hash.replace(/\D/,"")));(jQuery(document.body).on("click",".um-woo-subscriptions .my_account_subscriptions a.view, .um-woo-subscriptions .my_account_subscriptions .subscription-id > a",um_wc_display_subscription),jQuery(document.body).on("click",".back_to_subscriptions",function(e){return e.preventDefault(),window.history.pushState("string","Subscriptions",window.location.pathname),jQuery(".woocommerce_account_subscriptions").removeAttr("style").fadeIn().nextAll(".um_account_subscription").remove(),!1}),-1<window.location.href.indexOf("/subscription/"))&&(window.location.hash&&um_wc_display_subscription(e,window.location.hash.replace(/\D/,"")));jQuery(document.body).on("click",'a[href*="add-payment-method"]',function(e){if(e.preventDefault(),!/add-payment-method=1/.test(location.href)){var r=location.href+(/\?/.test(location.href)?"&":"?")+"add-payment-method=1";window.history.pushState("string","Add payment method",r)}jQuery("#um_add_payment_method_content .um-modal-overlay").remove(),jQuery("#um_add_payment_method_content .um-modal").removeClass("um-modal-hidden").show().after('<div class="um-modal-overlay"></div>'),jQuery(document.body).trigger("resize")}),jQuery("#um_add_payment_method_content").on("click",".um-modal-overlay",function(e){e.stopPropagation(),window.history.pushState("string","Orders",window.location.pathname);var r=jQuery(e.currentTarget);r.siblings(".um-modal").addClass("um-modal-hidden").hide(),r.remove()}),/add-payment-method=1/.test(location.href)&&jQuery('a[href*="add-payment-method"]').length&&jQuery('a[href*="add-payment-method"]').trigger("click")});