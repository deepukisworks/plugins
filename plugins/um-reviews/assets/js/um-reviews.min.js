function init_rating_fields(){0<jQuery(".um-reviews-avg").length&&jQuery(".um-reviews-avg").um_raty({half:!0,starType:"i",number:function(){return jQuery(this).attr("data-number")},score:function(){return jQuery(this).attr("data-score")},hints:["1 "+um_reviews.star,"2 "+um_reviews.star,"3 "+um_reviews.star,"4 "+um_reviews.star,"5 "+um_reviews.star],space:!1,readOnly:!0}),0<jQuery(".um-reviews-rate").length&&jQuery(".um-reviews-rate").um_raty({half:!1,starType:"i",number:function(){return jQuery(this).attr("data-number")},score:function(){return jQuery(this).attr("data-score")},scoreName:function(){return jQuery(this).attr("data-key")},hints:["1 "+um_reviews.star,"2 "+um_reviews.star,"3 "+um_reviews.star,"4 "+um_reviews.star,"5 "+um_reviews.star],space:!1})}jQuery(window).on("load",function(){setTimeout(function(){jQuery(".um-reviews-d-p span").each(function(){jQuery(this).animate({width:jQuery(this).attr("data-width")+"%"})})},2e3)}),jQuery(document).ready(function(){var r=function(e){var r=1;""==e.find(".um-reviews-rate input").val()?r=0:e.find(".um-reviews-title input").val().length<1?r=0:e.find(".um-reviews-content textarea").val().length<1&&(r=0),r&&e.find("span.um-reviews-send input.um-button").removeAttr("disabled")};jQuery("form.um-reviews-form").on("click",".um-reviews-send .um-button",function(e){if(e.preventDefault(),void 0===jQuery.fn.um_raty)return!1;var r=jQuery(this).closest("form.um-reviews-form");return""==r.find(".um-reviews-rate input").val()?r.find(".um-field-error").html(um_reviews.add_rating).show():r.find(".um-reviews-title input").val().length<1?r.find(".um-field-error").html(um_reviews.provide_title).show():r.find(".um-reviews-content textarea").val().length<1?r.find(".um-field-error").html(um_reviews.provide_review_content).show():(r.find(".um-field-error").hide().empty(),wp.ajax.send({data:r.serialize(),success:function(e){r.parents(".um-reviews-item").siblings(".um-reviews-none").hide(),r.parents(".um-reviews-item").find(".um-reviews-post.review-form").hide(),r.parents(".um-reviews-item").find(".um-reviews-post.review-new").length?conta=r.parents(".um-reviews-item").find(".um-reviews-post.review-new"):conta=r.parents(".um-reviews-item").find(".um-reviews-post.review-list"),conta.show(),conta.find(".um-reviews-title").html("<span>"+e.title+"</span>"),conta.find(".um-reviews-content").html(e.content),conta.find(".um-reviews-send").hide(),conta.find(".um-reviews-avg").um_raty({half:!0,starType:"i",number:function(){return jQuery(this).attr("data-number")},score:e.rating,hints:["1 "+um_reviews.star,"2 "+um_reviews.star,"3 "+um_reviews.star,"4 "+um_reviews.star,"5 "+um_reviews.star],space:!1,readOnly:!0}),e.pending&&conta.find(".um-reviews-note").html(e.pending).css({display:"inline-block"}).show()},error:function(e){r.find(".um-field-error").html(e).show()}})),!1}).on("input","form.um-reviews-form",function(){var e=jQuery(this);r(e)}).on("click",".um-reviews-rate",function(){var e=jQuery(this).closest("form.um-reviews-form");r(e)}),jQuery(document.body).on("click",".um-reviews-cancel-add",function(e){return e.preventDefault(),jQuery(".um-reviews-prepost").show(),jQuery(this).parent().hide(),!1}),jQuery(document.body).on("click",".um-reviews-cancel-edit",function(e){return e.preventDefault(),jQuery(this).parents(".um-reviews-item").find(".review-list").show(),jQuery(this).parent().hide(),!1}),jQuery(document.body).on("click",".um-reviews-edit a",function(e){e.preventDefault();var r=jQuery(this).parents(".um-reviews-item"),i=jQuery(this).parents(".um-reviews-item").find(".um-reviews-post.review-form");return jQuery(this).parents(".um-reviews-item").find(".um-reviews-post.review-list").hide(),jQuery(".um-reviews-cancel-edit").parents(".um-reviews-item").not(r).find(".review-list").show(),jQuery(".um-reviews-cancel-edit").parent().hide(),i.show(),!1}),jQuery(document.body).on("click",".um-reviews-prepost",function(e){var r=jQuery(this).parent().find(".um-reviews-post.review-form");jQuery(this).hide(),r.show()}),jQuery(document.body).on("click",".um-reviews-remove a",function(e){if(e.preventDefault(),0==jQuery(this).parents(".um-reviews-item").find(".um-reviews-remove-a").length){jQuery(this).hide();var r=jQuery(this).attr("data-remove"),i=jQuery(this).parents(".um-reviews-item").find(".um-reviews-note");i.html(r).css({display:"inline-block"}).show(),i.after('<div class="um-reviews-remove-a"><a href="javascript:void(0);">'+um_reviews.remove+'</a>&nbsp;&nbsp; | &nbsp;&nbsp;<a href="javascript:void(0);" class="cancel-remove">'+um_reviews.cancel+"</a></div>")}return!1}),jQuery(document.body).on("click",".um-reviews-remove-a a:not(.cancel-remove)",function(e){e.preventDefault();var r=jQuery(this).parents(".um-reviews-item").attr("data-review_id"),i=jQuery(this).parents(".um-reviews-item").attr("data-user_id");return jQuery(this).parents(".um-reviews-item").remove(),wp.ajax.send("um_review_trash",{data:{review_id:r,user_id:i,nonce:um_scripts.nonce},success:function(e){},error:function(e){console.log("UM Reviews script error:",e)}}),!1}),jQuery(document.body).on("click",".um-reviews-remove-a a.cancel-remove",function(e){return e.preventDefault(),jQuery(this).parents(".um-reviews-item").find(".um-reviews-remove a").show(),jQuery(this).parents(".um-reviews-item").find(".um-reviews-note").empty().hide(),jQuery(this).parent().remove(),!1}),jQuery(document.body).on("click",".um-reviews-flag a",function(e){e.preventDefault();var r=jQuery(this).parent(),i=jQuery(this).parents(".um-reviews-item"),t=jQuery(this).parents(".um-reviews-item").attr("data-review_id");return wp.ajax.send("um_review_flag",{data:{review_id:t,nonce:um_scripts.nonce},success:function(e){i.find(".um-reviews-note").html(e.response).css({display:"inline-block"}).show(),r.hide()}}),!1}),jQuery(document).on("um_build_template",function(){init_rating_fields()}),init_rating_fields()}),function(u){u(document).on("click",".um-reviews-reply-edit a, .um-reviews-reply-cancel-edit",function(e){e.preventDefault(),u(this).parents(".um-reviews-reply-item").find(".um-reviews-reply-post").toggle()}),u(document).on("click",".um-reviews-reply a, .um-new-review-reply-cancel",function(e){e.preventDefault(),u(this).parents(".um-reviews-item").find(".review-reply-new-form").toggle()}),u(document).on("click",".um-reviews-reply-remove a",function(e){if(e.preventDefault(),0==u(this).parents(".um-reviews-reply-item").find(".um-reviews-reply-remove-a").length){u(this).hide();var r=u(this).attr("data-remove"),i=u(this).attr("data-reply_id"),t=u(this).parents(".um-reviews-reply-item").find(".um-reviews-reply-note");t.html(r).css({display:"inline-block"}).show(),t.after('<div class="um-reviews-reply-remove-a"><a href="javascript:void(0);" data-reply="'+i+'" class="reply-remove">'+um_reviews.remove+'</a>&nbsp;&nbsp; | &nbsp;&nbsp;<a href="javascript:void(0);" class="cancel-remove">'+um_reviews.cancel+"</a></div>")}}),u(document).on("click",".um-reviews-reply-remove-a a.cancel-remove",function(e){e.preventDefault(),u(this).parents(".um-reviews-reply-post").find(".um-reviews-reply-tools").find(".um-reviews-reply-remove a").show(),u(this).parents(".um-reviews-reply-post").find(".um-reviews-reply-note").empty().hide(),u(this).parent().remove()}),u(document).on("click",".um-reviews-reply-remove-a a.reply-remove",function(e){e.preventDefault();var r=u(this).parents(".um-reviews-reply-item"),i=u(this).attr("data-reply");wp.ajax.send("um_reviews_reply_delete",{data:{reply_id:i},success:function(e){r.remove()},error:function(e){console.log(e)}})}),u(document).on("submit",".um-reviews-reply-form",function(e){e.preventDefault();var i=u(this);if(i.hasClass("busy"))return!1;i.addClass("busy");var t=i.find('[name="reply_id"]').length,n=i.parents(".um-reviews-item"),s=i.parents(".um-reviews-reply-post").find("a.um-reviews-reply-cancel-edit"),r={content:i.find('[name="content"]').val(),review_id:i.find('[name="review_id"]').val(),profile_id:i.find('[name="profile_id"]').val(),_wpnonce:i.find('[name="_wpnonce"]').val(),_wp_http_referer:i.find('[name="_wp_http_referer"]').val()};return 1<=t&&(r.reply_id=i.find('[name="reply_id"]').val()),wp.ajax.send("um_reviews_reply",{data:r,success:function(e){if(1<=t){var r=i.find("textarea").val();i.parents(".um-reviews-reply-item").find(".um-reviews-reply-content").find("p").html(r),s.trigger("click")}else n.append(e),i.trigger("reset"),s.trigger("click")},error:function(e){i.find(".um-field-error").html(e).show()}}),!1})}(jQuery);