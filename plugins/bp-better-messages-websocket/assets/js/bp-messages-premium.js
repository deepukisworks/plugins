/*! For license information please see bp-messages-premium.js.LICENSE.txt */
(()=>{var __webpack_modules__={7228:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i},e.exports.__esModule=!0,e.exports.default=e.exports},3646:(e,t,n)=>{var i=n(7228);e.exports=function(e){if(Array.isArray(e))return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6860:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8206:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},319:(e,t,n)=>{var i=n(3646),r=n(6860),a=n(379),o=n(8206);e.exports=function(e){return i(e)||r(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},379:(e,t,n)=>{var i=n(7228);e.exports=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},7757:(e,t,n)=>{e.exports=n(5666)},6333:(e,t,n)=>{"use strict";function i(e){return e?(e.nodeName||"").toLowerCase():null}n.d(t,{Z:()=>i})},2057:(e,t,n)=>{"use strict";function i(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}n.d(t,{Z:()=>i})},2556:(e,t,n)=>{"use strict";n.d(t,{Re:()=>a,Zq:()=>o,kK:()=>r});var i=n(2057);function r(e){return e instanceof(0,i.Z)(e).Element||e instanceof Element}function a(e){return e instanceof(0,i.Z)(e).HTMLElement||e instanceof HTMLElement}function o(e){return"undefined"!=typeof ShadowRoot&&(e instanceof(0,i.Z)(e).ShadowRoot||e instanceof ShadowRoot)}},7824:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(6333),r=n(2556);const a={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},a=t.attributes[e]||{},o=t.elements[e];(0,r.Re)(o)&&(0,i.Z)(o)&&(Object.assign(o.style,n),Object.keys(a).forEach((function(e){var t=a[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var a=t.elements[e],o=t.attributes[e]||{},s=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});(0,r.Re)(a)&&(0,i.Z)(a)&&(Object.assign(a.style,s),Object.keys(o).forEach((function(e){a.removeAttribute(e)})))}))}},requires:["computeStyles"]}},3086:(e,t,n)=>{"use strict";n.d(t,{fi:()=>me});var i=n(2556),r=Math.max,a=Math.min,o=Math.round;function s(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),r=1,a=1;if((0,i.Re)(e)&&t){var s=e.offsetHeight,c=e.offsetWidth;c>0&&(r=o(n.width)/c||1),s>0&&(a=o(n.height)/s||1)}return{width:n.width/r,height:n.height/a,top:n.top/a,right:n.right/r,bottom:n.bottom/a,left:n.left/r,x:n.left/r,y:n.top/a}}var c=n(2057);function l(e){var t=(0,c.Z)(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}var u=n(6333);function d(e){return(((0,i.kK)(e)?e.ownerDocument:e.document)||window.document).documentElement}function p(e){return s(d(e)).left+l(e).scrollLeft}function h(e){return(0,c.Z)(e).getComputedStyle(e)}function f(e){var t=h(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function m(e,t,n){void 0===n&&(n=!1);var r,a=(0,i.Re)(t),h=(0,i.Re)(t)&&function(e){var t=e.getBoundingClientRect(),n=o(t.width)/e.offsetWidth||1,i=o(t.height)/e.offsetHeight||1;return 1!==n||1!==i}(t),m=d(t),g=s(e,h),v={scrollLeft:0,scrollTop:0},b={x:0,y:0};return(a||!a&&!n)&&(("body"!==(0,u.Z)(t)||f(m))&&(v=(r=t)!==(0,c.Z)(r)&&(0,i.Re)(r)?function(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}(r):l(r)),(0,i.Re)(t)?((b=s(t,!0)).x+=t.clientLeft,b.y+=t.clientTop):m&&(b.x=p(m))),{x:g.left+v.scrollLeft-b.x,y:g.top+v.scrollTop-b.y,width:g.width,height:g.height}}function g(e){var t=s(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function v(e){return"html"===(0,u.Z)(e)?e:e.assignedSlot||e.parentNode||((0,i.Zq)(e)?e.host:null)||d(e)}function b(e){return["html","body","#document"].indexOf((0,u.Z)(e))>=0?e.ownerDocument.body:(0,i.Re)(e)&&f(e)?e:b(v(e))}function y(e,t){var n;void 0===t&&(t=[]);var i=b(e),r=i===(null==(n=e.ownerDocument)?void 0:n.body),a=(0,c.Z)(i),o=r?[a].concat(a.visualViewport||[],f(i)?i:[]):i,s=t.concat(o);return r?s:s.concat(y(v(o)))}function _(e){return["table","td","th"].indexOf((0,u.Z)(e))>=0}function A(e){return(0,i.Re)(e)&&"fixed"!==h(e).position?e.offsetParent:null}function w(e){for(var t=(0,c.Z)(e),n=A(e);n&&_(n)&&"static"===h(n).position;)n=A(n);return n&&("html"===(0,u.Z)(n)||"body"===(0,u.Z)(n)&&"static"===h(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&(0,i.Re)(e)&&"fixed"===h(e).position)return null;var n=v(e);for((0,i.Zq)(n)&&(n=n.host);(0,i.Re)(n)&&["html","body"].indexOf((0,u.Z)(n))<0;){var r=h(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var k="top",S="bottom",C="right",x="left",E="auto",T=[k,S,C,x],P="start",R="end",O="viewport",D="popper",M=T.reduce((function(e,t){return e.concat([t+"-"+P,t+"-"+R])}),[]),I=[].concat(T,[E]).reduce((function(e,t){return e.concat([t,t+"-"+P,t+"-"+R])}),[]),N=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function L(e){var t=new Map,n=new Set,i=[];function r(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var i=t.get(e);i&&r(i)}})),i.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||r(e)})),i}var B={placement:"bottom",modifiers:[],strategy:"absolute"};function $(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function j(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,a=t.defaultOptions,o=void 0===a?B:a;return function(e,t,n){void 0===n&&(n=o);var a,s,c={placement:"bottom",orderedModifiers:[],options:Object.assign({},B,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],u=!1,d={state:c,setOptions:function(n){var a="function"==typeof n?n(c.options):n;p(),c.options=Object.assign({},o,c.options,a),c.scrollParents={reference:(0,i.kK)(e)?y(e):e.contextElement?y(e.contextElement):[],popper:y(t)};var s,u,h=function(e){var t=L(e);return N.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}((s=[].concat(r,c.options.modifiers),u=s.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),Object.keys(u).map((function(e){return u[e]}))));return c.orderedModifiers=h.filter((function(e){return e.enabled})),c.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,i=void 0===n?{}:n,r=e.effect;if("function"==typeof r){var a=r({state:c,name:t,instance:d,options:i});l.push(a||function(){})}})),d.update()},forceUpdate:function(){if(!u){var e=c.elements,t=e.reference,n=e.popper;if($(t,n)){c.rects={reference:m(t,w(n),"fixed"===c.options.strategy),popper:g(n)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach((function(e){return c.modifiersData[e.name]=Object.assign({},e.data)}));for(var i=0;i<c.orderedModifiers.length;i++)if(!0!==c.reset){var r=c.orderedModifiers[i],a=r.fn,o=r.options,s=void 0===o?{}:o,l=r.name;"function"==typeof a&&(c=a({state:c,options:s,name:l,instance:d})||c)}else c.reset=!1,i=-1}}},update:(a=function(){return new Promise((function(e){d.forceUpdate(),e(c)}))},function(){return s||(s=new Promise((function(e){Promise.resolve().then((function(){s=void 0,e(a())}))}))),s}),destroy:function(){p(),u=!0}};if(!$(e,t))return d;function p(){l.forEach((function(e){return e()})),l=[]}return d.setOptions(n).then((function(e){!u&&n.onFirstUpdate&&n.onFirstUpdate(e)})),d}}var U={passive:!0};const F={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,i=e.options,r=i.scroll,a=void 0===r||r,o=i.resize,s=void 0===o||o,l=(0,c.Z)(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&u.forEach((function(e){e.addEventListener("scroll",n.update,U)})),s&&l.addEventListener("resize",n.update,U),function(){a&&u.forEach((function(e){e.removeEventListener("scroll",n.update,U)})),s&&l.removeEventListener("resize",n.update,U)}},data:{}};function Z(e){return e.split("-")[0]}function z(e){return e.split("-")[1]}function V(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function q(e){var t,n=e.reference,i=e.element,r=e.placement,a=r?Z(r):null,o=r?z(r):null,s=n.x+n.width/2-i.width/2,c=n.y+n.height/2-i.height/2;switch(a){case k:t={x:s,y:n.y-i.height};break;case S:t={x:s,y:n.y+n.height};break;case C:t={x:n.x+n.width,y:c};break;case x:t={x:n.x-i.width,y:c};break;default:t={x:n.x,y:n.y}}var l=a?V(a):null;if(null!=l){var u="y"===l?"height":"width";switch(o){case P:t[l]=t[l]-(n[u]/2-i[u]/2);break;case R:t[l]=t[l]+(n[u]/2-i[u]/2)}}return t}const W={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=q({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}};var H={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Q(e){var t,n=e.popper,i=e.popperRect,r=e.placement,a=e.variation,s=e.offsets,l=e.position,u=e.gpuAcceleration,p=e.adaptive,f=e.roundOffsets,m=e.isFixed,g=s.x,v=void 0===g?0:g,b=s.y,y=void 0===b?0:b,_="function"==typeof f?f({x:v,y}):{x:v,y};v=_.x,y=_.y;var A=s.hasOwnProperty("x"),E=s.hasOwnProperty("y"),T=x,P=k,O=window;if(p){var D=w(n),M="clientHeight",I="clientWidth";D===(0,c.Z)(n)&&"static"!==h(D=d(n)).position&&"absolute"===l&&(M="scrollHeight",I="scrollWidth"),(r===k||(r===x||r===C)&&a===R)&&(P=S,y-=(m&&D===O&&O.visualViewport?O.visualViewport.height:D[M])-i.height,y*=u?1:-1),r!==x&&(r!==k&&r!==S||a!==R)||(T=C,v-=(m&&D===O&&O.visualViewport?O.visualViewport.width:D[I])-i.width,v*=u?1:-1)}var N,L=Object.assign({position:l},p&&H),B=!0===f?function(e){var t=e.x,n=e.y,i=window.devicePixelRatio||1;return{x:o(t*i)/i||0,y:o(n*i)/i||0}}({x:v,y}):{x:v,y};return v=B.x,y=B.y,u?Object.assign({},L,((N={})[P]=E?"0":"",N[T]=A?"0":"",N.transform=(O.devicePixelRatio||1)<=1?"translate("+v+"px, "+y+"px)":"translate3d("+v+"px, "+y+"px, 0)",N)):Object.assign({},L,((t={})[P]=E?y+"px":"",t[T]=A?v+"px":"",t.transform="",t))}const X={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,i=n.gpuAcceleration,r=void 0===i||i,a=n.adaptive,o=void 0===a||a,s=n.roundOffsets,c=void 0===s||s,l={placement:Z(t.placement),variation:z(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Q(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Q(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var Y=n(7824);const G={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.offset,a=void 0===r?[0,0]:r,o=I.reduce((function(e,n){return e[n]=function(e,t,n){var i=Z(e),r=[x,k].indexOf(i)>=0?-1:1,a="function"==typeof n?n(Object.assign({},t,{placement:e})):n,o=a[0],s=a[1];return o=o||0,s=(s||0)*r,[x,C].indexOf(i)>=0?{x:s,y:o}:{x:o,y:s}}(n,t.rects,a),e}),{}),s=o[t.placement],c=s.x,l=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=l),t.modifiersData[i]=o}};var J={left:"right",right:"left",bottom:"top",top:"bottom"};function K(e){return e.replace(/left|right|bottom|top/g,(function(e){return J[e]}))}var ee={start:"end",end:"start"};function te(e){return e.replace(/start|end/g,(function(e){return ee[e]}))}function ne(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&(0,i.Zq)(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ie(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function re(e,t){return t===O?ie(function(e){var t=(0,c.Z)(e),n=d(e),i=t.visualViewport,r=n.clientWidth,a=n.clientHeight,o=0,s=0;return i&&(r=i.width,a=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,s=i.offsetTop)),{width:r,height:a,x:o+p(e),y:s}}(e)):(0,i.kK)(t)?function(e){var t=s(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):ie(function(e){var t,n=d(e),i=l(e),a=null==(t=e.ownerDocument)?void 0:t.body,o=r(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),s=r(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),c=-i.scrollLeft+p(e),u=-i.scrollTop;return"rtl"===h(a||n).direction&&(c+=r(n.clientWidth,a?a.clientWidth:0)-o),{width:o,height:s,x:c,y:u}}(d(e)))}function ae(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function oe(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function se(e,t){void 0===t&&(t={});var n=t,o=n.placement,c=void 0===o?e.placement:o,l=n.boundary,p=void 0===l?"clippingParents":l,f=n.rootBoundary,m=void 0===f?O:f,g=n.elementContext,b=void 0===g?D:g,_=n.altBoundary,A=void 0!==_&&_,x=n.padding,E=void 0===x?0:x,P=ae("number"!=typeof E?E:oe(E,T)),R=b===D?"reference":D,M=e.rects.popper,I=e.elements[A?R:b],N=function(e,t,n){var o="clippingParents"===t?function(e){var t=y(v(e)),n=["absolute","fixed"].indexOf(h(e).position)>=0&&(0,i.Re)(e)?w(e):e;return(0,i.kK)(n)?t.filter((function(e){return(0,i.kK)(e)&&ne(e,n)&&"body"!==(0,u.Z)(e)})):[]}(e):[].concat(t),s=[].concat(o,[n]),c=s[0],l=s.reduce((function(t,n){var i=re(e,n);return t.top=r(i.top,t.top),t.right=a(i.right,t.right),t.bottom=a(i.bottom,t.bottom),t.left=r(i.left,t.left),t}),re(e,c));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}((0,i.kK)(I)?I:I.contextElement||d(e.elements.popper),p,m),L=s(e.elements.reference),B=q({reference:L,element:M,strategy:"absolute",placement:c}),$=ie(Object.assign({},M,B)),j=b===D?$:L,U={top:N.top-j.top+P.top,bottom:j.bottom-N.bottom+P.bottom,left:N.left-j.left+P.left,right:j.right-N.right+P.right},F=e.modifiersData.offset;if(b===D&&F){var Z=F[c];Object.keys(U).forEach((function(e){var t=[C,S].indexOf(e)>=0?1:-1,n=[k,S].indexOf(e)>=0?"y":"x";U[e]+=Z[n]*t}))}return U}const ce={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var r=n.mainAxis,a=void 0===r||r,o=n.altAxis,s=void 0===o||o,c=n.fallbackPlacements,l=n.padding,u=n.boundary,d=n.rootBoundary,p=n.altBoundary,h=n.flipVariations,f=void 0===h||h,m=n.allowedAutoPlacements,g=t.options.placement,v=Z(g),b=c||(v!==g&&f?function(e){if(Z(e)===E)return[];var t=K(e);return[te(e),t,te(t)]}(g):[K(g)]),y=[g].concat(b).reduce((function(e,n){return e.concat(Z(n)===E?function(e,t){void 0===t&&(t={});var n=t,i=n.placement,r=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?I:c,u=z(i),d=u?s?M:M.filter((function(e){return z(e)===u})):T,p=d.filter((function(e){return l.indexOf(e)>=0}));0===p.length&&(p=d);var h=p.reduce((function(t,n){return t[n]=se(e,{placement:n,boundary:r,rootBoundary:a,padding:o})[Z(n)],t}),{});return Object.keys(h).sort((function(e,t){return h[e]-h[t]}))}(t,{placement:n,boundary:u,rootBoundary:d,padding:l,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),_=t.rects.reference,A=t.rects.popper,w=new Map,R=!0,O=y[0],D=0;D<y.length;D++){var N=y[D],L=Z(N),B=z(N)===P,$=[k,S].indexOf(L)>=0,j=$?"width":"height",U=se(t,{placement:N,boundary:u,rootBoundary:d,altBoundary:p,padding:l}),F=$?B?C:x:B?S:k;_[j]>A[j]&&(F=K(F));var V=K(F),q=[];if(a&&q.push(U[L]<=0),s&&q.push(U[F]<=0,U[V]<=0),q.every((function(e){return e}))){O=N,R=!1;break}w.set(N,q)}if(R)for(var W=function(e){var t=y.find((function(t){var n=w.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return O=t,"break"},H=f?3:1;H>0&&"break"!==W(H);H--);t.placement!==O&&(t.modifiersData[i]._skip=!0,t.placement=O,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function le(e,t,n){return r(e,a(t,n))}const ue={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name,o=n.mainAxis,s=void 0===o||o,c=n.altAxis,l=void 0!==c&&c,u=n.boundary,d=n.rootBoundary,p=n.altBoundary,h=n.padding,f=n.tether,m=void 0===f||f,v=n.tetherOffset,b=void 0===v?0:v,y=se(t,{boundary:u,rootBoundary:d,padding:h,altBoundary:p}),_=Z(t.placement),A=z(t.placement),E=!A,T=V(_),R="x"===T?"y":"x",O=t.modifiersData.popperOffsets,D=t.rects.reference,M=t.rects.popper,I="function"==typeof b?b(Object.assign({},t.rects,{placement:t.placement})):b,N="number"==typeof I?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),L=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,B={x:0,y:0};if(O){if(s){var $,j="y"===T?k:x,U="y"===T?S:C,F="y"===T?"height":"width",q=O[T],W=q+y[j],H=q-y[U],Q=m?-M[F]/2:0,X=A===P?D[F]:M[F],Y=A===P?-M[F]:-D[F],G=t.elements.arrow,J=m&&G?g(G):{width:0,height:0},K=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ee=K[j],te=K[U],ne=le(0,D[F],J[F]),ie=E?D[F]/2-Q-ne-ee-N.mainAxis:X-ne-ee-N.mainAxis,re=E?-D[F]/2+Q+ne+te+N.mainAxis:Y+ne+te+N.mainAxis,ae=t.elements.arrow&&w(t.elements.arrow),oe=ae?"y"===T?ae.clientTop||0:ae.clientLeft||0:0,ce=null!=($=null==L?void 0:L[T])?$:0,ue=q+re-ce,de=le(m?a(W,q+ie-ce-oe):W,q,m?r(H,ue):H);O[T]=de,B[T]=de-q}if(l){var pe,he="x"===T?k:x,fe="x"===T?S:C,me=O[R],ge="y"===R?"height":"width",ve=me+y[he],be=me-y[fe],ye=-1!==[k,x].indexOf(_),_e=null!=(pe=null==L?void 0:L[R])?pe:0,Ae=ye?ve:me-D[ge]-M[ge]-_e+N.altAxis,we=ye?me+D[ge]+M[ge]-_e-N.altAxis:be,ke=m&&ye?function(e,t,n){var i=le(e,t,n);return i>n?n:i}(Ae,me,we):le(m?Ae:ve,me,m?we:be);O[R]=ke,B[R]=ke-me}t.modifiersData[i]=B}},requiresIfExists:["offset"]},de={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,i=e.name,r=e.options,a=n.elements.arrow,o=n.modifiersData.popperOffsets,s=Z(n.placement),c=V(s),l=[x,C].indexOf(s)>=0?"height":"width";if(a&&o){var u=function(e,t){return ae("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:oe(e,T))}(r.padding,n),d=g(a),p="y"===c?k:x,h="y"===c?S:C,f=n.rects.reference[l]+n.rects.reference[c]-o[c]-n.rects.popper[l],m=o[c]-n.rects.reference[c],v=w(a),b=v?"y"===c?v.clientHeight||0:v.clientWidth||0:0,y=f/2-m/2,_=u[p],A=b-d[l]-u[h],E=b/2-d[l]/2+y,P=le(_,E,A),R=c;n.modifiersData[i]=((t={})[R]=P,t.centerOffset=P-E,t)}},effect:function(e){var t=e.state,n=e.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=t.elements.popper.querySelector(i)))&&ne(t.elements.popper,i)&&(t.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function pe(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function he(e){return[k,C,S,x].some((function(t){return e[t]>=0}))}const fe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,i=t.rects.reference,r=t.rects.popper,a=t.modifiersData.preventOverflow,o=se(t,{elementContext:"reference"}),s=se(t,{altBoundary:!0}),c=pe(o,i),l=pe(s,r,a),u=he(c),d=he(l);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}};var me=j({defaultModifiers:[F,W,X,Y.Z,G,ce,ue,de,fe]})},1736:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>y});var i=n(5088),r=n(7294),a=n(3935);function o(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}var s="undefined"!=typeof window&&"undefined"!=typeof document;function c(e,t){e&&("function"==typeof e&&e(t),{}.hasOwnProperty.call(e,"current")&&(e.current=t))}function l(){return s&&document.createElement("div")}function u(e,t){if(e===t)return!0;if("object"==typeof e&&null!=e&&"object"==typeof t&&null!=t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e){if(!t.hasOwnProperty(n))return!1;if(!u(e[n],t[n]))return!1}return!0}return!1}function d(e){var t=[];return e.forEach((function(e){t.find((function(t){return u(e,t)}))||t.push(e)})),t}function p(e,t){var n,i;return Object.assign({},t,{popperOptions:Object.assign({},e.popperOptions,t.popperOptions,{modifiers:d([].concat((null==(n=e.popperOptions)?void 0:n.modifiers)||[],(null==(i=t.popperOptions)?void 0:i.modifiers)||[]))})})}var h=s?r.useLayoutEffect:r.useEffect;function f(e){var t=(0,r.useRef)();return t.current||(t.current="function"==typeof e?e():e),t.current}function m(e,t,n){n.split(/\s+/).forEach((function(n){n&&e.classList[t](n)}))}var g={name:"className",defaultValue:"",fn:function(e){var t=e.popper.firstElementChild,n=function(){var t;return!!(null==(t=e.props.render)?void 0:t.$$tippy)};function i(){e.props.className&&!n()||m(t,"add",e.props.className)}return{onCreate:i,onBeforeUpdate:function(){n()&&m(t,"remove",e.props.className)},onAfterUpdate:i}}};function v(e){return function(t){var n=t.children,i=t.content,s=t.visible,u=t.singleton,d=t.render,m=t.reference,v=t.disabled,b=void 0!==v&&v,y=t.ignoreAttributes,_=void 0===y||y,A=(t.__source,t.__self,o(t,["children","content","visible","singleton","render","reference","disabled","ignoreAttributes","__source","__self"])),w=void 0!==s,k=void 0!==u,S=(0,r.useState)(!1),C=S[0],x=S[1],E=(0,r.useState)({}),T=E[0],P=E[1],R=(0,r.useState)(),O=R[0],D=R[1],M=f((function(){return{container:l(),renders:1}})),I=Object.assign({ignoreAttributes:_},A,{content:M.container});w&&(I.trigger="manual",I.hideOnClick=!1),k&&(b=!0);var N=I,L=I.plugins||[];d&&(N=Object.assign({},I,{plugins:k&&null!=u.data?[].concat(L,[{fn:function(){return{onTrigger:function(e,t){var n=u.data.children.find((function(e){return e.instance.reference===t.currentTarget}));e.state.$$activeSingletonInstance=n.instance,D(n.content)}}}}]):L,render:function(){return{popper:M.container}}}));var B=[m].concat(n?[n.type]:[]);return h((function(){var t=m;m&&m.hasOwnProperty("current")&&(t=m.current);var n=e(t||M.ref||l(),Object.assign({},N,{plugins:[g].concat(I.plugins||[])}));return M.instance=n,b&&n.disable(),s&&n.show(),k&&u.hook({instance:n,content:i,props:N,setSingletonContent:D}),x(!0),function(){n.destroy(),null==u||u.cleanup(n)}}),B),h((function(){var e;if(1!==M.renders){var t=M.instance;t.setProps(p(t.props,N)),null==(e=t.popperInstance)||e.forceUpdate(),b?t.disable():t.enable(),w&&(s?t.show():t.hide()),k&&u.hook({instance:t,content:i,props:N,setSingletonContent:D})}else M.renders++})),h((function(){var e;if(d){var t=M.instance;t.setProps({popperOptions:Object.assign({},t.props.popperOptions,{modifiers:[].concat(((null==(e=t.props.popperOptions)?void 0:e.modifiers)||[]).filter((function(e){return"$$tippyReact"!==e.name})),[{name:"$$tippyReact",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t,n=e.state,i=null==(t=n.modifiersData)?void 0:t.hide;T.placement===n.placement&&T.referenceHidden===(null==i?void 0:i.isReferenceHidden)&&T.escaped===(null==i?void 0:i.hasPopperEscaped)||P({placement:n.placement,referenceHidden:null==i?void 0:i.isReferenceHidden,escaped:null==i?void 0:i.hasPopperEscaped}),n.attributes.popper={}}}])})})}}),[T.placement,T.referenceHidden,T.escaped].concat(B)),r.createElement(r.Fragment,null,n?(0,r.cloneElement)(n,{ref:function(e){M.ref=e,c(n.ref,e)}}):null,C&&(0,a.createPortal)(d?d(function(e){var t={"data-placement":e.placement};return e.referenceHidden&&(t["data-reference-hidden"]=""),e.escaped&&(t["data-escaped"]=""),t}(T),O,M.instance):i,M.container))}}var b=function(e,t){return(0,r.forwardRef)((function(n,i){var a=n.children,s=o(n,["children"]);return r.createElement(e,Object.assign({},t,s),a?(0,r.cloneElement)(a,{ref:function(e){c(i,e),c(a.ref,e)}}):null)}))};i.XB;const y=b(v(i.ZP))},1592:(e,t,n)=>{"use strict";var i=n(1332).z,r={stringify(e){var t=i.enc.Hex.parse(e.salt.toString()).toString(i.enc.Latin1),n=e.ciphertext.toString(i.enc.Latin1);return i.enc.Latin1.parse("Salted__"+t+n).toString(i.enc.Base64)},parse(e){if("Salted__"!==(e=i.enc.Base64.parse(e).toString(i.enc.Latin1)).substr(0,8))throw new Error("Error parsing salt");var t=e.substr(8,8),n=e.substr(16);return i.lib.CipherParams.create({ciphertext:i.enc.Latin1.parse(n),salt:i.enc.Latin1.parse(t)})}},a={encrypt:function(e,t){return i.AES.encrypt(e,t,{format:r}).toString()},decrypt:function(e,t){return i.AES.decrypt(e,t,{format:r}).toString(i.enc.Utf8)}};e.exports=a},6128:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(5671),r=n(3144),a=n(7326),o=n(9340),s=n(2963),c=n(1120),l=n(4942),u=n(7294),d=n(1736),p=n(5474);var h=function(e){(0,o.Z)(f,e);var t,n,h=(t=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,s.Z)(this,e)});function f(e){var t;return(0,i.Z)(this,f),t=h.call(this,e),(0,l.Z)((0,a.Z)(t),"removeOpacityTimeout",void 0),(0,l.Z)((0,a.Z)(t),"ref",void 0),(0,l.Z)((0,a.Z)(t),"lastState",""),t.ref=u.createRef(),t}return(0,r.Z)(f,[{key:"render",value:function(){var e=this;window.clearTimeout(this.removeOpacityTimeout);var t=this.props.state,n=this.props.quality,i="fas fa-wifi";"reconnecting"===t||"connecting"===t?i="fas fa-spinner fa-spin":"disconnected"===t&&(i="fas fa-times"),"connected"===t&&"unknown"!==n&&(t=t+" ("+n+")");var r="bm-connection-quality bm-state-"+t+" bm-quality-"+n;return t!==this.lastState&&(r+=" bm-opacity",this.removeOpacityTimeout=window.setTimeout((function(){(0,p.$)(e.ref.current).removeClass("bm-opacity")}),3e3),this.lastState=t),u.createElement("div",{className:"bm-connection-control"},u.createElement(d.ZP,{content:p.x6.strings.cq,theme:"bpbmtheme",appendTo:"parent",arrow:!1},u.createElement("span",{ref:this.ref,className:r},u.createElement("i",{className:i}),u.createElement("span",null,t))))}}]),f}(u.Component)},6308:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>O});var i=n(1037),r=n(5861),a=n(5671),o=n(3144),s=n(7326),c=n(9340),l=n(2963),u=n(1120),d=n(4942),p=n(7757),h=n.n(p),f=n(4379),m=n(3167),g=n(5474),v=n(5591),b=n(5224),y=n(745),_=n(7294),A=n(1736),w=n(2982),k=n(8928);var S=function(e){(0,c.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,l.Z)(this,e)});function r(e){var t;return(0,a.Z)(this,r),t=i.call(this,e),(0,d.Z)((0,s.Z)(t),"videoRef",void 0),(0,d.Z)((0,s.Z)(t),"audioRef",void 0),(0,d.Z)((0,s.Z)(t),"screenRef",void 0),(0,d.Z)((0,s.Z)(t),"gridComponent",void 0),(0,d.Z)((0,s.Z)(t),"chatComponent",void 0),(0,d.Z)((0,s.Z)(t),"playCheckInterval",void 0),(0,d.Z)((0,s.Z)(t),"checkPlay",(function(){})),t.audioRef=_.createRef(),t.screenRef=_.createRef(),t.gridComponent=t.props.parent,t.chatComponent=t.gridComponent.props.parent,t}return(0,o.Z)(r,[{key:"componentDidUpdate",value:function(){if(this.screenRef.current&&this.props.item.screen&&(this.props.item.screen.attachedElements.includes(this.screenRef.current)||this.props.item.screen.attach(this.screenRef.current)),this.audioRef.current&&this.props.item.audio){this.props.item.audio.attachedElements.includes(this.audioRef.current)||this.props.item.audio.attach(this.audioRef.current);try{this.chatComponent.state.speaker?this.audioRef.current.setSinkId(this.chatComponent.state.speaker):this.audioRef.current.setSinkId("default")}catch(e){}}this.playCheckInterval=window.setInterval(this.checkPlay,1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.playCheckInterval)}},{key:"render",value:function(){var e=this,t="bp-messages-group-call-input-audio",n="bp-messages-group-call-input-audio-inner";this.props.item.screen&&(t+=" bp-messages-group-call-input-audio-screen"),"mine"===this.props.unique_key&&(t+=" bp-messages-group-call-input-mine");var i={};if(this.props.item.isSpeaking){var r=100*this.props.item.audioLevel*4;r>100&&(r=100);var a=(0,m.J8)(g.Rl.mainColor,r/100);n+=" bpbm-active-speaker",i.boxShadow="0 1px 5px 1px "+a}return _.createElement("div",{"data-key":this.props.unique_key,className:t,style:{}},_.createElement("div",{className:n,style:i},!!this.props.item.screen&&_.createElement("div",{className:"bp-messages-group-call-input-audio-screen"},_.createElement("div",{className:"bp-messages-group-call-input-audio-screen-wrapper"},_.createElement("video",{ref:this.screenRef,datatype:"screen",autoPlay:!0,playsInline:!0,muted:"mine"===this.props.unique_key}))),_.createElement("div",{className:"bp-messages-group-call-input-audio-inner-info"},_.createElement("span",{className:"bpbm-caller-info"},_.createElement("span",{className:"bpbm-info-avatar"},_.createElement("img",{src:this.props.item.avatar,alt:this.props.item.name})),_.createElement("span",{className:"bpbm-info-name"},_.createElement("span",{className:"bpbm-name"},this.props.item.name)),_.createElement("span",{className:"bpbm-caller-actions"},this.props.adminMode&&"mine"!==this.props.unique_key&&_.createElement("span",{className:"bpbm-admin-controls"},_.createElement(A.ZP,{content:g.x6.strings.kick_user,theme:"bpbmtheme",arrow:!1},_.createElement("span",{onClick:function(){return e.chatComponent.kickUser(e.props.unique_key)}},_.createElement("i",{className:"fas fa-ban"}))),this.props.item.canPublish&&_.createElement(A.ZP,{content:g.x6.strings.bb,theme:"bpbmtheme",arrow:!1},_.createElement("span",{onClick:function(){return e.chatComponent.muteUser(e.props.unique_key)},style:{position:"relative"}},_.createElement("i",{className:"fas fa-satellite-dish fa-stack-1x"}),_.createElement("i",{className:"fas fa-slash fa-stack-1x"}))),!this.props.item.canPublish&&_.createElement(A.ZP,{content:g.x6.strings.ab,theme:"bpbmtheme",arrow:!1},_.createElement("span",{onClick:function(){return e.chatComponent.unmuteUser(e.props.unique_key)}},_.createElement("i",{className:"fa-solid fa-satellite-dish"})))),_.createElement("span",{className:"bpbm-mic-status"},!this.props.item.audio&&_.createElement(A.ZP,{content:g.x6.strings.mic_disabled,theme:"bpbmtheme",arrow:!1},_.createElement("i",{className:"fas fa-microphone-slash"})),this.props.item.audio&&_.createElement(A.ZP,{content:g.x6.strings.mic_enabled,theme:"bpbmtheme",arrow:!1},_.createElement("i",{className:"fas fa-microphone"})))))),_.createElement("div",{className:"bpbm-media-container"+(this.props.item.screen?" bpbm-screen-shared":""),style:{display:"none"}},!!this.props.item.audio&&"mine"!==this.props.unique_key&&_.createElement("audio",{ref:this.audioRef,autoPlay:!0,playsInline:!0,muted:!1,style:{display:"none"}}))))}}]),r}(_.Component);var C=function(e){(0,c.Z)(f,e);var t,n,i,p=(n=f,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(i){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,l.Z)(this,e)});function f(e){var t;return(0,a.Z)(this,f),t=p.call(this,e),(0,d.Z)((0,s.Z)(t),"audioGrid",void 0),(0,d.Z)((0,s.Z)(t),"audioGridEl",void 0),(0,d.Z)((0,s.Z)(t),"lastHeight",0),(0,d.Z)((0,s.Z)(t),"lastWidth",0),(0,d.Z)((0,s.Z)(t),"thread_id",void 0),(0,d.Z)((0,s.Z)(t),"gridItems",new Map),(0,d.Z)((0,s.Z)(t),"room",void 0),(0,d.Z)((0,s.Z)(t),"state",{screenShared:!1}),(0,d.Z)((0,s.Z)(t),"checkSizeChangeInterval",void 0),(0,d.Z)((0,s.Z)(t),"checkSizeChange",(function(){var e=(0,g.$)(t.audioGridEl.current).closest(".bp-messages-call-wrap-group")[0].getBoundingClientRect().width,n=(0,g.$)(t.audioGridEl.current).closest(".bp-messages-call-wrap-group")[0].getBoundingClientRect().height-(0,g.$)(t.audioGridEl.current).parent().find(".bp-messages-group-call-controls-v2")[0].getBoundingClientRect().height;t.lastHeight===n&&t.lastWidth===e||t.updateGrid()})),(0,d.Z)((0,s.Z)(t),"updateGrid",(0,r.Z)(h().mark((function e(){var n,i,r,a,o,s,c,l,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,g.$)(t.audioGridEl.current).closest(".bp-messages-call-wrap-group")[0].getBoundingClientRect().width,i=(0,g.$)(t.audioGridEl.current).closest(".bp-messages-call-wrap-group")[0].getBoundingClientRect().height,r=(0,g.$)(t.audioGridEl.current).parent().find(".bp-messages-group-call-controls-v2")[0].getBoundingClientRect().height,0!==t.props.items.size){e.next=6;break}return e.abrupt("return");case 6:for(l in a=i-r,o=n,t.lastHeight=a,t.lastWidth=o,(0,g.$)(t.audioGridEl).css("height",a),s=new Map,t.props.items.forEach((function(e,n){if(!t.gridItems.has(n)){var i=t.audioGridEl.current.querySelector('[data-key="'+n+'"]'),r=t.audioGrid.add(i,{active:!0,layout:!0});t.gridItems.set(n,r[0])}var a=parseFloat(e.audioLevel);e.audio||(a=0),e.screen&&(a=999),s.set(n,a)})),c=[],s.forEach((function(e,t){c.push([t,e])})),c.sort((function(e,t){return t[1]-e[1]})),c)u=c[l][0],c[l][1]>0&&t.audioGrid.move(t.gridItems.get(u),parseInt(l));t.audioGrid.refreshItems(),t.audioGrid.layout();case 19:case"end":return e.stop()}}),e)})))),t.audioGridEl=_.createRef(),t}return(0,o.Z)(f,[{key:"componentDidMount",value:function(){this.audioGrid=new k.Z(this.audioGridEl.current,{dragEnabled:!1,layout:{fillGaps:!1,horizontal:!1,alignRight:!1,alignBottom:!1,rounding:!1}}),this.room=new v.du({adaptiveStream:!0,dynacast:!0,publishDefaults:{simulcast:!0},videoCaptureDefaults:{resolution:v.OM.h1080.resolution}}),window.addEventListener("resize",this.updateGrid),this.checkSizeChangeInterval=window.setInterval(this.checkSizeChange,1e3)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateGrid),clearInterval(this.checkSizeChangeInterval)}},{key:"getSnapshotBeforeUpdate",value:function(){var e=this;return this.gridItems.forEach((function(t,n){if(!e.props.items.has(n)){var i=e.audioGridEl.current.querySelector('[data-key="'+n+'"]');e.audioGrid.remove(i),e.gridItems.delete(n)}})),null}},{key:"componentDidUpdate",value:(t=(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.updateGrid();case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return _.createElement("div",{ref:this.audioGridEl,className:"bp-messages-group-call-audios-grid"},(0,w.Z)(this.props.items).map((function(t){return _.createElement(S,{parent:e,key:t[0],unique_key:t[0],item:t[1],adminMode:e.props.adminMode,screenShared:e.state.screenShared})})))}}]),f}(_.Component),x=n(6128),E=n(9299);var T=n(2007).Z,P=null,R=null;document.addEventListener("bp-better-messages-reinit-end",(function(){R=document.querySelector(".bp-messages-wrap .bp-messages-group-audio-call-container"),P&&!R&&P.unmount(),R&&!R.classList.contains("rendered")&&(P&&P.unmount(),(P=y.s(R)).render(_.createElement(O,{wrapper:R})),R.classList.add("rendered"))}));var O=function(e){(0,c.Z)(y,e);var t,n,p=(t=y,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,l.Z)(this,e)});function y(e){var t;return(0,a.Z)(this,y),t=p.call(this,e),(0,d.Z)((0,s.Z)(t),"wrap",void 0),(0,d.Z)((0,s.Z)(t),"bmWrap",void 0),(0,d.Z)((0,s.Z)(t),"chatContent",void 0),(0,d.Z)((0,s.Z)(t),"thread_id",void 0),(0,d.Z)((0,s.Z)(t),"callWrap",void 0),(0,d.Z)((0,s.Z)(t),"allCallContainers",void 0),(0,d.Z)((0,s.Z)(t),"audioCallContainer",void 0),(0,d.Z)((0,s.Z)(t),"groupControls",void 0),(0,d.Z)((0,s.Z)(t),"accessToken",void 0),(0,d.Z)((0,s.Z)(t),"fullScreenAvailable",!1),(0,d.Z)((0,s.Z)(t),"isAdmin",!1),(0,d.Z)((0,s.Z)(t),"audioGrid",void 0),(0,d.Z)((0,s.Z)(t),"iconsReverted","1"===g.x6.callsRevertIcons),(0,d.Z)((0,s.Z)(t),"room",void 0),(0,d.Z)((0,s.Z)(t),"state",void 0),(0,d.Z)((0,s.Z)(t),"onMediaUpdate",(function(){t.setState({configAvailable:f.X.configAvailable})})),(0,d.Z)((0,s.Z)(t),"resetRoom",(function(){t.deleteRoomListeners(),t.room=new v.du({adaptiveStream:!0,dynacast:!0,publishDefaults:{simulcast:!0},videoCaptureDefaults:{resolution:v.OM.h1080.resolution}}),t.setupRoomListeners()})),(0,d.Z)((0,s.Z)(t),"roomListenersInstalled",!1),(0,d.Z)((0,s.Z)(t),"setupRoomListeners",(function(){if(!0===t.roomListenersInstalled)return!1;t.room.on(v.TQ.StateChanged,t.updateConnectionState),t.room.on(v.TQ.ConnectionQualityChanged,t.updateConnectionState),t.room.on(v.TQ.ParticipantConnected,t.participantConnected),t.room.on(v.TQ.ParticipantDisconnected,t.participantDisconnected),t.room.on(v.TQ.TrackSubscribed,t.trackSubscribed),t.room.on(v.TQ.TrackUnsubscribed,t.trackUnSubscribed),t.room.on(v.TQ.AudioPlaybackStatusChanged,t.playbackStatusCheck),t.room.on(v.TQ.ActiveSpeakersChanged,t.updateAudioLevels),t.room.on(v.TQ.ParticipantMetadataChanged,t.participantMetadataChanged),t.room.on(v.TQ.ParticipantPermissionsChanged,t.participantPermissionsChanged),t.room.on(v.TQ.Reconnecting,t.reconnecting),t.room.on(v.TQ.Reconnected,t.reconnected),t.room.on(v.TQ.Disconnected,t.disconnected),t.roomListenersInstalled=!0})),(0,d.Z)((0,s.Z)(t),"deleteRoomListeners",(function(){if(!1===t.roomListenersInstalled)return!1;t.room.off(v.TQ.StateChanged,t.updateConnectionState),t.room.off(v.TQ.ConnectionQualityChanged,t.updateConnectionState),t.room.off(v.TQ.ParticipantConnected,t.participantConnected),t.room.off(v.TQ.ParticipantDisconnected,t.participantDisconnected),t.room.off(v.TQ.TrackSubscribed,t.trackSubscribed),t.room.off(v.TQ.TrackUnsubscribed,t.trackUnSubscribed),t.room.off(v.TQ.AudioPlaybackStatusChanged,t.playbackStatusCheck),t.room.off(v.TQ.ActiveSpeakersChanged,t.updateAudioLevels),t.room.off(v.TQ.ParticipantMetadataChanged,t.participantMetadataChanged),t.room.off(v.TQ.ParticipantPermissionsChanged,t.participantPermissionsChanged),t.room.off(v.TQ.Reconnecting,t.reconnecting),t.room.off(v.TQ.Reconnected,t.reconnected),t.room.off(v.TQ.Disconnected,t.disconnected),t.roomListenersInstalled=!1})),(0,d.Z)((0,s.Z)(t),"participantMetadataChanged",(function(){})),(0,d.Z)((0,s.Z)(t),"participantPermissionsChanged",(function(){t.updatePermissions()})),(0,d.Z)((0,s.Z)(t),"reconnecting",(function(){t.updateConnectionState("reconnecting")})),(0,d.Z)((0,s.Z)(t),"disconnected",(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.endCall();case 1:case"end":return e.stop()}}),e)})))),(0,d.Z)((0,s.Z)(t),"reconnected",(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.updateAllParticipants();case 1:case"end":return e.stop()}}),e)})))),(0,d.Z)((0,s.Z)(t),"playbackStatusCheck",(function(){t.room.canPlaybackAudio})),(0,d.Z)((0,s.Z)(t),"updateMineStream",(function(){var e=t.room.localParticipant;t.addItem("mine",{name:g.x6.me.name,avatar:(0,m.Q4)(g.x6.me.avatar),link:g.x6.me.link,audioLevel:e.audioLevel,isSpeaking:e.isSpeaking,video:f.X.localVideoTrack,audio:f.X.localMicrophoneTrack,screen:f.X.screenVideoTrack})})),(0,d.Z)((0,s.Z)(t),"updateParticipant",(function(e){var n=JSON.parse(e.metadata),i={name:n.name,avatar:n.avatar,link:n.link,audioLevel:e.audioLevel,isSpeaking:e.isSpeaking,video:null,audio:null,screen:null,canPublish:e.permissions.canPublish};e.videoTracks.size>0&&e.videoTracks.forEach((function(e){switch(e.source){case"camera":i.video=e.track;break;case"screen_share":i.screen=e.track}})),e.audioTracks.size>0&&e.audioTracks.forEach((function(e){"microphone"===e.trackName&&(i.audio=e.track)})),t.addItem(e.identity,i)})),(0,d.Z)((0,s.Z)(t),"updateAllParticipants",(function(){t.room.participants.forEach((function(e){t.participantConnected(e)})),t.updateMineStream()})),(0,d.Z)((0,s.Z)(t),"participantConnected",(function(e){t.updateParticipant(e)})),(0,d.Z)((0,s.Z)(t),"participantDisconnected",(function(e){t.removeItem(e.identity)})),(0,d.Z)((0,s.Z)(t),"updateAudioLevels",(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.updateAllParticipants();case 1:case"end":return e.stop()}}),e)})))),(0,d.Z)((0,s.Z)(t),"trackSubscribed",(function(e,n,i){t.updateParticipant(i)})),(0,d.Z)((0,s.Z)(t),"trackUnSubscribed",(function(e,n,i){t.updateParticipant(i)})),(0,d.Z)((0,s.Z)(t),"startCall",function(){var e=(0,r.Z)(h().mark((function e(n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),n.stopImmediatePropagation(),!(0,g.$)(t.bmWrap).hasClass("bpbm-call-view")){e.next=4;break}return e.abrupt("return",!1);case 4:return(0,m.q0)(),(0,m.Vc)(t.thread_id),(0,g.$)(t.allCallContainers).hide(),(0,g.$)(t.audioCallContainer).show(),(0,g.$)(t.bmWrap).addClass("bpbm-call-view"),(0,g.$)(t.chatContent).addClass("bpbm-call-view"),g.tq&&(0,g.$)(t.chatContent).addClass("bpbm-hide-chat"),t.updateMineStream(),t.updateConnectionState("connecting"),e.next=15,t.getAccessToken();case 15:return t.accessToken=e.sent,e.next=18,t.connect();case 18:t.updatePermissions(),t.playbackStatusCheck(),t.updateAllParticipants();case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,d.Z)((0,s.Z)(t),"endCallInProgress",!1),(0,d.Z)((0,s.Z)(t),"endCall",(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.endCallInProgress){e.next=2;break}return e.abrupt("return");case 2:return t.endCallInProgress=!0,(0,g.$)(t.bmWrap).removeClass("bpbm-call-view"),(0,g.$)(t.chatContent).removeClass("bpbm-call-view"),(0,m.IK)(),(0,m.Ve)(),E.Wb.emit("groupMediaEvent",{event:"user_disconnected",thread_id:t.thread_id}),e.next=10,t.disableMic();case 10:return e.next=12,t.disableShareScreen();case 12:if("disconnected"===t.room.state){e.next=15;break}return e.next=15,t.room.disconnect();case 15:t.resetRoom(),t.endCallInProgress=!1;case 17:case"end":return e.stop()}}),e)})))),(0,d.Z)((0,s.Z)(t),"kickUser",function(){var e=(0,r.Z)(h().mark((function e(n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.$.post(g.x6.ajaxUrl,{action:"bp_better_messages_thread_group_call_admin",token:t.accessToken,thread_id:t.thread_id,act:"remove_participant",identity:n,type:"audio",nonce:g.x6.userNonce},(function(e){return e})).fail((function(e){throw e}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,d.Z)((0,s.Z)(t),"muteUser",function(){var e=(0,r.Z)(h().mark((function e(n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.$.post(g.x6.ajaxUrl,{action:"bp_better_messages_thread_group_call_admin",token:t.accessToken,thread_id:t.thread_id,act:"mute_participant",identity:n,type:"audio",nonce:g.x6.userNonce},(function(e){return t.updateAllParticipants(),e})).fail((function(e){throw e}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,d.Z)((0,s.Z)(t),"unmuteUser",function(){var e=(0,r.Z)(h().mark((function e(n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.$.post(g.x6.ajaxUrl,{action:"bp_better_messages_thread_group_call_admin",token:t.accessToken,thread_id:t.thread_id,act:"unmute_participant",identity:n,type:"audio",nonce:g.x6.userNonce},(function(e){return t.updateAllParticipants(),e})).fail((function(e){throw e}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,d.Z)((0,s.Z)(t),"updatePermissions",(0,r.Z)(h().mark((function e(){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={canShareAudio:!0,canShareScreen:!0},(i=t.room.localParticipant.permissions)&&(n.canShareAudio=i.canPublish,n.canShareScreen=i.canPublish),n.canShareAudio||t.disableMic(),n.canShareScreen||t.disableShareScreen(),t.setState(n);case 6:case"end":return e.stop()}}),e)})))),(0,d.Z)((0,s.Z)(t),"getAccessToken",(function(){var e=(0,s.Z)(t);return new Promise(function(){var t=(0,r.Z)(h().mark((function t(n,i){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g.$.post(g.x6.ajaxUrl,{action:"bp_better_messages_get_thread_group_call_access_key",thread_id:e.thread_id,type:"audio",nonce:g.x6.userNonce},(function(e){n(e)})).fail((function(){i(!1)}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())})),(0,d.Z)((0,s.Z)(t),"connect",(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.room.connect("wss://video-cloud.bpbettermessages.com",t.accessToken,{autoSubscribe:!0});case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))),(0,d.Z)((0,s.Z)(t),"addItem",(function(e,n){var r=t.state.items;if(r.has(e)){for(var a=r.get(e),o=0,s=Object.entries(n);o<s.length;o++){var c=(0,i.Z)(s[o],2),l=c[0],u=c[1];a[l]=u}r.set(e,a)}else r.set(e,n);t.setState({items:r})})),(0,d.Z)((0,s.Z)(t),"removeItem",(function(e){var n=t.state.items;n.has(e)&&n.delete(e),t.setState({items:n})})),(0,d.Z)((0,s.Z)(t),"updateConnectionState",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=t.room.state;"connecting"===e&&(n=e),t.setState({state:n})})),(0,d.Z)((0,s.Z)(t),"enableShareScreen",(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.X.getScreenTrack();case 3:return t.setState({screenShared:!0}),e.next=6,t.room.localParticipant.publishTrack(f.X.screenVideoTrack,{name:"screen",simulcast:!0});case 6:t.updateMineStream(),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),(0,b.x)(e.t0),t.setState({screenShared:!1});case 14:case"end":return e.stop()}}),e,null,[[0,9]])})))),(0,d.Z)((0,s.Z)(t),"disableShareScreen",(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!f.X.screenVideoTrack){e.next=6;break}return e.next=4,t.room.localParticipant.unpublishTrack(f.X.screenVideoTrack);case 4:f.X.screenVideoTrack.stop(),f.X.screenVideoTrack=null;case 6:t.setState({screenShared:!1}),t.updateMineStream(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),(0,b.x)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))),(0,d.Z)((0,s.Z)(t),"enablingMic",!1),(0,d.Z)((0,s.Z)(t),"enableMic",(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.enablingMic){e.next=3;break}return e.abrupt("return");case 3:return t.enablingMic=!0,e.next=6,f.X.getLocalMicrophoneTrack();case 6:return e.next=8,t.room.localParticipant.publishTrack(f.X.localMicrophoneTrack,{name:"microphone"});case 8:t.setState({micEnabled:!0}),t.updateMineStream(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),(0,b.x)(e.t0),t.setState({micEnabled:!1});case 16:return e.prev=16,t.enablingMic=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,12,16,19]])})))),(0,d.Z)((0,s.Z)(t),"disableMic",(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.X.localMicrophoneTrack){e.next=5;break}return e.next=3,t.room.localParticipant.unpublishTrack(f.X.localMicrophoneTrack);case 3:return e.next=5,f.X.stopLocalMicrophoneTrack();case 5:t.setState({micEnabled:!1}),t.updateMineStream();case 7:case"end":return e.stop()}}),e)})))),(0,d.Z)((0,s.Z)(t),"toggleConfig",(function(){t.setState({configOpen:!t.state.configOpen})})),(0,d.Z)((0,s.Z)(t),"onFullScreenChange",(function(e){t.fullScreenAvailable&&(null!==T.fullscreenElement?(t.setState({fullScreenEnabled:!0}),(0,g.$)(t.chatContent).find(".bpbm-switch-chat").hide()):(t.setState({fullScreenEnabled:!1}),(0,g.$)(t.chatContent).find(".bpbm-switch-chat").show()))})),(0,d.Z)((0,s.Z)(t),"enableFullScreen",(function(){if(t.fullScreenAvailable)try{T.requestFullscreen(t.callWrap[0])}catch(e){(0,b.x)(e)}})),(0,d.Z)((0,s.Z)(t),"disableFullScreen",(function(){if(t.fullScreenAvailable)try{null!==T.fullscreenElement&&T.exitFullscreen()}catch(e){(0,b.x)(e)}})),(0,d.Z)((0,s.Z)(t),"speakerChanged",function(){var e=(0,r.Z)(h().mark((function e(n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i=(0,g.$)(n.currentTarget),f.X.selectedSpeakerDevice=String(i.val()),t.setState({speaker:f.X.selectedSpeakerDevice})}catch(e){(0,b.x)(e)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,d.Z)((0,s.Z)(t),"micChanged",function(){var e=(0,r.Z)(h().mark((function e(n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=(0,g.$)(n.currentTarget),f.X.selectedMicrophoneDevice=String(i.val()),!f.X.localMicrophoneTrack&&"incoming_call"!==t.state.action){e.next=8;break}return f.X.localMicrophoneTrack&&f.X.stopLocalMicrophoneTrack(),e.next=7,f.X.getLocalMicrophoneTrack();case 7:t.setState({micEnabled:!0});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,b.x)(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()),(0,d.Z)((0,s.Z)(t),"onToggleChatView",(function(e){e.stopImmediatePropagation(),(0,g.$)(t.chatContent).toggleClass("bpbm-hide-chat"),t.audioGrid.current.updateGrid()})),t.wrap=(0,g.$)(e.wrapper),t.bmWrap=(0,g.$)(t.wrap).closest(".bp-messages-wrap"),t.chatContent=(0,g.$)(t.bmWrap).find(".bpbm-chat-content"),t.callWrap=(0,g.$)(t.chatContent).find(".bp-messages-call-wrap"),t.allCallContainers=(0,g.$)(t.callWrap).find(".bp-messages-call-container"),t.audioCallContainer=(0,g.$)(t.callWrap).find(".bp-messages-group-audio-call-container"),t.groupControls=(0,g.$)(t.chatContent).find(".bp-messages-group-call-controls"),t.thread_id=parseInt(t.bmWrap.attr("data-thread-id")),isNaN(t.thread_id)&&(t.thread_id=parseInt(t.bmWrap.attr("data-thread"))),t.fullScreenAvailable=T.fullscreenEnabled,t.isAdmin=!!t.bmWrap[0].querySelector(".list.can-moderate"),t.audioGrid=_.createRef(),t.resetRoom(),t.state={items:new Map,speaker:f.X.selectedSpeakerDevice,micEnabled:!1,screenShared:!1,configOpen:!1,canAdmin:t.isAdmin,canShareAudio:!1,canShareScreen:!1,configAvailable:f.X.configAvailable,state:""},t}return(0,o.Z)(y,[{key:"componentDidMount",value:function(){this.deAttachListeners(),this.attachListeners()}},{key:"componentWillUnmount",value:function(){this.deAttachListeners()}},{key:"attachListeners",value:function(){(0,g.$)(this.bmWrap).on("click",".chat-header .group-audio-call",this.startCall),(0,g.$)(this.chatContent).on("click",".bpbm-group-call-type-audio .bpbm-group-call-in-progress-join button",this.startCall),(0,g.$)(this.callWrap).on("click",".bpbm-switch-chat",this.onToggleChatView),(0,g.$)(this.callWrap).on("touchend",".bpbm-switch-chat",this.onToggleChatView),document.addEventListener("bp-better-messages-media-updated",this.onMediaUpdate),document.addEventListener("bpbm-end-call",this.endCall),T.addEventListener("fullscreenchange",this.onFullScreenChange),this.audioCallContainer.on("change",".bpbm-call-settings .bpbm-switch-mic-select",this.micChanged),this.audioCallContainer.on("change",".bpbm-call-settings .bpbm-switch-audio-select",this.speakerChanged)}},{key:"deAttachListeners",value:function(){(0,g.$)(this.bmWrap).off("click",".chat-header .group-audio-call",this.startCall),(0,g.$)(this.chatContent).off("click",".bpbm-group-call-type-audio .bpbm-group-call-in-progress-join button",this.startCall),(0,g.$)(this.callWrap).off("click",".bpbm-switch-chat",this.onToggleChatView),(0,g.$)(this.callWrap).off("touchend",".bpbm-switch-chat",this.onToggleChatView),document.removeEventListener("bp-better-messages-media-updated",this.onMediaUpdate),document.removeEventListener("bpbm-end-call",this.endCall),T.removeEventListener("fullscreenchange",this.onFullScreenChange),this.audioCallContainer.off("change",".bpbm-call-settings .bpbm-switch-mic-select",this.micChanged),this.audioCallContainer.off("change",".bpbm-call-settings .bpbm-switch-audio-select",this.speakerChanged)}},{key:"render",value:function(){return _.createElement(_.Fragment,null,_.createElement(C,{ref:this.audioGrid,items:this.state.items,adminMode:this.state.canAdmin,parent:this}),!0===this.state.configOpen&&_.createElement("div",{className:"bpbm-call-settings"},f.X.renderMicSwitch(),f.X.renderSpeakerSwitch()),_.createElement("div",{className:"bp-messages-group-call-controls-v2"},_.createElement(x.Z,{state:this.state.state,quality:this.room.localParticipant.connectionQuality}),_.createElement("div",{className:"bp-messages-group-call-controls-buttons"},"connected"===this.room.state&&_.createElement(_.Fragment,null,this.state.configAvailable&&_.createElement(A.ZP,{content:g.x6.strings.config,theme:"bpbmtheme",appendTo:"parent",arrow:!1},_.createElement("span",{onClick:this.toggleConfig,className:"bpbm-configure-call"},_.createElement("i",{className:"fas fa-cog"}))),this.fullScreenAvailable&&_.createElement(_.Fragment,null,!this.state.fullScreenEnabled&&_.createElement(A.ZP,{content:g.x6.strings.fs_e,theme:"bpbmtheme",appendTo:"parent",arrow:!1},_.createElement("span",{onClick:this.enableFullScreen,className:"bpbm-fs-enable"},_.createElement("i",{className:"fas fa-expand"}))),this.state.fullScreenEnabled&&_.createElement(A.ZP,{content:g.x6.strings.fs_d,theme:"bpbmtheme",appendTo:"parent",arrow:!1},_.createElement("span",{onClick:this.disableFullScreen,className:"bpbm-fs-disable"},_.createElement("i",{className:"fas fa-expand fa-stack-1x"}),_.createElement("i",{className:"fas fa-slash fa-stack-1x"})))),this.state.canShareScreen&&f.X.screenShareSupport&&_.createElement(_.Fragment,null,!this.state.screenShared&&_.createElement(A.ZP,{content:g.x6.strings.ss_e,theme:"bpbmtheme",appendTo:"parent",arrow:!1},_.createElement("span",{onClick:this.enableShareScreen,className:"bpbm-switch-share-screen"},_.createElement("i",{className:"fas fa-desktop"}))),this.state.screenShared&&_.createElement(A.ZP,{content:g.x6.strings.ss_d,theme:"bpbmtheme",appendTo:"parent",arrow:!1},_.createElement("span",{onClick:this.disableShareScreen,className:"bpbm-switch-share-screen"},_.createElement("i",{className:"fas fa-desktop fa-stack-1x"}),_.createElement("i",{className:"fas fa-slash fa-stack-1x"})))),this.state.canShareAudio&&_.createElement(_.Fragment,null,this.state.micEnabled&&_.createElement(A.ZP,{content:g.x6.strings.mic_d,theme:"bpbmtheme",appendTo:"parent",arrow:!1},_.createElement("span",{onClick:this.disableMic,className:"bpbm-disable-mic"},!this.iconsReverted&&_.createElement("i",{className:"fas fa-microphone-slash"}),this.iconsReverted&&_.createElement("i",{className:"fas fa-microphone"}))),!this.state.micEnabled&&_.createElement(A.ZP,{content:g.x6.strings.mic_e,theme:"bpbmtheme",appendTo:"parent",arrow:!1},_.createElement("span",{onClick:this.enableMic,className:"bpbm-enable-mic"},!this.iconsReverted&&_.createElement("i",{className:"fas fa-microphone"}),this.iconsReverted&&_.createElement("i",{className:"fas fa-microphone-slash"}))))),_.createElement(A.ZP,{content:g.x6.strings.rex,theme:"bpbmtheme",appendTo:"parent",arrow:!1},_.createElement("span",{onClick:this.endCall,className:"bpbm-exit-room"},_.createElement("i",{className:"fas fa-sign-out-alt"}))))))}}]),y}(_.Component)},9829:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>M});var i=n(1037),r=n(5861),a=n(5671),o=n(3144),s=n(7326),c=n(9340),l=n(2963),u=n(1120),d=n(4942),p=n(7757),h=n.n(p),f=n(4379),m=n(3167),g=n(5474),v=n(5591),b=n(5224),y=n(745),_=n(7294),A=n(1736),w=n(2982),k=n(8928),S=n(1193),C=n.n(S);var x=function(e){(0,c.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,l.Z)(this,e)});function r(e){var t;return(0,a.Z)(this,r),t=i.call(this,e),(0,d.Z)((0,s.Z)(t),"videoRef",void 0),(0,d.Z)((0,s.Z)(t),"audioRef",void 0),(0,d.Z)((0,s.Z)(t),"screenRef",void 0),(0,d.Z)((0,s.Z)(t),"gridComponent",void 0),(0,d.Z)((0,s.Z)(t),"chatComponent",void 0),(0,d.Z)((0,s.Z)(t),"playCheckInterval",void 0),(0,d.Z)((0,s.Z)(t),"checkPlay",(function(){t.videoRef.current,t.screenRef.current,t.audioRef.current})),t.videoRef=_.createRef(),t.audioRef=_.createRef(),t.screenRef=_.createRef(),t.gridComponent=t.props.parent,t.chatComponent=t.gridComponent.props.parent,t}return(0,o.Z)(r,[{key:"componentDidUpdate",value:function(){if(this.videoRef.current&&this.props.item.video&&(this.props.item.video.attachedElements.includes(this.videoRef.current)||this.props.item.video.attach(this.videoRef.current)),this.screenRef.current&&this.props.item.screen&&(this.props.item.screen.attachedElements.includes(this.screenRef.current)||this.props.item.screen.attach(this.screenRef.current)),this.audioRef.current&&this.props.item.audio){this.props.item.audio.attachedElements.includes(this.audioRef.current)||this.props.item.audio.attach(this.audioRef.current);try{this.chatComponent.state.speaker?this.audioRef.current.setSinkId(this.chatComponent.state.speaker):this.audioRef.current.setSinkId("default")}catch(e){}}this.playCheckInterval=window.setInterval(this.checkPlay,1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.playCheckInterval)}},{key:"render",value:function(){var e=this,t="bp-messages-group-call-input-video",n="bp-messages-group-call-input-video-inner";this.props.item.screen&&(t+=" bp-messages-group-call-input-video-screen"),"mine"===this.props.unique_key&&(t+=" bp-messages-group-call-input-mine");var i={},r={backgroundImage:"url('"+this.props.item.avatar+"')"};if((this.props.item.video||this.props.item.screen)&&delete r.backgroundImage,this.props.item.isSpeaking){var a=100*this.props.item.audioLevel*4;a>100&&(a=100);var o=(0,m.J8)(g.Rl.mainColor,a/100);n+=" bpbm-active-speaker",r.boxShadow="0 1px 5px 1px "+o}var s=!(!this.props.screenShared||this.props.screenShared&&null!==this.props.item.screen);return s&&(r.backgroundSize="contain",i.justifyContent="center",n+=" bp-messages-group-call-video-secondary"),_.createElement("div",{"data-key":this.props.unique_key,className:t,style:{}},_.createElement(A.ZP,{content:this.props.item.name,disabled:!s,theme:"bpbmtheme",arrow:!1},_.createElement("div",{className:n,style:r},(!0===this.props.adminMode&&"mine"!==this.props.unique_key||!1===s||!this.props.item.audio||!this.props.item.video)&&_.createElement("div",{className:"bpbm-group-call-input-video-inner-info"},_.createElement("span",{className:"bpbm-caller-info",style:i},_.createElement("span",{className:"bpbm-info-name"},_.createElement("span",{className:"bpbm-name"},this.props.item.name),this.props.adminMode&&"mine"!==this.props.unique_key&&_.createElement("span",{className:"bpbm-admin-controls"},_.createElement(A.ZP,{content:g.x6.strings.kick_user,theme:"bpbmtheme",arrow:!1},_.createElement("span",{onClick:function(){return e.chatComponent.kickUser(e.props.unique_key)}},_.createElement("i",{className:"fas fa-ban"}))),this.props.item.canPublish&&_.createElement(A.ZP,{content:g.x6.strings.bb,theme:"bpbmtheme",arrow:!1},_.createElement("span",{onClick:function(){return e.chatComponent.muteUser(e.props.unique_key)},style:{position:"relative"}},_.createElement("i",{className:"fas fa-satellite-dish fa-stack-1x"}),_.createElement("i",{className:"fas fa-slash fa-stack-1x"}))),!this.props.item.canPublish&&_.createElement(A.ZP,{content:g.x6.strings.ab,theme:"bpbmtheme",arrow:!1},_.createElement("span",{onClick:function(){return e.chatComponent.unmuteUser(e.props.unique_key)}},_.createElement("i",{className:"fa-solid fa-satellite-dish"}))))),_.createElement("span",{className:"bpbm-caller-status"},!this.props.item.audio&&_.createElement(A.ZP,{content:g.x6.strings.mic_disabled,theme:"bpbmtheme",arrow:!1},_.createElement("span",{className:"bpbm-mic-disabled"},_.createElement("i",{className:"fas fa-microphone-slash"}))),!this.props.item.video&&_.createElement(A.ZP,{content:g.x6.strings.cam_disabled,theme:"bpbmtheme",arrow:!1},_.createElement("span",{className:"bpbm-camera-disabled"},_.createElement("i",{className:"fas fa-video-slash"})))))),_.createElement("div",{className:"bpbm-media-container"+(this.props.item.screen?" bpbm-screen-shared":"")},!!this.props.item.screen&&_.createElement("video",{ref:this.screenRef,datatype:"screen",autoPlay:!0,playsInline:!0,muted:"mine"===this.props.unique_key}),!!this.props.item.video&&!!this.props.item.screen&&_.createElement(C(),{handle:"video"},_.createElement("video",{ref:this.videoRef,datatype:"camera",autoPlay:!0,playsInline:!0,muted:"mine"===this.props.unique_key})),!!this.props.item.video&&!this.props.item.screen&&_.createElement("video",{ref:this.videoRef,datatype:"camera",autoPlay:!0,playsInline:!0}),!!this.props.item.audio&&"mine"!==this.props.unique_key&&_.createElement("audio",{ref:this.audioRef,autoPlay:!0,playsInline:!0,muted:!1,style:{display:"none"}})))))}}]),r}(_.Component);var E=function(e){(0,c.Z)(f,e);var t,n,i,p=(n=f,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(i){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,l.Z)(this,e)});function f(e){var t;return(0,a.Z)(this,f),t=p.call(this,e),(0,d.Z)((0,s.Z)(t),"videoGrid",void 0),(0,d.Z)((0,s.Z)(t),"videoGridEl",void 0),(0,d.Z)((0,s.Z)(t),"lastHeight",0),(0,d.Z)((0,s.Z)(t),"lastWidth",0),(0,d.Z)((0,s.Z)(t),"thread_id",void 0),(0,d.Z)((0,s.Z)(t),"gridItems",new Map),(0,d.Z)((0,s.Z)(t),"room",void 0),(0,d.Z)((0,s.Z)(t),"state",{screenShared:!1}),(0,d.Z)((0,s.Z)(t),"checkSizeChangeInterval",void 0),(0,d.Z)((0,s.Z)(t),"checkSizeChange",(function(){var e=(0,g.$)(t.videoGridEl.current).closest(".bp-messages-call-wrap-group")[0].getBoundingClientRect().width,n=(0,g.$)(t.videoGridEl.current).closest(".bp-messages-call-wrap-group")[0].getBoundingClientRect().height-(0,g.$)(t.videoGridEl.current).parent().find(".bp-messages-group-call-controls-v2")[0].getBoundingClientRect().height;t.lastHeight===n&&t.lastWidth===e||t.updateGrid()})),(0,d.Z)((0,s.Z)(t),"findBestFit",(function(e,t,n){if(e<0||t<0)throw new Error("Container must have a non-negative area");if(n<1||!Number.isInteger(n))throw new Error("Number of shapes to place must be a positive integer");var i=400,r=0;return e<400||g.tq?1===n?(i=e,r=t):2===n?(i=e,r=t/2):n<=3?(i=e,r=t/n):n<=4?(i=e/2,r=t/2):n<=6?(i=e/2,r=t/3):n<=9?(i=e/3,r=t/3):n>9&&(i=e/4,r=t/4):1===n?(i=e,r=t):2===n?(i=e,r=t/2):n<=4?(i=e/2,r=t/2):n<=6?(i=e/3,r=t/2):n<=9?(i=e/3,r=t/3):n>9&&(i=e/4,r=t/4),0===r&&(r=.65*i),{width:i,height:r}})),(0,d.Z)((0,s.Z)(t),"updateGrid",(function(){var e=(0,g.$)(t.videoGridEl.current).closest(".bp-messages-call-wrap-group")[0].getBoundingClientRect().width,n=(0,g.$)(t.videoGridEl.current).closest(".bp-messages-call-wrap-group")[0].getBoundingClientRect().height,i=(0,g.$)(t.videoGridEl.current).parent().find(".bp-messages-group-call-controls-v2")[0].getBoundingClientRect().height,r=t.props.items.size;if(0!==r){var a=n-i,o=e;t.lastHeight=a,t.lastWidth=o,t.props.items.forEach((function(e,n){if(!t.gridItems.has(n)){var i=t.videoGridEl.current.querySelector('[data-key="'+n+'"]'),r=t.videoGrid.add(i,{active:!0,layout:!0});t.gridItems.set(n,r[0])}})),t.videoGrid.move(t.gridItems.get("mine"),-1);var s=[];if(t.gridItems.forEach((function(e,n){var i=(0,g.$)(e._element);i.hasClass("bp-messages-group-call-input-video-screen")&&(t.videoGrid.move(e,0),s.push(i))})),s.length>0){var c=a;!g.tq&&t.gridItems.size>s.length&&(c-=100),s.map((function(t){g.tq?t.css({height:c/s.length,width:e,maxWidth:""}).show():t.css({height:c,width:e/s.length,maxWidth:""}).show()})),g.tq?(0,g.$)(t.videoGridEl.current).find("> .bp-messages-group-call-input-video:not(.bp-messages-group-call-input-video-screen)").hide():(0,g.$)(t.videoGridEl.current).find("> .bp-messages-group-call-input-video:not(.bp-messages-group-call-input-video-screen)").css({height:100,width:100,maxWidth:e/(r-s.length)}).show(),t.state.screenShared||t.setState({screenShared:!0})}else{var l=t.findBestFit(o,a,r),u=l.width,d=l.height;(0,g.$)(t.videoGridEl.current).find("> .bp-messages-group-call-input-video").css({height:d,width:u,maxWidth:""}).show(),t.state.screenShared&&t.setState({screenShared:!1})}t.videoGrid.refreshItems(),t.videoGrid.layout()}})),t.videoGridEl=_.createRef(),t}return(0,o.Z)(f,[{key:"componentDidMount",value:function(){this.videoGrid=new k.Z(this.videoGridEl.current,{dragEnabled:!1,layout:{fillGaps:!1,horizontal:!1,alignRight:!1,alignBottom:!1,rounding:!1}}),this.room=new v.du({adaptiveStream:!0,dynacast:!0,publishDefaults:{simulcast:!0},videoCaptureDefaults:{resolution:v.OM.h1080.resolution}}),window.addEventListener("resize",this.updateGrid),this.checkSizeChangeInterval=window.setInterval(this.checkSizeChange,1e3)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateGrid),clearInterval(this.checkSizeChangeInterval)}},{key:"getSnapshotBeforeUpdate",value:function(){var e=this;return this.gridItems.forEach((function(t,n){if(!e.props.items.has(n)){var i=e.videoGridEl.current.querySelector('[data-key="'+n+'"]');e.videoGrid.remove(i),e.gridItems.delete(n)}})),null}},{key:"componentDidUpdate",value:(t=(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.updateGrid();case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return _.createElement("div",{ref:this.videoGridEl,className:"bp-messages-group-call-videos-grid"},(0,w.Z)(this.props.items).map((function(t){return _.createElement(x,{parent:e,key:t[0],unique_key:t[0],item:t[1],adminMode:e.props.adminMode,screenShared:e.state.screenShared})})))}}]),f}(_.Component),T=n(6128),P=n(9299);var R=n(2007).Z,O=null,D=null;document.addEventListener("bp-better-messages-reinit-end",(function(){D=document.querySelector(".bp-messages-wrap .bp-messages-group-call-container"),O&&!D&&O.unmount(),D&&!D.classList.contains("rendered")&&(O&&O.unmount(),(O=y.s(D)).render(_.createElement(M,{wrapper:D})),D.classList.add("rendered"))}));var M=function(e){(0,c.Z)(y,e);var t,n,p=(t=y,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,l.Z)(this,e)});function y(e){var t;return(0,a.Z)(this,y),t=p.call(this,e),(0,d.Z)((0,s.Z)(t),"wrap",void 0),(0,d.Z)((0,s.Z)(t),"bmWrap",void 0),(0,d.Z)((0,s.Z)(t),"chatContent",void 0),(0,d.Z)((0,s.Z)(t),"thread_id",void 0),(0,d.Z)((0,s.Z)(t),"callWrap",void 0),(0,d.Z)((0,s.Z)(t),"allCallContainers",void 0),(0,d.Z)((0,s.Z)(t),"videoCallContainer",void 0),(0,d.Z)((0,s.Z)(t),"groupControls",void 0),(0,d.Z)((0,s.Z)(t),"accessToken",void 0),(0,d.Z)((0,s.Z)(t),"fullScreenAvailable",!1),(0,d.Z)((0,s.Z)(t),"isAdmin",!1),(0,d.Z)((0,s.Z)(t),"videoGrid",void 0),(0,d.Z)((0,s.Z)(t),"iconsReverted","1"===g.x6.callsRevertIcons),(0,d.Z)((0,s.Z)(t),"room",void 0),(0,d.Z)((0,s.Z)(t),"state",void 0),(0,d.Z)((0,s.Z)(t),"onMediaUpdate",(function(){t.setState({configAvailable:f.X.configAvailable})})),(0,d.Z)((0,s.Z)(t),"resetRoom",(function(){t.deleteRoomListeners(),t.room=new v.du({adaptiveStream:!0,dynacast:!0,publishDefaults:{simulcast:!0},videoCaptureDefaults:{resolution:v.OM.h1080.resolution}}),t.setupRoomListeners()})),(0,d.Z)((0,s.Z)(t),"roomListenersInstalled",!1),(0,d.Z)((0,s.Z)(t),"setupRoomListeners",(function(){if(!0===t.roomListenersInstalled)return!1;t.room.on(v.TQ.StateChanged,t.updateConnectionState),t.room.on(v.TQ.ConnectionQualityChanged,t.updateConnectionState),t.room.on(v.TQ.ParticipantConnected,t.participantConnected),t.room.on(v.TQ.ParticipantDisconnected,t.participantDisconnected),t.room.on(v.TQ.TrackSubscribed,t.trackSubscribed),t.room.on(v.TQ.TrackUnsubscribed,t.trackUnSubscribed),t.room.on(v.TQ.AudioPlaybackStatusChanged,t.playbackStatusCheck),t.room.on(v.TQ.ActiveSpeakersChanged,t.updateAudioLevels),t.room.on(v.TQ.ParticipantMetadataChanged,t.participantMetadataChanged),t.room.on(v.TQ.ParticipantPermissionsChanged,t.participantPermissionsChanged),t.room.on(v.TQ.Reconnecting,t.reconnecting),t.room.on(v.TQ.Reconnected,t.reconnected),t.room.on(v.TQ.Disconnected,t.disconnected),t.roomListenersInstalled=!0})),(0,d.Z)((0,s.Z)(t),"deleteRoomListeners",(function(){if(!1===t.roomListenersInstalled)return!1;t.room.off(v.TQ.StateChanged,t.updateConnectionState),t.room.off(v.TQ.ConnectionQualityChanged,t.updateConnectionState),t.room.off(v.TQ.ParticipantConnected,t.participantConnected),t.room.off(v.TQ.ParticipantDisconnected,t.participantDisconnected),t.room.off(v.TQ.TrackSubscribed,t.trackSubscribed),t.room.off(v.TQ.TrackUnsubscribed,t.trackUnSubscribed),t.room.off(v.TQ.AudioPlaybackStatusChanged,t.playbackStatusCheck),t.room.off(v.TQ.ActiveSpeakersChanged,t.updateAudioLevels),t.room.off(v.TQ.ParticipantMetadataChanged,t.participantMetadataChanged),t.room.off(v.TQ.ParticipantPermissionsChanged,t.participantPermissionsChanged),t.room.off(v.TQ.Reconnecting,t.reconnecting),t.room.off(v.TQ.Reconnected,t.reconnected),t.room.off(v.TQ.Disconnected,t.disconnected),t.roomListenersInstalled=!1})),(0,d.Z)((0,s.Z)(t),"participantMetadataChanged",(function(){})),(0,d.Z)((0,s.Z)(t),"participantPermissionsChanged",(function(){t.updatePermissions()})),(0,d.Z)((0,s.Z)(t),"reconnecting",(function(){t.updateConnectionState("reconnecting")})),(0,d.Z)((0,s.Z)(t),"disconnected",(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.endCall();case 1:case"end":return e.stop()}}),e)})))),(0,d.Z)((0,s.Z)(t),"reconnected",(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.updateAllParticipants();case 1:case"end":return e.stop()}}),e)})))),(0,d.Z)((0,s.Z)(t),"playbackStatusCheck",(function(){t.room.canPlaybackAudio})),(0,d.Z)((0,s.Z)(t),"updateMineStream",(function(){var e=t.room.localParticipant;t.addItem("mine",{name:g.x6.me.name,avatar:(0,m.Q4)(g.x6.me.avatar),link:g.x6.me.link,audioLevel:e.audioLevel,isSpeaking:e.isSpeaking,video:f.X.localVideoTrack,audio:f.X.localMicrophoneTrack,screen:f.X.screenVideoTrack})})),(0,d.Z)((0,s.Z)(t),"updateParticipant",(function(e){var n=JSON.parse(e.metadata),i={name:n.name,avatar:n.avatar,link:n.link,audioLevel:e.audioLevel,isSpeaking:e.isSpeaking,video:null,audio:null,screen:null,canPublish:e.permissions.canPublish};e.videoTracks.size>0&&e.videoTracks.forEach((function(e){switch(e.source){case"camera":i.video=e.track;break;case"screen_share":i.screen=e.track}})),e.audioTracks.size>0&&e.audioTracks.forEach((function(e){"microphone"===e.trackName&&(i.audio=e.track)})),t.addItem(e.identity,i)})),(0,d.Z)((0,s.Z)(t),"updateAllParticipants",(function(){t.room.participants.forEach((function(e){t.participantConnected(e)})),t.updateMineStream()})),(0,d.Z)((0,s.Z)(t),"participantConnected",(function(e){t.updateParticipant(e)})),(0,d.Z)((0,s.Z)(t),"participantDisconnected",(function(e){t.removeItem(e.identity)})),(0,d.Z)((0,s.Z)(t),"updateAudioLevels",(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.updateAllParticipants();case 1:case"end":return e.stop()}}),e)})))),(0,d.Z)((0,s.Z)(t),"trackSubscribed",(function(e,n,i){t.updateParticipant(i)})),(0,d.Z)((0,s.Z)(t),"trackUnSubscribed",(function(e,n,i){t.updateParticipant(i)})),(0,d.Z)((0,s.Z)(t),"startCall",function(){var e=(0,r.Z)(h().mark((function e(n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),n.stopImmediatePropagation(),!(0,g.$)(t.bmWrap).hasClass("bpbm-call-view")){e.next=4;break}return e.abrupt("return",!1);case 4:return(0,m.q0)(),(0,m.Vc)(t.thread_id),(0,g.$)(t.allCallContainers).hide(),(0,g.$)(t.videoCallContainer).show(),(0,g.$)(t.bmWrap).addClass("bpbm-call-view"),(0,g.$)(t.chatContent).addClass("bpbm-call-view"),g.tq&&(0,g.$)(t.chatContent).addClass("bpbm-hide-chat"),t.updateMineStream(),t.updateConnectionState("connecting"),e.next=15,t.getAccessToken();case 15:return t.accessToken=e.sent,e.next=18,t.connect();case 18:t.updatePermissions(),t.playbackStatusCheck(),t.updateAllParticipants();case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,d.Z)((0,s.Z)(t),"endCallInProgress",!1),(0,d.Z)((0,s.Z)(t),"endCall",(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.endCallInProgress){e.next=2;break}return e.abrupt("return");case 2:return t.endCallInProgress=!0,(0,g.$)(t.bmWrap).removeClass("bpbm-call-view"),(0,g.$)(t.chatContent).removeClass("bpbm-call-view"),(0,m.IK)(),(0,m.Ve)(),P.Wb.emit("groupMediaEvent",{event:"user_disconnected",thread_id:t.thread_id}),e.next=10,t.disableCamera();case 10:return e.next=12,t.disableMic();case 12:return e.next=14,t.disableShareScreen();case 14:if("disconnected"===t.room.state){e.next=17;break}return e.next=17,t.room.disconnect();case 17:t.resetRoom(),t.endCallInProgress=!1;case 19:case"end":return e.stop()}}),e)})))),(0,d.Z)((0,s.Z)(t),"kickUser",function(){var e=(0,r.Z)(h().mark((function e(n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.$.post(g.x6.ajaxUrl,{action:"bp_better_messages_thread_group_call_admin",token:t.accessToken,thread_id:t.thread_id,act:"remove_participant",identity:n,type:"video",nonce:g.x6.userNonce},(function(e){return e})).fail((function(e){throw e}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,d.Z)((0,s.Z)(t),"muteUser",function(){var e=(0,r.Z)(h().mark((function e(n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.$.post(g.x6.ajaxUrl,{action:"bp_better_messages_thread_group_call_admin",token:t.accessToken,thread_id:t.thread_id,act:"mute_participant",identity:n,type:"video",nonce:g.x6.userNonce},(function(e){return t.updateAllParticipants(),e})).fail((function(e){throw e}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,d.Z)((0,s.Z)(t),"unmuteUser",function(){var e=(0,r.Z)(h().mark((function e(n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.$.post(g.x6.ajaxUrl,{action:"bp_better_messages_thread_group_call_admin",token:t.accessToken,thread_id:t.thread_id,act:"unmute_participant",identity:n,type:"video",nonce:g.x6.userNonce},(function(e){return t.updateAllParticipants(),e})).fail((function(e){throw e}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,d.Z)((0,s.Z)(t),"updatePermissions",(0,r.Z)(h().mark((function e(){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={canShareVideo:!0,canShareAudio:!0,canShareScreen:!0},(i=t.room.localParticipant.permissions)&&(n.canShareVideo=i.canPublish,n.canShareAudio=i.canPublish,n.canShareScreen=i.canPublish),n.canShareVideo||t.disableCamera(),n.canShareAudio||t.disableMic(),n.canShareScreen||t.disableShareScreen(),t.setState(n);case 7:case"end":return e.stop()}}),e)})))),(0,d.Z)((0,s.Z)(t),"getAccessToken",(function(){var e=(0,s.Z)(t);return new Promise(function(){var t=(0,r.Z)(h().mark((function t(n,i){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g.$.post(g.x6.ajaxUrl,{action:"bp_better_messages_get_thread_group_call_access_key",thread_id:e.thread_id,type:"video",nonce:g.x6.userNonce},(function(e){n(e)})).fail((function(){i(!1)}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())})),(0,d.Z)((0,s.Z)(t),"connect",(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.room.connect("wss://video-cloud.bpbettermessages.com",t.accessToken,{autoSubscribe:!0});case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))),(0,d.Z)((0,s.Z)(t),"addItem",(function(e,n){var r=t.state.items;if(r.has(e)){for(var a=r.get(e),o=0,s=Object.entries(n);o<s.length;o++){var c=(0,i.Z)(s[o],2),l=c[0],u=c[1];a[l]=u}r.set(e,a)}else r.set(e,n);t.setState({items:r})})),(0,d.Z)((0,s.Z)(t),"removeItem",(function(e){var n=t.state.items;n.has(e)&&n.delete(e),t.setState({items:n})})),(0,d.Z)((0,s.Z)(t),"updateConnectionState",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=t.room.state;"connecting"===e&&(n=e),t.setState({state:n})})),(0,d.Z)((0,s.Z)(t),"enableShareScreen",(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.X.getScreenTrack();case 3:return t.setState({screenShared:!0}),e.next=6,t.room.localParticipant.publishTrack(f.X.screenVideoTrack,{name:"screen",simulcast:!0});case 6:t.updateMineStream(),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),(0,b.x)(e.t0),t.setState({screenShared:!1});case 14:case"end":return e.stop()}}),e,null,[[0,9]])})))),(0,d.Z)((0,s.Z)(t),"disableShareScreen",(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!f.X.screenVideoTrack){e.next=6;break}return e.next=4,t.room.localParticipant.unpublishTrack(f.X.screenVideoTrack);case 4:f.X.screenVideoTrack.stop(),f.X.screenVideoTrack=null;case 6:t.setState({screenShared:!1}),t.updateMineStream(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),(0,b.x)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))),(0,d.Z)((0,s.Z)(t),"enablingMic",!1),(0,d.Z)((0,s.Z)(t),"enableMic",(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(event.stopImmediatePropagation(),e.prev=1,!t.enablingMic){e.next=4;break}return e.abrupt("return");case 4:return t.enablingMic=!0,e.next=7,f.X.getLocalMicrophoneTrack();case 7:return e.next=9,t.room.localParticipant.publishTrack(f.X.localMicrophoneTrack,{name:"microphone",simulcast:!0});case 9:t.setState({micEnabled:!0}),t.updateMineStream(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),(0,b.x)(e.t0),t.setState({micEnabled:!1});case 17:return e.prev=17,t.enablingMic=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))),(0,d.Z)((0,s.Z)(t),"disableMic",(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(event.stopImmediatePropagation(),!f.X.localMicrophoneTrack){e.next=6;break}return e.next=4,t.room.localParticipant.unpublishTrack(f.X.localMicrophoneTrack);case 4:return e.next=6,f.X.stopLocalMicrophoneTrack();case 6:t.setState({micEnabled:!1}),t.updateMineStream();case 8:case"end":return e.stop()}}),e)})))),(0,d.Z)((0,s.Z)(t),"enablingCamera",!1),(0,d.Z)((0,s.Z)(t),"enableCamera",(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(event.stopImmediatePropagation(),e.prev=1,!t.enablingCamera){e.next=4;break}return e.abrupt("return");case 4:return t.enablingCamera=!0,e.next=7,f.X.getLocalVideoTrack(!1);case 7:return t.setState({cameraEnabled:!0}),e.next=10,t.room.localParticipant.publishTrack(f.X.localVideoTrack,{name:"camera",simulcast:!0});case 10:t.updateMineStream(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),(0,b.x)(e.t0),t.setState({cameraEnabled:!1});case 17:return e.prev=17,t.enablingCamera=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))),(0,d.Z)((0,s.Z)(t),"disableCamera",(0,r.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(event.stopImmediatePropagation(),!f.X.localVideoTrack){e.next=6;break}return e.next=4,t.room.localParticipant.unpublishTrack(f.X.localVideoTrack);case 4:return e.next=6,f.X.stopLocalVideoTrack();case 6:t.setState({cameraEnabled:!1}),t.updateMineStream();case 8:case"end":return e.stop()}}),e)})))),(0,d.Z)((0,s.Z)(t),"toggleConfig",(function(){t.setState({configOpen:!t.state.configOpen})})),(0,d.Z)((0,s.Z)(t),"onFullScreenChange",(function(e){t.fullScreenAvailable&&(null!==R.fullscreenElement?(t.setState({fullScreenEnabled:!0}),(0,g.$)(t.chatContent).find(".bpbm-switch-chat").hide()):(t.setState({fullScreenEnabled:!1}),(0,g.$)(t.chatContent).find(".bpbm-switch-chat").show()))})),(0,d.Z)((0,s.Z)(t),"enableFullScreen",(function(){if(t.fullScreenAvailable)try{R.requestFullscreen(t.callWrap[0])}catch(e){(0,b.x)(e)}})),(0,d.Z)((0,s.Z)(t),"disableFullScreen",(function(){if(t.fullScreenAvailable)try{null!==R.fullscreenElement&&R.exitFullscreen()}catch(e){(0,b.x)(e)}})),(0,d.Z)((0,s.Z)(t),"cameraChanged",function(){var e=(0,r.Z)(h().mark((function e(n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=(0,g.$)(n.currentTarget),e.next=4,f.X.selectVideoDevice(i.val());case 4:t.forceUpdate(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,b.x)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),(0,d.Z)((0,s.Z)(t),"speakerChanged",function(){var e=(0,r.Z)(h().mark((function e(n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i=(0,g.$)(n.currentTarget),f.X.selectedSpeakerDevice=String(i.val()),t.setState({speaker:f.X.selectedSpeakerDevice})}catch(e){(0,b.x)(e)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,d.Z)((0,s.Z)(t),"micChanged",function(){var e=(0,r.Z)(h().mark((function e(n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=(0,g.$)(n.currentTarget),f.X.selectedMicrophoneDevice=String(i.val()),!f.X.localMicrophoneTrack&&"incoming_call"!==t.state.action){e.next=8;break}return f.X.localMicrophoneTrack&&f.X.stopLocalMicrophoneTrack(),e.next=7,f.X.getLocalMicrophoneTrack();case 7:t.setState({micEnabled:!0});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,b.x)(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()),(0,d.Z)((0,s.Z)(t),"onToggleChatView",(function(e){e.stopImmediatePropagation(),(0,g.$)(t.chatContent).toggleClass("bpbm-hide-chat"),t.videoGrid.current.updateGrid()})),t.wrap=(0,g.$)(e.wrapper),t.bmWrap=(0,g.$)(t.wrap).closest(".bp-messages-wrap"),t.chatContent=(0,g.$)(t.bmWrap).find(".bpbm-chat-content"),t.callWrap=(0,g.$)(t.chatContent).find(".bp-messages-call-wrap"),t.allCallContainers=(0,g.$)(t.callWrap).find(".bp-messages-call-container"),t.videoCallContainer=(0,g.$)(t.callWrap).find(".bp-messages-group-call-container"),t.groupControls=(0,g.$)(t.chatContent).find(".bp-messages-group-call-controls"),t.thread_id=parseInt(t.bmWrap.attr("data-thread-id")),isNaN(t.thread_id)&&(t.thread_id=parseInt(t.bmWrap.attr("data-thread"))),t.fullScreenAvailable=R.fullscreenEnabled,t.isAdmin=!!t.bmWrap[0].querySelector(".list.can-moderate"),t.videoGrid=_.createRef(),t.resetRoom(),t.state={items:new Map,speaker:f.X.selectedSpeakerDevice,cameraEnabled:!1,micEnabled:!1,screenShared:!1,configOpen:!1,canAdmin:t.isAdmin,canShareVideo:!1,canShareAudio:!1,canShareScreen:!1,configAvailable:f.X.configAvailable,state:""},t}return(0,o.Z)(y,[{key:"componentDidMount",value:function(){this.deAttachListeners(),this.attachListeners()}},{key:"componentWillUnmount",value:function(){this.deAttachListeners()}},{key:"attachListeners",value:function(){(0,g.$)(this.bmWrap).on("click",".chat-header .group-call",this.startCall),(0,g.$)(this.chatContent).on("click",".bpbm-group-call-type-video .bpbm-group-call-in-progress-join button",this.startCall),(0,g.$)(this.callWrap).on("click",".bpbm-switch-chat",this.onToggleChatView),(0,g.$)(this.callWrap).on("touchend",".bpbm-switch-chat",this.onToggleChatView),document.addEventListener("bp-better-messages-media-updated",this.onMediaUpdate),document.addEventListener("bpbm-end-call",this.endCall),R.addEventListener("fullscreenchange",this.onFullScreenChange),this.videoCallContainer.on("change",".bpbm-call-settings .bpbm-switch-camera-select",this.cameraChanged),this.videoCallContainer.on("change",".bpbm-call-settings .bpbm-switch-mic-select",this.micChanged),this.videoCallContainer.on("change",".bpbm-call-settings .bpbm-switch-audio-select",this.speakerChanged)}},{key:"deAttachListeners",value:function(){(0,g.$)(this.bmWrap).off("click",".chat-header .group-call",this.startCall),(0,g.$)(this.chatContent).off("click",".bpbm-group-call-type-video .bpbm-group-call-in-progress-join button",this.startCall),(0,g.$)(this.callWrap).off("click",".bpbm-switch-chat",this.onToggleChatView),(0,g.$)(this.callWrap).off("touchend",".bpbm-switch-chat",this.onToggleChatView),document.removeEventListener("bp-better-messages-media-updated",this.onMediaUpdate),document.removeEventListener("bpbm-end-call",this.endCall),R.removeEventListener("fullscreenchange",this.onFullScreenChange),this.videoCallContainer.off("change",".bpbm-call-settings .bpbm-switch-camera-select",this.cameraChanged),this.videoCallContainer.off("change",".bpbm-call-settings .bpbm-switch-mic-select",this.micChanged),this.videoCallContainer.off("change",".bpbm-call-settings .bpbm-switch-audio-select",this.speakerChanged)}},{key:"render",value:function(){return _.createElement(_.Fragment,null,_.createElement(E,{ref:this.videoGrid,items:this.state.items,adminMode:this.state.canAdmin,parent:this}),!0===this.state.configOpen&&_.createElement("div",{className:"bpbm-call-settings"},f.X.renderCameraSwitch(),f.X.renderMicSwitch(),f.X.renderSpeakerSwitch()),_.createElement("div",{className:"bp-messages-group-call-controls-v2"},_.createElement(T.Z,{state:this.state.state,quality:this.room.localParticipant.connectionQuality}),_.createElement("div",{className:"bp-messages-group-call-controls-buttons"},"connected"===this.room.state&&_.createElement(_.Fragment,null,this.state.configAvailable&&_.createElement(A.ZP,{content:g.x6.strings.config,theme:"bpbmtheme",appendTo:"parent",arrow:!1},_.createElement("span",{onClick:this.toggleConfig,className:"bpbm-configure-call"},_.createElement("i",{className:"fas fa-cog"}))),this.state.canShareVideo&&_.createElement(_.Fragment,null,this.state.cameraEnabled&&_.createElement(A.ZP,{content:g.x6.strings.cam_d,theme:"bpbmtheme",appendTo:"parent",arrow:!1},_.createElement("span",{onClick:this.disableCamera,className:"bpbm-disable-video"},!this.iconsReverted&&_.createElement("i",{className:"fas fa-video-slash"}),this.iconsReverted&&_.createElement("i",{className:"fas fa-video"}))),!this.state.cameraEnabled&&_.createElement(A.ZP,{content:g.x6.strings.cam_e,theme:"bpbmtheme",appendTo:"parent",arrow:!1},_.createElement("span",{onClick:this.enableCamera,className:"bpbm-enable-video"},!this.iconsReverted&&_.createElement("i",{className:"fas fa-video"}),this.iconsReverted&&_.createElement("i",{className:"fas fa-video-slash"})))),this.state.canShareAudio&&_.createElement(_.Fragment,null,this.state.micEnabled&&_.createElement(A.ZP,{content:g.x6.strings.mic_d,theme:"bpbmtheme",appendTo:"parent",arrow:!1},_.createElement("span",{onClick:this.disableMic,className:"bpbm-disable-mic"},!this.iconsReverted&&_.createElement("i",{className:"fas fa-microphone-slash"}),this.iconsReverted&&_.createElement("i",{className:"fas fa-microphone"}))),!this.state.micEnabled&&_.createElement(A.ZP,{content:g.x6.strings.mic_e,theme:"bpbmtheme",appendTo:"parent",arrow:!1},_.createElement("span",{onClick:this.enableMic,className:"bpbm-enable-mic"},!this.iconsReverted&&_.createElement("i",{className:"fas fa-microphone"}),this.iconsReverted&&_.createElement("i",{className:"fas fa-microphone-slash"})))),this.fullScreenAvailable&&_.createElement(_.Fragment,null,!this.state.fullScreenEnabled&&_.createElement(A.ZP,{content:g.x6.strings.fs_e,theme:"bpbmtheme",appendTo:"parent",arrow:!1},_.createElement("span",{onClick:this.enableFullScreen,className:"bpbm-fs-enable"},_.createElement("i",{className:"fas fa-expand"}))),this.state.fullScreenEnabled&&_.createElement(A.ZP,{content:g.x6.strings.fs_d,theme:"bpbmtheme",appendTo:"parent",arrow:!1},_.createElement("span",{onClick:this.disableFullScreen,className:"bpbm-fs-disable"},_.createElement("i",{className:"fas fa-expand fa-stack-1x"}),_.createElement("i",{className:"fas fa-slash fa-stack-1x"}))))),this.state.canShareScreen&&f.X.screenShareSupport&&_.createElement(_.Fragment,null,!this.state.screenShared&&_.createElement(A.ZP,{content:g.x6.strings.ss_e,theme:"bpbmtheme",appendTo:"parent",arrow:!1},_.createElement("span",{onClick:this.enableShareScreen,className:"bpbm-switch-share-screen"},_.createElement("i",{className:"fas fa-desktop"}))),this.state.screenShared&&_.createElement(A.ZP,{content:g.x6.strings.ss_d,theme:"bpbmtheme",appendTo:"parent",arrow:!1},_.createElement("span",{onClick:this.disableShareScreen,className:"bpbm-switch-share-screen"},_.createElement("i",{className:"fas fa-desktop fa-stack-1x"}),_.createElement("i",{className:"fas fa-slash fa-stack-1x"})))),_.createElement(A.ZP,{content:g.x6.strings.rex,theme:"bpbmtheme",appendTo:"parent",arrow:!1},_.createElement("span",{onClick:this.endCall,className:"bpbm-exit-room"},_.createElement("i",{className:"fas fa-sign-out-alt"}))))))}}]),y}(_.Component)},6904:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BPBMAutoStartCall:()=>W,default:()=>V,justCalled:()=>F,justRejected:()=>U});var i=n(5861),r=n(5671),a=n(3144),o=n(7326),s=n(9340),c=n(2963),l=n(1120),u=n(4942),d=n(7757),p=n.n(d),h=n(5474),f=n(9299),m=n(5224),g=n(3167),v=n(1731),b=n(885),y=n(7294),_=n(745),A=n(1002);var w=n(9796)("simple-peer"),k=n(5177),S=n(1798),C=n(8473),x=n(4375),E=n(2114),T=n(8764).Buffer,P=65536,R=window.RTCRtpTransceiver&&"setCodecPreferences"in window.RTCRtpTransceiver.prototype;function O(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}var D=function(e){(0,s.Z)(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,c.Z)(this,e)});function o(e){var t;if((0,r.Z)(this,o),e=Object.assign({allowHalfOpen:!1},e),(t=i.call(this,e))._id=S(4).toString("hex").slice(0,7),t._debug("new peer %o",e),t.channelName=e.initiator?e.channelName||S(20).toString("hex"):null,t.initiator=e.initiator||!1,t.channelConfig=e.channelConfig||o.channelConfig,t.channelNegotiated=t.channelConfig.negotiated,t.config=Object.assign({},o.config,e.config),t.offerOptions=e.offerOptions||{},t.answerOptions=e.answerOptions||{},t.sdpTransform=e.sdpTransform||function(e){return e},t.streams=e.streams||(e.stream?[e.stream]:[]),t.trickle=void 0===e.trickle||e.trickle,t.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,t.iceCompleteTimeout=e.iceCompleteTimeout||5e3,t.preferredCodecs=e.preferredCodecs||[],t.destroyed=!1,t.destroying=!1,t._connected=!1,t.remoteAddress=void 0,t.remoteFamily=void 0,t.remotePort=void 0,t.localAddress=void 0,t.localFamily=void 0,t.localPort=void 0,t._wrtc=e.wrtc&&"object"===(0,A.Z)(e.wrtc)?e.wrtc:k(),!t._wrtc)throw"undefined"==typeof window?E(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):E(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");t._pcReady=!1,t._channelReady=!1,t._iceComplete=!1,t._iceCompleteTimer=null,t._channel=null,t._pendingCandidates=[],t._isNegotiating=!1,t._firstNegotiation=!0,t._batchedNegotiation=!1,t._queuedNegotiation=!1,t._sendersAwaitingStable=[],t._senderMap=new Map,t._closingInterval=null,t._remoteTracks=[],t._remoteStreams=[],t._chunk=null,t._cb=null,t._interval=null;try{t._pc=new t._wrtc.RTCPeerConnection(t.config)}catch(e){return t.destroy(E(e,"ERR_PC_CONSTRUCTOR")),(0,c.Z)(t)}return t._isReactNativeWebrtc="number"==typeof t._pc._peerConnectionId,t._pc.oniceconnectionstatechange=function(){t._onIceStateChange()},t._pc.onicegatheringstatechange=function(){t._onIceStateChange()},t._pc.onconnectionstatechange=function(){t._onConnectionStateChange()},t._pc.onsignalingstatechange=function(){t._onSignalingStateChange()},t._pc.onicecandidate=function(e){t._onIceCandidate(e)},"object"===(0,A.Z)(t._pc.peerIdentity)&&t._pc.peerIdentity.catch((function(e){t.destroy(E(e,"ERR_PC_PEER_IDENTITY"))})),t.initiator||t.channelNegotiated?t._setupData({channel:t._pc.createDataChannel(t.channelName,t.channelConfig)}):t._pc.ondatachannel=function(e){t._setupData(e)},t.streams&&t.streams.forEach((function(e){t.addStream(e)})),t._pc.ontrack=function(e){t._onTrack(e)},t._debug("initial negotiation"),t._needsNegotiation(),t._onFinishBound=function(){t._onFinish()},t.once("finish",t._onFinishBound),t}return(0,a.Z)(o,[{key:"bufferSize",get:function(){return this._channel&&this._channel.bufferedAmount||0}},{key:"connected",get:function(){return this._connected&&"open"===this._channel.readyState}},{key:"address",value:function(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}},{key:"signal",value:function(e){var t=this;if(!this.destroying){if(this.destroyed)throw E(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then((function(){t.destroyed||(t._pendingCandidates.forEach((function(e){t._addIceCandidate(e)})),t._pendingCandidates=[],"offer"===t._pc.remoteDescription.type&&t._createAnswer())})).catch((function(e){t.destroy(E(e,"ERR_SET_REMOTE_DESCRIPTION"))})),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(E(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}},{key:"_addIceCandidate",value:function(e){var t=this,n=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(n).catch((function(e){!n.address||n.address.endsWith(".local")?("Ignoring unsupported ICE candidate.",console.warn("Ignoring unsupported ICE candidate.")):t.destroy(E(e,"ERR_ADD_ICE_CANDIDATE"))}))}},{key:"send",value:function(e){if(!this.destroying){if(this.destroyed)throw E(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}},{key:"addTransceiver",value:function(e,t){if(!this.destroying){if(this.destroyed)throw E(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(e){this.destroy(E(e,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:t}})}}},{key:"addStream",value:function(e){var t=this;if(!this.destroying){if(this.destroyed)throw E(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach((function(n){t.addTrack(n,e)}));var n=[];if(void 0!==RTCRtpSender.getCapabilities&&RTCRtpSender.getCapabilities("video").codecs.forEach((function(e){"video/vp8"===e.mimeType.toLowerCase()&&n.push(e),e.mimeType.toLowerCase()})),R&&n.length>0){var i=e.getVideoTracks();this._pc.getTransceivers().filter((function(e){return e.sender&&i.includes(e.sender.track)})).forEach((function(e){e.setCodecPreferences(n)}))}}}},{key:"addTrack",value:function(e,t){if(!this.destroying){if(this.destroyed)throw E(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");var n=this._senderMap.get(e)||new Map,i=n.get(t);if(i)throw i.removed?E(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):E(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");i=this._pc.addTrack(e,t),n.set(t,i),this._senderMap.set(e,n),this._needsNegotiation()}}},{key:"replaceTrack",value:function(e,t,n){if(!this.destroying){if(this.destroyed)throw E(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");var i=this._senderMap.get(e),r=i?i.get(n):null;if(!r)throw E(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,i),null!=r.replaceTrack?r.replaceTrack(t):this.destroy(E(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}}},{key:"removeTrack",value:function(e,t){if(!this.destroying){if(this.destroyed)throw E(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");var n=this._senderMap.get(e),i=n?n.get(t):null;if(!i)throw E(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{i.removed=!0,this._pc.removeTrack(i)}catch(e){"NS_ERROR_UNEXPECTED"===e.name?this._sendersAwaitingStable.push(i):this.destroy(E(e,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}}},{key:"removeStream",value:function(e){var t=this;if(!this.destroying){if(this.destroyed)throw E(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach((function(n){t.removeTrack(n,e)}))}}},{key:"_needsNegotiation",value:function(){var e=this;this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,x((function(){e._batchedNegotiation=!1,e.initiator||!e._firstNegotiation?(e._debug("starting batched negotiation"),e.negotiate()):e._debug("non-initiator initial negotiation request discarded"),e._firstNegotiation=!1})))}},{key:"negotiate",value:function(){var e=this;if(!this.destroying){if(this.destroyed)throw E(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout((function(){e._createOffer()}),0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}},{key:"destroy",value:function(e){this._destroy(e,(function(){}))}},{key:"_destroy",value:function(e,t){var n=this;this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),x((function(){if(n.destroyed=!0,n.destroying=!1,n._debug("destroy (error: %s)",e&&(e.message||e)),n.readable=n.writable=!1,n._readableState.ended||n.push(null),n._writableState.finished||n.end(),n._connected=!1,n._pcReady=!1,n._channelReady=!1,n._remoteTracks=null,n._remoteStreams=null,n._senderMap=null,clearInterval(n._closingInterval),n._closingInterval=null,clearInterval(n._interval),n._interval=null,n._chunk=null,n._cb=null,n._onFinishBound&&n.removeListener("finish",n._onFinishBound),n._onFinishBound=null,n._channel){try{n._channel.close()}catch(e){}n._channel.onmessage=null,n._channel.onopen=null,n._channel.onclose=null,n._channel.onerror=null}if(n._pc){try{n._pc.close()}catch(e){}n._pc.oniceconnectionstatechange=null,n._pc.onicegatheringstatechange=null,n._pc.onsignalingstatechange=null,n._pc.onicecandidate=null,n._pc.ontrack=null,n._pc.ondatachannel=null}n._pc=null,n._channel=null,e&&n.emit("error",e),n.emit("close"),t()})))}},{key:"_setupData",value:function(e){var t=this;if(!e.channel)return this.destroy(E(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=P),this.channelName=this._channel.label,this._channel.onmessage=function(e){t._onChannelMessage(e)},this._channel.onbufferedamountlow=function(){t._onChannelBufferedAmountLow()},this._channel.onopen=function(){t._onChannelOpen()},this._channel.onclose=function(){t._onChannelClose()},this._channel.onerror=function(e){var n=e.error instanceof Error?e.error:new Error("Datachannel error: ".concat(e.message," ").concat(e.filename,":").concat(e.lineno,":").concat(e.colno));t.destroy(E(n,"ERR_DATA_CHANNEL"))};var n=!1;this._closingInterval=setInterval((function(){t._channel&&"closing"===t._channel.readyState?(n&&t._onChannelClose(),n=!0):n=!1}),5e3)}},{key:"_read",value:function(){}},{key:"_write",value:function(e,t,n){if(this.destroyed)return n(E(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(e){return this.destroy(E(e,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>P?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}},{key:"_onFinish",value:function(){var e=this;if(!this.destroyed){var t=function(){setTimeout((function(){return e.destroy()}),1e3)};this._connected?t():this.once("connect",t)}}},{key:"_startIceCompleteTimeout",value:function(){var e=this;this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout((function(){e._iceComplete||(e._iceComplete=!0,e._debug("iceComplete timeout completed"),e.emit("iceTimeout"),e.emit("_iceComplete"))}),this.iceCompleteTimeout))}},{key:"_createOffer",value:function(){var e=this;this.destroyed||this._pc.createOffer(this.offerOptions).then((function(t){if(!e.destroyed){e.trickle||e.allowHalfTrickle||(t.sdp=O(t.sdp)),t.sdp=e.sdpTransform(t.sdp);var n=function(){if(!e.destroyed){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp})}};e._pc.setLocalDescription(t).then((function(){e._debug("createOffer success"),e.destroyed||(e.trickle||e._iceComplete?n():e.once("_iceComplete",n))})).catch((function(t){e.destroy(E(t,"ERR_SET_LOCAL_DESCRIPTION"))}))}})).catch((function(t){e.destroy(E(t,"ERR_CREATE_OFFER"))}))}},{key:"_requestMissingTransceivers",value:function(){var e=this;this._pc.getTransceivers&&this._pc.getTransceivers().forEach((function(t){t.mid||!t.sender.track||t.requested||(t.requested=!0,e.addTransceiver(t.sender.track.kind))}))}},{key:"_createAnswer",value:function(){var e=this;this.destroyed||this._pc.createAnswer(this.answerOptions).then((function(t){if(!e.destroyed){e.trickle||e.allowHalfTrickle||(t.sdp=O(t.sdp)),t.sdp=e.sdpTransform(t.sdp);var n=function(){if(!e.destroyed){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp}),e.initiator||e._requestMissingTransceivers()}};e._pc.setLocalDescription(t).then((function(){e.destroyed||(e.trickle||e._iceComplete?n():e.once("_iceComplete",n))})).catch((function(t){e.destroy(E(t,"ERR_SET_LOCAL_DESCRIPTION"))}))}})).catch((function(t){e.destroy(E(t,"ERR_CREATE_ANSWER"))}))}},{key:"_onConnectionStateChange",value:function(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(E(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}},{key:"_onIceStateChange",value:function(){if(!this.destroyed){var e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),"connected"!==e&&"completed"!==e||(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(E(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(E(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}}},{key:"getStats",value:function(e){var t=this,n=function(e){return"[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach((function(t){Object.assign(e,t)})),e};0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then((function(t){var i=[];t.forEach((function(e){i.push(n(e))})),e(null,i)}),(function(t){return e(t)})):this._pc.getStats.length>0?this._pc.getStats((function(i){if(!t.destroyed){var r=[];i.result().forEach((function(e){var t={};e.names().forEach((function(n){t[n]=e.stat(n)})),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,r.push(n(t))})),e(null,r)}}),(function(t){return e(t)})):e(null,[])}},{key:"_maybeReady",value:function(){var e=this;this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),!this._connected&&!this._connecting&&this._pcReady&&this._channelReady&&(this._connecting=!0,function t(){e.destroyed||e.getStats((function(n,i){if(!e.destroyed){n&&(i=[]);var r={},a={},o={},s=!1;i.forEach((function(e){"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(r[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(a[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(o[e.id]=e)}));var c=function(t){s=!0;var n=a[t.localCandidateId];n&&(n.ip||n.address)?(e.localAddress=n.ip||n.address,e.localPort=Number(n.port)):n&&n.ipAddress?(e.localAddress=n.ipAddress,e.localPort=Number(n.portNumber)):"string"==typeof t.googLocalAddress&&(n=t.googLocalAddress.split(":"),e.localAddress=n[0],e.localPort=Number(n[1])),e.localAddress&&(e.localFamily=e.localAddress.includes(":")?"IPv6":"IPv4");var i=r[t.remoteCandidateId];i&&(i.ip||i.address)?(e.remoteAddress=i.ip||i.address,e.remotePort=Number(i.port)):i&&i.ipAddress?(e.remoteAddress=i.ipAddress,e.remotePort=Number(i.portNumber)):"string"==typeof t.googRemoteAddress&&(i=t.googRemoteAddress.split(":"),e.remoteAddress=i[0],e.remotePort=Number(i[1])),e.remoteAddress&&(e.remoteFamily=e.remoteAddress.includes(":")?"IPv6":"IPv4"),e._debug("connect local: %s:%s remote: %s:%s",e.localAddress,e.localPort,e.remoteAddress,e.remotePort)};if(i.forEach((function(e){"transport"===e.type&&e.selectedCandidatePairId&&c(o[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&c(e)})),s||Object.keys(o).length&&!Object.keys(a).length){if(e._connecting=!1,e._connected=!0,e._chunk){try{e.send(e._chunk)}catch(n){return e.destroy(E(n,"ERR_DATA_CHANNEL"))}e._chunk=null,e._debug('sent chunk from "write before connect"');var l=e._cb;e._cb=null,l(null)}"number"!=typeof e._channel.bufferedAmountLowThreshold&&(e._interval=setInterval((function(){return e._onInterval()}),150),e._interval.unref&&e._interval.unref()),e._debug("connect"),e.emit("connect")}else setTimeout(t,100)}}))}())}},{key:"_onInterval",value:function(){!this._cb||!this._channel||this._channel.bufferedAmount>P||this._onChannelBufferedAmountLow()}},{key:"_onSignalingStateChange",value:function(){var e=this;this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach((function(t){e._pc.removeTrack(t),e._queuedNegotiation=!0})),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}},{key:"_onIceCandidate",value:function(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}},{key:"_onChannelMessage",value:function(e){if(!this.destroyed){var t=e.data;t instanceof ArrayBuffer&&(t=T.from(t)),this.push(t)}}},{key:"_onChannelBufferedAmountLow",value:function(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);var e=this._cb;this._cb=null,e(null)}}},{key:"_onChannelOpen",value:function(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}},{key:"_onChannelClose",value:function(){this.destroyed||(this._debug("on channel close"),this.destroy())}},{key:"_onTrack",value:function(e){var t=this;this.destroyed||e.streams.forEach((function(n){t._debug("on track"),t.emit("track",e.track,n),t._remoteTracks.push({track:e.track,stream:n}),t._remoteStreams.some((function(e){return e.id===n.id}))||(t._remoteStreams.push(n),x((function(){t._debug("on stream"),t.emit("stream",n)})))}))}},{key:"_debug",value:function(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],w.apply(null,e)}}]),o}(C.Duplex);D.WEBRTC_SUPPORT=!!k(),D.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},D.channelConfig={};const M=D;var I=n(4379),N=n(1193),L=n.n(N),B=n(1736);var $=n(1706).ResizableBox,j=n(2007).Z,U={},F={},Z=null,z=null;document.addEventListener("bp-better-messages-reinit-end",(function(){z=document.querySelector(".bp-messages-wrap .bp-messages-call-wrap-private"),Z&&!z&&Z.unmount(),z&&!z.classList.contains("rendered")&&(Z&&Z.unmount(),(Z=_.s(z)).render(y.createElement(V,{wrapper:z})))}));var V=function(e){(0,s.Z)(w,e);var t,n,d,b,_,A=(b=w,_=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,l.Z)(b);if(_){var n=(0,l.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function w(e){var t;return(0,r.Z)(this,w),t=A.call(this,e),(0,u.Z)((0,o.Z)(t),"wrapper",void 0),(0,u.Z)((0,o.Z)(t),"bmWrap",void 0),(0,u.Z)((0,o.Z)(t),"chatContent",void 0),(0,u.Z)((0,o.Z)(t),"peer",!1),(0,u.Z)((0,o.Z)(t),"peersConnected",!1),(0,u.Z)((0,o.Z)(t),"type","video"),(0,u.Z)((0,o.Z)(t),"thread_id",void 0),(0,u.Z)((0,o.Z)(t),"myVideoRef",void 0),(0,u.Z)((0,o.Z)(t),"myScreenRef",void 0),(0,u.Z)((0,o.Z)(t),"anotherVideo",void 0),(0,u.Z)((0,o.Z)(t),"anotherVideoType",void 0),(0,u.Z)((0,o.Z)(t),"anotherVideoRef",void 0),(0,u.Z)((0,o.Z)(t),"anotherVideo2",void 0),(0,u.Z)((0,o.Z)(t),"anotherVideo2Type",void 0),(0,u.Z)((0,o.Z)(t),"anotherVideo2Ref",void 0),(0,u.Z)((0,o.Z)(t),"anotherAudio",void 0),(0,u.Z)((0,o.Z)(t),"anotherAudioRef",void 0),(0,u.Z)((0,o.Z)(t),"anotherAudio2",void 0),(0,u.Z)((0,o.Z)(t),"anotherAudio2Ref",void 0),(0,u.Z)((0,o.Z)(t),"iconsReverted","1"===h.x6.callsRevertIcons),(0,u.Z)((0,o.Z)(t),"fullScreenAvailable",!1),(0,u.Z)((0,o.Z)(t),"predefinedStreams",[]),(0,u.Z)((0,o.Z)(t),"isCalling",!1),(0,u.Z)((0,o.Z)(t),"isIncomingCall",!1),(0,u.Z)((0,o.Z)(t),"callActive",!1),(0,u.Z)((0,o.Z)(t),"callMessageId",void 0),(0,u.Z)((0,o.Z)(t),"state",void 0),(0,u.Z)((0,o.Z)(t),"enableFullScreen",(function(){if(t.fullScreenAvailable)try{j.requestFullscreen(t.chatContent.find(".bp-messages-call-container")[0])}catch(e){(0,m.x)(e)}})),(0,u.Z)((0,o.Z)(t),"disableFullScreen",(function(){if(t.fullScreenAvailable)try{null!==j.fullscreenElement&&j.exitFullscreen()}catch(e){(0,m.x)(e)}})),(0,u.Z)((0,o.Z)(t),"onFullScreenChange",(function(e){t.fullScreenAvailable&&(null!==j.fullscreenElement?t.setState({fullScreenEnabled:!0}):t.setState({fullScreenEnabled:!1}))})),(0,u.Z)((0,o.Z)(t),"tappedTimeout",void 0),(0,u.Z)((0,o.Z)(t),"onTapped",(function(){clearTimeout(t.tappedTimeout),t.setState({tapped:!0}),t.tappedTimeout=window.setTimeout((function(){t.setState({tapped:!1})}),5e3)})),(0,u.Z)((0,o.Z)(t),"onMediaUpdate",(function(){t.setState({configAvailable:I.X.configAvailable})})),(0,u.Z)((0,o.Z)(t),"onToggleChatView",(function(){t.chatContent.toggleClass("bpbm-hide-chat")})),(0,u.Z)((0,o.Z)(t),"switchPicInPic",(0,i.Z)(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.tq){e.next=12;break}if(!((n=(0,h.$)(".bp-messages-video-container .bp-messages-main-video video")).length>0)){e.next=12;break}if(n[0]===document.pictureInPictureElement){e.next=9;break}return e.next=6,n[0].requestPictureInPicture();case 6:t.setState({picInPic:!0}),e.next=12;break;case 9:return e.next=11,document.exitPictureInPicture();case 11:t.setState({picInPic:!1});case 12:case"end":return e.stop()}}),e)})))),(0,u.Z)((0,o.Z)(t),"cameraChanged",function(){var e=(0,i.Z)(p().mark((function e(n){var i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=(0,h.$)(n.currentTarget),I.X.selectedVideoDevice=String(i.val()),!I.X.localVideoTrack&&"incoming_call"!==t.state.action){e.next=9;break}return I.X.localVideoTrack&&(t.removeStream(I.X.localVideoTrack.mediaStream),I.X.stopLocalVideoTrack()),e.next=7,I.X.getLocalVideoTrack(!0);case 7:t.addStream(I.X.localVideoTrack.mediaStream),t.setState({cameraEnabled:!0});case 9:t.updateVideos(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),(0,m.x)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()),(0,u.Z)((0,o.Z)(t),"speakerChanged",function(){var e=(0,i.Z)(p().mark((function e(n){var i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i=(0,h.$)(n.currentTarget),I.X.selectedSpeakerDevice=String(i.val()),t.updateAudios()}catch(e){(0,m.x)(e)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,u.Z)((0,o.Z)(t),"micChanged",function(){var e=(0,i.Z)(p().mark((function e(n){var i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=(0,h.$)(n.currentTarget),I.X.selectedMicrophoneDevice=String(i.val()),!I.X.localMicrophoneTrack&&"incoming_call"!==t.state.action){e.next=9;break}return I.X.localMicrophoneTrack&&(t.removeStream(I.X.localMicrophoneTrack.mediaStream),I.X.stopLocalMicrophoneTrack()),e.next=7,I.X.getLocalMicrophoneTrack();case 7:t.addStream(I.X.localMicrophoneTrack.mediaStream),t.setState({micEnabled:!0});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),(0,m.x)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()),(0,u.Z)((0,o.Z)(t),"toggleConfig",(function(){t.setState({configOpen:!t.state.configOpen})})),(0,u.Z)((0,o.Z)(t),"enableShareScreen",(0,i.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.X.getScreenTrack();case 3:t.addStream(I.X.screenVideoTrack.mediaStream),t.setState({screenShared:!0}),t.updateVideos(),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),(0,m.x)(e.t0),t.setState({screenShared:!1});case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))),(0,u.Z)((0,o.Z)(t),"disableShareScreen",(0,i.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.removeStream(I.X.screenVideoTrack.mediaStream),I.X.screenVideoTrack.stop(),I.X.screenVideoTrack=null,t.setState({screenShared:!1}),t.updateVideos()}catch(e){console.error(e),(0,m.x)(e)}case 1:case"end":return e.stop()}}),e)})))),(0,u.Z)((0,o.Z)(t),"enableCamera",(0,i.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.X.getLocalVideoTrack(!0);case 3:t.addStream(I.X.localVideoTrack.mediaStream),t.setState({cameraEnabled:!0}),t.updateVideos(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),(0,m.x)(e.t0),t.setState({cameraEnabled:!1});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))),(0,u.Z)((0,o.Z)(t),"disableCamera",(0,i.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I.X.localVideoTrack&&t.removeStream(I.X.localVideoTrack.mediaStream),e.next=3,I.X.stopLocalVideoTrack();case 3:t.setState({cameraEnabled:!1}),t.updateVideos();case 5:case"end":return e.stop()}}),e)})))),(0,u.Z)((0,o.Z)(t),"enableMic",(0,i.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.X.getLocalMicrophoneTrack();case 3:t.addStream(I.X.localMicrophoneTrack.mediaStream),t.setState({micEnabled:!0}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),(0,m.x)(e.t0),t.setState({micEnabled:!1});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))),(0,u.Z)((0,o.Z)(t),"disableMic",(0,i.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.peer&&I.X.localMicrophoneTrack&&t.removeStream(I.X.localMicrophoneTrack.mediaStream),e.next=3,I.X.stopLocalMicrophoneTrack();case 3:t.setState({micEnabled:!1});case 4:case"end":return e.stop()}}),e)})))),(0,u.Z)((0,o.Z)(t),"callingTimeout",void 0),(0,u.Z)((0,o.Z)(t),"startCallRequest",(function(){t.isCalling=!0,clearTimeout(t.callingTimeout),f.Wb.emit("mediaEvent",{event:"calling",to:t.state.user_id,thread_id:t.thread_id,type:t.type,avatar:h.x6.me.avatar,name:h.x6.me.name});var e=t.callingRequestLimitSeconds+1;t.call_message_id||h.$.post(h.x6.ajaxUrl,{action:"bp_better_messages_record_outgoing_call",nonce:h.x6.userNonce,thread_id:t.thread_id,message_id:t.call_message_id,type:t.type,duration:e},(function(e){e.message_id&&(t.call_message_id=e.message_id)})),t.callingTimeout=window.setTimeout(t.startCallRequest,2500)})),(0,u.Z)((0,o.Z)(t),"stopCallRequest",(function(){t.isCalling&&(t.isIncomingCall||t.callActive||(f.Wb.emit("mediaEvent",{event:"call_cancelled",to:t.state.user_id,thread_id:t.thread_id}),F[t.state.user_id]&&clearTimeout(F[t.state.user_id])),t.isCalling=!1,clearTimeout(t.callingTimeout))})),(0,u.Z)((0,o.Z)(t),"startCall",function(){var e=(0,i.Z)(p().mark((function e(n){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!h.x6.callRestrict){e.next=4;break}return(0,m.x)(h.x6.callRestrict),e.abrupt("return",!1);case 4:if((0,h.$)(n.currentTarget).hasClass("audio-call")?t.type="audio":t.type="video",f.Wb.connected){e.next=9;break}(0,m.s)(h.x6.strings.websocket_not_connected),e.next=68;break;case 9:if(!g.Ar){e.next=13;break}return e.abrupt("return",!1);case 13:if(void 0!==navigator.mediaDevices){e.next=17;break}(0,m.x)(h.x6.strings.no_webrtc),e.next=68;break;case 17:if(-1!==f.ps.indexOf(t.state.user_id.toString())||"1"===h.x6.offlineCalls){e.next=27;break}if(f.zU){e.next=24;break}return e.next=21,(0,g.Vs)(500);case 21:t.startCall(n),e.next=25;break;case 24:t.tryCallOfflineNotification();case 25:e.next=68;break;case 27:if(e.prev=27,t.call_message_id=!1,t.startPeerIfNotStarted(!1),F[t.state.user_id]&&clearTimeout(F[t.state.user_id]),(0,g.q0)(),t.setState({action:"outgoing_call"}),"video"!==t.type){e.next=41;break}return e.next=36,I.X.getTracks(!0);case 36:return e.next=38,I.X.stopLocalMicrophoneTrack();case 38:t.setState({micEnabled:!0,cameraEnabled:!0}),e.next=45;break;case 41:if("audio"!==t.type){e.next=45;break}return e.next=44,I.X.getLocalMicrophoneTrack();case 44:t.setState({micEnabled:!0,cameraEnabled:!1});case 45:if(t.bmWrap.addClass("bpbm-call-view"),t.chatContent.addClass("bpbm-call-view"),h.tq&&t.chatContent.addClass("bpbm-hide-chat"),t.wrapper.show(),(0,v.BC)(),"video"!==t.type){e.next=59;break}return t.addStream(I.X.localVideoTrack.mediaStream),e.next=54,I.X.getLocalMicrophoneTrack();case 54:return e.next=56,t.addStream(I.X.localMicrophoneTrack.mediaStream);case 56:t.updateVideos(),e.next=60;break;case 59:"audio"===t.type&&t.addStream(I.X.localMicrophoneTrack.mediaStream);case 60:t.startCallRequest(),t.startLimitTimer(),e.next=68;break;case 64:e.prev=64,e.t0=e.catch(27),Array.isArray(e.t0)||(e.t0=[e.t0]),e.t0.forEach((function(e){console.error(e),(0,m.x)(e)}));case 68:case"end":return e.stop()}}),e,null,[[27,64]])})));return function(t){return e.apply(this,arguments)}}()),(0,u.Z)((0,o.Z)(t),"showIncomingCall",function(){var e=(0,i.Z)(p().mark((function e(n){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,g.bD)(),t.type=n,t.isIncomingCall=!0,t.bmWrap.hasClass("bpbm-call-view")){e.next=32;break}if(t.bmWrap.addClass("bpbm-call-view"),t.chatContent.addClass("bpbm-call-view"),h.tq&&t.chatContent.addClass("bpbm-hide-chat"),t.wrapper.show(),t.setState({action:"incoming_call"}),e.prev=9,"video"!==t.type){e.next=21;break}return e.next=13,I.X.getTracks(!0);case 13:return e.next=15,I.X.stopLocalMicrophoneTrack();case 15:return e.next=17,I.X.getLocalMicrophoneTrack();case 17:t.updateVideos(),t.setState({micEnabled:!0,cameraEnabled:!0}),e.next=25;break;case 21:if("audio"!==t.type){e.next=25;break}return e.next=24,I.X.getLocalMicrophoneTrack();case 24:t.setState({micEnabled:!0,cameraEnabled:!1});case 25:I.X.localVideoTrack&&I.X.localVideoTrack!==t.state.myVideo&&t.addStream(I.X.localVideoTrack.mediaStream),I.X.localMicrophoneTrack&&t.addStream(I.X.localMicrophoneTrack.mediaStream),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(9),t.setState({errorMessages:e.t0});case 32:case"end":return e.stop()}}),e,null,[[9,29]])})));return function(t){return e.apply(this,arguments)}}()),(0,u.Z)((0,o.Z)(t),"answerCall",(0,i.Z)(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,void 0!==navigator.mediaDevices){e.next=5;break}(0,m.x)(h.x6.strings.no_webrtc),e.next=19;break;case 5:return n=t.state.user_id,t.callActive=!0,t.startPeerIfNotStarted(!0),t.privateCallStartEvent(),e.next=11,t.setState({action:"call_in_progress"});case 11:(0,g.Vc)(t.thread_id),F[n]&&clearTimeout(F[n]),f.Wb.emit("mediaEvent",{event:"answered",thread_id:t.thread_id,to:n}),f.Wb.emit("mediaEvent",{event:"self_reject",thread_id:t.thread_id,to:h.x6.user_id}),U[n]="1",setTimeout((function(){delete U[n]}),3e3),(0,v.lO)(),t.updateVideos();case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),(0,m.x)(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})))),(0,u.Z)((0,o.Z)(t),"callAccepted",(0,i.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.callActive=!0,t.stopCallRequest(),(0,g.Vc)(t.thread_id),t.setState({action:"call_in_progress"}),t.updateVideos(),t.privateCallStartEvent(),t.TryCallSuccesfull();case 7:case"end":return e.stop()}}),e)})))),(0,u.Z)((0,o.Z)(t),"endCallClick",(function(){f.Wb.emit("mediaEvent",{event:"call_end",to:t.state.user_id,thread_id:t.thread_id}),t.endCall()})),(0,u.Z)((0,o.Z)(t),"endCall",(0,i.Z)(p().mark((function e(){var n=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"reject"===(n.length>0&&void 0!==n[0]?n[0]:"")&&(U[t.state.user_id]||f.Wb.emit("mediaEvent",{event:"rejected",to:t.state.user_id,thread_id:t.thread_id}),t.isIncomingCall=!1),t.callActive||t.isIncomingCall||"outgoing_call"!==t.state.action||t.TryCallFailed(),(0,g.IK)(),t.setState({action:null,errorMessages:[]}),clearInterval(t.callTimer),t.FinishCallRecording(),t.stopCallRequest(),t.bmWrap.removeClass("bpbm-call-view"),t.chatContent.removeClass("bpbm-call-view"),h.tq&&t.chatContent.removeClass("bpbm-hide-chat"),t.disableFullScreen(),t.wrapper.hide(),t.stopAllTracks(),t.callActive=!1,t.peer&&(t.peer.destroy(),t.peer=!1,t.peersConnected=!1),clearTimeout(t.endCallTimeout),(0,v.wr)(),(0,g.Ve)();case 19:case"end":return e.stop()}}),e)})))),(0,u.Z)((0,o.Z)(t),"endCallTimeout",void 0),(0,u.Z)((0,o.Z)(t),"nextVideos",[]),(0,u.Z)((0,o.Z)(t),"switchVideos",(function(){if(t.anotherVideo&&t.anotherVideo2){var e=t.anotherVideo,n=t.anotherVideo2,i=t.anotherVideoType,r=t.anotherVideo2Type;t.anotherVideo=n,t.anotherVideo2=e,t.anotherVideoType=r,t.anotherVideo2Type=i,t.updateVideos()}})),(0,u.Z)((0,o.Z)(t),"updateAudios",(function(){var e={anotherAudio:null,anotherAudio2:null};t.anotherAudio&&(e.anotherAudio=t.anotherAudio),t.anotherAudio2&&(e.anotherAudio2=t.anotherAudio2),t.setState(e,(function(){e.anotherAudio&&t.anotherAudioRef.current&&(t.anotherAudioRef.current.srcObject!==e.anotherAudio&&(t.anotherAudioRef.current.srcObject=e.anotherAudio),I.X.selectedSpeakerDevice&&t.anotherAudioRef.current.setSinkId(I.X.selectedSpeakerDevice)),e.anotherAudio2&&t.anotherAudio2Ref.current&&(t.anotherAudio2Ref.current.srcObject!==e.anotherAudio2&&(t.anotherAudio2Ref.current.srcObject=e.anotherAudio2),I.X.selectedSpeakerDevice&&t.anotherAudio2Ref.current.setSinkId(I.X.selectedSpeakerDevice))}))})),(0,u.Z)((0,o.Z)(t),"callTimer",void 0),(0,u.Z)((0,o.Z)(t),"call_message_id",void 0),(0,u.Z)((0,o.Z)(t),"callLengthTimerRecorder",void 0),(0,u.Z)((0,o.Z)(t),"callLengthTimerRecorderFrequency",3),(0,u.Z)((0,o.Z)(t),"TryCallSuccesfull",(function(){clearTimeout(t.callingRequestLimitTimer),h.$.post(h.x6.ajaxUrl,{action:"bp_better_messages_register_started_call",thread_id:t.thread_id,message_id:t.call_message_id,type:t.type},(function(e){e.message_id&&(t.call_message_id=e.message_id)})),t.callLengthTimerRecorder=window.setInterval((function(){h.$.post(h.x6.ajaxUrl,{action:"bp_better_messages_register_call_usage",thread_id:t.thread_id,message_id:t.call_message_id,duration:t.state.callDuration/1e3})}),1e3*t.callLengthTimerRecorderFrequency),(0,v.wr)()})),(0,u.Z)((0,o.Z)(t),"callingRequestLimitTimer",void 0),(0,u.Z)((0,o.Z)(t),"callingRequestLimit",1e3*h.x6.callRequestTimeLimit),(0,u.Z)((0,o.Z)(t),"callingRequestLimitSeconds",0),(0,u.Z)((0,o.Z)(t),"callingRequestLimitSecondsInterval",void 0),(0,u.Z)((0,o.Z)(t),"startLimitTimer",(function(){clearTimeout(t.callingRequestLimitTimer),t.callingRequestLimitTimer=window.setTimeout((function(){t.endCall()}),t.callingRequestLimit),t.callingRequestLimitSeconds=0,clearInterval(t.callingRequestLimitSecondsInterval),t.callingRequestLimitSecondsInterval=window.setInterval((function(){t.callingRequestLimitSeconds++}),1e3)})),(0,u.Z)((0,o.Z)(t),"FinishCallRecording",(function(){clearInterval(t.callLengthTimerRecorder)})),t.wrapper=(0,h.$)(e.wrapper),e.wrapper.CallComponent=(0,o.Z)(t),t.myVideoRef=y.createRef(),t.myScreenRef=y.createRef(),t.anotherVideoRef=y.createRef(),t.anotherVideo2Ref=y.createRef(),t.anotherAudioRef=y.createRef(),t.anotherAudio2Ref=y.createRef(),t.fullScreenAvailable=j.fullscreenEnabled,t.state={action:null,user_id:0,showConfig:!1,micEnabled:!1,cameraEnabled:!1,screenShared:!1,configAvailable:I.X.configAvailable,configOpen:!1,myScreen:null,myVideo:null,anotherVideo:null,anotherVideo2:null,anotherAudio:null,anotherAudio2:null,name:null,avatar:null,errorMessages:[],picInPic:!1,callDuration:0,fullScreenEnabled:!1,tapped:!1},t}return(0,a.Z)(w,[{key:"componentDidMount",value:function(){this.setupVars(),this.deAttachListeners(),this.attachListeners(),this.wrapper.addClass("rendered")}},{key:"componentWillUnmount",value:function(){this.deAttachListeners(),this.endCall()}},{key:"render",value:function(){var e=this;return y.createElement(y.Fragment,null,y.createElement(B.ZP,{content:h.x6.strings.toggle_chat,theme:"bpbmtheme",appendTo:"parent",arrow:!1},y.createElement("span",{onClick:this.onToggleChatView,className:"bpbm-switch-chat"},y.createElement("i",{className:"fas fa-caret-left"}))),y.createElement("div",{onTouchStart:this.onTapped,className:(h.tq&&this.state.tapped?"bpbm-tapped ":"")+"bp-messages-video-container bp-messages-private-call bp-messages-call-container"},"call_in_progress"===this.state.action&&y.createElement("div",{className:"bp-messages-main-video"},this.state.anotherVideo&&!this.state.anotherVideo2&&y.createElement("video",{ref:this.anotherVideoRef,datatype:this.anotherVideoType,autoPlay:!0,playsInline:!0,className:"video1",muted:!1}),this.state.anotherVideo2&&y.createElement("video",{ref:this.anotherVideo2Ref,datatype:this.anotherVideo2Type,autoPlay:!0,playsInline:!0,className:"video2",muted:!1}),!this.state.anotherVideo&&!this.state.anotherVideo2&&y.createElement("div",{className:"bp-messages-main-placeholder"},y.createElement("div",{className:"bp-messages-call-animation"},y.createElement("span",{className:"avatar","data-user-id":"6"},y.createElement("img",{src:this.state.avatar,className:"avatar avatar-100 photo",width:"100",height:"100",alt:""}))),y.createElement("div",{className:"bp-messages-placeholder-message"},y.createElement("span",{className:"bp-messages-timer"},(0,g.Ej)(this.state.callDuration)))),this.state.anotherAudio&&y.createElement("audio",{ref:this.anotherAudioRef,autoPlay:!0,playsInline:!0,className:"audio1",muted:!1,style:{display:"none"}}),this.state.anotherAudio2&&y.createElement("audio",{ref:this.anotherAudio2Ref,autoPlay:!0,playsInline:!0,className:"audio2",muted:!1,style:{display:"none"}})),"call_in_progress"===this.state.action&&!!this.state.myVideo&&y.createElement(L(),{handle:"video"},y.createElement($,{width:100,height:"auto",resizeHandles:["nw"],className:"bp-messages-small-video"},y.createElement("video",{ref:this.myVideoRef,datatype:"camera",autoPlay:!0,playsInline:!0,muted:!0}))),this.state.anotherVideo&&this.state.anotherVideo2&&y.createElement(L(),{handle:"video"},y.createElement($,{width:100,height:"auto",resizeHandles:["ne"],className:"bp-messages-small-video-2"},y.createElement(y.Fragment,null,y.createElement("span",{className:"bm-switch-videos",onClick:this.switchVideos},y.createElement("i",{className:"fas fa-sync-alt"})),y.createElement("video",{ref:this.anotherVideoRef,datatype:this.anotherVideoType,autoPlay:!0,playsInline:!0,muted:!0})))),"call_in_progress"===this.state.action&&this.state.myScreen&&y.createElement(L(),{handle:"video"},y.createElement($,{width:100,height:"auto",resizeHandles:["sw"],className:"bp-messages-small-video-3"},y.createElement("video",{ref:this.myScreenRef,datatype:"screen",autoPlay:!0,playsInline:!0,muted:!0}))),("outgoing_call"===this.state.action||"incoming_call"===this.state.action)&&y.createElement(y.Fragment,null,!!this.state.myVideo&&!!this.state.myScreen&&y.createElement(L(),{handle:"video"},y.createElement($,{width:100,height:"auto",resizeHandles:["nw"],className:"bp-messages-small-video"},y.createElement("video",{ref:this.myVideoRef,datatype:"camera",autoPlay:!0,playsInline:!0,muted:!0}))),y.createElement("div",{className:"bp-messages-main-placeholder"},!!this.state.myVideo&&!this.state.myScreen&&y.createElement("div",{className:"bp-messages-placeholder-video"},y.createElement("video",{ref:this.myVideoRef,datatype:"camera",autoPlay:!0,playsInline:!0,muted:!0})),!!this.state.myScreen&&y.createElement("div",{className:"bp-messages-placeholder-video bm-video-contain"},y.createElement("video",{ref:this.myScreenRef,datatype:"screen",autoPlay:!0,playsInline:!0,muted:!0})),y.createElement("div",{className:"bp-messages-call-animation"},y.createElement("span",{className:"avatar","data-user-id":"6"},y.createElement("img",{src:this.state.avatar,className:"avatar avatar-100 photo",width:"100",height:"100",alt:""}))),y.createElement("div",{className:"bp-messages-placeholder-message"},"incoming_call"===this.state.action&&y.createElement("span",{className:"bp-messages-placeholder-incoming-text",style:{display:"none"}},h.x6.strings.incoming_call),"outgoing_call"===this.state.action&&y.createElement("span",{className:"bp-messages-placeholder-outgoing-text"},h.x6.strings.calling)),this.state.errorMessages.length>0&&y.createElement("div",{className:"bp-messages-placeholder-no-access-message"},y.createElement("div",{className:"bp-messages-placeholder-no-access-message-icon"},y.createElement("i",{className:"fas fa-exclamation-circle"})),y.createElement("div",{className:"bp-messages-placeholder-no-access-message-text"},this.state.errorMessages.map((function(e,t){return y.createElement("p",{key:"error_"+t,style:{margin:0}},e)})))))),y.createElement("div",{className:("call_in_progress"!==this.state.action||h.tq?"":"show-on-hover ")+("call_in_progress"===this.state.action&&h.tq?"show-on-tap ":"")+"bp-messages-call-controls"},!0===this.state.configOpen&&y.createElement("div",{className:"bpbm-call-settings"},I.X.renderCameraSwitch(),I.X.renderMicSwitch(),I.X.renderSpeakerSwitch()),y.createElement("div",{className:"bpbm-call-buttons"},"incoming_call"===this.state.action&&y.createElement(B.ZP,{content:h.x6.strings.answer,theme:"bpbmtheme",appendTo:"parent",arrow:!1},y.createElement("span",{onTouchStart:this.answerCall,onClick:this.answerCall,className:"bpbm-answer"},y.createElement("i",{className:"fas fa-phone"}))),this.state.configAvailable&&y.createElement(B.ZP,{content:h.x6.strings.config,theme:"bpbmtheme",appendTo:"parent",arrow:!1},y.createElement("span",{onClick:this.toggleConfig,className:"bpbm-configure-call"},y.createElement("i",{className:"fas fa-cog"}))),this.state.cameraEnabled&&y.createElement(B.ZP,{content:h.x6.strings.cam_d,theme:"bpbmtheme",appendTo:"parent",arrow:!1},y.createElement("span",{onClick:this.disableCamera,className:"bpbm-disable-video"},!this.iconsReverted&&y.createElement("i",{className:"fas fa-video-slash"}),this.iconsReverted&&y.createElement("i",{className:"fas fa-video"}))),!this.state.cameraEnabled&&y.createElement(B.ZP,{content:h.x6.strings.cam_e,theme:"bpbmtheme",appendTo:"parent",arrow:!1},y.createElement("span",{onClick:this.enableCamera,className:"bpbm-enable-video"},!this.iconsReverted&&y.createElement("i",{className:"fas fa-video"}),this.iconsReverted&&y.createElement("i",{className:"fas fa-video-slash"}))),this.state.micEnabled&&y.createElement(B.ZP,{content:h.x6.strings.mic_d,theme:"bpbmtheme",appendTo:"parent",arrow:!1},y.createElement("span",{onClick:this.disableMic,className:"bpbm-disable-mic"},!this.iconsReverted&&y.createElement("i",{className:"fas fa-microphone-slash"}),this.iconsReverted&&y.createElement("i",{className:"fas fa-microphone"}))),!this.state.micEnabled&&y.createElement(B.ZP,{content:h.x6.strings.mic_e,theme:"bpbmtheme",appendTo:"parent",arrow:!1},y.createElement("span",{onClick:this.enableMic,className:"bpbm-enable-mic"},!this.iconsReverted&&y.createElement("i",{className:"fas fa-microphone"}),this.iconsReverted&&y.createElement("i",{className:"fas fa-microphone-slash"}))),"call_in_progress"===this.state.action&&I.X.pictureInPicture&&(this.state.anotherVideo||this.state.anotherVideo2)&&y.createElement(y.Fragment,null,y.createElement(B.ZP,{content:h.x6.strings.pip,theme:"bpbmtheme",appendTo:"parent",arrow:!1},y.createElement("span",{onClick:this.switchPicInPic,className:"bpbm-pic-in-pic"},!this.state.picInPic&&y.createElement("i",{className:"far fa-window-restore"}),this.state.picInPic&&y.createElement(y.Fragment,null,y.createElement("i",{className:"fas fa-window-restore fa-stack-1x"}),y.createElement("i",{className:"fas fa-slash fa-stack-1x"}))))),I.X.screenShareSupport&&y.createElement(y.Fragment,null,!this.state.myScreen&&y.createElement(B.ZP,{content:h.x6.strings.ss_e,theme:"bpbmtheme",appendTo:"parent",arrow:!1},y.createElement("span",{onClick:this.enableShareScreen,className:"bpbm-switch-share-screen"},y.createElement("i",{className:"fas fa-desktop"}))),this.state.myScreen&&y.createElement(B.ZP,{content:h.x6.strings.ss_d,theme:"bpbmtheme",appendTo:"parent",arrow:!1},y.createElement("span",{onClick:this.disableShareScreen,className:"bpbm-switch-share-screen"},y.createElement("i",{className:"fas fa-desktop fa-stack-1x"}),y.createElement("i",{className:"fas fa-slash fa-stack-1x"})))),this.fullScreenAvailable&&y.createElement(y.Fragment,null,!this.state.fullScreenEnabled&&y.createElement(B.ZP,{content:h.x6.strings.fs_e,theme:"bpbmtheme",appendTo:"parent",arrow:!1},y.createElement("span",{onClick:this.enableFullScreen,className:"bpbm-fs-enable"},y.createElement("i",{className:"fas fa-expand"}))),this.state.fullScreenEnabled&&y.createElement(B.ZP,{content:h.x6.strings.fs_d,theme:"bpbmtheme",appendTo:"parent",arrow:!1},y.createElement("span",{onClick:this.disableFullScreen,className:"bpbm-fs-disable"},y.createElement("i",{className:"fas fa-expand fa-stack-1x"}),y.createElement("i",{className:"fas fa-slash fa-stack-1x"})))),"outgoing_call"===this.state.action&&y.createElement(B.ZP,{content:h.x6.strings.cancel,theme:"bpbmtheme",appendTo:"parent",arrow:!1},y.createElement("span",{onTouchStart:function(){return e.endCall()},onClick:function(){return e.endCall()},className:"bpbm-cancel bm-tippy-title"},y.createElement("i",{className:"fas fa-phone"}))),"incoming_call"===this.state.action&&y.createElement(B.ZP,{content:h.x6.strings.reject_call,theme:"bpbmtheme",appendTo:"parent",arrow:!1},y.createElement("span",{onTouchStart:function(){return e.endCall("reject")},onClick:function(){return e.endCall("reject")},className:"bpbm-cancel bm-tippy-title"},y.createElement("i",{className:"fas fa-phone"}))),"call_in_progress"===this.state.action&&y.createElement(B.ZP,{content:h.x6.strings.end_call,theme:"bpbmtheme",appendTo:"parent",arrow:!1},y.createElement("span",{onTouchStart:this.endCallClick,onClick:this.endCallClick,className:"bpbm-cancel bm-tippy-title"},y.createElement("i",{className:"fas fa-phone"})))))))}},{key:"setupVars",value:(d=(0,i.Z)(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.bmWrap=this.wrapper.closest(".bp-messages-wrap"),this.chatContent=this.wrapper.closest(".bpbm-chat-content"),this.thread_id=parseInt(this.bmWrap.attr("data-thread-id")),isNaN(this.thread_id)&&(this.thread_id=parseInt(this.bmWrap.attr("data-thread"))),t=this.wrapper.data("avatar"),n=this.wrapper.data("user-id"),this.setState({user_id:n,avatar:t});case 7:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"attachListeners",value:function(){var e=this;this.bmWrap.on("click",".chat-header .video-call",this.startCall),this.bmWrap.on("click",".chat-header .audio-call",this.startCall),this.wrapper.on("change",".bp-messages-call-controls .bpbm-switch-camera-select",this.cameraChanged),this.wrapper.on("change",".bp-messages-call-controls .bpbm-switch-mic-select",this.micChanged),this.wrapper.on("change",".bp-messages-call-controls .bpbm-switch-audio-select",this.speakerChanged),document.addEventListener("bp-better-messages-media-updated",this.onMediaUpdate),document.addEventListener("bpbm-end-call",(function(){return e.endCall()})),j.addEventListener("fullscreenchange",this.onFullScreenChange)}},{key:"deAttachListeners",value:function(){var e=this;this.bmWrap.off("click",".chat-header .video-call",this.startCall),this.bmWrap.off("click",".chat-header .audio-call",this.startCall),this.wrapper.off("change",".bp-messages-call-controls .bpbm-switch-camera-select",this.cameraChanged),this.wrapper.off("change",".bp-messages-call-controls .bpbm-switch-mic-select",this.micChanged),this.wrapper.off("change",".bp-messages-call-controls .bpbm-switch-audio-select",this.speakerChanged),document.removeEventListener("bp-better-messages-media-updated",this.onMediaUpdate),document.removeEventListener("bpbm-end-call",(function(){return e.endCall()})),j.removeEventListener("fullscreenchange",this.onFullScreenChange)}},{key:"addStream",value:function(e){if(this.peersConnected){var t=e.getTracks().filter((function(e){return"video"===e.kind}));t.length>0&&this.peer.send(JSON.stringify({type:"publishStream",contentHint:"detail"===t[0].contentHint?"screen":"camera"})),this.peer.addStream(e)}else this.predefinedStreams.push(e)}},{key:"removeStream",value:function(e){var t=this;this.peersConnected?this.peer.removeStream(e):this.predefinedStreams.map((function(n,i){e.id===n.id&&delete t.predefinedStreams[i]}))}},{key:"startPeerIfNotStarted",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!1!==this.peer)return!1;var t=this;try{var n=h.x6.turn_server,i=[{urls:"stun:"+n+":80"},{urls:["turn:"+n+":80","turns:"+n+":443"],username:"wordplus",credential:"password"},{urls:"stun:stun.l.google.com:19302"}];this.peer=new M({initiator:e,config:{iceServers:i},preferredCodecs:[]}),this.peer.participant=this.state.user_id,this.peer.on("error",(function(e){console.error("error",e),t.endCall(),t.endCallTimeout=window.setTimeout((function(){(0,m.s)(h.x6.strings.connection_drop)}),3e3)})),this.peer.on("signal",(function(e){f.Wb.emit("mediaEvent",{event:"peer_signal",to:t.state.user_id,thread_id:t.thread_id,data:JSON.stringify(e)})})),this.peer.on("connect",(function(){t.peersConnected=!0,t.predefinedStreams.length>0&&(t.predefinedStreams.forEach((function(e){var n=e.getTracks().filter((function(e){return"video"===e.kind}));n.length>0&&t.peer.send(JSON.stringify({type:"publishStream",contentHint:"detail"===n[0].contentHint?"screen":"camera"})),t.peer.addStream(e)})),t.predefinedStreams=[])})),this.peer.on("data",(function(e){"publishStream"===(e=JSON.parse(e.toString())).type&&t.nextVideos.push(e.contentHint)})),this.peer.on("close",(function(){t.peersConnected=!1,t.callActive&&t.endCall()})),this.peer.on("track",(function(e,n){t.addRemoteTrack(e,n)}))}catch(e){console.error(e)}}},{key:"addRemoteTrack",value:function(e,t){var n=this,i=this;"video"===e.kind&&(this.anotherVideo?(this.anotherVideo2=t,this.nextVideos.length>0&&(this.anotherVideo2Type=this.nextVideos.shift()),e.addEventListener("mute",(function(){i.anotherVideo2=!1,i.updateVideos()})),e.addEventListener("unmute",(function(){i.anotherVideo2=t,i.updateVideos()})),e.addEventListener("ended",(function(){i.updateVideos()}))):(this.anotherVideo=t,this.nextVideos.length>0&&(this.anotherVideoType=this.nextVideos.shift()),e.addEventListener("mute",(function(){i.anotherVideo=!1,i.updateVideos()})),e.addEventListener("unmute",(function(){i.anotherVideo=t,i.updateVideos()})),e.addEventListener("ended",(function(){i.updateVideos()}))),this.updateVideos()),"audio"===e.kind&&0===t.getVideoTracks().length&&(this.anotherAudio?(e.addEventListener("mute",(function(){i.anotherAudio2=!1,i.updateAudios()})),e.addEventListener("unmute",(function(){n.anotherAudio2=t,i.updateAudios()})),e.addEventListener("ended",(function(){i.anotherAudio2=!1,i.updateAudios()}))):(e.addEventListener("mute",(function(){i.anotherAudio=!1,i.updateAudios()})),e.addEventListener("unmute",(function(){n.anotherAudio=t,i.updateAudios()})),e.addEventListener("ended",(function(){i.anotherAudio=!1,i.updateAudios()}))),i.updateAudios())}},{key:"updateVideos",value:(n=(0,i.Z)(p().mark((function e(){var t,n=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={myVideo:!1,myScreen:!1,anotherVideo:!1,anotherVideo2:!1},I.X.localVideoTrack&&(t.myVideo=I.X.localVideoTrack),I.X.screenVideoTrack&&(t.myScreen=I.X.screenVideoTrack),this.anotherVideo&&(t.anotherVideo=this.anotherVideo),this.anotherVideo2&&(t.anotherVideo2=this.anotherVideo2),this.setState(t,(function(){t.myVideo&&n.myVideoRef.current&&n.myVideoRef.current.srcObject!==t.myVideo.mediaStream&&(n.myVideoRef.current.srcObject=t.myVideo.mediaStream),t.myScreen&&n.myScreenRef.current&&n.myScreenRef.current.srcObject!==t.myScreen.mediaStream&&(n.myScreenRef.current.srcObject=t.myScreen.mediaStream),t.anotherVideo&&n.anotherVideoRef.current&&n.anotherVideoRef.current.srcObject!==t.anotherVideo&&(n.anotherVideoRef.current.srcObject=t.anotherVideo),t.anotherVideo2&&n.anotherVideo2Ref.current&&n.anotherVideo2Ref.current.srcObject!==t.anotherVideo2&&(n.anotherVideo2Ref.current.srcObject=t.anotherVideo2)}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"stopAllTracks",value:(t=(0,i.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={myVideo:null,myScreen:null,anotherVideo:null,anotherVideo2:null,anotherAudio:null,anotherAudio2:null,cameraEnabled:!1,micEnabled:!1,screenShared:!1},I.X.stopLocalVideoTrack(),I.X.stopLocalMicrophoneTrack(),I.X.stopLocalScreenVideoTrack(),this.anotherVideo=!1,this.anotherVideo2=!1,this.anotherVideoType=!1,this.anotherVideo2Type=!1,this.anotherAudio=!1,this.anotherAudio2=!1,e.next=12,this.setState(t);case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"privateCallStartEvent",value:function(){var e=this;document.dispatchEvent(new CustomEvent("bp-better-messages-private-call-start",{detail:{type:this.type}})),(0,v.wr)(),this.setState({callDuration:0}),this.callTimer=window.setInterval((function(){e.setState({callDuration:e.state.callDuration+1e3})}),1e3)}},{key:"tryCallOfflineNotification",value:function(){(0,m.x)(h.x6.strings.call_offline),"1"===h.x6.offlineCallsNotifications&&h.$.post(h.x6.ajaxUrl,{action:"bp_better_messages_record_offline_call",type:this.type,thread_id:this.thread_id,user_id:this.state.user_id})}},{key:"TryCallFailed",value:function(){if(clearTimeout(this.callingRequestLimitTimer),clearInterval(this.callingRequestLimitSecondsInterval),0!==this.callingRequestLimitSeconds){var e=this.callingRequestLimitSeconds+1;this.callingRequestLimitSeconds=0,h.$.post(h.x6.ajaxUrl,{action:"bp_better_messages_record_missed_call",thread_id:this.thread_id,type:this.type,message_id:this.call_message_id,duration:e})}}}]),w}(y.Component),q=!1;function W(){if(q)return!1;q=!0,Q()}function H(e){if(e=(0,h.$)(e),h.tq)"1"===h.x6.autoFullScreen&&(0,b.Q4)(e);else{var t=80+parseInt(h.x6.fixedHeaderHeight);(0,h.$)("html, body").animate({scrollTop:e.offset().top-t},500)}}function Q(){return X.apply(this,arguments)}function X(){return(X=(0,i.Z)(p().mark((function e(){var t,n,i,r,a,o,s,c,l,u,d,m;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===f.Wb||f.Wb.connected){e.next=5;break}setTimeout(Q,500),e.next=44;break;case 5:if(t=window.location.search,n=new URLSearchParams(t),i="videoCall",r="audioCall",a="acceptCall",o="scrollToContainer",s=n.get(i),c=n.get(r),l=n.get(a),u=n.get(o),0===(d=(0,h.$)(".bp-messages-wrap.bp-messages-wrap-main")).length&&(d=(0,h.$)(".bp-messages-wrap.bp-messages-group-thread")),!(d.length>0)){e.next=43;break}if(m=!1,"string"!=typeof s){e.next=30;break}case 20:if(0!==d.find(".bp-messages-call-wrap-private.rendered").length){e.next=25;break}return e.next=23,(0,g.Vs)(200);case 23:e.next=20;break;case 25:d.find(".chat-header .video-call").click(),H(d),m=!0,e.next=42;break;case 30:if("string"!=typeof c){e.next=41;break}case 31:if(0!==d.find(".bp-messages-call-wrap-private.rendered").length){e.next=36;break}return e.next=34,(0,g.Vs)(200);case 34:e.next=31;break;case 36:d.find(".chat-header .audio-call").click(),H(d),m=!0,e.next=42;break;case 41:"string"==typeof l?(H(d),m=!0):"string"!=typeof u&&-1===t.indexOf(o)||(H(d),m=!0);case 42:m&&(n.delete(i),n.delete(r),n.delete(a),n.delete(o),window.history.pushState("","","?"+n.toString()));case 43:setTimeout((function(){q=!1}),1e3);case 44:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1276:(e,t,n)=>{"use strict";n.d(t,{$Z:()=>p,$w:()=>l,EI:()=>d,hG:()=>u,z9:()=>s});var i=n(5474),r=n(3167),a=n(5425),o=!1;function s(){if("0"===i.x6.user_id)return!1;if(clearInterval(i.Rl.checkerTimer),i.Rl.checkerTimer=setTimeout(s,i.x6.threadRefresh),"1"!=i.x6.realtime&&!o){var e=(0,r.EY)("bp-messages-last-check"),t=(0,i.$)(".messages-stack:last-child .messages-list li:last-child").attr("data-time");o=!0,i.$.post(i.x6.ajaxUrl,{action:"bp_messages_thread_check_new",last_check:e,thread_id:i.Rl.thread,last_message:t},(function(e){i.$.each(e.messages,(function(){"string"==typeof this.avatar&&(this.avatar=this.avatar.replace("loading='lazy'","").replace('loading="lazy"',"")),(0,a.F$)(this)})),i.$.each(e.threads,(function(){"string"==typeof this.avatar&&(this.avatar=this.avatar.replace("loading='lazy'","").replace('loading="lazy"',"")),(0,a.PV)(this.thread_id,this.message,this.name,this.avatar)})),(0,r.PE)(e.total_unread),o=!1}))}}(0,i.$)(document).on("bp-better-messages-refresh-thread",(function(e){s()}));var c=!1;function l(){if(clearInterval(i.Rl.checkerTimer),i.Rl.checkerTimer=window.setTimeout(l,i.x6.siteRefresh),"1"!=i.x6.realtime&&!c){var e=(0,r.EY)("bp-messages-last-check");c=!0,i.$.post(i.x6.ajaxUrl,{action:"bp_messages_check_new",last_check:e},(function(e){e.threads.length>0&&i.$.each(e.threads,(function(){var e=this;"string"==typeof e.avatar&&(e.avatar=e.avatar.replace("loading='lazy'","").replace('loading="lazy"',"")),(0,r.$$)(e),i.Rl.threads||(0,a.PV)(e.thread_id,e.message,e.name,e.avatar)})),(0,r.PE)(e.total_unread),c=!1}))}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getElements(),r=(0,i.$)(n.host);if(r.hasClass("loadingAtTheMoment")||r.hasClass("allMessagesWasLoaded"))return!1;var o=r.data("id");r.find(".loading-messages").show(),r.addClass("loadingAtTheMoment");var s=r.find(".messages-stack:first-child .messages-list li:first-child"),c=s.attr("data-id");i.$.post(i.x6.ajaxUrl,{action:"bp_messages_thread_load_messages",thread_id:o,message_id:c},(function(n){if(r.find(".loading-messages").hide(),""===n.trim()&&r.addClass("allMessagesWasLoaded"),(0,i.$)(n).prependTo(r.find(".list")),r.addClass("hasLoadedMessages"),""!==n.trim()){var o=r.find(".loading-messages").height()+15;e.scroll({el:s.closest(".messages-stack"),margin:o}),(0,a.hM)(),r.removeClass("loadingAtTheMoment"),t&&0===e.scroll().max.y&&u(e,!0)}}))}function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,i.$)(e);if(n.hasClass("loading-more")||n.hasClass("all-loaded"))return!1;n.addClass("loading-more"),n.find(".loading-messages").show();var r=[],a=n.find(".loading-messages");n.find(".threads-list > .thread").each((function(){r.push((0,i.$)(this).data("id"))}));var o={action:"bp_messages_get_more_threads",loaded_threads:r,user_id:i.x6.displayed_user_id};n.closest(".bp-messages-wrap").hasClass("bp-better-messages-list")&&(o.user_id=i.x6.user_id),i.$.post(i.x6.ajaxUrl,o,(function(r){(0,i.$)(r).insertBefore(a),n.removeClass("loading-more"),n.find(".loading-messages").hide(),""===r.trim()?n.addClass("all-loaded"):t&&Math.ceil(e.get(0).scrollHeight)<=Math.ceil(e.innerHeight())&&d(e,!0)}))}function p(e){i.$.each(e,(function(){var e=(0,i.$)('.bp-messages-wrap .list .messages-stack .content .messages-list li[data-id="'+this+'"]'),t=e.closest(".messages-stack");e.remove(),0===t.find(".messages-list > li").length&&t.remove(),(0,i.$)(i.St+'[data-message="'+this+'"] .info p').text("...")}))}},5425:(e,t,n)=>{"use strict";n.d(t,{hM:()=>y,F$:()=>_,PV:()=>A});var i=n(4942),r=n(5474),a=n(9299),o=n(6262),s=n(3167),c=n(1276),l=n(2380),u=n(5224),d=n(885),p=n(2421);function h(){var e=r.x6.reactions;if(void 0===e)return!1;var t='<span class="bm-reactions-selector">';jQuery.each(e,(function(e,n){t+='<span title="'+n+'" data-unicode="'+e+'" class="bm-reaction-icon"><img alt="'+n+'" src="https://cdn.bpbettermessages.com/emojies/6.6/png/unicode/32/'+e+'.png"></span>'})),t+="</span>",jQuery(".bp-messages-wrap .list .messages-stack .content .messages-list > li:not(.my) .message-content:not(.bm-reactions-selector-added)").each((function(){jQuery(this).addClass("bm-reactions-selector-added").append(t);var e=jQuery(this).find(".bm-reactions-selector");r.tq&&(e.on("mouseenter",(function(){var e=(0,r.$)(this);setTimeout((function(){e.addClass("bm-reactions-selector-hover")}),500)})),e.on("mouseleave",(function(){var e=(0,r.$)(this);setTimeout((function(){e.removeClass("bm-reactions-selector-hover")}),500)}))),e.on("click",".bm-reaction-icon",(function(e){e.preventDefault();var t=(0,r.$)(this),n=t.closest("li"),i=t.attr("data-unicode"),a=n.attr("data-id"),o=n.find(".message-content"),s=t.closest(".bm-reactions-selector");if(r.tq&&!s.hasClass("bm-reactions-selector-hover"))return!1;r.$.post(r.x6.ajaxUrl,{action:"bp_messages_add_reaction",message_id:a,unicode:i,nonce:r.x6.userNonce},(function(e){if(!0===e.success){var t=e.data,n=o.find(".bm-reactions");n.length>0?n.replaceWith(t):o.append(t)}}))}))}))}var f=n(1731),m=n(6904),g=n(3714);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var b=window.joypixels;function y(){r.Rl.thread=!1,r.Rl.threads=!1,r.Rl.reIniting=!0,clearTimeout(r.Rl.checkerTimer),"1"!==r.x6.realtime&&(0,s.PE)(r.x6.total_unread),document.dispatchEvent(new r.D0("bp-better-messages-reinit-start")),(0,s.v2)(),(0,s.a_)(),(0,r.$)(".bp-messages-wrap:not(.bp-better-messages-mini,.bp-better-messages-list,.bp-better-messages-secondary) .thread.bm-infodiv").length>0?r.Rl.thread=(0,r.$)(".bp-messages-wrap:not(.bp-better-messages-mini,.bp-better-messages-list,.bp-better-messages-secondary) .thread.bm-infodiv[data-id]").attr("data-id"):(0,r.$)(".bp-messages-wrap:not(.bp-better-messages-mini,.bp-better-messages-list,#bp-better-messages-mini-mobile-container,.bp-better-messages-secondary) .threads-list").length>0&&(r.Rl.threads=!0),r.Rl.thread?r.Rl.checkerTimer=window.setTimeout(c.z9,r.x6.threadRefresh):r.Rl.checkerTimer=window.setTimeout(c.$w,r.x6.siteRefresh),"1"===r.x6.miniChats&&r.$.each(r.Rl.miniChats,(function(e){e!==r.Rl.thread?(0,g.TK)(e,this):(0,r.$)('.bp-messages-wrap.bp-better-messages-mini .chats .chat[data-thread="'+r.Rl.thread+'"]').remove()})),!1!==r.Rl.miniMessages?((0,r.$)(".bp-better-messages-list").addClass("bp-better-messages-list-open"),(0,r.$)('.bp-better-messages-list .tabs > div[data-tab="'+r.Rl.miniMessages+'"]').addClass("active"),(0,r.$)(".bp-better-messages-list .tabs-content ."+r.Rl.miniMessages).addClass("active"),(0,r.$)('.bp-better-messages-list .tabs > div[data-tab="bpbm-close"]').show(),(0,l.e)(String(r.Rl.miniMessages))):((0,r.$)(".bp-better-messages-list").removeClass("bp-better-messages-list-open"),(0,r.$)('.bp-better-messages-list .tabs > div[data-tab="bpbm-close"]').hide());var e="ltr";r.Rl.isRtl&&(e="rtl");var t={toolbar:{allowMultiParagraphSelection:!1,buttons:["bold","italic","underline","strikethrough","subscript","superscript","removeFormat"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",relativeContainer:!1,standardizeSelectionStart:!1,static:!1,align:"center",sticky:!1,updateOnEmptySelection:!0},placeholder:!1,imageDragging:!1,extensions:{mention:new BMTCMention({tagName:"span",renderPanelContent:function(e,t,n,i){var a=(0,r.$)(e),o=t.substring(1).toLowerCase(),s=(0,r.$)(i.base.elements[0]).closest(".bpbm-chat-content").find(".bm-infodiv[data-id]").attr("data-id"),c={};function l(e){var t=[];if(r.$.each(e,(function(e,n){r.x6.user_id!==e&&-1!==n.name.toLowerCase().indexOf(o)&&t.push('<li data-user-id="'+e+'" data-label="'+n.name+'">'+n.avatar+" "+n.name+"</li>")})),t.length>0){var i="<ul>";i+=t.join(""),i+="</ul>",a.html(i),a.find("> ul > li").click((function(e){e.preventDefault(),e.stopImmediatePropagation();var t=(0,r.$)(this),i=t.attr("data-user-id"),a=t.attr("data-label"),o=(0,r.$)(".bm-medium-editor-mention-at-active");o.attr("data-user-id",i),o.text("@"+a),o.addClass("bm-medium-editor-mention-user-"+i),n()})),a.show()}else a.hide()}void 0===c[s]&&(c[s]={}),void 0!==c[s][o]?l(c[s][o]):(a.html('<i class="fas fa-spinner fa-spin"></i>'),r.$.post(r.x6.ajaxUrl,{action:"bm_get_thread_mentions_suggestions",thread_id:s,search:o,nonce:r.x6.userNonce},(function(e){c[s][e.search]=e.users,l(e.users)})))},activeTriggerList:["@"]})}};function n(e,t){var n=document.createRange(),i=window.getSelection();n.setStart(e,t),n.collapse(!0),i.removeAllRanges(),i.addRange(n)}function f(e){e.subscribe("focus",(function(e,t){var i=(0,r.$)(t);0===t.childNodes.length&&(i.html("<p></p>"),n(t.childNodes[0],0),t.focus())})),e.subscribe("editableInput",(function(e,t){var i=(0,r.$)(t);i.hasClass("bm-mobile-area")&&i.next().trigger("change");var a=t.childNodes;if(a.length>0){var o=a[a.length-1];"<p><br></p>"===o.outerHTML&&(n(o,0),t.focus())}i.find("font").removeAttr("color")})),e.subscribe("editablePaste",(function(e,t){var n=(0,r.$)(t).closest(".reply");if(n.find("form > .message").hasClass("file-uploader-enabled")){var i=(0,s.qo)(event.clipboardData.items),a=[];if(i.forEach((function(e){if("file"===e.kind){var t=e.getAsFile();t&&a.push({name:e.name,type:e.type,data:t})}})),a.length>0){var o=n.find('input[name="thread_id"]').val();n.find(".upload-btn").click();var c=(0,r.$)("body > .uppy.uppy-thread-"+o);c.length>0&&(c=c[0].uppy,a.forEach((function(e){var t={source:c.id,type:e.type,data:e.data};void 0!==e.name&&"undefined"!==e.name?t.name=e.name:t.name="",c.addFile(t).catch((function(){}))})))}}}))}r.tq||(0,r.$)("body").hasClass("bp-messages-mobile")?((0,r.$)(".bp-messages-wrap.mobile-ready .reply .message textarea").each((function(){var e=(0,r.$)(this),n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t);e.attr("data-placeholder",e.attr("placeholder")),n.placeholder=!0,setTimeout((function(){var t=new BPBM_MediumEditor(e,n);(0,r.$)(t.elements[0]).addClass("bm-mobile-area"),f(t)}),333)})),(0,s.Q2)()):(0,r.$)(".bp-messages-wrap .reply .message textarea, .bp-messages-wrap .new-message #message-input, .bp-messages-wrap .bulk-message #message-input").each((function(){var t=(0,r.$)(this);if(!t.hasClass("bp-emoji-area-launched")){t.addClass("bp-emoji-area-launched");var n=t.BPemojioneArea({tones:!0,tonesStyle:"bullet",saveEmojisAs:"unicode",autocomplete:!1,stayFocused:!1,attributes:{dir:e}});if(void 0!==n[0]){n.closest("form").addClass("bp-emoji-enabled");try{n[0].BPemojioneArea.on("onLoad",(function(){_(n)}))}catch(e){}setTimeout(_,333)}}}));var y=!1;function _(e){if(!0===y)return!1;e.next(".bp-emojionearea").length>0?(y=!0,(0,s.Q2)(),f(new BPBM_MediumEditor(document.querySelectorAll(".bp-emojionearea-editor"),t)),(0,r.$)(e).html("<p></p>")):setTimeout(_,333)}if("function"==typeof r.$.fn.BPBMoverlayScrollbars&&((0,r.$)(document).on("bp-better-messages-init-scrollers",(function(){(0,r.$)(".bpbm-users-avatars-list").BPBMoverlayScrollbars({sizeAutoCapable:!0,overflowBehavior:{x:"scroll",y:"hidden"},scrollbars:{clickScrolling:!0,autoHide:"leave"}}),(0,r.$)(".bp-messages-wrap div.new-message").BPBMoverlayScrollbars({sizeAutoCapable:!0,overflowBehavior:{x:"hidden"}}),(0,r.$)(".bpbm-stickers-selector .bpbm-stickers-head .bpbm-stickers-tabs").BPBMoverlayScrollbars({sizeAutoCapable:!1,overflowBehavior:{y:"hidden"}}),(0,r.$)(".scroller.thread").BPBMoverlayScrollbars({sizeAutoCapable:!1,autoUpdate:!0,overflowBehavior:{x:"hidden"},callbacks:{onInitialized:function(){var e=this,t=this.getElements(),n=this.scroll(),i=(0,r.$)(this.getElements().host),a=n.max.y,o=!1;if((0,s.ak)("message_id").length>0){var l=(0,s.ak)("message_id"),u=(0,r.$)(t.content).find(".messages-list li[data-id='"+l+"']");u.length>0&&(o=u)}setTimeout((function(){var t=(0,r.$)('<span class="bpbm-scroll-down"><i class="fas fa-chevron-down"></i></span>').prependTo(i);t.on("click touchstartPassive",(function(n){e.scrollStop(),e.scroll({y:"100%"}),t.removeClass("bpbm-shown"),t.addClass("bmbm-blocked"),setTimeout((function(){t.removeClass("bmbm-blocked")}),1e3)}))}),1e3),!1!==o?((0,r.$)(e.getElements().host).addClass("user-scrolled"),e.scroll({el:o,scroll:"ifneeded",margin:20})):(0,r.$)(t.host).is(":visible")&&0===a?(0,c.hG)(this,!0):(e.scrollStop(),e.scroll({y:"100%"}))},onScroll:function(e){var t=this.scroll(),n=t.position.y,i=t.max.y,a=(0,r.$)(this.getElements().host),o=a.find(".bpbm-scroll-down:not(.bmbm-blocked)");i-n>2*a.height()?o.addClass("bpbm-shown"):o.removeClass("bpbm-shown"),0===i?((0,c.hG)(this,!0),a.addClass("user-scrolled")):0===n?((0,c.hG)(this),a.addClass("user-scrolled")):n>=i&&setTimeout((function(){n=t.position.y,i=t.max.y,n>=i&&a.removeClass("user-scrolled")}),300)},onContentSizeChanged:function(e){var t=this.getElements(),n=this.scroll(),i=n.max.y,a=n.position.y,o=(0,r.$)(t.host),s=(0,r.$)(t.content).find(".list .messages-stack:last .content .messages-list li:last").outerHeight();s<100&&(s=100);var c=this;(!o.hasClass("user-scrolled")||i-a<s+50)&&(r.Rl.isTapped||(c.scrollStop(),c.scroll({y:"100%"},100,void 0,(function(){})))),setTimeout((function(){o.hasClass("user-scrolled")||r.Rl.isTapped||(c.scrollStop(),c.scroll({y:"100%"},100,void 0,(function(){})))}),100)},onHostSizeChanged:function(){var e=this,t=this.scroll(),n=t.position.y,i=t.max.y;(0,r.$)(e.getElements().host).hasClass("user-scrolled")||(0,r.$)("body").hasClass("bpbm-os-dragging")?n>=i&&setTimeout((function(){n=t.position.y,i=t.max.y,n>=i&&(0,r.$)(e.getElements().host).removeClass("user-scrolled")}),300):(this.scrollStop(),this.scroll({y:"100%"},0))}}}),(0,r.$)(".scroller.threads-list-wrapper").BPBMoverlayScrollbars({sizeAutoCapable:!1,overflowBehavior:{x:"hidden"},callbacks:{onInitialized:function(){},onScroll:function(e){var t=this.getElements(),n=this.scroll(),i=n.position.y,a=n.max.y,o=(0,r.$)(t.host);a-i<=100&&(0,c.EI)(o)},onContentSizeChanged:function(e){}}}),(0,r.$)(".bp-better-messages-list .tabs-content .scroller,.scroller.search, .scroller.starred").BPBMoverlayScrollbars({sizeAutoCapable:!1,overflowBehavior:{x:"hidden"}}),a.Wb&&a.Wb.emit("requestUnread")})),document.dispatchEvent(new CustomEvent("bp-better-messages-init-scrollers"))),(0,r.$)(".scrollbar-inner").on("touchstartPassive click mousewheelPassive DOMMouseScroll",(function(e){0===(0,r.$)(e.target).closest(".bpbm-reply").length&&(0,r.$)(this).addClass("user-scrolled")})),(0,s.No)(),"1"==r.x6.realtime){var A=[],w=[];(0,r.$)(".bp-messages-wrap:not(.bp-better-messages-mini,.bp-better-messages-list,.bp-better-messages-secondary) .list .messages-stack .content .messages-list li:not(.seen), .bp-messages-wrap.bp-better-messages-mini .chat.open .list .messages-stack .content .messages-list li:not(.seen)").each((function(){var e=(0,r.$)(this).data("id"),t=(0,r.$)(this).data("thread");A.push(e),w.push(t)})),r.Rl.thread&&(0,s.HL)(r.Rl.thread),(0,g.df)();var k=[];(0,r.$)(".bp-messages-wrap .list:not(.synced) .messages-stack:last-child .messages-list > li:last-child").each((function(){(0,r.$)(this).closest(".list").addClass("synced"),k.push({time:parseInt((0,r.$)(this).attr("data-time")),message_id:parseInt((0,r.$)(this).attr("data-id"))})})),k.length,"1"===r.x6.messagesStatus&&A.length>0&&a.Wb.emit("getStatuses",A,(function(e){var t={};r.$.each(A,(function(){t[this]=!0})),r.$.each(e,(function(e){delete t[e];var n=(0,r.$)('.bp-messages-wrap .list .messages-stack .content .messages-list li[data-id="'+e+'"]');if(n.removeClass("sent delivered seen"),n.hasClass("my")||n.hasClass("fast")){var i="sent";r.$.each(this,(function(){if("seen"==i)return!1;"delivered"==this&&"seen"!=i&&(i="delivered"),"seen"==this&&(i="seen")})),n.addClass(i);var o="";switch(i){case"sent":o=r.x6.strings.sent;break;case"delivered":o=r.x6.strings.delivered;break;case"seen":o=r.x6.strings.seen}n.find(".status").attr("title",o),(0,g.mU)(n)}else"seen"!==this.toString()&&a.Wb.emit("seen",[e])})),r.$.each(t,(function(e){var t=(0,r.$)('.bp-messages-wrap .list .messages-stack .content .messages-list li[data-id="'+e+'"]');t.removeClass("sent delivered seen"),t.addClass("seen"),t.find(".status").attr("title",r.x6.strings.seen),(0,g.mU)(t)}))})),w=(0,s.Tw)(w),r.$.each(w,(function(e,t){void 0!==t&&(0,s.HL)(t)})),a.Wb.emit("requestUnread")}if((0,s.Q2)(),(0,r.$)(window).on("resize",(function(){(0,s.Q2)()})),(0,r.$)(".bp-messages-wrap #send-to:not(.ready)").length>0){var S=new Map,C={valueField:"value",labelField:"label",searchField:"label",delimiter:",",create:!0,loadThrottle:300,closeAfterSelect:!0,openOnFocus:!1,plugins:["remove_button"],render:{option:function(e,t){var n="";try{return void 0!==(e=JSON.parse(e.label)).img&&(n+='<span class="bpbm-avatar"><img src="'+t(e.img)+'" class="avatar photo" width="50" height="50"></span>'),"<div>"+n+'<span class="bpbm-name">'+t(e.label)+"</span></div>"}catch(e){}return void 0!==e.img&&(n+='<span class="bpbm-avatar">'+e.img+"</span>"),void 0!==e.label?"<div>"+n+'<span class="bpbm-name">'+t(e.label)+"</span></div>":"<div></div>"},option_create:function(e,t){return'<div class="create"><strong>'+t(e.input)+"</strong></div>"},item:function(e,t){var n="";if(S.has(e.value)){var i=S.get(e.value);return void 0!==i.img&&(n+='<span class="bpbm-avatar"><img src="'+t(i.img)+'" class="avatar photo" width="50" height="50"></span>'),'<div><span class="bpbm-avatar">'+n+'</span><span class="bpbm-name">'+t(i.label)+"</span></div>"}return void 0!==e.label?(void 0!==e.img&&(n+='<span class="bpbm-avatar">'+e.img+"</span>"),"<div>"+n+'<span class="bpbm-name">'+t(e.label)+"</span></div>"):'<div><span class="bpbm-name">'+t(e.value)+"</span></div>"}},formatValueToKey:function(e){try{var t=JSON.parse(e);return S.set(t.value,t),t.value}catch(e){}return e},onChange:function(e){(0,r.$)('input[name="recipients[]"]').remove();var t=e.split(",");r.$.each(t,(function(){(0,r.$)('<input type="hidden" name="recipients[]" value="'+this+'">').insertAfter((0,r.$)("#send-to"))}))}};"0"===r.x6.disableUsersSearch&&((0,r.$)(".bpbm-users-avatars-list .bpbm-users-avatars-list-item").click((function(e){e.preventDefault();var t=(0,r.$)(this),n=t.find(".bpbm-users-avatars-list-item-name").text(),i=t.find(".bpbm-users-avatars-list-item-avatar img").attr("src"),a=t.attr("data-nicename");(0,r.$)("#send-to")[0].bmselectize.createItem(JSON.stringify({value:a,img:i,label:n}))})),C.load=function(e,t){if(!e.length)return t();r.$.ajax({url:r.x6.ajaxUrl+"?q="+encodeURIComponent(e)+"&limit=10&action=bp_messages_autocomplete&cookie="+(0,s.ML)(),type:"GET",error:function(){t()},success:function(e){t(e)}})});var x=(0,r.$)("#send-to").bmselectize(C),E=(0,r.$)('input[name="to"]');E.length>0&&(0,r.$)(E).each((function(){var e=(0,r.$)(this).data("img"),t=(0,r.$)(this).data("label");x[0].bmselectize.createItem(JSON.stringify({value:(0,r.$)(this).val(),img:e,label:t})),(0,r.$)(this).remove()}))}void 0!==r.Rl.bpMessagesWrap&&r.Rl.bpMessagesWrap.find(".bp-messages-mobile-tap").css("line-height",r.Rl.bpMessagesWrap.height()+"px"),(0,r.$)(".bp-messages-side-threads .threads-list .thread.bp-messages-active-thread").removeClass("bp-messages-active-thread"),r.Rl.thread&&(0,r.$)('.bp-messages-side-threads .threads-list .thread[data-id="'+r.Rl.thread+'"]').addClass("bp-messages-active-thread");var T={},P={},R={show:function(e){e.$trigger.closest("li").addClass("selected")},hide:function(e){e.$trigger.closest("li").removeClass("selected")}};T.copy={name:r.x6.strings.copy_text,icon:"fas fa-copy",callback:function(e,t){var n=t.$trigger,i=n.find(".bpbm-replied-message-reply");i.length>0?(0,s.vQ)(i.text()):(0,s.vQ)(n.text())}},P.copy={name:r.x6.strings.copy_text,icon:"fas fa-copy",callback:function(e,t){var n=t.$trigger,i=n.find(".bpbm-replied-message-reply");i.length>0?(0,s.vQ)(i.text()):(0,s.vQ)(n.text())}},"1"===r.x6.allowEditMessages&&(T.edit={name:r.x6.strings.edit,icon:"fas fa-pen",callback:function(e,t){var n=t.$trigger,i=r.x6.userNonce,a=n.closest("li"),o=a.closest(".messages-stack").closest(".bp-messages-threads-wrapper"),s=a.attr("data-id"),c="",l="",d=a.find(".bpbm-replied-message-reply");d.length>0?c+=d.text():c+=a.find(".message-content").text();var p=a.find(".message-content > [data-desc]");p.length>0&&p.each((function(){var e=(0,r.$)(this).attr("data-desc");void 0!==e&&(l+='<span class="bpbm-preview-desc">'+atob(e)+"</span>")}));var h='<div class="bpbm-preview-message bpbm-edit-message" style="display:none" data-message-id="'+s+'"><div class="bpbm-preview-message-cancel"><i class="far fa-times-circle"></i></div><div class="bpbm-preview-message-content"><span class="bpbm-preview-message-name">'+r.x6.strings.edit_message+'</span><div class="bpbm-preview-message-text"></div></div></div>',f=o.find(".bpbm-preview-message");f.length>0?(f=f.replaceWith(h),(f=o.find(".bpbm-preview-message")).show(),(0,g.zo)()):(f=(0,r.$)(h).insertBefore(o.find(".reply"))).slideDown(100,(function(){(0,g.zo)()})),f.find(".bpbm-preview-message-text").text(c),f.find(".bpbm-preview-message-text").append(l),f.find(".bpbm-gifs-icon").html(r.ci.gif),r.$.post(r.x6.ajaxUrl,{action:"bp_messages_get_edit_message",message_id:s,_wpnonce:i},(function(e){if(void 0!==e.errors)(0,u.x)(e.errors[0]),f.find(".bpbm-preview-message-cancel").click();else{var t=o.find(".bp-emojionearea-editor");if(t.length>0)t.html(b.toImage(e));else{var n=o.find(".reply .message .bm-mobile-area");n.html(b.toImage(e)),n.removeClass("bpbm-medium-editor-placeholder"),o.find(".reply .message textarea").trigger("change")}}}))},visible:function(e,t){return t.$trigger.closest(".bp-messages-threads-wrapper").find(".reply").length>0}});var O={name:r.x6.strings.delete,icon:"fas fa-trash",callback:function(e,t){var n=t.$trigger,i=r.x6.userNonce,a=r.x6.strings.confirm_delete,o=n.closest("li");if(confirm(a)){var s=[o.attr("data-id")],l=o.attr("data-thread");r.$.post(r.x6.ajaxUrl,{action:"bp_messages_delete_message",thread_id:l,messages_ids:s,_wpnonce:i},(function(e){e.result?((0,u.s)(e.message),(0,c.$Z)(s)):(0,u.x)(e.errors[0])}))}},visible:function(e,t){return t.$trigger.closest(".bp-messages-threads-wrapper").find(".reply").length>0&&(!("1"!==r.x6.allowDeleteMessages||!t.$trigger.closest(".messages-stack").hasClass("outgoing"))||!!t.$trigger.closest(".list").hasClass("can-moderate"))}};if("1"===r.x6.enableReplies&&(P.reply={name:r.x6.strings.reply,icon:"fas fa-reply",callback:function(e,t){t.$trigger.closest("li").find(".bpbm-reply").click()},visible:function(e,t){return t.$trigger.closest(".bp-messages-threads-wrapper").find(".reply").length>0}}),T.delete=O,P.delete=O,"0"!==r.x6.user_id){r.$.BPBMcontextMenu({selector:r.Ao,events:R,items:T,autoHide:!1,zIndex:10,position:function(e,t,n){var i=window.innerWidth-e.$menu.width()-100;t>i&&(t=i),e.$menu.css({left:t,top:n})}}),r.$.BPBMcontextMenu({selector:r.gr,events:R,items:P,autoHide:!1,zIndex:10,position:function(e,t,n){var i=window.innerWidth-e.$menu.width()-100;t>i&&(t=i),e.$menu.css({left:t,top:n})}});var D={};D.open={name:r.x6.strings.open,icon:"fas fa-external-link-square-alt",callback:function(e,t){t.$trigger.closest(".thread").click()}},D.delete={name:r.x6.strings.delete,icon:"fas fa-trash",callback:function(e,t){t.$trigger.closest(".thread").find("span.delete").click()},visible:function(e,t){return t.$trigger.closest(".thread").find("span.delete").length>0}},r.$.BPBMcontextMenu({selector:r.St,events:R,items:D,autoHide:!1,zIndex:10,position:function(e,t,n){var i=window.innerWidth-e.$menu.width()-100;t>i&&(t=i),e.$menu.css({left:t,top:n})}}),(0,d.KC)(),"1"===r.x6.EPN?(0,r.$)(".BPBMpushNotifications").length>0&&(0,p.Ey)():(0,r.$)(".BPBMpushNotifications").hide()}"1"===r.x6.messagesStatus&&(0,r.$)(".bp-messages-wrap .list .messages-stack .content .messages-list li").each((function(){(0,g.mU)(this)})),(0,s.CL)(r.Rl.bpMessagesWrap),(0,r.$)(".bpbm-gifs-icon").html(r.ci.gif),(0,s.ei)(),(0,o.b)(),r.tq&&void 0!==r.Rl.bpMessagesWrap&&r.Rl.bpMessagesWrap.find(".bpbm-chat-content").css("max-height","calc( 100% - "+r.Rl.bpMessagesWrap.find(".chat-header").outerHeight()+"px )"),h(),document.dispatchEvent(new r.D0("bp-better-messages-reinit-end")),(0,m.BPBMAutoStartCall)(),r.Rl.reIniting=!1}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".bp-messages-wrap:not(.bp-better-messages-mini,.bp-better-messages-list,.bp-better-messages-secondary)";if("string"==typeof r.x6.fast&&e.fast&&"1"!==r.x6.fast)return!1;var n=!1,i=!1;if(""==e.message.trim())return!1;var a,c="1"==e.edit;if("1"==r.x6.realtime&&e.fast){var l=(0,r.$)(t+' .messages-list li[data-temp-id="'+e.id+'"]');if(l.length>0)return!1}a="string"!=typeof e.avatar||"1"!==r.x6.showAvatars?"":'<div class="pic">'+e.avatar.replace("loading='lazy'","").replace('loading="lazy"',"")+"</div>","1"!=r.x6.realtime||e.fast||(c?(n=!0,e.temp_id=e.id):e.temp_id&&(n=!0));var u=moment(O).format("YYYY-MM-DD HH:mm:ss").toString(),p=(0,r.$)(t+" .messages-stack:last-child"),m=p.closest(".bp-messages-wrap");0===m.length&&(m=(0,r.$)(t));var v="standard";m.hasClass("bpbm-template-modern")&&(v="modern"),0===p.length&&(0,r.$)(t+" .empty-thread").length>0&&(i=!0);var b=(0,r.$)(t+' .messages-list li[data-id="'+e.id+'"]'),y="",_=(0,r.$)("body").hasClass("bp-messages-mobile")&&parseInt(e.thread_id)===parseInt(r.Rl.thread);_||r.Eq.now("active")||"1"!=r.x6.realtime||e.user_id===r.x6.user_id||(y+=" unread"),e.user_id==r.x6.user_id&&(y+=" my"),e.fast&&(y+=" fast"),e.user_id==r.x6.user_id&&"1"==r.x6.realtime&&(y+=" sent"),y=y.trim();var A=(0,r.$)(t+' .messages-list li[data-id="'+e.temp_id+'"]');c&&A.length>0&&(y=A.attr("class"));var w="";n&&(w=' data-temp-id="'+e.temp_id+'"');var k='<li class="'+y+'" data-thread="'+e.thread_id+'" title="'+u+'" data-time="'+e.timestamp+'" data-id="'+e.id+'" '+w+">",S="",C="",x="",E="message-content";if("1"===r.x6.enableReplies&&(e.user_id!=r.x6.user_id&&(C='<span class="bpbm-reply" title="'+r.x6.strings.reply+'"><i class="fas fa-reply"></i></span>'),E+=" reply-enabled"),"1"===r.x6.messagesStatus&&e.user_id==r.x6.user_id&&(S+='<span class="status" title="'+r.x6.strings.sent+'"></span>'),"1"!==r.x6.disableFavoriteMessages&&(x+='<span class="favorite"><i class="fas" aria-hidden="true"></i></span>'),"standard"===v&&(k+=S,k+=x,k+=C),k+='<span class="'+E+'">',"modern"===v&&(k+=C,k+=S,k+=x),k+=e.message,k+="</span></li>",n&&A.length>0)return e.message!==A.find(".message-content").html()?(A.replaceWith(k),(0,r.$)('.bp-messages-wrap .list .messages-stack .content .messages-list li[data-id="'+e.id+'"]').each((function(){(0,g.mU)(this),(0,o.b)((0,r.$)(this))}))):(A.attr("data-id",e.id),A.removeClass("fast"),(0,g.mU)(A)),(0,d.KC)(),(0,s.ei)(),!0;if(0===b.length&&(p.length>0||i)){1==i&&(0,r.$)(t+" .empty-thread").remove();var T=!0,P=new Date(1e3*p.find(".messages-list > li:last-child").attr("data-time")),R=P.getFullYear()+"-"+P.getMonth()+"-"+P.getDate()+"-"+P.getHours()+"-"+P.getMinutes(),O=new Date(1e3*e.timestamp),D=O.getFullYear()+"-"+O.getMonth()+"-"+O.getDate()+"-"+O.getHours()+"-"+O.getMinutes();if(p.attr("data-user-id")===e.user_id&&(T=!1),R!==D&&(T=!0),!1===T)p.find(".messages-list").append(k);else{var M="messages-stack";e.user_id==r.x6.user_id?M+=" outgoing":M+=" incoming";var I='<a href="'+e.link+'">'+e.name+"</a>";!1===e.link&&(I="<span>"+e.name+"</span>");var N='<div class="'+M+'" data-user-id="'+e.user_id+'">';N+=a,N+='<div class="content"><div class="info"><div class="name">'+I+'</div><div class="time" title="'+u+'" data-livestamp="'+e.timestamp+'"></div></div><ul class="messages-list"></ul></div></div>',(0,r.$)(t+" .list").append(N),(0,r.$)(t+" .messages-stack:last-child .messages-list").append(k)}e.fast&&(0,r.$)('.bp-messages-wrap .list .messages-stack .content .messages-list li[data-id="'+e.id+'"]').each((function(){(0,g.mU)(this)})),"function"==typeof r.$.fn.BPBMmagnificPopup&&(0,r.$)(".bp-messages-wrap .list .messages-stack .content .messages-list li .images").BPBMmagnificPopup({delegate:"a",type:"image"}),void 0===r.x6.mutedThreads[e.thread_id]&&r.x6.user_id!=e.user_id&&(void 0!==e.count_unread?"0"!==e.count_unread&&(0,f.GN)(e.id):(0,f.GN)(e.id))}var L=(0,r.$)('.bp-messages-wrap .list .messages-stack .content .messages-list li[data-id="'+e.id+'"]');r.tq||L.find(".bpbm-gif").each((function(){var e=(0,r.$)(this);e.find(".bpbm-gif-play").remove(),e.find("video")[0].play()})),(0,r.$)(".bpbm-gifs-icon").html(r.ci.gif),(0,g.mU)(L),(0,s.No)(),(0,s.a_)(),(0,d.KC)(),(0,s.ei)(),(0,o.b)(L),h(),document.dispatchEvent(new r.D0("bp-better-messages-message-render-end"))}function A(e,t,n,i){if("1"!==r.x6.disableOnSiteNotification&&void 0===r.Rl.openThreads[e]&&void 0===r.x6.mutedThreads[e]&&!(0,r.$)("body").hasClass("bp-messages-mobile")){if((0,r.$)(r.St+'[data-id="'+e+'"]:visible').length>0)return!1;if("string"==typeof i){var a=i.match(/src\="([^\s]*)"\s/),o=i.match(/src\='([^\s]*)'\s/);null!=a&&(i=a[1]),null!=o&&(i=o[1])}else i=!1;var c=(0,r.$)(".amaran.thread_"+e);if(c.length>0){c.find(".icon > img").attr("src",i);var l="<b>"+n+"</b>";return l+=t,c.find(".info").html(l),!0}if("1"==r.x6.miniMessages&&"messages"===r.Rl.miniMessages);else{var u={user:n,message:t};if(u.img=!1!==i?i:"",r.$.amaran({theme:"user message thread_"+e,content:u,sticky:!0,closeOnClick:!1,closeButton:!0,delay:1e4,thread_id:e,position:"bottom right",onClick:function(){(0,s.E7)(this.thread_id)}}),!1===i){var d=(0,r.$)(".amaran.thread_"+e);d.find(".icon").remove(),d.find(".info").css("paddingLeft",0)}(0,r.$)(".bpbm-gifs-icon").html(r.ci.gif)}void 0!==t.count_unread?"0"!==t.count_unread&&(0,f.GN)(t.id):(0,f.GN)(t.id)}}},3167:(e,t,n)=>{"use strict";n.d(t,{J8:()=>T,OH:()=>ne,v$:()=>te,Wj:()=>B,PE:()=>N,ei:()=>J,fy:()=>O,Di:()=>y,CL:()=>G,Ve:()=>C,Vc:()=>S,vQ:()=>Q,q0:()=>m,ML:()=>Y,Q4:()=>re,ak:()=>V,yQ:()=>ie,No:()=>W,Ar:()=>w,Wm:()=>E,N:()=>k,Q2:()=>z,Ej:()=>ae,IK:()=>v,bD:()=>g,a_:()=>P,E7:()=>Z,EY:()=>$,xq:()=>ee,c0:()=>U,q7:()=>D,D8:()=>R,HL:()=>F,Vs:()=>b,qo:()=>M,Tw:()=>H,v2:()=>L,$$:()=>q,MY:()=>X,Mp:()=>K});var i=n(5474),r=n(9299),a=n(5224),o=n(5425),s=i.h.get("bp-better-messages-active-tabs")||{},c=sessionStorage.tabID&&"2"!==sessionStorage.closedLastTab?sessionStorage.tabID:sessionStorage.tabID=Math.random();function l(){try{var e=Date.now(),t=!document.hidden&&document.hasFocus();s=i.h.get("bp-better-messages-active-tabs")||{},t?(s[c]=e,B("bp-better-messages-active-tabs",s)):void 0!==s[c]&&(delete s[c],B("bp-better-messages-active-tabs",s))}catch(e){console.debug("Error while trying to use local storage.")}}sessionStorage.closedLastTab="2",l(),setInterval((function(){l()}),2500),(0,i.$)(window).on("unload beforeunload",(function(){sessionStorage.closedLastTab="1",void 0!==(s=i.h.get("bp-better-messages-active-tabs")||{})[c]&&(delete s[c],B("bp-better-messages-active-tabs",s))})),(0,i.$)(window).on("focus",(function(){i.Eq.focus(),setTimeout(l,100)})),(0,i.$)(window).on("blur",(function(){i.Eq.blur(),setTimeout(l,100)}));var u=n(3714),d=n(1731),p=!1,h=!1,f=new(n(6126));function m(){document.removeEventListener("click",m,!1),p||(p=!0,f.enable()),h=!1}function g(){if(h)return!1;document.addEventListener("click",m,!1),h=!0}function v(){h&&(document.removeEventListener("click",m,!1),h=!1),p&&(f.disable(),p=!1)}function b(e){return new Promise((function(t){return setTimeout(t,e)}))}function y(e){return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}var _,A,w=!1,k=!1;function S(e){w=!0,k=e,clearTimeout(A),A=window.setTimeout((function(){E=!0}),1e3),clearInterval(_),_=window.setInterval(x,1e3)}function C(){w=!1,k=!1,clearTimeout(A),E=!1,clearInterval(_)}function x(){0===(0,i.$)(".bpbm-call-view").length&&C()}(0,i.$)(window).on("beforeunload",(function(){if(w)return i.x6.strings.you_are_in_call}));var E=!1;function T(e,t){var n;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return 3==(n=e.substring(1).split("")).length&&(n=[n[0],n[0],n[1],n[1],n[2],n[2]]),"rgba("+[(n="0x"+n.join(""))>>16&255,n>>8&255,255&n].join(",")+","+t+")";throw new Error("Bad Hex")}function P(){(0,i.$)(".bp-messages-wrap img.avatar[data-user-id]").each((function(){var e=(0,i.$)(this),t=e.attr("data-user-id"),n=e.attr("data-bpbm-status-color"),a=!1;if(e.parent().hasClass("bbpm-avatar")&&(a=e.parent()),!a){var o=e.data("size"),s=e.data("size"),c=e.height(),l=e.height();o<c&&(c=o),s<l&&(l=s);var u=e.css("marginTop"),d=e.css("marginLeft"),p=e.css("marginBottom"),h=e.css("marginRight");(0,i.$)(this).css({marginTop:0,marginLeft:0,marginRight:0,marginBottom:0});var f='<span class="avatar bbpm-avatar" data-user-id="'+t+'"';"0"!==i.x6.userStatus&&void 0!==n&&(f+='style="color:'+n+'"'),f+="></span>",e.wrap(f),(a=e.parent()).css({marginTop:u,marginLeft:d,marginRight:h,marginBottom:p,minWidth:c,minHeight:l})}r.ps.indexOf(t)>-1?(0,i.$)(a).addClass("online"):(0,i.$)(a).removeClass("online")})),R()}function R(){var e=(0,i.$)(".bp-better-messages-list .tabs-content .friends,.bp-better-messages-list .tabs-content .um-friends,.bp-better-messages-list .tabs-content .ps-friends, .bpbm-friends-list, .bpbm-um-friends-list, .bpbm-ps-friends-list");e.length>0&&e.each((function(){var e=(0,i.$)(this).find(".bp-messages-user-list");if(e.length>0){var t=[];e.find(" > .user").each((function(){var n=(0,i.$)(this),a=n.attr("data-id"),o=n.prev().hasClass("online");r.ps.indexOf(a)>-1?(n.addClass("online"),o||n.prependTo(e)):(t.push(n),n.removeClass("online"))})),t.length>0&&i.$.each(t,(function(){var t=(0,i.$)(this);t.next().hasClass("online")&&t.insertAfter(e.find(" > .user.online:last"))}))}}))}function O(e,t){if(void 0===t){var n=(0,i.$)(event.target);t=n.hasClass("bp-messages-wrap")?n:n.closest(".bp-messages-wrap")}if(w){if(!1===confirm(i.x6.strings.you_are_in_call))return!1;document.dispatchEvent(new CustomEvent("bpbm-end-call"))}if(void 0===window.BMAppDeviceId&&t.hasClass("bp-messages-wrap-main")&&!t.hasClass("bp-messages-group-thread"))try{window.history.pushState("","",e)}catch(e){}D(t);var r=t.height();t.css("min-height",r),(0,i.$)(window).off(".bp-messages");var s="",c=!1;void 0!==i.x6.ajaxUrl.split("?")[1]&&(c=!0),s+=c?"&":"?",void 0!==e.split("?")[1]?s+=e.split("?")[1]+"&action=bp_messages_load_via_ajax":s+="action=bp_messages_load_via_ajax";var l=t.find(".bp-messages-side-threads"),u=i.x6.ajaxUrl+s;l.length>0&&(u+="&ignore_threads"),(0,i.$)(".bpbm-notice").remove(),document.dispatchEvent(new CustomEvent("bp-better-messages-ajax-refresh-start")),i.$.ajax({method:"GET",url:u,dataType:"json",cache:!1,success:function(e){void 0!==e.total_unread&&N(e.total_unread),void 0!==e.errors&&i.$.each(e.errors,(function(){(0,a.x)(this)}));var n=e.html,r=(0,i.$)(n),s=r.find(".bp-messages-side-threads");l.length>0&&s.length>0?(t.find(".bp-messages-threads-wrapper .bp-messages-column").html(r.find(".bp-messages-threads-wrapper .bp-messages-column").html()),t.find(".bp-messages-threads-wrapper").closest(".bp-messages-wrap").find(".chat-header:not(.side-header)").html(r.find(".bp-messages-threads-wrapper").closest(".bp-messages-wrap").find(".chat-header:not(.side-header)").html())):t.html((0,i.$)(r).html()),t.hasClass("bp-messages-wrap-main")&&(r.attr("data-thread-id")?t.attr("data-thread-id",r.attr("data-thread-id")):t.removeAttr("data-thread-id"),void 0!==e.errors&&(0,i.$)(e.errors.join("")).insertBefore(t)),t.is("#bp-better-messages-mini-mobile-container")&&t.attr("data-thread",r.attr("data-thread-id")),t.hasClass("bp-messages-wrap-chat")&&t.find(".chat-header .back").remove(),(0,o.hM)(),t.removeClass("bpbm-call-view"),t.css("min-height",""),document.dispatchEvent(new CustomEvent("bp-better-messages-ajax-refresh-end"))}})}function D(e){var t=e.find(".chat-header").height(),n=e.find(".preloader");n.show(),n.parent().hasClass("bp-messages-column")||(n.css("top",t),n.css("height","calc(100% - "+t+"px)"))}function M(e,t){for(var n=[],i=(t=t||0)||0;i<e.length;i++)n[i-t]=e[i];return n}var I=document.title;function N(e){var t=parseInt(e);isNaN(t)&&(t=0),document.dispatchEvent(new CustomEvent("bp-better-messages-update-unread",{detail:{unread:t}})),i.x6.total_unread=t,0===t&&(0,i.$)(".bp-messages-wrap .threads-list .thread .unread-count").html(""),"1"===i.x6.titleNotifications&&(isNaN(t)||t<=0?document.title=I:document.title="("+e+") "+I)}function L(){if(!i.h.enabled)return!1;i.Rl.openThreads=i.h.get("bp-better-messages-open-threads")||{},!1!==i.Rl.thread&&(i.Rl.openThreads[i.Rl.thread]=Date.now()),i.$.each(i.Rl.openThreads,(function(e){this+2e3<Date.now()&&delete i.Rl.openThreads[e]})),B("bp-better-messages-open-threads",i.Rl.openThreads)}function B(e,t){try{i.h.set(e,t)}catch(e){console.debug("Not possible to write to LocalStorage")}}function $(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}var j={};function U(e){try{if(e.fast)return;if(e.user_id===i.x6.user_id)return;var t=e.thread_id,n=e.avatar;void 0!==e.site_avatar&&(n=e.site_avatar);var r=e.name;if(void 0!==e.site_name&&(r=e.site_name),"string"==typeof n){var a=n.match(/src\="([^\s]*)"\s/),o=n.match(/src\='([^\s]*)'\s/);null!=a&&(n=a[1]),null!=o&&(n=o[1])}else n=!1;var l=e.content_site,u=document.createElement("div");u.innerHTML=l;var d={body:u.innerText,tag:"bm_thread_"+t};if(!1!==n&&(d.icon=n),void 0!==i.x6.mutedThreads[t])return;var p=!0,h=!1;if(void 0!==e.count_unread&&"0"===e.count_unread&&(p=!1),e.meta&&e.meta.type&&"call_request"===e.meta.type&&(r=e.meta.title,d.body=e.meta.body,p=!0,h=!0),!p)return;if(document.dispatchEvent(new CustomEvent("better-messages-show-notification",{detail:{message:e}})),"undefined"==typeof Notification)return;if("1"!==i.x6.EPN)return;if(void 0!==(s=i.h.get("bp-better-messages-active-tabs")||{})[c]==1)return;var f=new Notification(r,d);f.onclick=function(e){window.focus(),Z(t,h)},void 0===j[t]&&(j[t]=[]),j[t].push(f)}catch(e){}}function F(e){void 0!==r.Wb&&r.Wb.emit("threadOpen",e),void 0!==j[e]&&(i.$.each(j[e],(function(e,t){t.close()})),delete j[e])}function Z(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("1"!=i.x6.realtime||"1"!=i.x6.miniChats||i.tq||t)if(i.tq){var n=(0,i.$)("#bp-better-messages-mini-mobile-open");if(n.length>0){var r=i.x6.baseUrl;i.x6.baseUrl=i.x6.threadUrl+this.thread_id,n.click(),i.x6.baseUrl=r,(0,i.$)(".amaran.user.message.thread_"+e).remove()}else location.href=i.x6.threadUrl+e}else{var a=i.x6.threadUrl+e+"&scrollToContainer",o=(0,i.$)(".bp-messages-wrap.bp-messages-wrap-main");o.length>0?(O(a,o),(0,i.$)(".amaran.user.message.thread_"+e).remove()):location.href=a}else(0,u.TK)(e,!0),(0,i.$)(".amaran.user.message.thread_"+e).remove()}function z(){i.$.each(i.Rl.bpMessagesWrap,(function(e,t){var n=(0,i.$)(t);if(n.hasClass("bp-messages-wrap-main")){var r=n.find("> .bp-messages-threads-wrapper .bp-messages-side-threads");if(r.length>0){var a=r.closest(".bp-messages-threads-wrapper"),o=2*r.width();o<800&&(o=800),n.width()<o?(a.addClass("threads-hidden"),r.hide()):(a.removeClass("threads-hidden"),r.show())}}if(n.hasClass("bp-messages-mobile")){var s=window.innerHeight,c=0;c+=n.find(".chat-header").outerHeight(),n.find(".chat-footer:visible").length>0&&(c+=n.find(".chat-footer:visible").outerHeight()),n.find(".reply").length>0&&(c+=n.find(".reply").outerHeight()),n.find(".scroller").css({height:s-c})}else!function(){var e=(0,i.$)(window).height()-50,t=(0,i.$)("#wpadminbar");t.length>0&&t.is(":visible")&&(e-=t.height());var n=e,r=i.x6.min_height;e>i.x6.max_height&&(e=i.x6.max_height),i.x6.fixedHeaderHeight>0&&(e-=i.x6.fixedHeaderHeight),(e=parseInt(e))<r&&(e=r),(0,i.$)(".bp-messages-wrap .scroller").each((function(){var t=(0,i.$)(this),r=t.closest(".bp-messages-column"),a=t.closest(".bp-messages-wrap");if(a.hasClass("bp-better-messages-mini")){var o=i.x6.miniChatsHeight,s=a.find(".reply").outerHeight();o>n&&(o=n-s-10),t.css("max-height",o),t.css("height",o)}else if(a.hasClass("bp-better-messages-list")){var c=i.x6.miniWindowsHeight;if(c>n){c=n-10;var l=t.closest(".messages");if(l.length>0){var u=l.find(".chat-header");u.length>0&&(c-=u.outerHeight())}}t.css("max-height",c),t.css("height",c)}else if(r.length>0&&r.parent().find(".bp-messages-side-threads").is(":visible"))(d=t.closest(".bp-messages-threads-wrapper")).css("max-height",e),d.css("height",e);else{var d;(d=t.closest(".bp-messages-threads-wrapper")).css("max-height",e),d.css("height",e)}})),(0,i.$)(".bp-messages-wrap.bp-better-messages-list .scroller").css("max-height",e-50),(0,i.$)(".bp-messages-wrap.bp-better-messages-mini .scroller").css("max-height",e-50)}()}))}function V(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.search);return null==t?"":decodeURIComponent(t[1].replace(/\+/g," "))}function q(e){if(void 0===e.html)return!1;if(e.fast||"1"==e.edit)return!1;(0,i.$)(".bp-messages-wrap .threads-list .empty").remove(),(0,i.$)(".bp-messages-wrap .bp-messages-threads-wrapper.no-threads").removeClass("no-threads");var t=e.thread_id,n=e.html;n=n.replace('loading="lazy"',"");var r=(0,i.$)(i.St+"[data-id='"+t+"']");if(r.length>0){var a=e.content_site;r.each((function(){var t=(0,i.$)(this),n=t.find(".info p"),r=t.closest(".threads-list");if(r.removeClass("empty"),n.html(a),void 0!==n.attr("writing-reserved")&&n.attr("writing-reserved",a),t.attr("data-message",e.id),t.prependTo(r),"1"===i.x6.realtime){var o=t.find(".time-wrapper"),s=parseInt(e.timestamp);o.livestamp(new Date(1e3*s))}else"1"!==i.x6.realtime&&void 0!==e.html&&t.replaceWith(e.html)}))}else(0,i.$)(".bp-messages-wrap .threads-list").each((function(){0===(0,i.$)(this).closest(".bpbm-search-results-section").length&&((0,i.$)(this).removeClass("empty"),(0,i.$)(n).prependTo((0,i.$)(this)))}));void 0===i.x6.mutedThreads[t]&&i.x6.user_id!=e.user_id&&(void 0!==e.count_unread?"0"!==e.count_unread&&(0,d.GN)(e.id):(0,d.GN)(e.id)),P()}function W(){"function"==typeof i.$.fn.BPBMmagnificPopup&&(0,i.$)(".bp-messages-wrap .list .messages-stack .content .messages-list li .images").each((function(){var e=(0,i.$)(this),t=e.closest("li");e.BPBMmagnificPopup({delegate:"a",key:t.attr("data-id"),type:"image",gallery:{enabled:!0}})}))}function H(e){var t=[];return i.$.each(e,(function(e,n){-1===i.$.inArray(n,t)&&t.push(n)})),t}function Q(e){var t=(0,i.$)("<input>");(0,i.$)("body").append(t),t.val(e).select(),document.execCommand("copy"),t.remove()}function X(e,t){var n;t<1?(n="",(0,i.$)('.threads-list .thread[data-id="'+e+'"], .bp-better-messages-mini .chat[data-thread="'+e+'"]').removeClass("unread"),(0,i.$)('.bp-messages-wrap .messages-list li[data-thread="'+e+'"]').removeClass("unread")):(n="+"+t,(0,i.$)('.threads-list .thread[data-id="'+e+'"], .bp-better-messages-mini .chat[data-thread="'+e+'"]').addClass("unread")),(0,i.$)('.threads-list .thread[data-id="'+e+'"] .time .unread-count').text(n),(0,i.$)('.bp-better-messages-mini .chat[data-thread="'+e+'"] .unread-count').attr("class","unread-count count-"+t).text(t)}function Y(){var e,t,n,r,a,o=document.cookie.split(";"),s={};for(e=0;e<o.length;e++)n=(t=o[e]).indexOf("="),r=i.$.trim(unescape(t.slice(0,n))),a=unescape(t.slice(n+1)),0===r.indexOf("bp-")&&(s[r]=a);return encodeURIComponent(i.$.param(s))}function G(e){if(void 0===e)return!1;e.each((function(){var e=(0,i.$)(this);if(e.is(":visible")){var t=e.find(".chat-header:not(.side-header)"),n=t.find("> strong"),r=t.find("> .user"),a=0;t.find("> a:visible:not(.user),> div:visible").each((function(){a+=(0,i.$)(this).width()}));var o=a+10;n.length>0&&n.css("width","calc(100% - "+o+"px)"),r.length>0&&r.css("max-width","calc(100% - "+o+"px)"),e.find(".chats .chat").each((function(){var e=(0,i.$)(this).find("> .head"),t=e.find("> .title"),n=0;e.find("> div.controls").each((function(){n+=(0,i.$)(this).width()}));var r=n+40;t.length>0&&t.css("max-width","calc(100% - "+r+"px)")}))}else setTimeout((function(){G(e)}),100)}))}function J(){(0,i.$)(".bp-messages-iframe-container").each((function(){(0,i.$)(this).closest(".message-content").addClass("has-iframe")}))}function K(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),i=new Uint8Array(n.length),r=0;r<n.length;++r)i[r]=n.charCodeAt(r);return i}function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".bp-messages-wrap:not(.bp-better-messages-mini,.bp-better-messages-list,.bp-better-messages-secondary)";if(0!=(0,i.$)(e+" .list").length){var t=(0,i.$)(e+" .scroller[data-id]"),n=t.data("id");if(void 0!==i.Rl.loadingMore[n])return!1;var r=(0,i.$)(e+" .list"),a=r[0].offsetHeight;if(V("message_id").length>0){var o=V("message_id"),s=(0,i.$)(e+" .messages-list li[data-id='"+o+"']");s.length>0&&(a=s[0].offsetTop-s[0].offsetHeight-100)}var c=r.closest(".scroller");if(0!==c.length){var l=c.hasClass("user-scrolled"),u=c[0].scrollHeight-c.scrollTop()-c.height();if(!(a<c.outerHeight())&&(!l||100>=u)){var d=t.BPBMoverlayScrollbars();void 0!==d&&(d.update(),d.scroll({y:"100%"}))}}}}function te(e){2===event.which?(window.open(e,"newWindow"),event.preventDefault()):location.href=e}function ne(e){(0,i.$)(document).trigger("bp-better-messages-open-private-thread",[e])}function ie(e){if("string"==typeof e){var t=e.match(/src\="([^\s]*)"\s/),n=e.match(/src\='([^\s]*)'\s/);return null!=t&&(e=t[1]),null!=n&&(e=n[1]),e}return!1}function re(e){var t=e.match(/src\="([^\s]*)"\s/),n=e.match(/src\='([^\s]*)'\s/),i="";return null!=t&&(i=t[1]),null!=n&&(i=n[1]),i}function ae(e){var t=Math.floor(e/1e3%60),n=Math.floor(e/6e4%60),i=Math.floor(e/36e5%24);return n=n<10?"0"+n:n,t=t<10?"0"+t:t,"00"!==(i=i<10?"0"+i:i)?i+":"+n+":"+t:n+":"+t}window.BPBMurlBase64ToUint8Array=K,window.BPBMOpenUrlOrNewTab=te,window.BBPMOpenPrivateThread=ne},5474:(e,t,n)=>{"use strict";n.d(t,{$:()=>l,Ao:()=>p,D0:()=>o,Eq:()=>c,Rl:()=>u,St:()=>h,ci:()=>g,gr:()=>d,h:()=>r,tq:()=>f,uH:()=>m,x6:()=>a});var i=n(3167);window.global=window;var r=n(8971),a=window.BP_Messages,o=Event,s=window.jQuery.noConflict(),c=n(5281);c.setIdleDuration(10),s.event.special.touchstartPassive={setup:function(e,t,n){this.addEventListener("touchstart",n,{passive:!t.includes("noPreventDefault")})}},s.event.special.touchmovePassive={setup:function(e,t,n){this.addEventListener("touchmove",n,{passive:!t.includes("noPreventDefault")})}},s.event.special.wheelPassive={setup:function(e,t,n){this.addEventListener("wheel",n,{passive:!0})}},s.event.special.mousewheelPassive={setup:function(e,t,n){this.addEventListener("mousewheel",n,{passive:!0})}};var l=s;window.BPBMJQ=s,void 0!==a.me&&s.each(a.me,(function(e,t){a.me[e]=(0,i.Di)(t)}));var u={checkerTimer:null,thread:!1,threads:null,openThreads:{},miniChats:{},miniMessages:!1,bpMessagesWrap:null,loadingMore:{},unread:{},reIniting:!1,blockScroll:!1,isRtl:0!==l('html[dir="rtl"]').length,isInCall:!1,blockSelect:!1,loadingHtml:'<div class="loading-messages"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>',badWords:!1,isTapped:!1,mainColor:a.color,blockOpen:!1,touchmoved:!1,miniMobileContainer:l("#bp-better-messages-mini-mobile-container"),mobileViewContainer:"#bp-better-messages-mobile-view-container",mobileOpenButton:l("#bp-better-messages-mini-mobile-open")},d=".bp-messages-wrap .list .messages-stack.incoming .content .messages-list li .message-content",p=".bp-messages-wrap .list .messages-stack.outgoing .content .messages-list li .message-content",h=".bp-messages-wrap .threads-list .thread";if(void 0!==a.badWordList)try{u.badWords=JSON.parse(atob(a.badWordList))}catch(e){}var f=!1;(/iPad|iPhone|iPod/.test(navigator.userAgent)||/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(f=!0),"1"===a.forceMobile&&(f=!0),n(8901),n(4817),n(9605),n(6575),n(4891),n(7003);var m={},g={gif:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="5.002 9.969 23.017 13.042">\n<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n<g fill="currentColor">\n<path d="M8.00684834,10 C6.34621185,10 5,11.3422643 5,12.9987856 L5,20.0012144 C5,21.6573979 6.33599155,23 8.00684834,23 L24.9931517,23 C26.6537881,23 28,21.6577357 28,20.0012144 L28,12.9987856 C28,11.3426021 26.6640085,10 24.9931517,10 L8.00684834,10 L8.00684834,10 Z M7.99456145,11 C6.89299558,11 6,11.9001762 6,12.992017 L6,20.007983 C6,21.1081436 6.90234375,22 7.99456145,22 L25.0054385,22 C26.1070044,22 27,21.0998238 27,20.007983 L27,12.992017 C27,11.8918564 26.0976562,11 25.0054385,11 L7.99456145,11 L7.99456145,11 Z M13,17 L13,19 L10.9998075,19 C10.4437166,19 10,18.5523709 10,18.0001925 L10,14.9998075 C10,14.4437166 10.4476291,14 10.9998075,14 L14,14 L14,13 L11.0048815,13 C9.89761602,13 9,13.8865548 9,15.0059191 L9,17.9940809 C9,19.1019194 9.8938998,20 11.0048815,20 L14,20 L14,19.25 L14,19.25 L14,17 L14,16 L11,16 L11,17 L13,17 L13,17 Z M16,14 L16,19 L15,19 L15,20 L18,20 L18,19 L17,19 L17,14 L18,14 L18,13 L15,13 L15,14 L16,14 L16,14 Z M20,16 L20,14 L24,14 L24,13 L19,13 L19,20 L20,20 L20,17 L23,17 L23,16 L20,16 L20,16 Z"/>\n</g>\n</g>\n</svg>'};m={seen:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\nviewBox="0 0 25 16" style="enable-background:new 0 0 25 16;" xml:space="preserve"><g>\n<path fill="currentColor" d="M1.5,9.4c0.1-0.2,0.2-0.5,0.4-0.6C2.3,8.6,2.7,8.6,3,8.9c0.7,0.7,1.5,1.5,2.2,2.2c0.6,0.6,1.2,1.2,1.9,1.9\n\t\tc0,0,0,0,0.1,0.1c0.2-0.3,0.4-0.5,0.7-0.8c1-1.2,1.9-2.3,2.9-3.5c1.5-1.8,3-3.7,4.5-5.5c0.6-0.7,1.2-1.4,1.8-2.1\n\t\tc0.4-0.5,1.3-0.5,1.5,0.2c0.1,0.3,0.1,0.6-0.1,0.9c-0.6,0.8-1.3,1.5-1.9,2.3c-0.9,1.1-1.8,2.2-2.7,3.2c-0.9,1.1-1.8,2.1-2.6,3.2\n\t\tc-0.9,1.1-1.9,2.2-2.8,3.4c-0.2,0.2-0.4,0.4-0.5,0.7C7.6,15.3,7,15.4,6.6,15c-0.6-0.6-1.2-1.2-1.8-1.8c-0.9-0.9-1.8-1.8-2.8-2.8\n\t\tc-0.1-0.1-0.2-0.2-0.3-0.3C1.7,10,1.6,9.9,1.5,9.7C1.5,9.6,1.5,9.5,1.5,9.4z"/><path fill="currentColor"  d="M23.5,1.7c0,0.3-0.3,0.5-0.4,0.7c-1.4,1.7-2.7,3.3-4.1,5c-1.4,1.7-2.9,3.5-4.3,5.2c-0.6,0.7-1.2,1.5-1.8,2.2\n\t\tc-0.4,0.5-0.9,0.5-1.4,0.1c-0.3-0.3-0.6-0.6-0.8-0.8c-0.3-0.3-0.3-0.6-0.2-1c0.1-0.4,0.4-0.5,0.8-0.6c0.2,0,0.5,0.1,0.6,0.2\n\t\tc0.1,0.1,0.1,0.1,0.2,0.2c0.2-0.2,0.3-0.4,0.4-0.5c1-1.2,2-2.4,2.9-3.5c1.3-1.6,2.7-3.2,4-4.8c0.8-1,1.7-2,2.5-3.1\n\t\tc0.2-0.3,0.5-0.4,0.9-0.3c0.4,0.1,0.6,0.3,0.7,0.7c0,0,0,0,0,0C23.5,1.6,23.5,1.7,23.5,1.7z"/></g></svg>',delivered:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 25 16" style="enable-background:new 0 0 25 16;" xml:space="preserve">\n<g>\n\t<path fill="currentColor" d="M1.5,9.4c0.1-0.2,0.2-0.5,0.4-0.6C2.3,8.6,2.7,8.6,3,8.9c0.7,0.7,1.5,1.5,2.2,2.2c0.6,0.6,1.2,1.2,1.9,1.9\n\t\tc0,0,0,0,0.1,0.1c0.2-0.3,0.4-0.5,0.7-0.8c1-1.2,1.9-2.3,2.9-3.5c1.5-1.8,3-3.7,4.5-5.5c0.6-0.7,1.2-1.4,1.8-2.1\n\t\tc0.4-0.5,1.3-0.5,1.5,0.2c0.1,0.3,0.1,0.6-0.1,0.9c-0.6,0.8-1.3,1.5-1.9,2.3c-0.9,1.1-1.8,2.2-2.7,3.2c-0.9,1.1-1.8,2.1-2.6,3.2\n\t\tc-0.9,1.1-1.9,2.2-2.8,3.4c-0.2,0.2-0.4,0.4-0.5,0.7C7.6,15.3,7,15.4,6.6,15c-0.6-0.6-1.2-1.2-1.8-1.8c-0.9-0.9-1.8-1.8-2.8-2.8\n\t\tc-0.1-0.1-0.2-0.2-0.3-0.3C1.7,10,1.6,9.9,1.5,9.7C1.5,9.6,1.5,9.5,1.5,9.4z"/>\n\t<path fill="currentColor" d="M23.5,1.7c0,0.3-0.3,0.5-0.4,0.7c-1.4,1.7-2.7,3.3-4.1,5c-1.4,1.7-2.9,3.5-4.3,5.2c-0.6,0.7-1.2,1.5-1.8,2.2\n\t\tc-0.4,0.5-0.9,0.5-1.4,0.1c-0.3-0.3-0.6-0.6-0.8-0.8c-0.3-0.3-0.3-0.6-0.2-1c0.1-0.4,0.4-0.5,0.8-0.6c0.2,0,0.5,0.1,0.6,0.2\n\t\tc0.1,0.1,0.1,0.1,0.2,0.2c0.2-0.2,0.3-0.4,0.4-0.5c1-1.2,2-2.4,2.9-3.5c1.3-1.6,2.7-3.2,4-4.8c0.8-1,1.7-2,2.5-3.1\n\t\tc0.2-0.3,0.5-0.4,0.9-0.3c0.4,0.1,0.6,0.3,0.7,0.7c0,0,0,0,0,0C23.5,1.6,23.5,1.7,23.5,1.7z"/>\n</g>\n</svg>',sent:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 25 16" style="enable-background:new 0 0 25 16;" xml:space="preserve">\n<path fill="currentColor" d="M3.9,9.4C4,9.2,4.1,8.9,4.3,8.8c0.4-0.2,0.8-0.2,1.1,0.1c0.7,0.7,1.5,1.5,2.2,2.2c0.6,0.6,1.2,1.2,1.9,1.9\n\tc0,0,0,0,0.1,0.1c0.2-0.3,0.4-0.5,0.7-0.8c1-1.2,1.9-2.3,2.9-3.5c1.5-1.8,3-3.7,4.5-5.5c0.6-0.7,1.2-1.4,1.8-2.1\n\tc0.4-0.5,1.3-0.5,1.5,0.2c0.1,0.3,0.1,0.6-0.1,0.9C20.2,3,19.6,3.7,19,4.5c-0.9,1.1-1.8,2.2-2.7,3.2c-0.9,1.1-1.8,2.1-2.6,3.2\n\tc-0.9,1.1-1.9,2.2-2.8,3.4c-0.2,0.2-0.4,0.4-0.5,0.7C10,15.3,9.4,15.4,9,15c-0.6-0.6-1.2-1.2-1.8-1.8c-0.9-0.9-1.8-1.8-2.8-2.8\n\tc-0.1-0.1-0.2-0.2-0.3-0.3C4.1,10,4,9.9,3.9,9.7C3.9,9.6,3.9,9.5,3.9,9.4z"/>\n</svg>'}},4379:(e,t,n)=>{"use strict";n.d(t,{X:()=>p});var i=n(5861),r=n(5671),a=n(3144),o=n(4942),s=n(7757),c=n.n(s),l=n(5591),u=n(5474),d=n(7294),p=new(function(){function e(){(0,r.Z)(this,e),(0,o.Z)(this,"media",navigator.mediaDevices),(0,o.Z)(this,"devices",void 0),(0,o.Z)(this,"supported",void 0),(0,o.Z)(this,"screenShareSupport",navigator.mediaDevices&&"getDisplayMedia"in navigator.mediaDevices),(0,o.Z)(this,"pictureInPicture",!u.tq&&"pictureInPictureEnabled"in document),(0,o.Z)(this,"access",new Map([["microphone","unknown"],["camera","unknown"]])),(0,o.Z)(this,"cameras",new Map),(0,o.Z)(this,"microphones",new Map),(0,o.Z)(this,"speakers",new Map),(0,o.Z)(this,"configAvailable",!1),(0,o.Z)(this,"localVideoTrack",null),(0,o.Z)(this,"screenVideoTrack",null),(0,o.Z)(this,"selectedVideoDevice",null),(0,o.Z)(this,"localMicrophoneTrack",null),(0,o.Z)(this,"selectedMicrophoneDevice",null),(0,o.Z)(this,"selectedSpeakerDevice",null),this.init()}var t,n,s,p,h,f,m,g;return(0,a.Z)(e,[{key:"init",value:(g=(0,i.Z)(c().mark((function e(){var t,n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,this.media.enumerateDevices();case 3:return this.devices=e.sent,e.next=6,this.media.getSupportedConstraints();case 6:this.supported=e.sent,this.screenShareSupport?(0,u.$)(".bpbm-switch-share-screen").show():(0,u.$)(".bpbm-switch-share-screen").hide(),this.getPermissionState("camera").then((function(e){t.access.set("camera",e)})),this.getPermissionState("microphone").then((function(e){t.access.set("microphone",e)})),this.cameras=new Map,this.microphones=new Map,this.speakers=new Map,this.devices.forEach((function(e){if(e.deviceId)switch(e.kind){case"videoinput":n.cameras.set(e.deviceId,e);break;case"audioinput":n.microphones.set(e.deviceId,e);break;case"audiooutput":n.speakers.set(e.deviceId,e)}})),this.cameras.size>0||this.microphones.size>0||this.speakers.size>0?this.configAvailable=!0:this.configAvailable=!1,document.dispatchEvent(new CustomEvent("bp-better-messages-media-updated")),this.updateSelects();case 17:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"updatePermissions",value:function(){var e=this;this.getPermissionState("camera").then((function(t){e.access.set("camera",t)})),this.getPermissionState("microphone").then((function(t){e.access.set("microphone",t)}))}},{key:"updateSelects",value:function(){var e=this.getMicrophoneSelect(),t=this.getCamerasSelect(),n=this.getSpeakersSelect();(0,u.$)(".bpbm-switch-mic-select-wrap").each((function(t,n){var i=(0,u.$)(n),r=i.parent();e?r.show():r.hide(),i.html(e)})),(0,u.$)(".bpbm-switch-camera-select-wrap").each((function(e,n){var i=(0,u.$)(n),r=i.parent();t?r.show():r.hide(),i.html(t)})),(0,u.$)(".bpbm-switch-audio-select-wrap").each((function(e,t){var i=(0,u.$)(t),r=i.parent();n?r.show():r.hide(),i.html(n)}))}},{key:"renderCameraSwitch",value:function(){var e=this;if(0===this.cameras.size)return"";var t='<option value="">'+u.x6.strings.default+"</option>";return this.cameras.forEach((function(n){var i="",r="";"default"===n.deviceId&&(i+=u.x6.strings.same_as_system+" - "),n.deviceId===e.selectedVideoDevice&&(r="selected"),"communications"===n.deviceId&&(i+=u.x6.strings.communications+" - "),i+=n.label,t+='<option value="'+n.deviceId+'" data-label="'+i+'" '+r+">"+i+"</option>"})),d.createElement(d.Fragment,null,d.createElement("div",{className:"bpbm-call-setting bpbm-switch-camera"},d.createElement("label",null,u.x6.strings.camera),d.createElement("div",{className:"bpbm-switch-camera-select-wrap"},d.createElement("select",{className:"bpbm-switch-camera-select",dangerouslySetInnerHTML:{__html:t}}))))}},{key:"renderMicSwitch",value:function(){var e=this;if(0===this.microphones.size)return"";var t='<option value="">'+u.x6.strings.default+"</option>";return this.microphones.forEach((function(n){var i="",r="";"default"===n.deviceId&&(i+=u.x6.strings.same_as_system+" - "),n.deviceId===e.selectedVideoDevice&&(r="selected"),"communications"===n.deviceId&&(i+=u.x6.strings.communications+" - "),i+=n.label,t+='<option value="'+n.deviceId+'" data-label="'+i+'" '+r+">"+i+"</option>"})),d.createElement(d.Fragment,null,d.createElement("div",{className:"bpbm-call-setting bpbm-switch-mic"},d.createElement("label",null,u.x6.strings.mic),d.createElement("div",{className:"bpbm-switch-mic-select-wrap"},d.createElement("select",{className:"bpbm-switch-mic-select",dangerouslySetInnerHTML:{__html:t}}))))}},{key:"renderSpeakerSwitch",value:function(){var e=this;if(0===this.speakers.size)return"";var t='<option value="">'+u.x6.strings.default+"</option>";return this.speakers.forEach((function(n){var i="",r="";"default"===n.deviceId&&(i+=u.x6.strings.same_as_system+" - "),n.deviceId===e.selectedVideoDevice&&(r="selected"),"communications"===n.deviceId&&(i+=u.x6.strings.communications+" - "),i+=n.label,t+='<option value="'+n.deviceId+'" data-label="'+i+'" '+r+">"+i+"</option>"})),d.createElement(d.Fragment,null,d.createElement("div",{className:"bpbm-call-setting bpbm-switch-audio"},d.createElement("label",null,u.x6.strings.speaker),d.createElement("div",{className:"bpbm-switch-audio-select-wrap"},d.createElement("select",{className:"bpbm-switch-audio-select",dangerouslySetInnerHTML:{__html:t}}))))}},{key:"getMicrophoneSelect",value:function(){var e=this;if(this.microphones.size>0){var t='<select class="bpbm-switch-mic-select"><option value="">'+u.x6.strings.default+"</option>";return this.microphones.forEach((function(n){var i="",r="";"default"===n.deviceId&&(i+=u.x6.strings.same_as_system+" - "),n.deviceId===e.selectedMicrophoneDevice&&(r="selected"),"communications"===n.deviceId&&(i+=u.x6.strings.communications+" - "),i+=n.label,t+='<option value="'+n.deviceId+'" data-label="'+i+'" '+r+">"+i+"</option>"})),t+="</select>"}return!1}},{key:"getCamerasSelect",value:function(){var e=this;if(this.cameras.size>0){var t='<select class="bpbm-switch-camera-select"><option value="">'+u.x6.strings.default+"</option>";return this.cameras.forEach((function(n){var i="",r="";"default"===n.deviceId&&(i+=u.x6.strings.same_as_system+" - "),n.deviceId===e.selectedVideoDevice&&(r="selected"),"communications"===n.deviceId&&(i+=u.x6.strings.communications+" - "),i+=n.label,t+='<option value="'+n.deviceId+'" data-label="'+i+'" '+r+">"+i+"</option>"})),t+="</select>"}return!1}},{key:"getSpeakersSelect",value:function(){var e=this;if(this.speakers.size>0){var t='<select class="bpbm-switch-audio-select"><option value="">'+u.x6.strings.default+"</option>";return this.speakers.forEach((function(n){var i="",r="";"default"===n.deviceId&&(i+=u.x6.strings.same_as_system+" - "),n.deviceId===e.selectedSpeakerDevice&&(r="selected"),"communications"===n.deviceId&&(i+=u.x6.strings.communications+" - "),i+=n.label,t+='<option value="'+n.deviceId+'" data-label="'+i+'" '+r+">"+i+"</option>"})),t+="</select>"}return!1}},{key:"getTracks",value:(m=(0,i.Z)(c().mark((function e(){var t,n,i,r,a=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],n=this,e.prev=2,i={resolution:l.OM.h1080.resolution},this.selectedVideoDevice?i.deviceId=this.selectedVideoDevice:i.facingMode="user",e.next=7,(0,l.Ai)({audio:{deviceId:this.selectedMicrophoneDevice},video:i});case 7:return e.sent.forEach((function(e){"audio"===e.kind&&(n.localMicrophoneTrack=e),"video"===e.kind&&(n.localVideoTrack=e,n.localVideoTrack.mediaStreamTrack.contentHint="motion",t&&document.removeEventListener("visibilitychange",n.localVideoTrack.appVisibilityChangedListener))})),this.init(),e.abrupt("return",new Map([["video",n.localVideoTrack],["audio",n.localMicrophoneTrack]]));case 13:throw e.prev=13,e.t0=e.catch(2),this.updatePermissions(),r=[],"denied"===this.access.get("camera")&&r.push(this.getFailure(e.t0,u.x6.strings.camera)),"denied"===this.access.get("microphone")&&r.push(this.getFailure(e.t0,u.x6.strings.mic)),0===r.length&&r.push(this.getFailure(e.t0)),r;case 21:case"end":return e.stop()}}),e,this,[[2,13]])}))),function(){return m.apply(this,arguments)})},{key:"selectVideoDevice",value:(f=(0,i.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.selectedVideoDevice=String(t),e.prev=1,!this.localVideoTrack){e.next=6;break}return e.next=5,this.localVideoTrack.restartTrack({deviceId:t,resolution:l.OM.h1080.resolution});case 5:return e.abrupt("return",e.sent);case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),this.getFailure(e.t0,u.x6.strings.camera);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return f.apply(this,arguments)})},{key:"getLocalVideoTrack",value:(h=(0,i.Z)(c().mark((function e(){var t,n=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],e.prev=1,!this.localVideoTrack){e.next=4;break}return e.abrupt("return",this.localVideoTrack);case 4:return e.next=6,(0,l.gJ)({deviceId:this.selectedVideoDevice,resolution:l.OM.h1080.resolution});case 6:return this.localVideoTrack=e.sent,t&&document.removeEventListener("visibilitychange",this.localVideoTrack.appVisibilityChangedListener),this.init(),e.abrupt("return",this.localVideoTrack);case 12:throw e.prev=12,e.t0=e.catch(1),this.getFailure(e.t0,u.x6.strings.camera);case 15:case"end":return e.stop()}}),e,this,[[1,12]])}))),function(){return h.apply(this,arguments)})},{key:"stopLocalVideoTrack",value:function(){if(!this.localVideoTrack)return!0;this.localVideoTrack.stop(),this.localVideoTrack=null}},{key:"selectMicrophoneDevice",value:(p=(0,i.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.selectedMicrophoneDevice=String(t),e.prev=1,!this.localMicrophoneTrack){e.next=6;break}return e.next=5,this.localMicrophoneTrack.restartTrack({deviceId:t});case 5:return e.abrupt("return",e.sent);case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return p.apply(this,arguments)})},{key:"getLocalMicrophoneTrack",value:(s=(0,i.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.localMicrophoneTrack){e.next=3;break}return e.abrupt("return",this.localMicrophoneTrack);case 3:return e.next=5,(0,l.s1)({deviceId:this.selectedMicrophoneDevice});case 5:return this.localMicrophoneTrack=e.sent,this.init(),e.abrupt("return",this.localMicrophoneTrack);case 10:throw e.prev=10,e.t0=e.catch(0),this.getFailure(e.t0,u.x6.strings.mic);case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return s.apply(this,arguments)})},{key:"stopLocalMicrophoneTrack",value:function(){if(!this.localMicrophoneTrack)return!0;this.localMicrophoneTrack.stop(),this.localMicrophoneTrack=null}},{key:"getScreenTrack",value:(n=(0,i.Z)(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.screenVideoTrack){e.next=3;break}return e.abrupt("return",this.screenVideoTrack);case 3:return e.next=5,this.media.getDisplayMedia({audio:!0,video:!0});case 5:return t=e.sent,n=t.getVideoTracks(),this.screenVideoTrack=new l.s(n[0]),this.screenVideoTrack.source=l.fQ.Source.ScreenShare,this.screenVideoTrack.mediaStream=t,this.screenVideoTrack.mediaStreamTrack.contentHint="detail",this.init(),e.abrupt("return",this.screenVideoTrack);case 15:throw e.prev=15,e.t0=e.catch(0),this.getFailure(e.t0,"Screen");case 18:case"end":return e.stop()}}),e,this,[[0,15]])}))),function(){return n.apply(this,arguments)})},{key:"stopLocalScreenVideoTrack",value:function(){if(!this.screenVideoTrack)return!0;this.screenVideoTrack.stop(),this.screenVideoTrack=null}},{key:"getPermissionState",value:(t=(0,i.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=(0,i.Z)(c().mark((function e(n,i){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{navigator.permissions.query({name:t}).then((function(e){n(e.state)})).catch((function(e){n("unknown")}))}catch(e){n("unknown")}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"getFailure",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t||(t=u.x6.strings.err_c_m),e&&"name"in e)return"NotFoundError"===e.name||"DevicesNotFoundError"===e.name?u.x6.strings.err_nf.replace(/%s/g,t):"NotAllowedError"===e.name||"PermissionDeniedError"===e.name?u.x6.strings.err_np.replace(/%s/g,t.toLowerCase()):"NotReadableError"===e.name||"TrackStartError"===e.name?u.x6.strings.err_iu.replace(/%s/g,t):u.x6.strings.err_ue.replace(/%s/g,t.toLowerCase())}}]),e}())},2380:(e,t,n)=>{"use strict";n.d(t,{e:()=>a});var i=n(5474),r=n(3167);function a(e){var t;"friends"===e&&((t=(0,i.$)(".bp-better-messages-list .tabs-content > .friends")).hasClass("bpbm-loaded")||(t.addClass("bpbm-loaded"),i.$.post(i.x6.ajaxUrl,{action:"bp_messages_load_friends_list",nonce:i.x6.userNonce,mini:!0},(function(e){t.find(".bp-messages-user-list").html(e),(0,r.a_)(),(0,r.D8)()})))),"ps-friends"===e&&((t=(0,i.$)(".bp-better-messages-list .tabs-content > .ps-friends")).hasClass("bpbm-loaded")||(t.addClass("bpbm-loaded"),i.$.post(i.x6.ajaxUrl,{action:"bp_messages_load_ps_friends_list",nonce:i.x6.userNonce,mini:!0},(function(e){t.find(".bp-messages-user-list").html(e),(0,r.a_)(),(0,r.D8)()})))),"um-friends"===e&&((t=(0,i.$)(".bp-better-messages-list .tabs-content > .um-friends")).hasClass("bpbm-loaded")||(t.addClass("bpbm-loaded"),i.$.post(i.x6.ajaxUrl,{action:"bp_messages_load_um_friends_list",nonce:i.x6.userNonce,mini:!0},(function(e){t.find(".bp-messages-user-list").html(e),(0,r.a_)(),(0,r.D8)()})))),"bpbm-groups"===e&&((t=(0,i.$)(".bp-better-messages-list .tabs-content > .bpbm-groups")).hasClass("bpbm-loaded")||(t.addClass("bpbm-loaded"),i.$.post(i.x6.ajaxUrl,{action:"bp_messages_load_groups_list",nonce:i.x6.userNonce,mini:!0},(function(e){t.find(".bp-messages-group-list").html(e)})))),"ps-groups"===e&&((t=(0,i.$)(".bp-better-messages-list .tabs-content > .ps-groups")).hasClass("bpbm-loaded")||(t.addClass("bpbm-loaded"),i.$.post(i.x6.ajaxUrl,{action:"bp_messages_load_ps_groups_list",nonce:i.x6.userNonce,mini:!0},(function(e){t.find(".bp-messages-group-list").html(e)})))),"bmum-groups"===e&&((t=(0,i.$)(".bp-better-messages-list .tabs-content > .bmum-groups")).hasClass("bpbm-loaded")||(t.addClass("bpbm-loaded"),i.$.post(i.x6.ajaxUrl,{action:"bp_messages_load_um_groups_list",nonce:i.x6.userNonce,mini:!0},(function(e){t.find(".bp-messages-group-list").html(e)}))))}},885:(e,t,n)=>{"use strict";n.d(t,{KC:()=>s,Ld:()=>d,Q4:()=>l});var i=n(5474),r=n(3167),a=n(5425),o=n(5224);function s(){i.tq&&((0,i.$)(i.gr).BPBMswipe("destroy"),(0,i.$)(i.gr).BPBMswipe({longTap:function(e,t){(0,i.$)(this).contextMenu({x:e.changedTouches[0].screenX,y:e.changedTouches[0].screenY})}}),(0,i.$)(i.Ao).BPBMswipe("destroy"),(0,i.$)(i.Ao).BPBMswipe({longTap:function(e,t){(0,i.$)(this).contextMenu({x:e.changedTouches[0].screenX,y:e.changedTouches[0].screenY})}}),(0,i.$)(i.St).BPBMswipe("destroy"),(0,i.$)(i.St).BPBMswipe({longTap:function(e,t){(0,i.$)(this).contextMenu({x:e.changedTouches[0].screenX,y:e.changedTouches[0].screenY})}}))}var c="bp-better-messages-mobile-holder";function l(e){if(0===e.length)return!1;0===(0,i.$)("."+c).length&&(0,i.$)('<div class="'+c+'"></div>').insertBefore(e);var t=e;t.addClass("bp-messages-mobile"),t.attr("id","bp-better-messages-mobile-view-container");var n=window.innerHeight;(0,i.$)("html").addClass("bp-messages-mobile").css("overflow","hidden"),(0,i.$)("body").addClass("bp-messages-mobile").css("min-height",n);var a=t.appendTo((0,i.$)("body"));a.show();var o=0,s=a.find(".chat-header").outerHeight();o+=s,a.find(".chat-footer:visible").length>0&&(o+=a.find(".chat-footer:visible").outerHeight()),a.find(".reply").length>0&&(o+=a.find(".reply").outerHeight()),i.Rl.bpMessagesWrap.find(".bpbm-chat-content").css("max-height","calc( 100% - "+s+"px )");var l=n-o;a.find(".scroller").css({"max-height":"",height:l}),(0,r.CL)(a),(0,r.xq)(),u(),document.dispatchEvent(new CustomEvent("bp-better-messages-mobile-open")),i.Rl.blockScroll=!0}function u(){if("1"!==i.x6.hPBE)return!1;(0,i.$)("*:not(.bp-messages-hide-on-full-screen)").filter((function(){return("fixed"===(0,i.$)(this).css("position")||"absolute"===(0,i.$)(this).css("position"))&&!(0,i.$)(this).hasClass("bp-messages-wrap")&&0===(0,i.$)(this).closest(".uppy").length&&0===(0,i.$)(this).closest(".bp-messages-wrap").length})).addClass("bp-messages-hide-on-full-screen")}function d(e){var t=(0,i.$)("#bp-better-messages-mini-mobile-container");t.addClass("bp-messages-mobile"),t.find(".bp-messages-mobile-tap").remove();var n=window.innerHeight;(0,i.$)("html").addClass("bp-messages-mobile").css("overflow","hidden"),(0,i.$)("body").addClass("bp-messages-mobile").css("min-height",n),t.addClass("bp-messages-mobile").css("min-height",n);var s=0,c=t.find(".chat-header").outerHeight();s+=c;var l=n-(s+=t.find(".reply").outerHeight());(0,i.$)(".scroller").css({"max-height":"",height:l}),i.Rl.bpMessagesWrap.find(".bpbm-chat-content").css("max-height","calc( 100% - "+c+"px )"),u(),t.show().html('<div class="loading-messages" style="display: block;line-height: '+l+'px">\n<div class="bounce1"></div>\n<div class="bounce2"></div>\n<div class="bounce3"></div>\n</div>');var d="?action=bp_messages_load_via_ajax&mobileFullScreen=1";void 0!==e.split("?")[1]&&(d="?"+e.split("?")[1]+"&action=bp_messages_load_via_ajax&mobileFullScreen=1");var p=i.x6.ajaxUrl+d;i.$.get(p,(function(e){void 0!==e.total_unread&&(0,r.PE)(e.total_unread),void 0!==e.errors&&i.$.each(e.errors,(function(){(0,o.x)(this)}));var n=e.html,s=(0,i.$)(n).filter(".bp-messages-wrap").html();t.html(s).show(),i.Rl.blockScroll=!0,(0,a.hM)(),(0,i.$)("#bp-better-messages-mini-mobile-open").removeClass("loading")}),"json")}(0,i.$)(document).on("click",".bp-messages-wrap .mobileClose",(function(e){var t=(0,i.$)(e.target).closest(".bp-messages-wrap");if(t.hasClass("bp-messages-mobile")){if(e.preventDefault(),e.stopImmediatePropagation(),i.Rl.blockOpen=!0,(0,i.$)("html").removeClass("bp-messages-mobile").css("overflow","auto"),t.removeClass("bp-messages-mobile").css("min-height",""),(0,i.$)("body").removeClass("bp-messages-mobile").css("min-height",""),i.Rl.blockScroll=!1,t.find(".bp-messages-mobile-tap").css("line-height",t.height()+"px"),t.is(i.Rl.miniMobileContainer)&&i.Rl.miniMobileContainer.hide(),t.is(i.Rl.mobileViewContainer)){var n=t;n.removeClass("bp-messages-mobile"),n.removeAttr("id");var r=(0,i.$)("."+c);n.insertBefore(r),r.remove()}(0,i.$)(window).trigger("resize"),setTimeout((function(){i.Rl.blockOpen=!1}),100)}}))},3714:(e,t,n)=>{"use strict";n.d(t,{Nt:()=>T,TK:()=>_,df:()=>S,mU:()=>w,zo:()=>E});var i,r=n(5861),a=n(1002),o=n(7757),s=n.n(o),c=n(5474),l=n(3167),u=n(5425),d=n(5224),p=n(6262),h=n(9299),f=n(1276),m=n(1731),g=n(6904),v=n(1592),b=window.joypixels,y=[];function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new c.$.Deferred;if("1"!=c.x6.miniChats||y.indexOf(e)>-1)i.reject(!1);else{var r=(0,c.$)('.bp-messages-wrap.bp-better-messages-mini .chats .chat[data-thread="'+e+'"]');if(r.length>0&&!n){if(!c.Rl.reIniting){var o=r.find(".head");r.addClass("open"),r.removeClass("blink");var s=0,p=setInterval((function(){o.toggleClass("blink"),++s>=6&&clearInterval(p)}),500)}i.reject(!1)}else{y.push(e);var h="?action=bp_messages_load_via_ajax&thread_id="+e+"&mini=1",f=c.x6.ajaxUrl+h;c.$.ajax({method:"GET",url:f,dataType:"json",cache:!1,success:function(n){void 0!==n.total_unread&&(0,l.PE)(n.total_unread),void 0!==n.errors&&c.$.each(n.errors,(function(){(0,d.x)(this)}));var r=n.html,a=(0,c.$)(r),o=a.find(".chat-header"),s="",p=o.find(".expandingButtons");p.length>0&&(s+=p[0].outerHTML.replace("fa-ellipsis-v","fa-ellipsis-h"),p.remove());var h=o.find(".group-call");h.length>0&&h.remove();var f=o.find(".group-audio-call");f.length>0&&f.remove();var m=o.find(".video-call");m.length>0&&(s+='<span class="video-call" data-user-id="'+m.data("user-id")+'" title="'+c.x6.strings.video_call+'"><i class="fas fa-video"></i></span>',m.remove());var g=o.find(".audio-call");g.length>0&&(s+='<span class="audio-call" data-user-id="'+g.data("user-id")+'" title="'+c.x6.strings.audio_call+'"><i class="fas fa-phone"></i></span>',g.remove()),o=o.html().trim(),a.find(".chat-header").remove();var v="chat",b="visibility: hidden";1==t&&(v+=" open",b=""),"1"===c.x6.disableEnterForDesktop&&(v+=" enter-disabled");var _='<div class="'+v+'" data-thread="'+e+'" style="'+b+'">';_+='<div class="head"><span class="unread-count count-0"></span><span class="title">'+o+"</span>",_+='<div class="controls">\n'+s+'<span class="open" title="'+c.x6.strings.maximize+'"><i class="fas fa-window-maximize" aria-hidden="true"></i></span>\n<span class="close" title="'+c.x6.strings.close+'"><i class="fas fa-times" aria-hidden="true"></i></span>\n</div></div>',_+=a.html(),_+="</div>";var w=(0,c.$)('.bp-better-messages-mini .chats .chat[data-thread="'+e+'"]');w.length>0?w.replaceWith(_):(0,c.$)(_).appendTo(".bp-messages-wrap.bp-better-messages-mini .chats"),c.Rl.miniChats[e]=t,(0,l.Wj)("bp-better-messages-mini-chats",c.Rl.miniChats),delete y[y.indexOf(e)],(0,u.hM)(),1==t&&(0,l.HL)(e),A(),i.resolve(!0)},statusCode:{403:function(t){"object"===(0,a.Z)(t.responseJSON)&&c.$.each(t.responseJSON,(function(){(0,d.x)(this)})),delete y[y.indexOf(e)],delete c.Rl.miniChats[e],(0,l.Wj)("bp-better-messages-mini-chats",c.Rl.miniChats),i.resolve(!0)}}})}}return i.promise()}function A(){clearTimeout(i),i=window.setTimeout((function(){(0,c.$)(".bp-messages-wrap.bp-better-messages-mini .chats .chat").each((function(){var e=(0,c.$)(this).data("thread");parseInt((0,c.$)(".bp-messages-wrap.bp-better-messages-mini").outerHeight())-parseInt((0,c.$)(this).position().top+(0,c.$)(this).outerHeight())>1&&((0,c.$)(this).remove(),void 0!==c.Rl.miniChats[e]&&delete c.Rl.miniChats[e],(0,l.Wj)("bp-better-messages-mini-chats",c.Rl.miniChats))})),(0,c.$)(".bp-messages-wrap.bp-better-messages-mini .chats .chat").css("visibility","visible")}),100)}function w(e){if("1"===c.x6.messagesStatus){var t=(0,c.$)(e);if(t.hasClass("my")){var n=t.find(".status");t.hasClass("seen")?n.html(c.uH.seen):t.hasClass("delivered")?n.html(c.uH.delivered):n.html(c.uH.sent)}(0,p.b)(t)}}(0,c.$)(window).resize(A);var k=!1;function S(){return C.apply(this,arguments)}function C(){return(C=(0,r.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,(0,h.wn)();case 4:k=!0,t=[],(0,c.$)(".bp-messages-wrap[data-thread-id]").each((function(){t.push((0,c.$)(this).attr("data-thread-id"))})),(0,c.$)(".bp-messages-wrap[data-thread]").each((function(){t.push((0,c.$)(this).attr("data-thread"))})),(0,c.$)(".bp-messages-wrap .threads-list .thread.group-chat").each((function(){t.push((0,c.$)(this).attr("data-id"))})),t.length>0?(t=(0,l.Tw)(t),h.Wb.emit("groupCallStatusesBulk",t,(function(e){var t=[];c.$.each(e,(function(e,n){var i=[];if(void 0!==n.video&&i.push(c.x6.strings.video),void 0!==n.audio&&i.push(c.x6.strings.audio),i.length>0){var r='<span class="bm-live-chat-online"><span class="bm-live-chat-online-indicator"></span><span>'+i.join(" &amp; ")+" "+c.x6.strings.chat_online+"</span></span>";(0,c.$)('.bp-messages-wrap .threads-list .thread[data-id="'+e+'"] .info').each((function(){var e=(0,c.$)(this).find(".bm-live-chat-online");e.length>0?(c.$.each(e,(function(e,t){r!==t.outerHTML&&(t.outerHTML=r)})),e=(0,c.$)(this).find(".bm-live-chat-online")):e=(0,c.$)(r).appendTo((0,c.$)(this)),t.push(e)}))}x(e,n)}));var n=(0,c.$)(".bp-messages-wrap .threads-list .thread .info .bm-live-chat-online");t.length>0&&c.$.each(t,(function(e,t){n=n.not(t)})),n.remove(),k=!1}))):(k=!1,(0,c.$)(".bp-messages-wrap .threads-list .thread .info .bm-live-chat-online").remove());case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){var n=(0,c.$)('.bp-messages-wrap[data-thread-id="'+e+'"],.bp-messages-wrap[data-thread="'+e+'"]');if(n.find(".chat-header .group-call").length>0||n.find(".chat-header .group-audio-call").length>0){var i=n.find(".bpbm-group-call-in-progress.bpbm-group-call-type-video");t.video?(i.find(".bpbm-group-call-participant-count").text(t.video),t.video>0&&i.slideDown()):i.slideUp();var r=n.find(".bpbm-group-call-in-progress.bpbm-group-call-type-audio");t.audio?(r.find(".bpbm-group-call-participant-count").text(t.audio),t.audio>0&&r.slideDown()):r.slideUp()}}function E(){(0,c.$)("span.writing").each((function(){var e=(0,c.$)(this),t=e.closest(".bp-messages-threads-wrapper"),n=t.find(".reply").outerHeight(),i=t.find(".bpbm-preview-message").outerHeight();void 0!==i&&(n+=i),e.css("bottom",n)}))}function T(){function e(t){var n=[],i=(0,c.$)(".bp-messages-wrap-main").attr("data-thread-id");void 0!==i&&n.push(parseInt(i)),(0,c.$)(".bp-messages-wrap .threads-list .thread").each((function(){n.push(parseInt((0,c.$)(this).attr("data-id")))})),(n=(0,l.Tw)(n)).length>0?h.Wb.emit("subscribeToThreads",n):t<=4&&(t++,setTimeout((function(){e(t)}),500))}(0,h.mP)(),n(6904),n(9829),n(6308),h.Wb.on("connect",(function(){e(1)})),h.Wb.on("userStatus",(function(e,t){c.x6.user_id===e&&(c.x6.userStatus=t.slug),"0"!==c.x6.userStatus&&(0,c.$)('.bbpm-avatar[data-user-id="'+e+'"]').css("color",t.color)})),h.Wb.on("threadEvent",(function(e){var t=jQuery('.bp-messages-wrap .list .messages-stack .content .messages-list > li[data-id="'+e.mid+'"]');if(t.length>0){var n=t.find(".message-content"),i=n.find(".bm-reactions");i.length>0?i.replaceWith(e.new):n.append(e.new)}})),h.Wb.on("groupMediaEvent",(function(e){S()})),h.Wb.on("endCall",(function(e){var t=(0,c.$)(".bp-messages-wrap.bp-messages-wrap-main"),n=parseInt(t.attr("data-thread-id"));if(parseInt(e.thread_id)===n){l.Ar,e.message.length>0&&(0,d.s)(e.message);var i=c.x6.threadUrl+n;(0,l.fy)(i,t)}})),(0,c.$)(document).on("click",".bpbm-audio-call, .bpbm-pm-button.audio-call",(function(e){var t=(0,c.$)(this),n=t.data("user-id");if(-1===h.ps.indexOf(n.toString())&&"1"!==c.x6.offlineCalls)e.preventDefault(),e.stopImmediatePropagation(),(0,d.x)(c.x6.strings.call_offline);else{var i=t.attr("data-url");(0,l.v$)(i)}})),(0,c.$)(document).on("click",".bpbm-video-call, .bpbm-pm-button.video-call",(function(e){var t=(0,c.$)(this),n=t.data("user-id");if(-1===h.ps.indexOf(n.toString())&&"1"!==c.x6.offlineCalls)e.preventDefault(),e.stopImmediatePropagation(),(0,d.x)(c.x6.strings.call_offline);else{var i=t.attr("data-url");(0,l.v$)(i)}})),(0,c.$)(document).on("click",".bpbm-pm-button.open-mini-chat",(function(e){var t=(0,c.$)(this).data("user-id");(0,l.OH)(t)})),h.Wb.on("getUnread",(function(e){var t=(0,c.$)('.bp-better-messages-list > .tabs > div[data-tab="messages"]'),n=0,i=0,r=(0,c.$)(".bp-messages-wrap .threads-list").length;Object.keys(e.threads).length>0?(c.$.each(e.threads,(function(e){(0,l.MY)(e,this),c.Rl.unread[e]=this,n+=parseInt(this),i++,r>0&&0===(0,c.$)(c.St+'[data-id="'+e+'"]').length&&(0,l.HL)(e)})),r>0&&(0,c.$)(c.St+"[data-id]").each((function(){var t=(0,c.$)(this).data("id");void 0===e.threads[t]&&(0,l.MY)(t,0)}))):(n=0,(0,c.$)(".threads-list .thread, .bp-better-messages-mini .chat").removeClass("unread"),(0,c.$)(".threads-list .thread .time .unread-count").text(""),(0,c.$)(".bp-better-messages-mini .chat .unread-count").attr("class","unread-count count-0").text(""),c.Rl.unread={}),n>0?(t.find(".fas").hide(),t.find(".unread-count").text(n).show()):(t.find(".fas").show(),t.find(".unread-count").text("").hide()),(0,l.PE)(i)})),h.Wb.on("message_deleted",(function(e){(0,f.$Z)([e])})),h.Wb.on("message",(function(e){var t='.bp-better-messages-mini .chats .chat[data-thread="'+e.thread_id+'"]',n=(0,c.$)(t),i=(0,c.$)('.bp-better-messages-mini .chats .chat[data-thread="'+e.thread_id+'"].open'),r=e.thread_id;if("1"===c.x6.encryption){var a=(0,c.$)('.bp-messages-wrap .thread[data-id="'+r+'"][data-secret]'),o=a.data("secret"),s=c.x6.encrypt_key,d=c.x6.site_encrypt_key;if(e.fast&&a.length>0){var p=JSON.parse(v.decrypt(e.message,o)),f=p.message;e.avatar=p.me.avatar,e.name=p.me.name,e.link=p.me.link,f=(0,c.$)("<div />").text(f).html(),["p","b","i","u","strike","sub","sup","br"].forEach((function(e,t){var n=new RegExp("&lt;"+e+"&gt;","g"),i=new RegExp("&lt;/"+e+"&gt;","g");f=(f=f.replace(n,"<"+e+">")).replace(i,"</"+e+">")})),"<p>"===(f=(f=(f=(f=(f=f.replace(/ style=\"\"/g,"")).replace(/<br>/g,"\n")).replace(/&nbsp;/g," ")).replace(/&amp;nbsp;/g," ")).trim()).substring(0,3)&&(f=f.substring(3)),"</p>"===f.substring(f.length-4)&&(f=f.substring(0,f.length-4)),"<br>"===(f=(f=(f=f.replace(/&amp;lt;/g,"&lt;")).replace(/&amp;gt;/g,"&gt;")).replace(/\n/g,"<br>"))&&(f=""),e.message=f}else e.fast||(void 0!==e.content_site&&(e.content_site=v.decrypt(e.content_site,s)),void 0!==e.html&&(e.html=v.decrypt(e.html,s)),e.avatar=v.decrypt(e.avatar,s),e.name=v.decrypt(e.name,s),a.length>0&&(e.message=v.decrypt(e.message,o),e.link=v.decrypt(e.link,o)),void 0!==e.site_avatar&&(e.site_avatar=v.decrypt(e.site_avatar,d)),void 0!==e.site_name&&(e.site_name=v.decrypt(e.site_name,d)))}if(e.fast){e.message=b.toImage(e.message);var m="&lt;span class=&quot;bm-medium-editor-mention-at";"1"===c.x6.encryption&&(m='&lt;span class="bm-medium-editor-mention-at'),-1!==e.message.indexOf(m)&&(e.message=function e(t){var n=t.indexOf(m),i=t.indexOf("&lt;/span&gt;",n)+13,r=t.substring(n,i),a=r.replace(/&lt;/g,"<");return a=(a=a.replace(/&gt;/g,">")).replace(/&quot;/g,'"'),-1!==(t=t.replace(r,a)).indexOf(m)&&(t=e(t)),t}(e.message)),"1"==c.x6.realtime&&e.fast&&(e.timestamp=Math.floor(Date.now()/1e3))}if(!e.fast&&"1"==c.x6.realtime){if(c.x6.user_id!=e.user_id){var g=!1,y=parseInt(e.thread_id)===parseInt(c.Rl.thread);(0,c.$)("body").hasClass("bp-messages-mobile")||c.tq?y&&(g=!0):c.Eq.now("active")&&(y&&(g=!0),i.length>0&&(g=!0)),g?(h.Wb.emit("seen",[e.id]),(0,l.HL)(e.thread_id)):h.Wb.emit("delivered",e.id)}var _=e.id,A=(0,c.$)('.bp-messages-wrap .list .messages-stack .content .messages-list li[data-id="'+_+'"]');if(A.length>0){var k="";"1"===c.x6.messagesStatus&&(k+='<span class="status"></span>'),k+=e.message,A.find(".message-content").html(k),w(A)}}if((0,l.c0)(e),(0,l.$$)(e),(0,u.F$)(e,'.bp-messages-wrap[data-thread-id="'+e.thread_id+'"]'),(0,u.F$)(e,'#bp-better-messages-mini-mobile-container.bp-messages-wrap[data-thread="'+e.thread_id+'"]'),c.Rl.thread==e.thread_id);else if(c.Rl.threads)n.length>0&&(0,u.F$)(e,t);else if(n.length>0)(0,u.F$)(e,t);else if(void 0!==e.content_site&&c.x6.user_id!=e.user_id&&!e.fast){var S=e.avatar;void 0!==e.site_avatar&&(S=e.site_avatar);var C=e.name;void 0!==e.site_name&&(C=e.site_name),void 0!==e.show_on_site&&"1"===e.show_on_site&&(0,u.PV)(e.thread_id,e.content_site,C,S)}})),h.Wb.on("onSiteNotification",(function(e){if("1"===c.x6.encryption){var t=c.x6.encrypt_key;e.image=v.decrypt(e.image,t),e.text=v.decrypt(e.text,t),e.url=v.decrypt(e.url,t),e.title=v.decrypt(e.title,t)}var n=e.image,i=n.match(/src\="([^\s]*)"\s/),r=n.match(/src\='([^\s]*)'\s/);null!=i&&(n=i[1]),null!=r&&(n=r[1]);var a={img:n,user:e.title,message:e.text};c.$.amaran({theme:"user message",content:a,sticky:!0,closeOnClick:!1,closeButton:!0,delay:1e4,position:"bottom right",onClick:function(){location.href=e.url}}),void 0!==m.jX.notification&&m.jX.notification.play()})),"1"==c.x6.realtime&&(h.Wb.on("delivered",(function(e,t){var n=(0,c.$)('.bp-messages-wrap .list .messages-stack .content .messages-list li[data-id="'+e+'"]:not(.seen)');n.removeClass("sent"),n.addClass("delivered"),n.find(".status").attr("title",c.x6.strings.delivered),w(n)})),h.Wb.on("seen",(function(e,t){var n=(0,c.$)('.bp-messages-wrap .list .messages-stack .content .messages-list li[data-id="'+e+'"]');n.removeClass("delivered sent"),n.addClass("seen"),n.find(".status").attr("title",c.x6.strings.seen),w(n)})));var t={};h.Wb.on("writing",(function(e){"object"==(0,a.Z)(e)&&(c.$.each(e,(function(e){var n=(0,c.$)('.bp-messages-wrap .thread[data-id="'+e+'"][data-secret]').data("secret");if(void 0===t[e]&&(t[e]={}),n){var i=v.decrypt(this[0],n);t[e][i]=Date.now()}else t[e]["%%%unknown%%%"]=Date.now()})),c.$.each(t,(function(e,t){if(Object.keys(t).length>0){E();var n=[];if(c.$.each(t,(function(e,t){"%%%unknown%%%"!==e&&n.push(e)})),n.length>0){var i=(0,c.$)('.bp-messages-wrap .thread[data-id="'+e+'"]').parents(".bp-messages-wrap");if(i.hasClass("bp-better-messages-mini"))var r=i.find('.chat[data-thread="'+e+'"] span.writing[data-thread-id="'+e+'"]');else r=i.find('span.writing[data-thread-id="'+e+'"]');r.attr("data-time",Date.now()),r.addClass("shown"),r.html(n.join(", ")+" "+c.x6.strings.writing),r.show()}}})),c.$.each(t,(function(e){var t=(0,c.$)(c.St+'[data-id="'+e+'"]');if(t.length>0){var n=t.find(".info p"),i=n.html();void 0===n.attr("writing-reserved")&&n.attr("writing-reserved",i),n.attr("writing-time",Date.now()),t.addClass("bpbm-writing"),n.html('<span class="bpbm-typing">'+c.x6.strings.writing+"</span>")}})))})),h.Wb.on("mediaEvent",(function(e){var t=document.querySelector('.bp-messages-wrap[data-thread-id="'+e.thread_id+'"] .bp-messages-call-wrap-private');t||(t=document.querySelector('.bp-messages-wrap[data-thread="'+e.thread_id+'"] .bp-messages-call-wrap-private'));var n=!1;t&&t.CallComponent&&(n=t.CallComponent);var i=(0,c.$)(".amaran.incoming_call.thread_"+e.thread_id);switch(e.event){case"peer_signal":n&&n.peer&&n.peer.signal(JSON.parse(e.data));break;case"calling":if(l.Wm&&Number(e.thread_id)!==l.N)return h.Wb.emit("mediaEvent",{event:"user_busy",to:e.from,thread_id:e.thread_id}),!1;if(g.justRejected[e.from])return!1;(0,m.Hj)(),n?(n.showIncomingCall(e.type),i.length>0&&i.remove()):0===i.length&&(c.$.amaran({theme:"user message thread_"+e.thread_id+" incoming_call",content:{img:(0,l.yQ)(e.avatar),user:e.name,message:'<div style="float: left;height: 35px;line-height: 35px;">'+c.x6.strings.incoming_call+'</div><div class="bp-messages-wrap bp-messages-popup"><div class="bpbm-call-in"><span class="bpbm-answer" data-thread-id="'+e.thread_id+'"  data-user-id="'+e.from+'" title="'+c.x6.strings.answer_call+'"><i class="fas fa-phone"></i></span><span class="bpbm-reject" data-thread-id="'+e.thread_id+'"  data-user-id="'+e.from+'" title="'+c.x6.strings.reject_call+'"><i class="fas fa-phone"></i></span></div></div>'},sticky:!0,closeOnClick:!1,closeButton:!1,delay:999999,thread_id:e.thread_id,position:"bottom right"}),(0,c.$)(".incoming_call.thread_"+e.thread_id).on("click",".bpbm-answer",(function(e){e.preventDefault();var t=(0,c.$)(this).data("thread-id"),n=c.x6.threadUrl+t+"&acceptCall",i=(0,c.$)(".bp-messages-wrap.bp-messages-wrap-main");i.length>0?(0,l.fy)(n,i):location.href=n,(0,c.$)(this).closest(".amaran.incoming_call").remove()})),(0,c.$)(".incoming_call.thread_"+e.thread_id).on("click",".bpbm-reject",(function(t){t.preventDefault();var i=(0,c.$)(this).data("user-id");(0,c.$)(this).closest(".amaran.incoming_call").remove(),(0,m.lO)(),h.Wb.emit("mediaEvent",{event:"rejected",to:i,thread_id:e.thread_id}),h.Wb.emit("mediaEvent",{event:"self_reject",to:c.x6.user_id,thread_id:e.thread_id}),g.justRejected[i]="1",setTimeout((function(){delete g.justRejected[i]}),5e3),n&&n.endCall()}))),void 0!==g.justCalled[e.from]&&clearTimeout(g.justCalled[e.from]),g.justCalled[e.from]=window.setTimeout((function(){(0,m.lO)(),n&&n.endCall(),i.length>0&&i.remove()}),5e3);break;case"answered":n&&n.callAccepted();break;case"call_cancelled":if(l.Ar)return!1;(0,m.lO)(),i.length>0&&i.remove(),g.justRejected[e.from]="1",setTimeout((function(){delete g.justRejected[e.from]}),3e3),n&&n.endCall();break;case"rejected":n&&Number(e.thread_id)!==l.N&&((0,d.s)(c.x6.strings.call_reject),n.endCall());break;case"self_reject":(0,m.lO)(),i.length>0&&i.remove(),n&&Number(e.thread_id)!==l.N&&n.endCall(),g.justRejected[e.from]="1",setTimeout((function(){delete g.justRejected[e.from]}),3e3);break;case"user_busy":(0,d.s)(c.x6.strings.call_busy),n&&n.endCall();break;case"call_end":n&&(g.justRejected[e.from]="1",setTimeout((function(){delete g.justRejected[e.from]}),5e3),clearTimeout(n.endCallTimeout),n.endCall())}})),setInterval((function(){var e=(0,c.$)("span.writing.shown"),n=Date.now();Object.keys(t).length>0&&c.$.each(t,(function(e,i){Object.keys(i).length>0&&c.$.each(i,(function(i,r){n-r>5e3&&delete t[e][i]}))})),e.length>0&&e.each((function(){parseInt((0,c.$)(this).attr("data-time"))+3e3<Date.now()&&(0,c.$)(this).hide().removeClass("shown")}));var i=(0,c.$)(c.St+".bpbm-writing");i.length>0&&i.each((function(){var e=(0,c.$)(this),n=e.attr("data-id"),i=e.find(".info p");if(parseInt(i.attr("writing-time"))+3e3<Date.now()){delete t[n];var r=i.attr("writing-reserved");i.removeAttr("writing-reserved"),i.removeAttr("writing-time"),i.html(r),e.removeClass("bpbm-writing")}}))}),1e3);var i={};function r(){var e=(0,c.$)(".bp-messages-wrap:not(.bp-better-messages-mini) .list .messages-stack .content .messages-list li.unread:not(.fast),.bp-messages-wrap.bp-better-messages-mini .chat.open .list .messages-stack .content .messages-list li.unread:not(.fast)"),t=[],n=[];"boolean"!=typeof c.Rl.thread&&n.push(c.Rl.thread),e.each((function(){var e=(0,c.$)(this);if(e.is(":visible")){var i=e.data("id"),r=e.data("thread");e.attr("data-time"),t.push(i),n.push(r),e.removeClass("unread")}})),t.length>0&&h.Wb.emit("seen",t),n=(0,l.Tw)(n),c.$.each(n,(function(e,t){void 0!==t&&(0,l.HL)(t)}))}(0,c.$)(document).on("keyup",".bp-messages-wrap .reply .bp-emojionearea-editor, .bp-messages-wrap .reply .bm-mobile-area",(function(e){var t=(0,c.$)(this).closest(".bp-messages-wrap"),n=t.attr("data-thread-id");if(n||(n=t.find(".thread[data-id]").data("id")),void 0===i[n]&&(i[n]=0),(e.which<=90&&e.which>=48||229===e.which)&&(0===i[n]||i[n]+1e3<Date.now())){i[n]=Date.now();var r=(0,c.$)('.bp-messages-wrap .thread[data-id="'+n+'"][data-secret]').data("secret"),a=v.encrypt(c.x6.me.name,r);h.Wb.emit("writing",n,a)}})),(0,c.$)(document).on("pointermove",".bp-messages-wrap .reply",(function(e){e.stopImmediatePropagation()})),(0,c.$)(document).on("pointerover",".bp-messages-wrap .reply",(function(e){e.stopImmediatePropagation()})),(0,c.$)(document).on("keyup touchend",".bp-messages-wrap .reply textarea",(function(e){var t=(0,c.$)(this).closest(".bp-messages-wrap").find(".thread[data-id]").data("id");if(void 0===i[t]&&(i[t]=0),e.which<=90&&e.which>=48&&(0===i[t]||i[t]+1e3<Date.now())){i[t]=Date.now();var n=(0,c.$)('.bp-messages-wrap .thread[data-id="'+t+'"][data-secret]').data("secret"),r=v.encrypt(c.x6.me.name,n);h.Wb.emit("writing",t,r)}})),"1"==c.x6.realtime&&(c.Eq.on("wakeup",r),(0,c.$)(document).on("bp-better-messages-mobile-open",r))}(0,c.$)(document).on("bp-better-messages-reinit-end",S)},2421:(e,t,n)=>{"use strict";n.d(t,{Ey:()=>o,_Q:()=>c,bq:()=>s});var i=n(5474),r=n(5224),a=n(3167);function o(){"serviceWorker"in navigator&&"PushManager"in window?navigator.serviceWorker.register(i.x6.PNworker+"bpbm-worker.js",{scope:i.x6.PNworker}).then((function(e){e.pushManager.getSubscription().then((function(e){null===e?((0,i.$)(".BPBMenablePushNotifications").show(),(0,i.$)(".BPBMdisablePushNotifications").hide()):((0,i.$)(".BPBMenablePushNotifications").hide(),(0,i.$)(".BPBMdisablePushNotifications").show(),i.$.post(i.x6.ajaxUrl,{action:"bp_better_messages_save_user_push_subscription",nonce:i.x6.savePushNotificationsNonce,sub:JSON.stringify(e)}))}))})):(0,i.$)(".BPBMpushNotifications").hide()}function s(){"serviceWorker"in navigator&&"PushManager"in window&&navigator.serviceWorker.register(i.x6.PNworker+"bpbm-worker.js",{scope:i.x6.PNworker}).then((function(e){e.pushManager.getSubscription().then((function(t){null===t&&e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:(0,a.Mp)(i.x6.vapidPublicKey)}).then((function(e){i.$.post(i.x6.ajaxUrl,{action:"bp_better_messages_save_user_push_subscription",nonce:i.x6.savePushNotificationsNonce,sub:JSON.stringify(e)}),(0,i.$)(".BPBMenablePushNotifications").hide(),(0,i.$)(".BPBMdisablePushNotifications").show()})).catch((function(e){(0,r.x)(e)}))}))}))}function c(){"serviceWorker"in navigator&&"PushManager"in window&&navigator.serviceWorker.register(i.x6.PNworker+"bpbm-worker.js",{scope:i.x6.PNworker}).then((function(e){e.pushManager.getSubscription().then((function(e){null!==e&&e.unsubscribe().then((function(t){i.$.post(i.x6.ajaxUrl,{action:"bp_better_messages_delete_user_push_subscription",nonce:i.x6.savePushNotificationsNonce,sub:JSON.stringify(e)}),(0,i.$)(".BPBMenablePushNotifications").show(),(0,i.$)(".BPBMdisablePushNotifications").hide()})).catch((function(e){}))}))}))}},9299:(e,t,n)=>{"use strict";n.d(t,{CH:()=>We,wn:()=>Qe,mP:()=>He,ps:()=>Ve,zU:()=>qe,Wb:()=>Ze});var i=n(5861),r=n(7757),a=n.n(r),o=n(5474),s=n(1002);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},p.apply(this,arguments)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){if(t&&("object"===(0,s.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return v(this,n)}}function y(e,t,n){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}},y(e,t,n||e)}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var A=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,w=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],k=function(e){var t,n,i=e,r=e.indexOf("["),a=e.indexOf("]");-1!=r&&-1!=a&&(e=e.substring(0,r)+e.substring(r,a).replace(/:/g,";")+e.substring(a,e.length));for(var o,s,c=A.exec(e||""),l={},u=14;u--;)l[w[u]]=c[u]||"";return-1!=r&&-1!=a&&(l.source=i,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=(t=l.path,n=t.replace(/\/{2,9}/g,"/").split("/"),"/"!=t.substr(0,1)&&0!==t.length||n.splice(0,1),"/"==t.substr(t.length-1,1)&&n.splice(n.length-1,1),n),l.queryKey=(o=l.query,s={},o.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(s[t]=n)})),s),l},S={exports:{}};try{S.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){S.exports=!1}var C=S.exports,x="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function E(e){var t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||C))return new XMLHttpRequest}catch(e){}if(!t)try{return new(x[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}function T(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.reduce((function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}var P=setTimeout,R=clearTimeout;function O(e,t){t.useNativeTimers?(e.setTimeoutFn=P.bind(x),e.clearTimeoutFn=R.bind(x)):(e.setTimeoutFn=setTimeout.bind(x),e.clearTimeoutFn=clearTimeout.bind(x))}var D=M;function M(e){if(e)return function(e){for(var t in M.prototype)e[t]=M.prototype[t];return e}(e)}M.prototype.on=M.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},M.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},M.prototype.off=M.prototype.removeListener=M.prototype.removeAllListeners=M.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if((n=i[r])===t||n.fn===t){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},M.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t)}return this},M.prototype.emitReserved=M.prototype.emit,M.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},M.prototype.hasListeners=function(e){return!!this.listeners(e).length};var I=Object.create(null);I.open="0",I.close="1",I.ping="2",I.pong="3",I.message="4",I.upgrade="5",I.noop="6";var N=Object.create(null);Object.keys(I).forEach((function(e){N[I[e]]=e}));for(var L={type:"error",data:"parser error"},B="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),$="function"==typeof ArrayBuffer,j=function(e,t,n){var i,r=e.type,a=e.data;return B&&a instanceof Blob?t?n(a):U(a,n):$&&(a instanceof ArrayBuffer||(i=a,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer))?t?n(a):U(new Blob([a]),n):n(I[r]+(a||""))},U=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+e)},n.readAsDataURL(e)},F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Z="undefined"==typeof Uint8Array?[]:new Uint8Array(256),z=0;z<F.length;z++)Z[F.charCodeAt(z)]=z;var V,q="function"==typeof ArrayBuffer,W=function(e,t){if("string"!=typeof e)return{type:"message",data:Q(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:H(e.substring(1),t)}:N[n]?e.length>1?{type:N[n],data:e.substring(1)}:{type:N[n]}:L},H=function(e,t){if(q){var n=function(e){var t,n,i,r,a,o=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var l=new ArrayBuffer(o),u=new Uint8Array(l);for(t=0;t<s;t+=4)n=Z[e.charCodeAt(t)],i=Z[e.charCodeAt(t+1)],r=Z[e.charCodeAt(t+2)],a=Z[e.charCodeAt(t+3)],u[c++]=n<<2|i>>4,u[c++]=(15&i)<<4|r>>2,u[c++]=(3&r)<<6|63&a;return l}(e);return Q(n,t)}return{base64:!0,data:e}},Q=function(e,t){return"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e},X=String.fromCharCode(30),Y=function(e){h(n,e);var t=b(n);function n(e){var i;return l(this,n),(i=t.call(this)).writable=!1,O(g(i),e),i.opts=e,i.query=e.query,i.readyState="",i.socket=e.socket,i}return d(n,[{key:"onError",value:function(e,t){var i=new Error(e);return i.type="TransportError",i.description=t,y(f(n.prototype),"emit",this).call(this,"error",i),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,y(f(n.prototype),"emit",this).call(this,"open")}},{key:"onData",value:function(e){var t=W(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){y(f(n.prototype),"emit",this).call(this,"packet",e)}},{key:"onClose",value:function(){this.readyState="closed",y(f(n.prototype),"emit",this).call(this,"close")}}]),n}(D),G="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),J={},K=0,ee=0;function te(e){var t="";do{t=G[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function ne(){var e=te(+new Date);return e!==V?(K=0,V=e):e+"."+te(K++)}for(;ee<64;ee++)J[G[ee]]=ee;ne.encode=te,ne.decode=function(e){var t=0;for(ee=0;ee<e.length;ee++)t=64*t+J[e.charAt(ee)];return t};var ie=ne,re=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},ae=function(e){for(var t={},n=e.split("&"),i=0,r=n.length;i<r;i++){var a=n[i].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t},oe=function(e){h(n,e);var t=b(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).polling=!1,e}return d(n,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var n=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var i=0;this.polling&&(i++,this.once("pollComplete",(function(){--i||n()}))),this.writable||(i++,this.once("drain",(function(){--i||n()})))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emit("poll")}},{key:"onData",value:function(e){var t=this;(function(e,t){for(var n=e.split(X),i=[],r=0;r<n.length;r++){var a=W(n[r],t);if(i.push(a),"error"===a.type)break}return i})(e,this.socket.binaryType).forEach((function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,function(e,n){var i=e.length,r=new Array(i),a=0;e.forEach((function(e,n){j(e,!1,(function(e){var o;r[n]=e,++a===i&&(o=r.join(X),t.doWrite(o,(function(){t.writable=!0,t.emit("drain")})))}))}))}(e)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",n="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=ie()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);var i=re(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(i.length?"?"+i:"")}}]),n}(Y);function se(){}var ce=null!=new E({xdomain:!1}).responseType,le=function(e){h(n,e);var t=b(n);function n(e){var i;if(l(this,n),i=t.call(this,e),"undefined"!=typeof location){var r="https:"===location.protocol,a=location.port;a||(a=r?"443":"80"),i.xd="undefined"!=typeof location&&e.hostname!==location.hostname||a!==e.port,i.xs=e.secure!==r}var o=e&&e.forceBase64;return i.supportsBinary=ce&&!o,i}return d(n,[{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p(e,{xd:this.xd,xs:this.xs},this.opts),new ue(this.uri(),e)}},{key:"doWrite",value:function(e,t){var n=this,i=this.request({method:"POST",data:e});i.on("success",t),i.on("error",(function(e){n.onError("xhr post error",e)}))}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(function(t){e.onError("xhr poll error",t)})),this.pollXhr=t}}]),n}(oe),ue=function(e){h(n,e);var t=b(n);function n(e,i){var r;return l(this,n),O(g(r=t.call(this)),i),r.opts=i,r.method=i.method||"GET",r.uri=e,r.async=!1!==i.async,r.data=void 0!==i.data?i.data:null,r.create(),r}return d(n,[{key:"create",value:function(){var e=this,t=T(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;var i=this.xhr=new E(t);try{i.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var r in i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&i.setRequestHeader(r,this.opts.extraHeaders[r])}catch(e){}if("POST"===this.method)try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{i.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=function(){4===i.readyState&&(200===i.status||1223===i.status?e.onLoad():e.setTimeoutFn((function(){e.onError("number"==typeof i.status?i.status:0)}),0))},i.send(this.data)}catch(t){return void this.setTimeoutFn((function(){e.onError(t)}),0)}"undefined"!=typeof document&&(this.index=n.requestsCount++,n.requests[this.index]=this)}},{key:"onSuccess",value:function(){this.emit("success"),this.cleanup()}},{key:"onData",value:function(e){this.emit("data",e),this.onSuccess()}},{key:"onError",value:function(e){this.emit("error",e),this.cleanup(!0)}},{key:"cleanup",value:function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=se,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete n.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&this.onData(e)}},{key:"abort",value:function(){this.cleanup()}}]),n}(D);function de(){for(var e in ue.requests)ue.requests.hasOwnProperty(e)&&ue.requests[e].abort()}ue.requestsCount=0,ue.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",de):"function"==typeof addEventListener&&addEventListener("onpagehide"in x?"pagehide":"unload",de,!1));var pe="function"==typeof Promise&&"function"==typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e,t){return t(e,0)},he=x.WebSocket||x.MozWebSocket,fe="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),me=function(e){h(n,e);var t=b(n);function n(e){var i;return l(this,n),(i=t.call(this,e)).supportsBinary=!e.forceBase64,i}return d(n,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,n=fe?{}:T(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=fe?new he(e,t,n):t?new he(e,t):new he(e)}catch(e){return this.emit("error",e)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=function(n){var i=e[n],r=n===e.length-1;j(i,t.supportsBinary,(function(e){try{t.ws.send(e)}catch(e){}r&&pe((function(){t.writable=!0,t.emit("drain")}),t.setTimeoutFn)}))},i=0;i<e.length;i++)n(i)}},{key:"doClose",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",n="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=ie()),this.supportsBinary||(e.b64=1);var i=re(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(i.length?"?"+i:"")}},{key:"check",value:function(){return!(!he||"__initialize"in he&&this.name===n.prototype.name)}}]),n}(Y),ge={websocket:me,polling:le},ve=function(e){h(n,e);var t=b(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l(this,n),i=t.call(this),e&&"object"===c(e)&&(r=e,e=null),e?(e=k(e),r.hostname=e.host,r.secure="https"===e.protocol||"wss"===e.protocol,r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=k(r.host).host),O(g(i),r),i.secure=null!=r.secure?r.secure:"undefined"!=typeof location&&"https:"===location.protocol,r.hostname&&!r.port&&(r.port=i.secure?"443":"80"),i.hostname=r.hostname||("undefined"!=typeof location?location.hostname:"localhost"),i.port=r.port||("undefined"!=typeof location&&location.port?location.port:i.secure?"443":"80"),i.transports=r.transports||["polling","websocket"],i.readyState="",i.writeBuffer=[],i.prevBufferLen=0,i.opts=p({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},r),i.opts.path=i.opts.path.replace(/\/$/,"")+"/","string"==typeof i.opts.query&&(i.opts.query=ae(i.opts.query)),i.id=null,i.upgrades=null,i.pingInterval=null,i.pingTimeout=null,i.pingTimeoutTimer=null,"function"==typeof addEventListener&&(i.opts.closeOnBeforeunload&&addEventListener("beforeunload",(function(){i.transport&&(i.transport.removeAllListeners(),i.transport.close())}),!1),"localhost"!==i.hostname&&(i.offlineEventListener=function(){i.onClose("transport close")},addEventListener("offline",i.offlineEventListener,!1))),i.open(),i}return d(n,[{key:"createTransport",value:function(e){var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var n=p({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new ge[e](n)}},{key:"open",value:function(){var e,t=this;if(this.opts.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){t.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(){t.onClose("transport close")}))}},{key:"probe",value:function(e){var t=this,i=this.createTransport(e),r=!1;n.priorWebsocketSuccess=!1;var a=function(){r||(i.send([{type:"ping",data:"probe"}]),i.once("packet",(function(e){if(!r)if("pong"===e.type&&"probe"===e.data){if(t.upgrading=!0,t.emitReserved("upgrading",i),!i)return;n.priorWebsocketSuccess="websocket"===i.name,t.transport.pause((function(){r||"closed"!==t.readyState&&(d(),t.setTransport(i),i.send([{type:"upgrade"}]),t.emitReserved("upgrade",i),i=null,t.upgrading=!1,t.flush())}))}else{var a=new Error("probe error");a.transport=i.name,t.emitReserved("upgradeError",a)}})))};function o(){r||(r=!0,d(),i.close(),i=null)}var s=function(e){var n=new Error("probe error: "+e);n.transport=i.name,o(),t.emitReserved("upgradeError",n)};function c(){s("transport closed")}function l(){s("socket closed")}function u(e){i&&e.name!==i.name&&o()}var d=function(){i.removeListener("open",a),i.removeListener("error",s),i.removeListener("close",c),t.off("close",l),t.off("upgrading",u)};i.once("open",a),i.once("error",s),i.once("close",c),this.once("close",l),this.once("upgrading",u),i.open()}},{key:"onOpen",value:function(){if(this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}},{key:"write",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"sendPacket",value:function(e,t,n,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof n&&(i=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var r={type:e,data:t,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},n=function n(){e.off("upgrade",n),e.off("upgradeError",n),t()},i=function(){e.once("upgrade",n),e.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){e.upgrading?i():t()})):this.upgrading?i():t()),this}},{key:"onError",value:function(e){n.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],n=0,i=e.length;n<i;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}]),n}(D);ve.protocol=4;var be,ye="function"==typeof ArrayBuffer,_e=Object.prototype.toString,Ae="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===_e.call(Blob),we="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===_e.call(File);function ke(e){return ye&&(e instanceof ArrayBuffer||function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))||Ae&&e instanceof Blob||we&&e instanceof File}function Se(e,t){if(!e||"object"!==c(e))return!1;if(Array.isArray(e)){for(var n=0,i=e.length;n<i;n++)if(Se(e[n]))return!0;return!1}if(ke(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return Se(e.toJSON(),!0);for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Se(e[r]))return!0;return!1}function Ce(e){var t=[],n=e.data,i=e;return i.data=xe(n,t),i.attachments=t.length,{packet:i,buffers:t}}function xe(e,t){if(!e)return e;if(ke(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){for(var i=new Array(e.length),r=0;r<e.length;r++)i[r]=xe(e[r],t);return i}if("object"===c(e)&&!(e instanceof Date)){var a={};for(var o in e)e.hasOwnProperty(o)&&(a[o]=xe(e[o],t));return a}return e}function Ee(e,t){return e.data=Te(e.data,t),e.attachments=void 0,e}function Te(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=Te(e[n],t);else if("object"===c(e))for(var i in e)e.hasOwnProperty(i)&&(e[i]=Te(e[i],t));return e}!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(be||(be={}));var Pe=function(){function e(){l(this,e)}return d(e,[{key:"encode",value:function(e){return e.type!==be.EVENT&&e.type!==be.ACK||!Se(e)?[this.encodeAsString(e)]:(e.type=e.type===be.EVENT?be.BINARY_EVENT:be.BINARY_ACK,this.encodeAsBinary(e))}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==be.BINARY_EVENT&&e.type!==be.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data)),t}},{key:"encodeAsBinary",value:function(e){var t=Ce(e),n=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(n),i}}]),e}(),Re=function(e){h(n,e);var t=b(n);function n(){return l(this,n),t.call(this)}return d(n,[{key:"add",value:function(e){var t;if("string"==typeof e)(t=this.decodeString(e)).type===be.BINARY_EVENT||t.type===be.BINARY_ACK?(this.reconstructor=new Oe(t),0===t.attachments&&y(f(n.prototype),"emitReserved",this).call(this,"decoded",t)):y(f(n.prototype),"emitReserved",this).call(this,"decoded",t);else{if(!ke(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,y(f(n.prototype),"emitReserved",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,i={type:Number(e.charAt(0))};if(void 0===be[i.type])throw new Error("unknown packet type "+i.type);if(i.type===be.BINARY_EVENT||i.type===be.BINARY_ACK){for(var r=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var a=e.substring(r,t);if(a!=Number(a)||"-"!==e.charAt(t))throw new Error("Illegal attachments");i.attachments=Number(a)}if("/"===e.charAt(t+1)){for(var o=t+1;++t&&","!==e.charAt(t)&&t!==e.length;);i.nsp=e.substring(o,t)}else i.nsp="/";var s=e.charAt(t+1);if(""!==s&&Number(s)==s){for(var c=t+1;++t;){var l=e.charAt(t);if(null==l||Number(l)!=l){--t;break}if(t===e.length)break}i.id=Number(e.substring(c,t+1))}if(e.charAt(++t)){var u=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!n.isPayloadValid(i.type,u))throw new Error("invalid payload");i.data=u}return i}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case be.CONNECT:return"object"===c(t);case be.DISCONNECT:return void 0===t;case be.CONNECT_ERROR:return"string"==typeof t||"object"===c(t);case be.EVENT:case be.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case be.ACK:case be.BINARY_ACK:return Array.isArray(t)}}}]),n}(D),Oe=function(){function e(t){l(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return d(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=Ee(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}(),De=Object.freeze({__proto__:null,protocol:5,get PacketType(){return be},Encoder:Pe,Decoder:Re});function Me(e,t,n){return e.on(t,n),function(){e.off(t,n)}}var Ie=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Ne=function(e){h(n,e);var t=b(n);function n(e,i,r){var a;return l(this,n),(a=t.call(this)).connected=!1,a.disconnected=!0,a.receiveBuffer=[],a.sendBuffer=[],a.ids=0,a.acks={},a.flags={},a.io=e,a.nsp=i,r&&r.auth&&(a.auth=r.auth),a.io._autoConnect&&a.open(),a}return d(n,[{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[Me(e,"open",this.onopen.bind(this)),Me(e,"packet",this.onpacket.bind(this)),Me(e,"error",this.onerror.bind(this)),Me(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(Ie.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.unshift(e);var r={type:be.EVENT,data:n,options:{}};if(r.options.compress=!1!==this.flags.compress,"function"==typeof n[n.length-1]){var a=this.ids++,o=n.pop();this._registerAckCallback(a,o),r.id=a}var s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,c=this.flags.volatile&&(!s||!this.connected);return c||(this.connected?this.packet(r):this.sendBuffer.push(r)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var n=this,i=this.flags.timeout;if(void 0!==i){var r=this.io.setTimeoutFn((function(){delete n.acks[e];for(var i=0;i<n.sendBuffer.length;i++)n.sendBuffer[i].id===e&&n.sendBuffer.splice(i,1);t.call(n,new Error("operation has timed out"))}),i);this.acks[e]=function(){n.io.clearTimeoutFn(r);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];t.apply(n,[null].concat(i))}}else this.acks[e]=t}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth((function(t){e.packet({type:be.CONNECT,data:t})})):this.packet({type:be.CONNECT,data:this.auth})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case be.CONNECT:if(e.data&&e.data.sid){var t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case be.EVENT:case be.BINARY_EVENT:this.onevent(e);break;case be.ACK:case be.BINARY_ACK:this.onack(e);break;case be.DISCONNECT:this.ondisconnect();break;case be.CONNECT_ERROR:this.destroy();var n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(this._anyListeners.slice());try{for(i.s();!(t=i.n()).done;)t.value.apply(this,e)}catch(e){i.e(e)}finally{i.f()}}y(f(n.prototype),"emit",this).apply(this,e)}},{key:"ack",value:function(e){var t=this,n=!1;return function(){if(!n){n=!0;for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];t.packet({type:be.ACK,id:e,data:r})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"==typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e){this.id=e,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){return e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:be.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(e){return this.flags.timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}}]),n}(D),Le=Be;function Be(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Be.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Be.prototype.reset=function(){this.attempts=0},Be.prototype.setMin=function(e){this.ms=e},Be.prototype.setMax=function(e){this.max=e},Be.prototype.setJitter=function(e){this.jitter=e};var $e=function(e){h(n,e);var t=b(n);function n(e,i){var r,a;l(this,n),(r=t.call(this)).nsps={},r.subs=[],e&&"object"===c(e)&&(i=e,e=void 0),(i=i||{}).path=i.path||"/socket.io",r.opts=i,O(g(r),i),r.reconnection(!1!==i.reconnection),r.reconnectionAttempts(i.reconnectionAttempts||1/0),r.reconnectionDelay(i.reconnectionDelay||1e3),r.reconnectionDelayMax(i.reconnectionDelayMax||5e3),r.randomizationFactor(null!==(a=i.randomizationFactor)&&void 0!==a?a:.5),r.backoff=new Le({min:r.reconnectionDelay(),max:r.reconnectionDelayMax(),jitter:r.randomizationFactor()}),r.timeout(null==i.timeout?2e4:i.timeout),r._readyState="closed",r.uri=e;var o=i.parser||De;return r.encoder=new o.Encoder,r.decoder=new o.Decoder,r._autoConnect=!1!==i.autoConnect,r._autoConnect&&r.open(),r}return d(n,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=new ve(this.uri,this.opts);var n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;var r=Me(n,"open",(function(){i.onopen(),e&&e()})),a=Me(n,"error",(function(n){i.cleanup(),i._readyState="closed",t.emitReserved("error",n),e?e(n):i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var o=this._timeout;0===o&&r();var s=this.setTimeoutFn((function(){r(),n.close(),n.emit("error",new Error("timeout"))}),o);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}return this.subs.push(r),this.subs.push(a),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(Me(e,"ping",this.onping.bind(this)),Me(e,"data",this.ondata.bind(this)),Me(e,"error",this.onerror.bind(this)),Me(e,"close",this.onclose.bind(this)),Me(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){this.decoder.add(e)}},{key:"ondecoded",value:function(e){this.emitReserved("packet",e)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n||(n=new Ne(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){for(var t=0,n=Object.keys(this.nsps);t<n.length;t++){var i=n[t];if(this.nsps[i].active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var i=this.setTimeoutFn((function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(n){n?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",n)):t.onreconnect()})))}),n);this.opts.autoUnref&&i.unref(),this.subs.push((function(){clearTimeout(i)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),n}(D),je={};function Ue(e,t){"object"===c(e)&&(t=e,e=void 0);var n,i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),i=k(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";var r=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+t,i.href=i.protocol+"://"+r+(n&&n.port===i.port?"":":"+i.port),i}(e,(t=t||{}).path||"/socket.io"),r=i.source,a=i.id,o=i.path,s=je[a]&&o in je[a].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?n=new $e(r,t):(je[a]||(je[a]=new $e(r,t)),n=je[a]),i.query&&!t.query&&(t.query=i.queryKey),n.socket(i.path,t)}p(Ue,{Manager:$e,Socket:Ne,io:Ue,connect:Ue});var Fe,Ze,ze=n(3167),Ve=[],qe=!1,We=[];function He(){try{document.dispatchEvent(new CustomEvent("bp-better-messages-before-realtime-connect")),Ze=Ue(o.x6.socket_server,{secure:!0,timeout:7e3,transports:["websocket"],auth:[o.x6.site_id,o.x6.user_id,o.x6.secret_key]})}catch(e){console.error("Error connecting to the WebSocket Server. Please contact plugin developer. https://www.wordplus.org/contact/"),o.x6.realtime="0",clearTimeout(Fe),Fe=window.setTimeout(Ye,1e4)}return Ze.on("connect_error",(function(e){console.debug("Error while connecting to WebSocket messaging server. AJAX mode enabled."),console.error(e),o.x6.realtime="0",clearTimeout(Fe),Fe=window.setTimeout(Ye,1e4)})),Ze.on("connect",(function(){console.debug("You was connected to WebSocket messaging server. WebSocket mode enabled."),o.x6.realtime="1",clearTimeout(Fe)})),Ze.on("onlineUsers",(function(e){qe=!0,We=Ve=e,(0,ze.a_)(),document.dispatchEvent(new CustomEvent("bp-better-messages-online-fetched"))})),Ze.on("userOnline",(function(e){-1===Ve.indexOf(e)&&(Ve.push(e),(0,o.$)('.bbpm-avatar[data-user-id="'+e+'"]').addClass("online"),(0,ze.D8)(),We=Ve,document.dispatchEvent(new CustomEvent("bp-better-messages-user-online",{detail:{user_id:e}})))})),Ze.on("userOffline",(function(e){Ve.indexOf(e)>-1&&(Ve.splice(Ve.indexOf(e),1),(0,o.$)('.bbpm-avatar[data-user-id="'+e+'"]').removeClass("online"),We=Ve,(0,ze.D8)(),document.dispatchEvent(new CustomEvent("bp-better-messages-user-offline",{detail:{user_id:e}})))})),Ze}function Qe(){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ze){e.next=6;break}return e.next=3,(0,ze.Vs)(10);case 3:return e.abrupt("return",Qe());case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(){Ze.disconnect(),Ze.connect()}},1731:(e,t,n)=>{"use strict";n.d(t,{BC:()=>l,GN:()=>d,Hj:()=>s,jX:()=>a,lO:()=>c,wr:()=>u});var i=n(5474),r=n(1766).Howl,a={},o=i.x6.soundLevels;function s(){return!!a.calling&&"dnd"!==i.x6.userStatus&&void(a.calling.playing()||a.calling.play())}function c(){if(!a.calling)return!1;a.calling.playing()&&a.calling.stop()}function l(){if(void 0===a.dialing)return!1;a.dialing.playing()||a.dialing.play()}function u(){if(void 0===a.dialing)return!1;a.dialing.playing()&&a.dialing.stop()}function d(e){if("1"!==i.x6.enableSound||"dnd"===i.x6.userStatus)return!1;"string"==typeof e&&"tmp_"!==e.substr(0,4)&&void 0!==a.notification&&a.notification.play()}o.notification>0&&(a.notification=new r({src:[i.x6.assets+"notification.mp3",i.x6.assets+"notification.ogg"],loop:!1,volume:o.notification})),o.sent>0&&(a.sent=new r({src:[i.x6.assets+"sent.mp3",i.x6.assets+"sent.ogg"],loop:!1,volume:o.sent})),o.calling&&o.calling>0&&(a.calling=new r({src:[i.x6.assets+"calling.mp3",i.x6.assets+"calling.ogg"],loop:!0,volume:o.calling})),o.dialing&&o.dialing>0&&(a.dialing=new r({src:[i.x6.assets+"dialing.mp3",i.x6.assets+"dialing.ogg"],loop:!0,volume:o.dialing}))},5224:(e,t,n)=>{"use strict";n.d(t,{s:()=>r,x:()=>a});var i=n(5474);function r(e){void 0!==window.BMAppNoticeToast?window.BMAppNoticeToast("",e,1e4):i.$.amaran({theme:"colorful",content:{bgcolor:"black",color:"#fff",message:e},sticky:!1,closeOnClick:!0,closeButton:!0,delay:1e4,position:"bottom right"})}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;void 0!==window.BMAppErrorToast?window.BMAppErrorToast("",notice,t):i.$.amaran({theme:"colorful",content:{bgcolor:"#c0392b",color:"#fff",message:e},sticky:!1,closeOnClick:!0,closeButton:!0,delay:t,position:"bottom right"})}n(8200),window.BBPMShowNotice=r,window.BBPMNotice=r,window.BBPMShowError=a,window.BBPMError=a},6262:(e,t,n)=>{"use strict";n.d(t,{b:()=>a});var i=n(5474),r=n(5088);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.$)(".bp-messages-wrap");if(i.tq)return!1;(0,i.$)(e).find(".bpbm-users-avatars-list-item[title], .status[title], .bpbm-reply[title], .chat-header [title], .chat-footer [title], .threads-list [title], .chats .chat .head .controls [title],.bm-tippy-title[title]").each((function(){var e=(0,i.$)(this);e.is("strong")||e.is("input")||(void 0!==e[0]._tippy&&e[0]._tippy.destroy(),(0,r.ZP)(e[0],{placement:"top",content:e.attr("title"),allowHTML:!0,arrow:!1,offset:[0,5],theme:"bpbmtheme",onShow:function(e){var t=(0,i.$)(e.reference);if(t.is(".expandingButtons")&&t.hasClass("expandingButtonsOpen"))return!1}}),e[0].setAttribute("data-title",e.attr("title")),e[0].removeAttribute("title"))}))}},9796:(e,t,n)=>{var i,r=n(4155);t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var i=0,r=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(r=i))})),t.splice(r,0,n)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(i=!1,function(){i||(i=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||function(){},e.exports=n(4701)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},4701:(e,t,n)=>{var i=n(319);e.exports=function(e){function t(e){var n,i,a,o=null;function s(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];if(s.enabled){var a=s,o=Number(new Date),c=o-(n||o);a.diff=c,a.prev=n,a.curr=o,n=o,i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var l=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return"%";l++;var r=t.formatters[n];if("function"==typeof r){var o=i[l];e=r.call(a,o),i.splice(l,1),l--}return e})),t.formatArgs.call(a,i);var u=a.log||t.log;u.apply(a,i)}}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=r,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==o?o:(i!==t.namespaces&&(i=t.namespaces,a=t.enabled(e)),a)},set:function(e){o=e}}),"function"==typeof t.init&&t.init(s),s}function r(e,n){var i=t(this.namespace+(void 0===n?":":n)+e);return i.log=this.log,i}function a(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){var e=[].concat(i(t.names.map(a)),i(t.skips.map(a).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){var n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];var i=("string"==typeof e?e:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(e=i[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(9550),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(n){t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var n=0,i=0;i<e.length;i++)n=(n<<5)-n+e.charCodeAt(i),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},9605:(e,t,n)=>{"use strict";n.r(t);var i,r=n(5474);r.$.support.htmlMenuitem="HTMLMenuItemElement"in window,r.$.support.htmlCommand="HTMLCommandElement"in window,r.$.support.eventSelectstart="onselectstart"in document.documentElement,r.$.ui&&r.$.widget||(r.$.cleanData=(i=r.$.cleanData,function(e){var t,n,a;for(a=0;null!=e[a];a++){n=e[a];try{(t=r.$._data(n,"events"))&&t.remove&&(0,r.$)(n).triggerHandler("remove")}catch(e){}}i(e)}));var a=null,o=!1,s=(0,r.$)(window),c=0,l={},u={},d={},p={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!0,hideOnSecondTrigger:!1,selectableSubMenu:!1,classNames:{hover:"bpbm-context-menu-hover",disabled:"bpbm-context-menu-disabled",visible:"bpbm-context-menu-visible",notSelectable:"bpbm-context-menu-not-selectable",icon:"bpbm-context-menu-icon",iconEdit:"bpbm-context-menu-icon-edit",iconCut:"bpbm-context-menu-icon-cut",iconCopy:"bpbm-context-menu-icon-copy",iconPaste:"bpbm-context-menu-icon-paste",iconDelete:"bpbm-context-menu-icon-delete",iconAdd:"bpbm-context-menu-icon-add",iconQuit:"bpbm-context-menu-icon-quit",iconLoadingClass:"bpbm-context-menu-icon-loading"},determinePosition:function(e){if(r.$.ui&&r.$.ui.position)e.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");else{var t=this.offset();t.top+=this.outerHeight(),t.left+=this.outerWidth()/2-e.outerWidth()/2,e.css(t)}},position:function(e,t,n){var i;if(t||n){if("maintain"===t&&"maintain"===n)i=e.$menu.position();else{var r=e.$menu.offsetParent().offset();i={top:n-r.top,left:t-r.left}}var a=s.scrollTop()+s.height(),o=s.scrollLeft()+s.width(),c=e.$menu.outerHeight(),l=e.$menu.outerWidth();i.top+c>a&&(i.top-=c),i.top<0&&(i.top=0),i.left+l>o&&(i.left-=l),i.left<0&&(i.left=0),e.$menu.css(i)}else e.determinePosition.call(this,e.$menu)},positionSubmenu:function(e){if(void 0!==e)if(r.$.ui&&r.$.ui.position)e.css("display","block").position({my:"left top-5",at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var t={top:-9,left:this.outerWidth()-5};e.css(t)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{preShow:r.$.noop,show:r.$.noop,hide:r.$.noop,activated:r.$.noop},callback:null,items:{}},h={timer:null,pageX:null,pageY:null},f={abortevent:function(e){e.preventDefault(),e.stopImmediatePropagation()},contextmenu:function(e){var t=(0,r.$)(this);if(!1!==e.data.events.preShow(t,e)&&("right"===e.data.trigger&&(e.preventDefault(),e.stopImmediatePropagation()),!("right"!==e.data.trigger&&"demand"!==e.data.trigger&&e.originalEvent||!(void 0===e.mouseButton||!e.data||"left"===e.data.trigger&&0===e.mouseButton||"right"===e.data.trigger&&2===e.mouseButton)||t.hasClass("bpbm-context-menu-active")||t.hasClass("bpbm-context-menu-disabled")))){if(a=t,e.data.build){var n=e.data.build(a,e);if(!1===n)return;if(e.data=r.$.extend(!0,{},p,e.data,n||{}),!e.data.items||r.$.isEmptyObject(e.data.items))throw window.console&&(console.error||console.log).call(console,"No items specified to show in contextMenu"),new Error("No Items specified");e.data.$trigger=a,m.create(e.data)}m.show.call(t,e.data,e.pageX,e.pageY)}},click:function(e){e.preventDefault(),e.stopImmediatePropagation(),(0,r.$)(this).trigger(r.$.Event("contextmenu",{data:e.data,pageX:e.pageX,pageY:e.pageY}))},mousedown:function(e){var t=(0,r.$)(this);a&&a.length&&!a.is(t)&&a.data("contextMenu").$menu.trigger("contextmenu:hide"),2===e.button&&(a=t.data("contextMenuActive",!0))},mouseup:function(e){var t=(0,r.$)(this);t.data("contextMenuActive")&&a&&a.length&&a.is(t)&&!t.hasClass("bpbm-context-menu-disabled")&&(e.preventDefault(),e.stopImmediatePropagation(),a=t,t.trigger(r.$.Event("contextmenu",{data:e.data,pageX:e.pageX,pageY:e.pageY}))),t.removeData("contextMenuActive")},mouseenter:function(e){var t=(0,r.$)(this),n=(0,r.$)(e.relatedTarget),i=(0,r.$)(document);n.is(".bpbm-context-menu-list")||n.closest(".bpbm-context-menu-list").length||a&&a.length||(h.pageX=e.pageX,h.pageY=e.pageY,h.data=e.data,i.on("mousemove.contextMenuShow",f.mousemove),h.timer=setTimeout((function(){h.timer=null,i.off("mousemove.contextMenuShow"),a=t,t.trigger(r.$.Event("contextmenu",{data:h.data,pageX:h.pageX,pageY:h.pageY}))}),e.data.delay))},mousemove:function(e){h.pageX=e.pageX,h.pageY=e.pageY},mouseleave:function(e){var t=(0,r.$)(e.relatedTarget);if(!t.is(".bpbm-context-menu-list")&&!t.closest(".bpbm-context-menu-list").length){try{clearTimeout(h.timer)}catch(e){}h.timer=null}},layerClick:function(e){var t,n,i=(0,r.$)(this).data("contextMenuRoot"),a=e.button,o=e.pageX,c=e.pageY,l=void 0===o;e.preventDefault(),setTimeout((function(){if(l)null!=i&&null!==i.$menu&&void 0!==i.$menu&&i.$menu.trigger("contextmenu:hide");else{var u,d="left"===i.trigger&&0===a||"right"===i.trigger&&2===a;if(document.elementFromPoint&&i.$layer){if(i.$layer.hide(),null!==(t=document.elementFromPoint(o-s.scrollLeft(),c-s.scrollTop()))&&t.isContentEditable){var p=document.createRange(),h=window.getSelection();p.selectNode(t),p.collapse(!0),h.removeAllRanges(),h.addRange(p)}(0,r.$)(t).trigger(e),i.$layer.show()}if(i.hideOnSecondTrigger&&d&&null!==i.$menu&&void 0!==i.$menu)i.$menu.trigger("contextmenu:hide");else{if(i.reposition&&d)if(document.elementFromPoint){if(i.$trigger.is(t))return void i.position.call(i.$trigger,i,o,c)}else if(n=i.$trigger.offset(),u=(0,r.$)(window),n.top+=u.scrollTop(),n.top<=e.pageY&&(n.left+=u.scrollLeft(),n.left<=e.pageX&&(n.bottom=n.top+i.$trigger.outerHeight(),n.bottom>=e.pageY&&(n.right=n.left+i.$trigger.outerWidth(),n.right>=e.pageX))))return void i.position.call(i.$trigger,i,o,c);t&&d&&i.$trigger.one("contextmenu:hidden",(function(){(0,r.$)(t).contextMenu({x:o,y:c,button:a})})),null!=i&&null!==i.$menu&&void 0!==i.$menu&&i.$menu.trigger("contextmenu:hide")}}}),50)},keyStop:function(e,t){t.isInput||e.preventDefault(),e.stopPropagation()},key:function(e){var t={};a&&(t=a.data("contextMenu")||{}),void 0===t.zIndex&&(t.zIndex=0);var n=0;if(function e(t){""!==t.style.zIndex?n=t.style.zIndex:null!==t.offsetParent&&void 0!==t.offsetParent?e(t.offsetParent):null!==t.parentElement&&void 0!==t.parentElement&&e(t.parentElement)}(e.target),!(t.$menu&&parseInt(n,10)>parseInt(t.$menu.css("zIndex"),10))){switch(e.keyCode){case 9:case 38:if(f.keyStop(e,t),t.isInput){if(9===e.keyCode&&e.shiftKey)return e.preventDefault(),t.$selected&&t.$selected.find("input, textarea, select").blur(),void(null!==t.$menu&&void 0!==t.$menu&&t.$menu.trigger("prevcommand"));if(38===e.keyCode&&"checkbox"===t.$selected.find("input, textarea, select").prop("type"))return void e.preventDefault()}else if(9!==e.keyCode||e.shiftKey)return void(null!==t.$menu&&void 0!==t.$menu&&t.$menu.trigger("prevcommand"));break;case 40:if(f.keyStop(e,t),!t.isInput)return void(null!==t.$menu&&void 0!==t.$menu&&t.$menu.trigger("nextcommand"));if(9===e.keyCode)return e.preventDefault(),t.$selected&&t.$selected.find("input, textarea, select").blur(),void(null!==t.$menu&&void 0!==t.$menu&&t.$menu.trigger("nextcommand"));if(40===e.keyCode&&"checkbox"===t.$selected.find("input, textarea, select").prop("type"))return void e.preventDefault();break;case 37:if(f.keyStop(e,t),t.isInput||!t.$selected||!t.$selected.length)break;if(!t.$selected.parent().hasClass("bpbm-context-menu-root")){var i=t.$selected.parent().parent();return t.$selected.trigger("contextmenu:blur"),void(t.$selected=i)}break;case 39:if(f.keyStop(e,t),t.isInput||!t.$selected||!t.$selected.length)break;var r=t.$selected.data("contextMenu")||{};if(r.$menu&&t.$selected.hasClass("bpbm-context-menu-submenu"))return t.$selected=null,r.$selected=null,void r.$menu.trigger("nextcommand");break;case 35:case 36:return t.$selected&&t.$selected.find("input, textarea, select").length?void 0:((t.$selected&&t.$selected.parent()||t.$menu).children(":not(."+t.classNames.disabled+", ."+t.classNames.notSelectable+")")[36===e.keyCode?"first":"last"]().trigger("contextmenu:focus"),void e.preventDefault());case 13:if(f.keyStop(e,t),t.isInput){if(t.$selected&&!t.$selected.is("textarea, select"))return void e.preventDefault();break}return void(void 0!==t.$selected&&null!==t.$selected&&t.$selected.trigger("mouseup"));case 32:case 33:case 34:return void f.keyStop(e,t);case 27:return f.keyStop(e,t),void(null!==t.$menu&&void 0!==t.$menu&&t.$menu.trigger("contextmenu:hide"));default:var o=String.fromCharCode(e.keyCode).toUpperCase();if(t.accesskeys&&t.accesskeys[o])return void t.accesskeys[o].$node.trigger(t.accesskeys[o].$menu?"contextmenu:focus":"mouseup")}e.stopPropagation(),void 0!==t.$selected&&null!==t.$selected&&t.$selected.trigger(e)}},prevItem:function(e){e.stopPropagation();var t=(0,r.$)(this).data("contextMenu")||{},n=(0,r.$)(this).data("contextMenuRoot")||{};if(t.$selected){var i=t.$selected;(t=t.$selected.parent().data("contextMenu")||{}).$selected=i}for(var a=t.$menu.children(),o=t.$selected&&t.$selected.prev().length?t.$selected.prev():a.last(),s=o;o.hasClass(n.classNames.disabled)||o.hasClass(n.classNames.notSelectable)||o.is(":hidden");)if((o=o.prev().length?o.prev():a.last()).is(s))return;t.$selected&&f.itemMouseleave.call(t.$selected.get(0),e),f.itemMouseenter.call(o.get(0),e);var c=o.find("input, textarea, select");c.length&&c.focus()},nextItem:function(e){e.stopPropagation();var t=(0,r.$)(this).data("contextMenu")||{},n=(0,r.$)(this).data("contextMenuRoot")||{};if(t.$selected){var i=t.$selected;(t=t.$selected.parent().data("contextMenu")||{}).$selected=i}for(var a=t.$menu.children(),o=t.$selected&&t.$selected.next().length?t.$selected.next():a.first(),s=o;o.hasClass(n.classNames.disabled)||o.hasClass(n.classNames.notSelectable)||o.is(":hidden");)if((o=o.next().length?o.next():a.first()).is(s))return;t.$selected&&f.itemMouseleave.call(t.$selected.get(0),e),f.itemMouseenter.call(o.get(0),e);var c=o.find("input, textarea, select");c.length&&c.focus()},focusInput:function(){var e=(0,r.$)(this).closest(".bpbm-context-menu-item"),t=e.data(),n=t.contextMenu,i=t.contextMenuRoot;i.$selected=n.$selected=e,i.isInput=n.isInput=!0},blurInput:function(){var e=(0,r.$)(this).closest(".bpbm-context-menu-item").data(),t=e.contextMenu;e.contextMenuRoot.isInput=t.isInput=!1},menuMouseenter:function(){(0,r.$)(this).data().contextMenuRoot.hovering=!0},menuMouseleave:function(e){var t=(0,r.$)(this).data().contextMenuRoot;t.$layer&&t.$layer.is(e.relatedTarget)&&(t.hovering=!1)},itemMouseenter:function(e){var t=(0,r.$)(this),n=t.data(),i=n.contextMenu,a=n.contextMenuRoot;a.hovering=!0,e&&a.$layer&&a.$layer.is(e.relatedTarget)&&(e.preventDefault(),e.stopImmediatePropagation()),(i.$menu?i:a).$menu.children("."+a.classNames.hover).trigger("contextmenu:blur").children(".hover").trigger("contextmenu:blur"),t.hasClass(a.classNames.disabled)||t.hasClass(a.classNames.notSelectable)?i.$selected=null:t.trigger("contextmenu:focus")},itemMouseleave:function(e){var t=(0,r.$)(this),n=t.data(),i=n.contextMenu,a=n.contextMenuRoot;if(a!==i&&a.$layer&&a.$layer.is(e.relatedTarget))return void 0!==a.$selected&&null!==a.$selected&&a.$selected.trigger("contextmenu:blur"),e.preventDefault(),e.stopImmediatePropagation(),void(a.$selected=i.$selected=i.$node);i&&i.$menu&&i.$menu.hasClass("bpbm-context-menu-visible")||t.trigger("contextmenu:blur")},itemClick:function(e){var t,n=(0,r.$)(this),i=n.data(),a=i.contextMenu,o=i.contextMenuRoot,s=i.contextMenuKey;if(!(!a.items[s]||n.is("."+o.classNames.disabled+", .bpbm-context-menu-separator, ."+o.classNames.notSelectable)||n.is(".bpbm-context-menu-submenu")&&!1===o.selectableSubMenu)){if(e.preventDefault(),e.stopImmediatePropagation(),r.$.isFunction(a.callbacks[s])&&Object.prototype.hasOwnProperty.call(a.callbacks,s))t=a.callbacks[s];else{if(!r.$.isFunction(o.callback))return;t=o.callback}!1!==t.call(o.$trigger,s,o,e)?o.$menu.trigger("contextmenu:hide"):o.$menu.parent().length&&m.update.call(o.$trigger,o)}},inputClick:function(e){e.stopImmediatePropagation()},hideMenu:function(e,t){var n=(0,r.$)(this).data("contextMenuRoot");m.hide.call(n.$trigger,n,t&&t.force)},focusItem:function(e){e.stopPropagation();var t=(0,r.$)(this),n=t.data(),i=n.contextMenu,a=n.contextMenuRoot;t.hasClass(a.classNames.disabled)||t.hasClass(a.classNames.notSelectable)||(t.addClass([a.classNames.hover,a.classNames.visible].join(" ")).parent().find(".bpbm-context-menu-item").not(t).removeClass(a.classNames.visible).filter("."+a.classNames.hover).trigger("contextmenu:blur"),i.$selected=a.$selected=t,i&&i.$node&&i.$node.hasClass("bpbm-context-menu-submenu")&&i.$node.addClass(a.classNames.hover),i.$node&&a.positionSubmenu.call(i.$node,i.$menu))},blurItem:function(e){e.stopPropagation();var t=(0,r.$)(this),n=t.data(),i=n.contextMenu,a=n.contextMenuRoot;i.autoHide&&t.removeClass(a.classNames.visible),t.removeClass(a.classNames.hover),i.$selected=null}},m={show:function(e,t,n){var i=(0,r.$)(this),o={};if((0,r.$)("#bpbm-context-menu-layer").trigger("mousedown"),e.$trigger=i,!1!==e.events.show.call(i,e))if(!1!==m.update.call(i,e)){if(e.position.call(i,e,t,n),e.zIndex){var s=e.zIndex;"function"==typeof e.zIndex&&(s=e.zIndex.call(i,e)),o.zIndex=function(e){for(var t=0,n=e;t=Math.max(t,parseInt(n.css("z-index"),10)||0),(n=n.parent())&&n.length&&!("html body".indexOf(n.prop("nodeName").toLowerCase())>-1););return t}(i)+s}m.layer.call(e.$menu,e,o.zIndex),e.$menu.find("ul").css("zIndex",o.zIndex+1),e.$menu.css(o)[e.animation.show](e.animation.duration,(function(){i.trigger("contextmenu:visible"),m.activated(e),e.events.activated(e)})),i.data("contextMenu",e).addClass("bpbm-context-menu-active"),(0,r.$)(document).off("keydown.contextMenu").on("keydown.contextMenu",f.key),e.autoHide&&(0,r.$)(document).on("mousemove.contextMenuAutoHide",(function(t){var n=i.offset();n.right=n.left+i.outerWidth(),n.bottom=n.top+i.outerHeight(),!e.$layer||e.hovering||t.pageX>=n.left&&t.pageX<=n.right&&t.pageY>=n.top&&t.pageY<=n.bottom||setTimeout((function(){e.hovering||null===e.$menu||void 0===e.$menu||e.$menu.trigger("contextmenu:hide")}),50)}))}else a=null;else a=null},hide:function(e,t){var n=(0,r.$)(this);if(e||(e=n.data("contextMenu")||{}),t||!e.events||!1!==e.events.hide.call(n,e)){if(n.removeData("contextMenu").removeClass("bpbm-context-menu-active"),e.$layer){setTimeout((i=e.$layer,function(){i.remove()}),10);try{delete e.$layer}catch(t){e.$layer=null}}var i;a=null,e.$menu.find("."+e.classNames.hover).trigger("contextmenu:blur"),e.$selected=null,e.$menu.find("."+e.classNames.visible).removeClass(e.classNames.visible),(0,r.$)(document).off(".contextMenuAutoHide").off("keydown.contextMenu"),e.$menu&&e.$menu[e.animation.hide](e.animation.duration,(function(){e.build&&(e.$menu.remove(),r.$.each(e,(function(t){switch(t){case"ns":case"selector":case"build":case"trigger":return!0;default:e[t]=void 0;try{delete e[t]}catch(e){}return!0}}))),setTimeout((function(){n.trigger("contextmenu:hidden")}),10)}))}},create:function(e,t){function n(e){var t=(0,r.$)("<span></span>");if(e._accesskey)e._beforeAccesskey&&t.append(document.createTextNode(e._beforeAccesskey)),(0,r.$)("<span></span>").addClass("bpbm-context-menu-accesskey").text(e._accesskey).appendTo(t),e._afterAccesskey&&t.append(document.createTextNode(e._afterAccesskey));else if(e.isHtmlName){if(void 0!==e.accesskey)throw new Error("accesskeys are not compatible with HTML names and cannot be used together in the same item");t.html(e.name)}else t.text(e.name);return t}void 0===t&&(t=e),e.$menu=(0,r.$)('<ul class="bp-messages-wrap bpbm-context-menu-list"></ul>').addClass(e.className||"").data({contextMenu:e,contextMenuRoot:t}),e.dataAttr&&r.$.each(e.dataAttr,(function(t,n){e.$menu.attr("data-"+e.key,n)})),r.$.each(["callbacks","commands","inputs"],(function(n,i){e[i]={},t[i]||(t[i]={})})),t.accesskeys||(t.accesskeys={}),r.$.each(e.items,(function(i,a){var o=(0,r.$)('<li class="bpbm-context-menu-item"></li>').addClass(a.className||""),s=null,c=null;if(o.on("click",r.$.noop),"string"!=typeof a&&"cm_separator"!==a.type||(a={type:"cm_seperator"}),a.$node=o.data({contextMenu:e,contextMenuRoot:t,contextMenuKey:i}),void 0!==a.accesskey)for(var l,u=function(e){for(var t,n=e.split(/\s+/),i=[],r=0;t=n[r];r++)t=t.charAt(0).toUpperCase(),i.push(t);return i}(a.accesskey),p=0;l=u[p];p++)if(!t.accesskeys[l]){t.accesskeys[l]=a;var h=a.name.match(new RegExp("^(.*?)("+l+")(.*)$","i"));h&&(a._beforeAccesskey=h[1],a._accesskey=h[2],a._afterAccesskey=h[3]);break}if(a.type&&d[a.type])d[a.type].call(o,a,e,t),r.$.each([e,t],(function(t,n){n.commands[i]=a,!r.$.isFunction(a.callback)||void 0!==n.callbacks[i]&&void 0!==e.type||(n.callbacks[i]=a.callback)}));else{switch("cm_seperator"===a.type?o.addClass("bpbm-context-menu-separator "+t.classNames.notSelectable):"html"===a.type?o.addClass("bpbm-context-menu-html "+t.classNames.notSelectable):"sub"!==a.type&&a.type?(s=(0,r.$)("<label></label>").appendTo(o),n(a).appendTo(s),o.addClass("bpbm-context-menu-input"),e.hasTypes=!0,r.$.each([e,t],(function(e,t){t.commands[i]=a,t.inputs[i]=a}))):a.items&&(a.type="sub"),a.type){case"cm_seperator":break;case"text":c=(0,r.$)('<input type="text" value="1" name="" />').attr("name","bpbm-context-menu-input-"+i).val(a.value||"").appendTo(s);break;case"textarea":c=(0,r.$)('<textarea name=""></textarea>').attr("name","bpbm-context-menu-input-"+i).val(a.value||"").appendTo(s),a.height&&c.height(a.height);break;case"checkbox":c=(0,r.$)('<input type="checkbox" value="1" name="" />').attr("name","bpbm-context-menu-input-"+i).val(a.value||"").prop("checked",!!a.selected).prependTo(s);break;case"radio":c=(0,r.$)('<input type="radio" value="1" name="" />').attr("name","bpbm-context-menu-input-"+a.radio).val(a.value||"").prop("checked",!!a.selected).prependTo(s);break;case"select":c=(0,r.$)('<select name=""></select>').attr("name","bpbm-context-menu-input-"+i).appendTo(s),a.options&&(r.$.each(a.options,(function(e,t){(0,r.$)("<option></option>").val(e).text(t).appendTo(c)})),c.val(a.selected));break;case"sub":n(a).appendTo(o),a.appendTo=a.$node,o.data("contextMenu",a).addClass("bpbm-context-menu-submenu"),a.callback=null,"function"==typeof a.items.then?m.processPromises(a,t,a.items):m.create(a,t);break;case"html":(0,r.$)(a.html).appendTo(o);break;default:r.$.each([e,t],(function(t,n){n.commands[i]=a,!r.$.isFunction(a.callback)||void 0!==n.callbacks[i]&&void 0!==e.type||(n.callbacks[i]=a.callback)})),n(a).appendTo(o)}a.type&&"sub"!==a.type&&"html"!==a.type&&"cm_seperator"!==a.type&&(c.on("focus",f.focusInput).on("blur",f.blurInput),a.events&&c.on(a.events,e)),a.icon&&(r.$.isFunction(a.icon)?a._icon=a.icon.call(this,this,o,i,a):"string"!=typeof a.icon||"fab "!==a.icon.substring(0,4)&&"fas "!==a.icon.substring(0,4)&&"fad "!==a.icon.substring(0,4)&&"far "!==a.icon.substring(0,4)&&"fal "!==a.icon.substring(0,4)?"string"==typeof a.icon&&"fa-"===a.icon.substring(0,3)?a._icon=t.classNames.icon+" "+t.classNames.icon+"--fa fa "+a.icon:a._icon=t.classNames.icon+" "+t.classNames.icon+"-"+a.icon:(o.addClass(t.classNames.icon+" "+t.classNames.icon+"--fa5"),a._icon=(0,r.$)('<i class="'+a.icon+'"></i>')),"string"==typeof a._icon?o.addClass(a._icon):o.prepend(a._icon))}a.$input=c,a.$label=s,o.appendTo(e.$menu),!e.hasTypes&&r.$.support.eventSelectstart&&o.on("selectstart.disableTextSelect",f.abortevent)})),e.$node||e.$menu.css("display","none").addClass("bpbm-context-menu-root"),e.$menu.appendTo(e.appendTo||document.body)},resize:function(e,t){var n;e.css({position:"absolute",display:"block"}),e.data("width",(n=e.get(0)).getBoundingClientRect?Math.ceil(n.getBoundingClientRect().width):e.outerWidth()+1),e.css({position:"static",minWidth:"0px",maxWidth:"100000px"}),e.find("> li > ul").each((function(){m.resize((0,r.$)(this),!0)})),t||e.find("ul").addBack().css({position:"",display:"",minWidth:"",maxWidth:""}).outerWidth((function(){return(0,r.$)(this).data("width")}))},update:function(e,t){var n=this;void 0===t&&(t=e,m.resize(e.$menu));var i=!1;return e.$menu.children().each((function(){var a,o=(0,r.$)(this),s=o.data("contextMenuKey"),c=e.items[s],l=r.$.isFunction(c.disabled)&&c.disabled.call(n,s,t)||!0===c.disabled;if((a=r.$.isFunction(c.visible)?c.visible.call(n,s,t):void 0===c.visible||!0===c.visible)&&(i=!0),o[a?"show":"hide"](),o[l?"addClass":"removeClass"](t.classNames.disabled),r.$.isFunction(c.icon)){o.removeClass(c._icon);var u=c.icon.call(this,n,o,s,c);"string"==typeof u?o.addClass(u):o.prepend(u)}if(c.type)switch(o.find("input, select, textarea").prop("disabled",l),c.type){case"text":case"textarea":c.$input.val(c.value||"");break;case"checkbox":case"radio":c.$input.val(c.value||"").prop("checked",!!c.selected);break;case"select":c.$input.val((0===c.selected?"0":c.selected)||"")}c.$menu&&m.update.call(n,c,t)&&(i=!0)})),i},layer:function(e,t){var n=e.$layer=(0,r.$)('<div id="bpbm-context-menu-layer"></div>').css({height:s.height(),width:s.width(),display:"block",position:"fixed","z-index":t-1,top:0,left:0,opacity:0,filter:"alpha(opacity=0)","background-color":"#000"}).data("contextMenuRoot",e).appendTo(document.body).on("contextmenu",f.abortevent).on("mousedown",f.layerClick);return void 0===document.body.style.maxWidth&&n.css({position:"absolute",height:(0,r.$)(document).height()}),n},processPromises:function(e,t,n){function i(e,t,n){void 0===n?(n={error:{name:"No items and no error item",icon:"bpbm-context-menu-icon bpbm-context-menu-icon-quit"}},window.console&&(console.error||console.log).call(console,'When you reject a promise, provide an "items" object, equal to normal sub-menu items')):"string"==typeof n&&(n={error:{name:n}}),r(e,t,n)}function r(e,t,n){void 0!==t.$menu&&t.$menu.is(":visible")&&(e.$node.removeClass(t.classNames.iconLoadingClass),e.items=n,m.create(e,t,!0),m.update(e,t),t.positionSubmenu.call(e.$node,e.$menu))}e.$node.addClass(t.classNames.iconLoadingClass),n.then(function(e,t,n){void 0===n&&i(void 0),r(e,t,n)}.bind(this,e,t),i.bind(this,e,t))},activated:function(e){var t=e.$menu,n=t.offset(),i=(0,r.$)(window).height(),a=(0,r.$)(window).scrollTop(),o=t.height();o>i?t.css({height:i+"px","overflow-x":"hidden","overflow-y":"auto",top:a+"px"}):(n.top<a||n.top+o>a+i)&&t.css({top:a+"px"})}};function g(e){return e.id&&(0,r.$)('label[for="'+e.id+'"]').val()||e.name}function v(e,t,n){return n||(n=0),t.each((function(){var t,i,a=(0,r.$)(this),o=this,s=this.nodeName.toLowerCase();switch("label"===s&&a.find("input, textarea, select").length&&(t=a.text(),s=(o=(a=a.children().first()).get(0)).nodeName.toLowerCase()),s){case"menu":i={name:a.attr("label"),items:{}},n=v(i.items,a.children(),n);break;case"a":case"button":i={name:a.text(),disabled:!!a.attr("disabled"),callback:function(){a.get(0).click()}};break;case"menuitem":case"command":switch(a.attr("type")){case void 0:case"command":case"menuitem":i={name:a.attr("label"),disabled:!!a.attr("disabled"),icon:a.attr("icon"),callback:function(){a.get(0).click()}};break;case"checkbox":i={type:"checkbox",disabled:!!a.attr("disabled"),name:a.attr("label"),selected:!!a.attr("checked")};break;case"radio":i={type:"radio",disabled:!!a.attr("disabled"),name:a.attr("label"),radio:a.attr("radiogroup"),value:a.attr("id"),selected:!!a.attr("checked")};break;default:i=void 0}break;case"hr":i="-------";break;case"input":switch(a.attr("type")){case"text":i={type:"text",name:t||g(o),disabled:!!a.attr("disabled"),value:a.val()};break;case"checkbox":i={type:"checkbox",name:t||g(o),disabled:!!a.attr("disabled"),selected:!!a.attr("checked")};break;case"radio":i={type:"radio",name:t||g(o),disabled:!!a.attr("disabled"),radio:!!a.attr("name"),value:a.val(),selected:!!a.attr("checked")};break;default:i=void 0}break;case"select":i={type:"select",name:t||g(o),disabled:!!a.attr("disabled"),selected:a.val(),options:{}},a.children().each((function(){i.options[this.value]=(0,r.$)(this).text()}));break;case"textarea":i={type:"textarea",name:t||g(o),disabled:!!a.attr("disabled"),value:a.val()};break;case"label":break;default:i={type:"html",html:a.clone(!0)}}i&&(n++,e["key"+n]=i)})),n}r.$.fn.contextMenu=function(e){var t=this,n=e;if(this.length>0)if(void 0===e)this.first().trigger("contextmenu");else if(void 0!==e.x&&void 0!==e.y)this.first().trigger(r.$.Event("contextmenu",{pageX:e.x,pageY:e.y,mouseButton:e.button}));else if("hide"===e){var i=this.first().data("contextMenu")?this.first().data("contextMenu").$menu:null;i&&i.trigger("contextmenu:hide")}else"destroy"===e?r.$.BPBMcontextMenu("destroy",{context:this}):r.$.isPlainObject(e)?(e.context=this,r.$.BPBMcontextMenu("create",e)):e?this.removeClass("bpbm-context-menu-disabled"):e||this.addClass("bpbm-context-menu-disabled");else r.$.each(u,(function(){this.selector===t.selector&&(n.data=this,r.$.extend(n.data,{trigger:"demand"}))})),f.contextmenu.call(n.target,n);return this},r.$.BPBMcontextMenu=function(e,t){"string"!=typeof e&&(t=e,e="create"),"string"==typeof t?t={selector:t}:void 0===t&&(t={});var n=r.$.extend(!0,{},p,t||{}),i=(0,r.$)(document),a=i,s=!1;switch(n.context&&n.context.length?(a=(0,r.$)(n.context).first(),n.context=a.get(0),s=!(0,r.$)(n.context).is(document)):n.context=document,e){case"update":if(s)m.update(a);else for(var d in u)u.hasOwnProperty(d)&&m.update(u[d]);break;case"create":if(!n.selector)throw new Error("No selector specified");if(n.selector.match(/.bpbm-context-menu-(list|item|input)($|\s)/))throw new Error('Cannot bind to selector "'+n.selector+'" as it contains a reserved className');if(!n.build&&(!n.items||r.$.isEmptyObject(n.items)))throw new Error("No Items specified");if(c++,n.ns=".contextMenu"+c,s||(l[n.selector]=n.ns),u[n.ns]=n,n.trigger||(n.trigger="right"),!o){var h="click"===n.itemClickEvent?"click.contextMenu":"mouseup.contextMenu",g={"contextmenu:focus.contextMenu":f.focusItem,"contextmenu:blur.contextMenu":f.blurItem,"contextmenu.contextMenu":f.abortevent,"mouseenter.contextMenu":f.itemMouseenter,"mouseleave.contextMenu":f.itemMouseleave};g[h]=f.itemClick,i.on({"contextmenu:hide.contextMenu":f.hideMenu,"prevcommand.contextMenu":f.prevItem,"nextcommand.contextMenu":f.nextItem,"contextmenu.contextMenu":f.abortevent,"mouseenter.contextMenu":f.menuMouseenter,"mouseleave.contextMenu":f.menuMouseleave},".bpbm-context-menu-list").on("mouseup.contextMenu",".bpbm-context-menu-input",f.inputClick).on(g,".bpbm-context-menu-item"),o=!0}switch(a.on("contextmenu"+n.ns,n.selector,n,f.contextmenu),s&&a.on("remove"+n.ns,(function(){(0,r.$)(this).contextMenu("destroy")})),n.trigger){case"hover":a.on("mouseenter"+n.ns,n.selector,n,f.mouseenter).on("mouseleave"+n.ns,n.selector,n,f.mouseleave);break;case"left":a.on("click"+n.ns,n.selector,n,f.click);break;case"touchstart":a.on("touchstart"+n.ns,n.selector,n,f.click)}n.build||m.create(n);break;case"destroy":var v;if(s){var b=n.context;r.$.each(u,(function(e,t){if(!t)return!0;if(!(0,r.$)(b).is(t.selector))return!0;(v=(0,r.$)(".bpbm-context-menu-list").filter(":visible")).length&&v.data().contextMenuRoot.$trigger.is((0,r.$)(t.context).find(t.selector))&&v.trigger("contextmenu:hide",{force:!0});try{u[t.ns].$menu&&u[t.ns].$menu.remove(),delete u[t.ns]}catch(e){u[t.ns]=null}return(0,r.$)(t.context).off(t.ns),!0}))}else if(n.selector){if(l[n.selector]){(v=(0,r.$)(".bpbm-context-menu-list").filter(":visible")).length&&v.data().contextMenuRoot.$trigger.is(n.selector)&&v.trigger("contextmenu:hide",{force:!0});try{u[l[n.selector]].$menu&&u[l[n.selector]].$menu.remove(),delete u[l[n.selector]]}catch(e){u[l[n.selector]]=null}i.off(l[n.selector])}}else i.off(".contextMenu .contextMenuAutoHide"),r.$.each(u,(function(e,t){(0,r.$)(t.context).off(t.ns)})),l={},u={},c=0,o=!1,(0,r.$)("#bpbm-context-menu-layer, .bpbm-context-menu-list").remove();break;case"html5":(!r.$.support.htmlCommand&&!r.$.support.htmlMenuitem||"boolean"==typeof t&&t)&&(0,r.$)('menu[type="context"]').each((function(){this.id&&r.$.BPBMcontextMenu({selector:"[contextmenu="+this.id+"]",items:r.$.BPBMcontextMenu.fromMenu(this)})})).css("display","none");break;default:throw new Error('Unknown operation "'+e+'"')}return this},r.$.BPBMcontextMenu.setInputValues=function(e,t){void 0===t&&(t={}),r.$.each(e.inputs,(function(e,n){switch(n.type){case"text":case"textarea":n.value=t[e]||"";break;case"checkbox":n.selected=!!t[e];break;case"radio":n.selected=(t[n.radio]||"")===n.value;break;case"select":n.selected=t[e]||""}}))},r.$.BPBMcontextMenu.getInputValues=function(e,t){return void 0===t&&(t={}),r.$.each(e.inputs,(function(e,n){switch(n.type){case"text":case"textarea":case"select":t[e]=n.$input.val();break;case"checkbox":t[e]=n.$input.prop("checked");break;case"radio":n.$input.prop("checked")&&(t[n.radio]=n.value)}})),t},r.$.BPBMcontextMenu.fromMenu=function(e){var t={};return v(t,(0,r.$)(e).children()),t},r.$.BPBMcontextMenu.defaults=p,r.$.BPBMcontextMenu.types=d,r.$.BPBMcontextMenu.handle=f,r.$.BPBMcontextMenu.op=m,r.$.BPBMcontextMenu.menus=u},8901:(e,t,n)=>{"use strict";n.r(t);var i=n(5861),r=n(1002),a=n(7757),o=n.n(a),s=n(5474),c=n(3086),l=0,u={},d={},p=window.joypixels,h=[];function f(e){p?e():h.push(e)}var m,g,v,b="data:image/gif;base64,R0lGODlhAQABAJH/AP///wAAAMDAwAAAACH5BAEAAAIALAAAAAABAAEAAAICVAEAOw==",y=[].slice,_="bp-emojionearea",A=0;function w(e,t,n){var i=!0,r=1;if(t){t=t.toLowerCase();do{var a=1==r?"@"+t:t;u[e.id][a]&&u[e.id][a].length&&s.$.each(u[e.id][a],(function(t,r){return i=!1!==r.apply(e,n||[])}))}while(i&&r--)}return i}function k(e,t,n,i){i=i||function(e,t){return(0,s.$)(t.currentTarget)},s.$.each(n,(function(r,a){r=s.$.isArray(n)?a:r,(d[e.id][a]||(d[e.id][a]=[])).push([t,r,i])}))}function S(e,t,n){var i,r=p.imageType;i="svg"==r?p.imagePathSVG:p.imagePathPNG;var a="";n&&(a=n.substr(1,n.length-2).replace(/_/g," ").replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})));var o="";return t.uc_base&&A>4?(o=t.uc_base,t=t.uc_full.toUpperCase()):o=t,e=e.replace("{name}",n||"").replace("{friendlyName}",a).replace("{img}",i+(A<2?o.toUpperCase():o)+"."+r).replace("{uni}",t),n?e.replace("{alt}",p.shortnameToUnicode(n)):e.replace("{alt}",p.convert(t))}function C(e,t,n){return e.replace(/:?\+?[\w_\-]+:?/g,(function(e){e=":"+e.replace(/:$/,"").replace(/^:/,"")+":";var i=p.emojiList[e];if(void 0===i){var r=p.toShort(p.shortnameToUnicode(e));void 0!==r&&(i=p.emojiList[r])}return i?A>4?S(t,i,e):(A>3&&(i=i.unicode),S(t,i[i.length-1],e)):n?"":e}))}function x(e){var t,n;if(window.getSelection){if((t=window.getSelection()).getRangeAt&&t.rangeCount){(n=t.getRangeAt(0)).deleteContents();var i=document.createElement("div");i.innerHTML=e;for(var r,a,o=document.createDocumentFragment();r=i.firstChild;)a=o.appendChild(r);n.insertNode(o),a&&((n=n.cloneRange()).setStartAfter(a),n.collapse(!0),t.removeAllRanges(),t.addRange(n))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(e)}function E(){return window.joypixelsVersion||"3.1.2"}function T(e){return"object"===(0,r.Z)(e)}function P(e){var t;return e.cacheBustParam?(t=e.cacheBustParam,T(e.jsEscapeMap)?"?v=1.2.4"===t?"2.0.0":"?v=2.0.1"===t?"2.1.0":"?v=2.1.1"===t?"2.1.1":"?v=2.1.2"===t?"2.1.2":"?v=2.1.3"===t?"2.1.3":"?v=2.1.4"===t?"2.1.4":"2.2.7":"1.5.2"):e.emojiVersion}function R(e){switch(e){case"1.5.2":return 0;case"2.0.0":return 1;case"2.1.0":case"2.1.1":return 2;case"2.1.2":return 3;case"2.1.3":case"2.1.4":case"2.2.7":return 4;case"3.0.1":case"3.0.2":case"3.0.3":case"3.0":return 5;default:return 6}}function O(){return new Promise(function(){var e=(0,i.Z)(o().mark((function e(t,n){var i,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.$.fn.BPemojioneArea||!s.$.fn.BPemojioneArea.defaults){e.next=6;break}return e.next=3,s.$.fn.BPemojioneArea.defaults;case 3:return i=e.sent,t(i),e.abrupt("return");case 6:r={attributes:{dir:"ltr",spellcheck:!1,autocomplete:"off",autocorrect:"off",autocapitalize:"off"},search:!0,placeholder:null,emojiPlaceholder:":smiley:",searchPlaceholder:BP_Messages_Emoji.search,container:null,hideSource:!0,shortnames:!0,sprite:!0,pickerPosition:"top",filtersPosition:"top",searchPosition:"top",hidePickerOnBlur:!0,buttonTitle:BP_Messages_Emoji.tab,tones:!0,tonesStyle:"bullet",inline:null,saveEmojisAs:"unicode",shortcuts:!0,autocomplete:!0,autocompleteTones:!1,standalone:!1,useInternalCDN:!0,imageType:"png",recentEmojis:!0,textcomplete:{maxCount:15,placement:null}},R(p?P(p):E()),r.filters={recent:{icon:"clock3",title:BP_Messages_Emoji.Recent,emoji:""},tones:{title:BP_Messages_Emoji.Diversity,emoji:"open_hands raised_hands palms_up_together clap pray thumbsup thumbsdown punch fist left_facing_fist right_facing_fist fingers_crossed v metal love_you_gesture ok_hand point_left point_right point_up_2 point_down point_up raised_hand raised_back_of_hand hand_splayed vulcan wave call_me muscle middle_finger writing_hand selfie nail_care ear nose baby boy girl man woman blond-haired_woman blond-haired_man older_man older_woman man_with_chinese_cap woman_wearing_turban man_wearing_turban woman_police_officer man_police_officer woman_construction_worker man_construction_worker woman_guard man_guard woman_detective man_detective woman_health_worker man_health_worker woman_farmer man_farmer woman_cook man_cook woman_student man_student woman_singer man_singer woman_teacher man_teacher woman_factory_worker man_factory_worker woman_technologist man_technologist woman_office_worker man_office_worker woman_mechanic man_mechanic woman_scientist man_scientist woman_artist man_artist woman_firefighter man_firefighter woman_pilot man_pilot woman_astronaut man_astronaut woman_judge man_judge mrs_claus santa princess prince bride_with_veil man_in_tuxedo angel pregnant_woman breast_feeding woman_bowing man_bowing man_tipping_hand woman_tipping_hand man_gesturing_no woman_gesturing_no man_gesturing_ok woman_gesturing_ok man_raising_hand woman_raising_hand woman_facepalming man_facepalming woman_shrugging man_shrugging man_pouting woman_pouting man_frowning woman_frowning man_getting_haircut woman_getting_haircut man_getting_face_massage woman_getting_face_massage man_in_business_suit_levitating dancer man_dancing woman_walking man_walking woman_running man_running adult child older_adult bearded_person woman_with_headscarf woman_mage man_mage woman_fairy man_fairy woman_vampire man_vampire mermaid merman woman_elf man_elf snowboarder woman_lifting_weights man_lifting_weights woman_cartwheeling man_cartwheeling woman_bouncing_ball man_bouncing_ball woman_playing_handball man_playing_handball woman_golfing man_golfing woman_surfing man_surfing woman_swimming man_swimming woman_playing_water_polo man_playing_water_polo woman_rowing_boat man_rowing_boat horse_racing woman_biking man_biking woman_mountain_biking man_mountain_biking woman_juggling man_juggling woman_in_steamy_room man_in_steamy_room woman_climbing man_climbing woman_in_lotus_position man_in_lotus_position bath person_in_bed"},people:{icon:"yum",title:BP_Messages_Emoji["Smileys & People"],emoji:"grinning smiley smile grin laughing sweat_smile joy rofl relaxed blush innocent slight_smile upside_down wink relieved crazy_face star_struck heart_eyes kissing_heart kissing kissing_smiling_eyes kissing_closed_eyes yum stuck_out_tongue_winking_eye stuck_out_tongue_closed_eyes stuck_out_tongue money_mouth hugging nerd sunglasses cowboy smirk unamused disappointed pensive worried face_with_raised_eyebrow face_with_monocle confused slight_frown frowning2 persevere confounded tired_face weary triumph angry rage face_with_symbols_over_mouth no_mouth neutral_face expressionless hushed frowning anguished open_mouth astonished dizzy_face exploding_head flushed scream fearful cold_sweat cry disappointed_relieved drooling_face sob sweat sleepy sleeping rolling_eyes thinking shushing_face face_with_hand_over_mouth lying_face grimacing zipper_mouth face_vomiting nauseated_face sneezing_face mask thermometer_face head_bandage smiling_imp imp japanese_ogre japanese_goblin poop ghost skull skull_crossbones alien space_invader robot jack_o_lantern clown smiley_cat smile_cat joy_cat heart_eyes_cat smirk_cat kissing_cat scream_cat crying_cat_face pouting_cat open_hands raised_hands palms_up_together clap pray handshake thumbsup thumbsdown punch fist left_facing_fist right_facing_fist fingers_crossed v metal love_you_gesture ok_hand point_left point_right point_up_2 point_down point_up raised_hand raised_back_of_hand hand_splayed vulcan wave call_me muscle middle_finger writing_hand selfie nail_care ring lipstick kiss lips tongue ear nose footprints eye eyes speaking_head bust_in_silhouette busts_in_silhouette baby boy girl man woman blond-haired_woman blond_haired_man older_man older_woman man_with_chinese_cap woman_wearing_turban man_wearing_turban woman_police_officer police_officer woman_construction_worker construction_worker woman_guard guard woman_detective detective woman_health_worker man_health_worker woman_farmer man_farmer woman_cook man_cook woman_student man_student woman_singer man_singer woman_teacher man_teacher woman_factory_worker man_factory_worker woman_technologist man_technologist woman_office_worker man_office_worker woman_mechanic man_mechanic woman_scientist man_scientist woman_artist man_artist woman_firefighter man_firefighter woman_pilot man_pilot woman_astronaut man_astronaut woman_judge man_judge mrs_claus santa princess prince bride_with_veil man_in_tuxedo angel pregnant_woman breast_feeding woman_bowing man_bowing woman_tipping_hand man_tipping_hand woman_gesturing_no man_gesturing_no woman_gesturing_ok man_gesturing_ok woman_raising_hand man_raising_hand woman_facepalming man_facepalming woman_shrugging man_shrugging woman_pouting man_pouting woman_frowning man_frowning woman_getting_haircut man_getting_haircut woman_getting_face_massage man_getting_face_massage man_in_business_suit_levitating dancer man_dancing women_with_bunny_ears_partying men_with_bunny_ears_partying woman_walking man_walking woman_running man_running couple two_women_holding_hands two_men_holding_hands couple_with_heart couple_ww couple_mm couplekiss kiss_ww kiss_mm family family_mwg family_mwgb family_mwbb family_mwgg family_wwb family_wwg family_wwgb family_wwbb family_wwgg family_mmb family_mmg family_mmgb family_mmbb family_mmgg family_woman_boy family_woman_girl family_woman_girl_boy family_woman_boy_boy family_woman_girl_girl family_man_boy family_man_girl family_man_girl_boy family_man_boy_boy family_man_girl_girl bearded_person woman_with_headscarf woman_mage man_mage woman_fairy man_fairy woman_vampire man_vampire mermaid merman woman_elf man_elf woman_genie man_genie woman_zombie man_zombie womans_clothes shirt jeans necktie dress bikini kimono high_heel sandal boot mans_shoe athletic_shoe womans_hat tophat mortar_board crown helmet_with_cross school_satchel pouch purse handbag briefcase eyeglasses dark_sunglasses closed_umbrella umbrella2 brain billed_cap scarf gloves coat socks "},nature:{icon:"hamster",title:BP_Messages_Emoji["Animals & Nature"],emoji:"dog cat mouse hamster rabbit fox bear panda_face koala tiger lion_face cow pig pig_nose frog monkey_face see_no_evil hear_no_evil speak_no_evil monkey chicken penguin bird baby_chick hatching_chick hatched_chick duck eagle owl bat wolf boar horse unicorn bee bug butterfly snail shell beetle ant spider spider_web turtle snake lizard scorpion crab squid octopus shrimp tropical_fish fish blowfish dolphin shark whale whale2 crocodile leopard tiger2 water_buffalo ox cow2 deer dromedary_camel camel elephant rhino gorilla racehorse pig2 goat ram sheep dog2 poodle cat2 rooster turkey dove rabbit2 mouse2 rat chipmunk dragon giraffe zebra hedgehog sauropod t_rex cricket dragon_face feet cactus christmas_tree evergreen_tree deciduous_tree palm_tree seedling herb shamrock four_leaf_clover bamboo tanabata_tree leaves fallen_leaf maple_leaf mushroom ear_of_rice bouquet tulip rose wilted_rose sunflower blossom cherry_blossom hibiscus earth_americas earth_africa earth_asia full_moon waning_gibbous_moon last_quarter_moon waning_crescent_moon new_moon waxing_crescent_moon first_quarter_moon waxing_gibbous_moon new_moon_with_face full_moon_with_face sun_with_face first_quarter_moon_with_face last_quarter_moon_with_face crescent_moon dizzy star star2 sparkles zap fire boom comet sunny white_sun_small_cloud partly_sunny white_sun_cloud white_sun_rain_cloud rainbow cloud cloud_rain thunder_cloud_rain cloud_lightning cloud_snow snowman2 snowman snowflake wind_blowing_face dash cloud_tornado fog ocean droplet sweat_drops umbrella "},food:{icon:"pizza",title:BP_Messages_Emoji["Food & Drink"],emoji:"green_apple apple pear tangerine lemon banana watermelon grapes strawberry melon cherries peach pineapple kiwi avocado tomato eggplant cucumber carrot corn hot_pepper potato sweet_potato chestnut peanuts honey_pot croissant bread french_bread cheese egg cooking bacon pancakes fried_shrimp poultry_leg meat_on_bone pizza hotdog hamburger fries stuffed_flatbread taco burrito salad shallow_pan_of_food spaghetti ramen stew fish_cake sushi bento curry rice_ball rice rice_cracker oden dango shaved_ice ice_cream icecream cake birthday custard lollipop candy chocolate_bar popcorn doughnut cookie milk baby_bottle coffee tea sake beer beers champagne_glass wine_glass tumbler_glass cocktail tropical_drink champagne spoon fork_and_knife fork_knife_plate dumpling fortune_cookie takeout_box chopsticks bowl_with_spoon cup_with_straw coconut broccoli pie pretzel cut_of_meat sandwich canned_food"},activity:{icon:"basketball",title:BP_Messages_Emoji.Activity,emoji:"soccer basketball football baseball tennis volleyball rugby_football 8ball ping_pong badminton goal hockey field_hockey cricket_game golf bow_and_arrow fishing_pole_and_fish boxing_glove martial_arts_uniform ice_skate ski skier snowboarder woman_lifting_weights man_lifting_weights person_fencing women_wrestling men_wrestling woman_cartwheeling man_cartwheeling woman_bouncing_ball man_bouncing_ball woman_playing_handball man_playing_handball woman_golfing man_golfing woman_surfing man_surfing woman_swimming man_swimming woman_playing_water_polo man_playing_water_polo woman_rowing_boat man_rowing_boat horse_racing woman_biking man_biking woman_mountain_biking man_mountain_biking woman_in_steamy_room man_in_steamy_room woman_climbing man_climbing woman_in_lotus_position man_in_lotus_position running_shirt_with_sash medal military_medal first_place second_place third_place trophy rosette reminder_ribbon ticket tickets circus_tent woman_juggling man_juggling performing_arts art clapper microphone headphones musical_score musical_keyboard drum saxophone trumpet guitar violin game_die dart bowling video_game slot_machine sled curling_stone "},travel:{icon:"rocket",title:BP_Messages_Emoji["Travel & Places"],emoji:"red_car taxi blue_car bus trolleybus race_car police_car ambulance fire_engine minibus truck articulated_lorry tractor scooter bike motor_scooter motorcycle rotating_light oncoming_police_car oncoming_bus oncoming_automobile oncoming_taxi aerial_tramway mountain_cableway suspension_railway railway_car train mountain_railway monorail bullettrain_side bullettrain_front light_rail steam_locomotive train2 metro tram station helicopter airplane_small airplane airplane_departure airplane_arriving rocket satellite_orbital seat canoe sailboat motorboat speedboat cruise_ship ferry ship anchor construction fuelpump busstop vertical_traffic_light traffic_light map moyai statue_of_liberty fountain tokyo_tower european_castle japanese_castle stadium ferris_wheel roller_coaster carousel_horse beach_umbrella beach island mountain mountain_snow mount_fuji volcano desert camping tent railway_track motorway construction_site factory house house_with_garden homes house_abandoned office department_store post_office european_post_office hospital bank hotel convenience_store school love_hotel wedding classical_building church mosque synagogue kaaba shinto_shrine japan rice_scene park sunrise sunrise_over_mountains stars sparkler fireworks city_sunset city_dusk cityscape night_with_stars milky_way bridge_at_night foggy flying_saucer"},objects:{icon:"bulb",title:BP_Messages_Emoji.Objects,emoji:"watch iphone calling computer keyboard desktop printer mouse_three_button trackball joystick compression minidisc floppy_disk cd dvd vhs camera camera_with_flash video_camera movie_camera projector film_frames telephone_receiver telephone pager fax tv radio microphone2 level_slider control_knobs stopwatch timer alarm_clock clock hourglass hourglass_flowing_sand satellite battery electric_plug bulb flashlight candle wastebasket oil money_with_wings dollar yen euro pound moneybag credit_card gem scales wrench hammer hammer_pick tools pick nut_and_bolt gear chains gun bomb knife dagger crossed_swords shield smoking coffin urn amphora crystal_ball prayer_beads barber alembic telescope microscope hole pill syringe thermometer toilet potable_water shower bathtub bath bellhop key key2 door couch bed sleeping_accommodation frame_photo shopping_bags shopping_cart gift balloon flags ribbon confetti_ball tada dolls izakaya_lantern wind_chime envelope envelope_with_arrow incoming_envelope e-mail love_letter inbox_tray outbox_tray package label mailbox_closed mailbox mailbox_with_mail mailbox_with_no_mail postbox postal_horn scroll page_with_curl page_facing_up bookmark_tabs bar_chart chart_with_upwards_trend chart_with_downwards_trend notepad_spiral calendar_spiral calendar date card_index card_box ballot_box file_cabinet clipboard file_folder open_file_folder dividers newspaper2 newspaper notebook notebook_with_decorative_cover ledger closed_book green_book blue_book orange_book books book bookmark link paperclip paperclips triangular_ruler straight_ruler pushpin round_pushpin scissors pen_ballpoint pen_fountain black_nib paintbrush crayon pencil pencil2 mag mag_right lock_with_ink_pen closed_lock_with_key lock unlock"},symbols:{icon:"heartpulse",title:BP_Messages_Emoji.Symbols,emoji:"heart orange_heart yellow_heart green_heart blue_heart purple_heart black_heart broken_heart heart_exclamation two_hearts revolving_hearts heartbeat heartpulse sparkling_heart cupid gift_heart heart_decoration peace cross star_and_crescent om_symbol wheel_of_dharma star_of_david six_pointed_star menorah yin_yang orthodox_cross place_of_worship ophiuchus aries taurus gemini cancer leo virgo libra scorpius sagittarius capricorn aquarius pisces id atom accept radioactive biohazard mobile_phone_off vibration_mode u6709 u7121 u7533 u55b6 u6708 eight_pointed_black_star vs white_flower ideograph_advantage secret congratulations u5408 u6e80 u5272 u7981 a b ab cl o2 sos x o octagonal_sign no_entry name_badge no_entry_sign 100 anger hotsprings no_pedestrians do_not_litter no_bicycles non-potable_water underage no_mobile_phones no_smoking exclamation grey_exclamation question grey_question bangbang interrobang low_brightness high_brightness part_alternation_mark warning children_crossing trident fleur-de-lis beginner recycle white_check_mark u6307 chart sparkle eight_spoked_asterisk negative_squared_cross_mark globe_with_meridians diamond_shape_with_a_dot_inside m cyclone zzz atm wc wheelchair parking u7a7a sa passport_control customs baggage_claim left_luggage mens womens baby_symbol restroom put_litter_in_its_place cinema signal_strength koko symbols information_source abc abcd capital_abcd ng ok up cool new free zero one two three four five six seven eight nine keycap_ten 1234 hash asterisk arrow_forward pause_button play_pause stop_button record_button eject track_next track_previous fast_forward rewind arrow_double_up arrow_double_down arrow_backward arrow_up_small arrow_down_small arrow_right arrow_left arrow_up arrow_down arrow_upper_right arrow_lower_right arrow_lower_left arrow_upper_left arrow_up_down left_right_arrow arrow_right_hook leftwards_arrow_with_hook arrow_heading_up arrow_heading_down twisted_rightwards_arrows repeat repeat_one arrows_counterclockwise arrows_clockwise musical_note notes heavy_plus_sign heavy_minus_sign heavy_division_sign heavy_multiplication_x heavy_dollar_sign currency_exchange tm copyright registered wavy_dash curly_loop loop end back on top soon heavy_check_mark ballot_box_with_check radio_button white_circle black_circle red_circle blue_circle small_red_triangle small_red_triangle_down small_orange_diamond small_blue_diamond large_orange_diamond large_blue_diamond white_square_button black_square_button black_small_square white_small_square black_medium_small_square white_medium_small_square black_medium_square white_medium_square black_large_square white_large_square speaker mute sound loud_sound bell no_bell mega loudspeaker speech_left eye_in_speech_bubble speech_balloon thought_balloon anger_right spades clubs hearts diamonds black_joker flower_playing_cards mahjong clock1 clock2 clock3 clock4 clock5 clock6 clock7 clock8 clock9 clock10 clock11 clock12 clock130 clock230 clock330 clock430 clock530 clock630 clock730 clock830 clock930 clock1030 clock1130 clock1230"},flags:{icon:"flag_gb",title:BP_Messages_Emoji.Flags,emoji:"flag_white flag_black checkered_flag triangular_flag_on_post rainbow_flag flag_af flag_ax flag_al flag_dz flag_as flag_ad flag_ao flag_ai flag_aq flag_ag flag_ar flag_am flag_aw flag_au flag_at flag_az flag_bs flag_bh flag_bd flag_bb flag_by flag_be flag_bz flag_bj flag_bm flag_bt flag_bo flag_ba flag_bw flag_br flag_io flag_vg flag_bn flag_bg flag_bf flag_bi flag_kh flag_cm flag_ca flag_ic flag_cv flag_bq flag_ky flag_cf flag_td flag_cl flag_cn flag_cx flag_cc flag_co flag_km flag_cg flag_cd flag_ck flag_cr flag_ci flag_hr flag_cu flag_cw flag_cy flag_cz flag_dk flag_dj flag_dm flag_do flag_ec flag_eg flag_sv flag_gq flag_er flag_ee flag_et flag_eu flag_fk flag_fo flag_fj flag_fi flag_fr flag_gf flag_pf flag_tf flag_ga flag_gm flag_ge flag_de flag_gh flag_gi flag_gr flag_gl flag_gd flag_gp flag_gu flag_gt flag_gg flag_gn flag_gw flag_gy flag_ht flag_hn flag_hk flag_hu flag_is flag_in flag_id flag_ir flag_iq flag_ie flag_im flag_il flag_it flag_jm flag_jp crossed_flags flag_je flag_jo flag_kz flag_ke flag_ki flag_xk flag_kw flag_kg flag_la flag_lv flag_lb flag_ls flag_lr flag_ly flag_li flag_lt flag_lu flag_mo flag_mk flag_mg flag_mw flag_my flag_mv flag_ml flag_mt flag_mh flag_mq flag_mr flag_mu flag_yt flag_mx flag_fm flag_md flag_mc flag_mn flag_me flag_ms flag_ma flag_mz flag_mm flag_na flag_nr flag_np flag_nl flag_nc flag_nz flag_ni flag_ne flag_ng flag_nu flag_nf flag_kp flag_mp flag_no flag_om flag_pk flag_pw flag_ps flag_pa flag_pg flag_py flag_pe flag_ph flag_pn flag_pl flag_pt flag_pr flag_qa flag_re flag_ro flag_ru flag_rw flag_ws flag_sm flag_st flag_sa flag_sn flag_rs flag_sc flag_sl flag_sg flag_sx flag_sk flag_si flag_gs flag_sb flag_so flag_za flag_kr flag_ss flag_es flag_lk flag_bl flag_sh flag_kn flag_lc flag_pm flag_vc flag_sd flag_sr flag_sz flag_se flag_ch flag_sy flag_tw flag_tj flag_tz flag_th flag_tl flag_tg flag_tk flag_to flag_tt flag_tn flag_tr flag_tm flag_tc flag_tv flag_vi flag_ug flag_ua flag_ae flag_gb flag_us flag_uy flag_uz flag_vu flag_va flag_ve flag_vn flag_wf flag_eh flag_ye flag_zm flag_zw flag_ac flag_ta flag_bv flag_hm flag_sj flag_um flag_ea flag_cp flag_dg flag_mf united_nations england scotland wales"}},(a=s.h.get("better-messages-emojies")||!1)&&void 0!==a.hash&&BP_Messages.emojiHash===a.hash?(void 0!==a.emojies.people&&(r.filters.people={icon:"yum",title:BP_Messages_Emoji["Smileys & People"],emoji:a.emojies.people.join(" ")}),void 0!==a.emojies.nature&&(r.filters.nature={icon:"hamster",title:BP_Messages_Emoji["Animals & Nature"],emoji:a.emojies.nature.join(" ")}),void 0!==a.emojies.food&&(r.filters.food={icon:"pizza",title:BP_Messages_Emoji["Food & Drink"],emoji:a.emojies.food.join(" ")}),void 0!==a.emojies.activity&&(r.filters.activity={icon:"basketball",title:BP_Messages_Emoji.Activity,emoji:a.emojies.activity.join(" ")}),void 0!==a.emojies.travel&&(r.filters.travel={icon:"rocket",title:BP_Messages_Emoji["Travel & Places"],emoji:a.emojies.travel.join(" ")}),void 0!==a.emojies.objects&&(r.filters.objects={icon:"bulb",title:BP_Messages_Emoji.Objects,emoji:a.emojies.objects.join(" ")}),void 0!==a.emojies.symbols&&(r.filters.symbols={icon:"heartpulse",title:BP_Messages_Emoji.Symbols,emoji:a.emojies.symbols.join(" ")}),void 0!==a.emojies.flags&&(r.filters.flags={icon:"flag_gb",title:BP_Messages_Emoji.Flags,emoji:a.emojies.flags.join(" ")}),t(r)):jQuery.ajax({type:"POST",url:BP_Messages.ajaxUrl,data:{action:"better_messages_get_emoji_settings"},success:function(e){void 0!==e.emojies.people&&(r.filters.people={icon:"yum",title:BP_Messages_Emoji["Smileys & People"],emoji:e.emojies.people.join(" ")}),void 0!==e.emojies.nature&&(r.filters.nature={icon:"hamster",title:BP_Messages_Emoji["Animals & Nature"],emoji:e.emojies.nature.join(" ")}),void 0!==e.emojies.food&&(r.filters.food={icon:"pizza",title:BP_Messages_Emoji["Food & Drink"],emoji:e.emojies.food.join(" ")}),void 0!==e.emojies.activity&&(r.filters.activity={icon:"basketball",title:BP_Messages_Emoji.Activity,emoji:e.emojies.activity.join(" ")}),void 0!==e.emojies.travel&&(r.filters.travel={icon:"rocket",title:BP_Messages_Emoji["Travel & Places"],emoji:e.emojies.travel.join(" ")}),void 0!==e.emojies.objects&&(r.filters.objects={icon:"bulb",title:BP_Messages_Emoji.Objects,emoji:e.emojies.objects.join(" ")}),void 0!==e.emojies.symbols&&(r.filters.symbols={icon:"heartpulse",title:BP_Messages_Emoji.Symbols,emoji:e.emojies.symbols.join(" ")}),void 0!==e.emojies.flags&&(r.filters.flags={icon:"flag_gb",title:BP_Messages_Emoji.Flags,emoji:e.emojies.flags.join(" ")}),void 0!==e.hash&&s.h.set("better-messages-emojies",e),t(r)},dataType:"json"}).always((function(){t(r)}));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}function D(e){return M.apply(this,arguments)}function M(){return(M=(0,i.Z)(o().mark((function e(t){var n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:return n=e.sent,t&&t.filters&&(i=n.filters,s.$.each(t.filters,(function(e,t){T(t)&&!s.$.isEmptyObject(t)?s.$.each(t,(function(t,n){i[e][t]=n})):delete i[e]})),t.filters=i),e.abrupt("return",s.$.extend({},n,t));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return e}function N(e,t){switch(e=e.replace(/&#10;/g,"\n").replace(/&#09;/g,"\t").replace(/<img[^>]*alt="([^"]+)"[^>]*>/gi,"$1").replace(/\n|\r/g,"").replace(/<br[^>]*>/gi,"\n").replace(/(?:<(?:div|p|ol|ul|li|pre|code|object)[^>]*>)+/gi,"<div>").replace(/(?:<\/(?:div|p|ol|ul|li|pre|code|object)>)+/gi,"</div>").replace(/\n<div><\/div>/gi,"\n").replace(/<div><\/div>\n/gi,"\n").replace(/(?:<div>)+<\/div>/gi,"\n").replace(/([^\n])<\/div><div>/gi,"$1\n").replace(/(?:<\/div>)+/gi,"</div>").replace(/([^\n])<\/div>([^\n])/gi,"$1\n$2").replace(/<\/div>/gi,"").replace(/([^\n])<div>/gi,"$1\n").replace(/\n<div>/gi,"\n").replace(/<div>\n/gi,"\n\n").replace(/<(?:[^>]+)?>/g,"").replace(new RegExp("&#8203;","g"),"").replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x60;/g,"`").replace(/&#60;/g,"<").replace(/&#62;/g,">").replace(/&amp;/g,"&"),t.saveEmojisAs){case"image":e=function(e,t){return e.replace(v,(function(e){var n=p[0===A?"jsecapeMap":"jsEscapeMap"];return void 0!==e&&e in n?S(t,n[e],p.toShort(e)):e}))}(e,t.emojiTemplate);break;case"shortname":e=p.toShort(e)}return e}function L(){var e=this,t=e.editor[0].offsetWidth-e.editor[0].clientWidth,n=parseInt(e.button.css("marginRight"));n!==t&&(e.button.css({marginRight:t}),e.floatingPicker&&e.picker.css({right:parseInt(e.picker.css("right"))-n+t}))}function B(){var e=this;if(!e.sprite&&e.lasyEmoji[0]&&e.lasyEmoji.eq(0).is(".lazy-emoji")){var t=e.picker.offset().top,n=t+e.picker.height()+20;e.lasyEmoji.each((function(){var e=(0,s.$)(this),i=e.offset().top;if(i>t&&i<n&&e.attr("src",e.data("src")).removeClass("lazy-emoji"),i>n)return!1})),e.lasyEmoji=e.lasyEmoji.filter(".lazy-emoji")}}function $(e,t){return(t?"":".")+_+(e?"-"+e:"")}function j(e){var t=(0,s.$)("<div/>",T(e)?e:{class:$(e,!0)});return s.$.each(y.call(arguments).slice(1),(function(e,n){s.$.isFunction(n)&&(n=n.call(t)),n&&(0,s.$)(n).appendTo(t)})),t}function U(){return localStorage.getItem("recent_emojis")||""}function F(e,t){var n=U();if(!e.recent||e.recent!==n||t){if(n.length){var i,r,a=e.scrollArea.is(".skinnable");a||(i=e.scrollArea.scrollTop(),t&&e.recentCategory.show(),r=e.recentCategory.is(":visible")?e.recentCategory.height():0);var o=C(n,e.emojiBtnTemplate,!0).split("|").join("");if(e.recentCategory.children(".emojibtn").remove(),(0,s.$)(o).insertAfter(e.recentCategory.children(".bp-emojionearea-category-title")),e.recentCategory.children(".emojibtn").on("click",(function(){e.trigger("emojibtn.click",(0,s.$)(this))})),e.recentFilter.show(),!a){e.recentCategory.show();var c=e.recentCategory.height();r!==c&&e.scrollArea.scrollTop(i+c-r)}}else e.recentFilter.hasClass("active")&&e.recentFilter.removeClass("active").next().addClass("active"),e.recentCategory.hide(),e.recentFilter.hide();e.recent=n}}function Z(e,t){var n=U().split("|"),i=n.indexOf(t);-1!==i&&n.splice(i,1),n.unshift(t),n.length>9&&n.pop(),localStorage.setItem("recent_emojis",n.join("|")),F(e)}function z(){var e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}function V(){return(V=(0,i.Z)(o().mark((function e(t,n,i){var r,a,l,u,d,h,f,v,y,S,E,P,R,O,M,V,q,W,H,Q;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(i);case 2:t.options=i=e.sent,t.sprite=i.sprite&&A<3,t.inline=null===i.inline?n.is("INPUT"):i.inline,t.shortnames=i.shortnames,t.saveEmojisAs=i.saveEmojisAs,t.standalone=i.standalone,t.emojiTemplate='<img alt="{alt}" class="emojione'+(t.sprite?'-{uni}" src="'+b+'"/>':'emoji" src="{img}"/>'),t.emojiTemplateAlt=t.sprite?'<i class="emojibtn-{uni}"/>':'<img class="emojioneemoji" src="{img}"/>',t.emojiBtnTemplate='<i class="emojibtn" role="button" data-name="{name}" title="{friendlyName}">'+t.emojiTemplateAlt+"</i>",t.recentEmojis=i.recentEmojis&&z(),r=i.pickerPosition,t.floatingPicker="top"===r||"bottom"===r,t.source=n,(n.is(":disabled")||n.is(".disabled"))&&t.disable(),a=!1,n.is("#message-input")?(l=n.is("TEXTAREA")||n.is("INPUT")?"val":"text",O=j("tones",i.tones?function(){this.addClass($("tones-"+i.tonesStyle,!0));for(var e=0;e<=5;e++)this.append((0,s.$)("<i/>",{class:"btn-tone btn-tone-"+e+(e?"":" active"),"data-skin":e,role:"button"}))}:null),M=j({class:_+(t.standalone?" "+_+"-standalone ":" ")+(n.attr("class")||""),role:"application"},u=t.editor=j("editor").attr({contenteditable:!t.standalone,placeholder:i.placeholder||n.data("placeholder")||n.attr("placeholder")||"",tabindex:4}),d=t.button=j("button",j("button-open"),j("button-close")).attr("title",i.buttonTitle)),a=j({role:"application",class:"bm-picker-div-app"},h=t.picker=j("picker",j("wrapper",f=j("filters"),i.search?y=j("search-panel",j("search",i.search?function(){t.search=(0,s.$)("<input/>",{placeholder:i.searchPlaceholder||"",type:"text",class:"search"}),this.append(t.search)}:null),O):null,R=j("scroll-area",i.tones&&!i.search?j("tones-panel",O):null,S=j("emojis-list")))).addClass($("picker-position-"+i.pickerPosition,!0)).addClass($("filters-position-"+i.filtersPosition,!0)).addClass($("search-position-"+i.searchPosition,!0)).addClass("hidden"))):(l=n.is("TEXTAREA")||n.is("INPUT")?"val":"text",O=j("tones",i.tones?function(){this.addClass($("tones-"+i.tonesStyle,!0));for(var e=0;e<=5;e++)this.append((0,s.$)("<i/>",{class:"btn-tone btn-tone-"+e+(e?"":" active"),"data-skin":e,role:"button"}))}:null),M=j({class:_+(t.standalone?" "+_+"-standalone ":" ")+(n.attr("class")||""),role:"application"},u=t.editor=j("editor").attr({contenteditable:!t.standalone,placeholder:i.placeholder||n.data("placeholder")||n.attr("placeholder")||"",tabindex:4}),d=t.button=j("button",j("button-open"),j("button-close")).attr("title",i.buttonTitle),h=t.picker=j("picker",j("wrapper",f=j("filters"),i.search?y=j("search-panel",j("search",i.search?function(){t.search=(0,s.$)("<input/>",{placeholder:i.searchPlaceholder||"",type:"text",class:"search"}),this.append(t.search)}:null),O):null,R=j("scroll-area",i.tones&&!i.search?j("tones-panel",O):null,S=j("emojis-list")))).addClass($("picker-position-"+i.pickerPosition,!0)).addClass($("filters-position-"+i.filtersPosition,!0)).addClass($("search-position-"+i.searchPosition,!0)).addClass("hidden"))),i.search&&y.addClass($("with-search",!0)),t.searchSel=null,u.data(n.data()),s.$.each(i.attributes,(function(e,t){u.attr(e,t)})),V=j("category-block").attr({"data-tone":0}).prependTo(S),s.$.each(i.filters,(function(e,n){var r=0;if("recent"!==e||t.recentEmojis){if("tones"!==e)(0,s.$)("<i/>",{class:$("filter",!0)+" "+$("filter-"+e,!0),"data-filter":e,title:n.title}).wrapInner(C(n.icon,t.emojiTemplateAlt)).appendTo(f);else{if(!i.tones)return;r=5}do{var a,o=n.emoji.replace(/[\s,;]+/g,"|");a=0===r?j("category").attr({name:e,"data-tone":r}).appendTo(V):j("category-block").attr({name:e,"data-tone":r}).appendTo(S),r>0&&(a.hide(),o=o.split("|").join("_tone"+r+"|")+"_tone"+r),"recent"===e&&(o=U()),o=C(o,t.sprite?'<i class="emojibtn" role="button" data-name="{name}" title="{friendlyName}"><i class="emojione-{uni}"></i></i>':'<i class="emojibtn" role="button" data-name="{name}" title="{friendlyName}"><img class="emojioneemoji lazy-emoji" data-src="{img}"/></i>',!0).split("|").join(""),a.html(o),(0,s.$)('<div class="bp-emojionearea-category-title"/>').text(n.title).prependTo(a)}while(--r>0)}})),i.filters=null,t.sprite||(t.lasyEmoji=S.find(".lazy-emoji")),(v=f.find($("filter"))).eq(0).addClass("active"),P=S.find($("category-block")),E=S.find($("category")),t.recentFilter=v.filter('[data-filter="recent"]'),t.recentCategory=E.filter("[name=recent]"),t.scrollArea=R,i.container?(0,s.$)(i.container).wrapInner(M):(M.insertAfter(n),!1!==a&&(a.insertAfter(n.closest(".new-message").parent()),c.fi(t.button[0],a[0],{placement:"top-end"}))),i.hideSource&&n.hide(),t.setText(n[l]()),n[l](t.getText()),L.apply(t),t.standalone&&!t.getText().length&&(q=(0,s.$)(n).data("emoji-placeholder")||i.emojiPlaceholder,t.setText(q),u.addClass("has-placeholder")),k(t,S.find(".emojibtn"),{click:"emojibtn.click"}),k(t,window,{resize:"!resize"}),k(t,O.children(),{click:"tone.click"}),k(t,[h,d],{mousedown:"!mousedown"},u),k(t,d,{click:"button.click"}),k(t,u,{paste:"!paste"},u),k(t,u,["focus","blur"],(function(){return!t.stayFocused&&u})),k(t,h,{mousedown:"picker.mousedown",mouseup:"picker.mouseup",click:"picker.click",keyup:"picker.keyup",keydown:"picker.keydown",keypress:"picker.keypress"}),k(t,u,["mousedown","mouseup","click","keyup","keydown","keypress"]),k(t,h.find(".bp-emojionearea-filter"),{click:"filter.click"}),k(t,n,{change:"source.change"}),i.search&&k(t,t.search,{keyup:"search.keypress",focus:"search.focus",blur:"search.blur"}),W=!1,R.on("scroll",(function(){if(!W&&(B.call(t),R.is(":not(.skinnable)"))){var e=E.eq(0),n=R.offset().top;E.each((function(t,i){if((0,s.$)(i).offset().top-n>=10)return!1;e=(0,s.$)(i)}));var i=v.filter('[data-filter="'+e.attr("name")+'"]');i[0]&&!i.is(".active")&&(v.removeClass("active"),i.addClass("active"))}})),t.on("@filter.click",(function(e){var n=e.is(".active");if(R.is(".skinnable")){if(n)return;O.children().eq(0).click()}W=!0,n||(v.filter(".active").removeClass("active"),e.addClass("active"));var i=E.filter('[name="'+e.data("filter")+'"]').offset().top,r=R.scrollTop(),a=R.offset().top;R.stop().animate({scrollTop:i+r-a-2},200,"swing",(function(){B.call(t),W=!1}))})).on("@picker.show",(function(){t.recentEmojis&&F(t),B.call(t)})).on("@tone.click",(function(e){O.children().removeClass("active");var n=e.addClass("active").data("skin");n?(R.addClass("skinnable"),P.hide().filter("[data-tone="+n+"]").show(),v.removeClass("active")):(R.removeClass("skinnable"),P.hide().filter("[data-tone=0]").show(),v.eq(0).click()),B.call(t),i.search&&t.trigger("search.keypress")})).on("@button.click",(function(e){e.is(".active")?t.hidePicker():(t.showPicker(),t.searchSel=null)})).on("@!paste",(function(e,n){var i=function(n){var i="caret-"+(new Date).getTime(),r=I(n);x(r),x('<i id="'+i+'"></i>'),e.scrollTop(o);var a=(0,s.$)("#"+i),c=a.offset().top-e.offset().top,l=e.height();(o+c>=l||o>c)&&e.scrollTop(o+c-2*l/3),a.remove(),t.stayFocused=!1,L.apply(t),w(t,"paste",[e,n,r])};if(n.originalEvent.clipboardData){var r=n.originalEvent.clipboardData.getData("text/plain");return i(r),n.preventDefault?n.preventDefault():n.stop(),n.returnValue=!1,n.stopPropagation(),!1}t.stayFocused=!0,x("<span>&#8203;</span>");var a=m(e[0]),o=e.scrollTop(),c=(0,s.$)("<div/>",{contenteditable:!0}).css({position:"fixed",left:"-999px",width:"1px",height:"1px",top:"20px",overflow:"hidden"}).appendTo((0,s.$)("BODY")).focus();window.setTimeout((function(){e.focus(),g(e[0],a);var n=N(c.html().replace(/\r\n|\n|\r/g,"<br>"),t);c.remove(),i(n)}),200)})).on("@emojibtn.click",(function(e){u.removeClass("has-placeholder"),null!==t.searchSel&&(u.focus(),g(u[0],t.searchSel),t.searchSel=null),t.standalone?(u.html(C(e.data("name"),t.emojiTemplate)),t.trigger("blur")):(m(u[0]),x(C(e.data("name"),t.emojiTemplate))),t.recentEmojis&&Z(t,e.data("name")),t.trigger("search.keypress")})).on("@!resize @keyup @emojibtn.click",L).on("@!mousedown",(function(e,n){return(0,s.$)(n.target).hasClass("search")?(t.stayFocused=!0,null===t.searchSel&&(t.searchSel=m(e[0]))):(M.is(".focused")||e.trigger("focus"),n.preventDefault()),!1})).on("@change",(function(){var e=t.editor.html(),i={},r=0,a='<span class="bm-medium-editor-mention-at';-1!==e.indexOf(a)&&(e=function e(t){r++;var n=t.indexOf(a),o=t.indexOf("</span>",n)+13,s=t.substring(n,o),c="%%%BM_MENTION_"+r+"%%%";return t=t.replace(s,c),i[c]=s,-1!==t.indexOf(a)&&(t=e(t)),t}(e)),e=e.replace(/<\/?(?:div|span)[^>]*>/gi,""),r>0&&jQuery.each(i,(function(t,n){e=e.replace(t,n)})),e.length&&!/^<br[^>]*>$/i.test(e)||t.editor.html(t.content=""),n[l](e)})).on("@source.change",(function(){})).on("@focus",(function(){M.addClass("focused")})).on("@blur",(function(){M.removeClass("focused"),i.hidePickerOnBlur&&t.hidePicker();var e=t.editor.html();(0,s.$)(event.relatedTarget).closest(".bpbm-medium-editor-toolbar").length>0||(t.content!==e?(t.content=e,w(t,"change",[t.editor]),n.trigger("blur").trigger("change")):n.trigger("blur"))})),i.search&&t.on("@search.focus",(function(){t.stayFocused=!0,t.search.addClass("focused")})).on("@search.keypress",(function(e){var n=h.find(".bp-emojionearea-filter"),r=i.tones?O.find("i.active").data("skin"):0,a=t.search.val().replace(/ /g,"_").replace(/"/g,'\\"');a&&a.length?(t.recentFilter.hasClass("active")&&t.recentFilter.removeClass("active").next().addClass("active"),t.recentCategory.hide(),t.recentFilter.hide(),P.each((function(){var e=function(e,t){var i=e.find('.emojibtn[data-name*="'+a+'"]');0===i.length?(e.data("tone")===t&&e.hide(),n.filter('[data-filter="'+e.attr("name")+'"]').hide()):(e.find('.emojibtn:not([data-name*="'+a+'"])').hide(),i.show(),e.data("tone")===t&&e.show(),n.filter('[data-filter="'+e.attr("name")+'"]').show())},t=(0,s.$)(this);0===t.data("tone")?E.filter(':not([name="recent"])').each((function(){e((0,s.$)(this),0)})):e(t,r)})),W?B.call(t):R.trigger("scroll")):(F(t,!0),P.filter('[data-tone="'+O.find("i.active").data("skin")+'"]:not([name="recent"])').show(),(0,s.$)(".emojibtn",P).show(),n.show(),B.call(t))})).on("@search.blur",(function(){t.stayFocused=!1,t.search.removeClass("focused"),t.trigger("blur")})),i.shortcuts&&t.on("@keydown",(function(e,n){n.ctrlKey||(9==n.which?(n.preventDefault(),d.click()):27==n.which&&(n.preventDefault(),d.is(".active")&&t.hidePicker()))})),T(i.events)&&!s.$.isEmptyObject(i.events)&&s.$.each(i.events,(function(e,n){t.on(e.replace(/_/g,"."),n)})),i.autocomplete&&(H=function(){var e={maxCount:i.textcomplete.maxCount,placement:i.textcomplete.placement};i.shortcuts&&(e.onKeydown=function(e,t){if(!e.ctrlKey&&13==e.which)return t.KEY_ENTER});var n=s.$.map(p.emojiList,(function(e,t){return i.autocompleteTones?t:/_tone[12345]/.test(t)?null:t}));n.sort(),u.textcomplete([{id:_,match:/\B(:[\-+\w]*)$/,search:function(e,t){t(s.$.map(n,(function(t){return 0===t.indexOf(e)?t:null})))},template:function(e){return C(e,t.emojiTemplate)+" "+e.replace(/:/g,"")},replace:function(e){return C(e,t.emojiTemplate)},cache:!0,index:1}],e),i.textcomplete.placement&&"static"==(0,s.$)(u.data("textComplete").option.appendTo).css("position")&&(0,s.$)(u.data("textComplete").option.appendTo).css("position","relative")},Q=function(){t.disabled?t.on("enabled",(function e(){t.off("enabled",e),H()})):H()},s.$.fn.textcomplete?Q():s.$.ajax({url:"https://cdn.rawgit.com/yuku-t/jquery-textcomplete/v1.3.4/dist/jquery.textcomplete.js",dataType:"script",cache:!0,success:Q})),t.inline&&(M.addClass($("inline",!0)),t.on("@keydown",(function(e,t){13==t.which&&t.preventDefault()}))),/firefox/i.test(navigator.userAgent)&&document.execCommand("enableObjectResizing",!1,!1),t.isReady=!0,t.trigger("onLoad",u),t.trigger("ready",u);case 63:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.getSelection&&document.createRange?(m=function(e){var t=window.getSelection&&window.getSelection();if(t&&t.rangeCount>0)return t.getRangeAt(0)},g=function(e,t){var n=document.createRange();n.setStart(t.startContainer,t.startOffset),n.setEnd(t.endContainer,t.endOffset),(t=window.getSelection()).removeAllRanges(),t.addRange(n)}):document.selection&&document.body.createTextRange&&(m=function(e){return document.selection.createRange()},g=function(e,t){var n=document.body.createTextRange();n.moveToElementText(e),n.setStart(t.startContanier,t.startOffset),n.setEnd(t.endContainer,t.endOffset),n.select()});var q={defaultBase:"https://cdnjs.cloudflare.com/ajax/libs/joypixels/",defaultBase3:"https://cdn.bpbettermessages.com/",base:"https://cdn.jsdelivr.test/",isLoading:!1};function W(e){return H.apply(this,arguments)}function H(){return(H=(0,i.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=E(),e.next=3,D(t);case 3:t=e.sent,q.isLoading||(n=P(p),A=R(n),q.base="https://cdn.bpbettermessages.com/emojies/6.6"),f((function(){var e="";t.useInternalCDN&&(A>4&&(e=p.emojiSize+"/"),p.imagePathPNG=q.base+"/png/unicode/"+e,p.imagePathSVG=q.base+"/svg/unicode/"+e,p.imagePathSVGSprites=q.base+"/sprites/joypixels.sprites.svg",p.imageType=t.imageType),R(n)>4?(v=p.regUnicode,p.imageType=t.imageType||"png"):v=new RegExp("<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|("+p.unicodeRegexp+")","gi")}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Q=function(e,t){var n=this;W(t),u[n.id=++l]={},d[n.id]={},f((function(){!function(e,t,n){V.apply(this,arguments)}(n,e,t)}))};Q.prototype.on=function(e,t){if(e&&s.$.isFunction(t)){var n=this;s.$.each(e.toLowerCase().split(" "),(function(e,i){!function(e,t){t=t.replace(/^@/,"");var n=e.id;d[n][t]&&(s.$.each(d[n][t],(function(n,i){s.$.each(s.$.isArray(i[0])?i[0]:[i[0]],(function(n,r){(0,s.$)(r).on(i[1],(function(){var n=y.call(arguments),r=s.$.isFunction(i[2])?i[2].apply(e,[t].concat(n)):i[2];r&&w(e,t,[r].concat(n))}))}))})),d[n][t]=null)}(n,i),(u[n.id][i]||(u[n.id][i]=[])).push(t)}))}return this},Q.prototype.off=function(e,t){if(e){var n=this.id;s.$.each(e.toLowerCase().replace(/_/g,".").split(" "),(function(e,i){u[n][i]&&!/^@/.test(i)&&(t?s.$.each(u[n][i],(function(e,r){r===t&&u[n][i].splice(e,1)})):u[n][i]=[])}))}return this},Q.prototype.trigger=function(){var e=y.call(arguments),t=[this].concat(e.slice(0,1));return t.push(e.slice(1)),w.apply(this,t)},Q.prototype.setFocus=function(){var e=this;return f((function(){e.editor.focus()})),e},Q.prototype.setText=function(e){var t=this;return f((function(){t.editor.html(I(e)),t.content=t.editor.html(),w(t,"change",[t.editor]),L.apply(t)})),t},Q.prototype.getText=function(){return N(this.editor.html(),this)},Q.prototype.showPicker=function(){var e=this;return e._sh_timer&&window.clearTimeout(e._sh_timer),e.picker.removeClass("hidden"),e._sh_timer=window.setTimeout((function(){e.button.addClass("active")}),50),w(e,"picker.show",[e.picker]),e},Q.prototype.hidePicker=function(){var e=this;return e._sh_timer&&window.clearTimeout(e._sh_timer),e.button.removeClass("active"),e.picker.addClass("hidden"),e._sh_timer=window.setTimeout((function(){}),500),w(e,"picker.hide",[e.picker]),e},Q.prototype.enable=function(){var e=this,t=function(){e.disabled=!1,e.editor.prop("contenteditable",!0),e.button.show();var t=e[e.standalone?"button":"editor"];t.parent().removeClass("emojionearea-disable"),w(e,"enabled",[t])};return e.isReady?t():e.on("ready",t),e},Q.prototype.disable=function(){var e=this;e.disabled=!0;var t=function(){e.editor.prop("contenteditable",!1),e.hidePicker(),e.button.hide();var t=e[e.standalone?"button":"editor"];t.parent().addClass("emojionearea-disable"),w(e,"disabled",[t])};return e.isReady?t():e.on("ready",t),e},s.$.fn.BPemojioneArea=function(e){return this.each((function(){return this.BPjoypixelsArea||s.$.data(this,"BPjoypixelsArea",this.BPemojioneArea=new Q((0,s.$)(this),e)),this.BPjoypixelsArea}))},s.$.fn.BPemojioneArea.defaults=O(),s.$.fn.BPBMloadjoypixels=function(e){W(e)},s.$.fn.BPjoypixelsAreaText=function(){var e=(0,i.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:return t=e.sent,n=this,!t||void 0===t.shortnames||t.shortnames,t&&t.sprite,W(t),f((function(){n.each((function(){var e=(0,s.$)(this);return e.hasClass("emojionearea-text")||e.addClass("emojionearea-text").html(I(e.is("TEXTAREA")||e.is("INPUT")?e.val():e.text())),e}))})),e.abrupt("return",this);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},8200:(e,t,n)=>{"use strict";n.r(t);var i,r,a=n(1002),o=n(5474);(i=function(e){var t;t={position:"bottom right",content:" ",delay:3e3,sticky:!1,inEffect:"fadeIn",outEffect:"fadeOut",theme:"default",themeTemplate:null,closeOnClick:!0,closeButton:!1,clearAll:!1,cssanimationIn:!1,cssanimationOut:!1,beforeStart:function(){},afterEnd:function(){},onClick:function(){},wrapper:".amaran-wrapper bp-messages-wrap"},this.config=o.$.extend({},t,e),this.config.beforeStart(),this.init(),this.close()}).prototype={init:function(){var e,t,n,i,s,c,l;l=null,n=this.config.position.split(" "),(0,o.$)(this.config.wrapper).length&&(0,o.$)(this.config.wrapper).hasClass(this.config.position)?s=(l=(0,o.$)(this.config.wrapper+"."+n[0]+"."+n[1])).find(".amaran-wrapper-inner"):(l=(0,o.$)("<div>",{class:this.config.wrapper.substr(1,this.config.wrapper.length)+" "+this.config.position}).appendTo("body"),s=(0,o.$)("<div>",{class:"amaran-wrapper-inner"}).appendTo(l)),"object"===(0,a.Z)(this.config.content)?c=null!=this.config.themeTemplate?this.config.themeTemplate(this.config.content):r[this.config.theme.split(" ")[0]+"Theme"](this.config.content):(this.config.content={},this.config.content.message=this.config.message,this.config.content.color="#27ae60",c=r.defaultTheme(this.config.content)),e={class:this.config.themeTemplate?"amaran "+this.config.content.themeName:this.config.theme&&!this.config.themeTemplate?"amaran "+this.config.theme:"amaran",html:this.config.closeButton?'<span class="amaran-close" data-amaran-close="true"><i class="fas fa-times" aria-hidden="true"></i></span>'+c:c},this.config.clearAll&&(0,o.$)(".amaran").remove(),i=(0,o.$)("<div>",e).appendTo(s),"center"===n[0]&&this.centerCalculate(l,s),this.animation(this.config.inEffect,i,"show"),this.config.onClick&&(t=this,(0,o.$)(i).on("click",(function(e){(0,o.$)(e.target).is(".amaran-close")||(0,o.$)(e.target).closest(".amaran-close").length>0?e.preventDefault():t.config.onClick()}))),!0!==this.config.sticky&&this.hideDiv(i)},centerCalculate:function(e,t){var n,i;t.find(".amaran").length,i=t.height(),n=(e.height()-i)/2,t.find(".amaran:first-child").animate({"margin-top":n},200)},animation:function(e,t,n){return"fadeIn"===e||"fadeOut"===e?this.fade(t,n):"show"===e?this.cssanimate(t,n):this.slide(e,t,n)},fade:function(e,t){var n;return n=this,"show"===t?this.config.cssanimationIn?e.addClass("animated "+this.config.cssanimationIn).show():e.fadeIn():this.config.cssanimationOut?(e.addClass("animated "+this.config.cssanimationOut),e.css({"min-height":0,height:e.outerHeight()}),void e.animate({opacity:0},(function(){e.animate({height:0},(function(){n.removeIt(e)}))}))):(e.css({"min-height":0,height:e.outerHeight()}),void e.animate({opacity:0},(function(){e.animate({height:0},(function(){n.removeIt(e)}))})))},removeIt:function(e){var t,n;clearTimeout(this.timeout),e.remove(),t=(n=(0,o.$)(this.config.wrapper+"."+this.config.position.split(" ")[0]+"."+this.config.position.split(" ")[1])).find(".amaran-wrapper-inner"),"center"===this.config.position.split(" ")[0]&&this.centerCalculate(n,t),this.config.afterEnd()},getWidth:function(e){var t,n;return n=(t=e.clone().hide().appendTo("body")).outerWidth()+t.outerWidth()/2,t.remove(),n},getInfo:function(e){var t,n;return t=e.offset(),n=(0,o.$)(this.config.wrapper).offset(),{t:t.top,l:t.left,h:e.height(),w:e.outerWidth(),wT:n.top,wL:n.left,wH:(0,o.$)(this.config.wrapper).outerHeight(),wW:(0,o.$)(this.config.wrapper).outerWidth()}},getPosition:function(e,t){var n,i,r;return n=this.getInfo(e),i=this.config.position.split(" ")[1],(r={slideTop:{start:{top:-(n.wT+n.wH+2*n.h)},move:{top:0},hide:{top:-(n.t+2*n.h)},height:n.h},slideBottom:{start:{top:(0,o.$)(window).height()-n.wH+2*n.h},move:{top:0},hide:{top:(0,o.$)(window).height()-n.wH+2*n.h},height:n.h},slideLeft:{start:{left:"left"===i?1.5*-n.w:-(0,o.$)(window).width()},move:{left:0},hide:{left:"left"===i?1.5*-n.w:-(0,o.$)(window).width()},height:n.h},slideRight:{start:{left:"right"===i?1.5*n.w:(0,o.$)(window).width()},move:{left:0},hide:{left:"right"===i?1.5*n.w:(0,o.$)(window).width()},height:n.h}})[t]?r[t]:0},slide:function(e,t,n){var i,r;if(r=this.getPosition(t,e),"show"!==n)return i=this,t.animate(r.hide,(function(){t.css({"min-height":0,height:r.height},(function(){t.html(" ")}))})).animate({height:0},(function(){return i.removeIt(t)}));t.show().css(r.start).animate(r.move)},close:function(){var e;e=this,(0,o.$)("[data-amaran-close]").on("click",(function(){e.animation(e.config.outEffect,(0,o.$)(this).closest("div.amaran"),"hide")})),this.config.closeOnClick||!this.config.closeButton?this.config.closeOnClick&&(0,o.$)(".amaran").on("click",(function(){e.animation(e.config.outEffect,(0,o.$)(this),"hide")})):e.animation(e.config.outEffect,(0,o.$)(this).parent("div.amaran"),"hide")},hideDiv:function(e){var t;(t=this).timeout=setTimeout((function(){t.animation(t.config.outEffect,e,"hide")}),t.config.delay)}},r={defaultTheme:function(e){return void 0!==e.color&&e.color,"<div class='default-spinner'><i class=\""+e.icon+"\"></i></div><div class='default-message'><span>"+e.message+"</span></div>"},awesomeTheme:function(e){return'<i class="icon '+e.icon+' icon-large"></i><p class="bold">'+e.title+"</p><p><span>"+e.message+'</span><span class="light">'+e.info+"</span></p>"},userTheme:function(e){var t='<div class="icon"><img src="'+e.img+'" alt="" /></div><div class="info">';return void 0!==e.user&&(t+="<b>"+e.user+"</b>"),t+(e.message+"</div>")},colorfulTheme:function(e){return void 0!==e.color&&e.color,void 0!==e.bgcolor&&e.bgcolor,"<div class='colorful-inner' style='background-color:"+e.bgcolor+";color:"+e.color+"'>"+e.message+"</div>"},tumblrTheme:function(e){return'<div class="title">'+e.title+'</div><div class="content">'+e.message+"</div>"}},o.$.amaran=function(e){return new i(e)},o.$.amaran.close=function(){return(0,o.$)(".amaran-wrapper").remove(),!1}},7003:(e,t,n)=>{"use strict";n.r(t);var i,r,a,o,s,c,l=n(5474),u="Close",d="MarkupParse",p="Open",h="Change",f="bpbmmfp",m="."+f,g="bpbmmfp-ready",v="bpbmmfp-prevent-close",b=function(){},y=!!window.jQuery,_=(0,l.$)(window),A=function(e,t){i.ev.on(f+e+m,t)},w=function(e,t,n,i){var r=document.createElement("div");return r.className="bpbmmfp-"+e,n&&(r.innerHTML=n),i?t&&t.appendChild(r):(r=(0,l.$)(r),t&&r.appendTo(t)),r},k=function(e,t){i.ev.triggerHandler(f+e,t),i.st.callbacks&&(e=e.charAt(0).toLowerCase()+e.slice(1),i.st.callbacks[e]&&i.st.callbacks[e].apply(i,l.$.isArray(t)?t:[t]))},S=function(e){return e===c&&i.currTemplate.closeBtn||(i.currTemplate.closeBtn=(0,l.$)(i.st.closeMarkup.replace("%title%",i.st.tClose)),c=e),i.currTemplate.closeBtn},C=function(){l.$.BPBMmagnificPopup.instance||((i=new b).init(),l.$.BPBMmagnificPopup.instance=i)};b.prototype={constructor:b,init:function(){var e=navigator.appVersion;i.isLowIE=i.isIE8=document.all&&!document.addEventListener,i.isAndroid=/android/gi.test(e),i.isIOS=/iphone|ipad|ipod/gi.test(e),i.supportsTransition=function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(void 0!==e.transition)return!0;for(;t.length;)if(t.pop()+"Transition"in e)return!0;return!1}(),i.probablyMobile=i.isAndroid||i.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),a=(0,l.$)(document),i.popupsCache={}},open:function(e){var t;if(!1===e.isObj){i.items=e.items.toArray(),i.index=0;var n,r=e.items;for(t=0;t<r.length;t++)if((n=r[t]).parsed&&(n=n.el[0]),n===e.el[0]){i.index=t;break}}else i.items=l.$.isArray(e.items)?e.items:[e.items],i.index=e.index||0;if(!i.isOpen){i.types=[],s="",e.mainEl&&e.mainEl.length?i.ev=e.mainEl.eq(0):i.ev=a,e.key?(i.popupsCache[e.key]||(i.popupsCache[e.key]={}),i.currTemplate=i.popupsCache[e.key]):i.currTemplate={},i.st=l.$.extend(!0,{},l.$.BPBMmagnificPopup.defaults,e),i.fixedContentPos="auto"===i.st.fixedContentPos?!i.probablyMobile:i.st.fixedContentPos,i.st.modal&&(i.st.closeOnContentClick=!1,i.st.closeOnBgClick=!1,i.st.showCloseBtn=!1,i.st.enableEscapeKey=!1),i.bgOverlay||(i.bgOverlay=w("bg").on("click.bpbmmfp",(function(){i.close()})),i.wrap=w("wrap").attr("tabindex",-1).on("click.bpbmmfp",(function(e){i._checkIfClose(e.target)&&i.close()})),i.container=w("container",i.wrap)),i.contentContainer=w("content"),i.st.preloader&&(i.preloader=w("preloader",i.container,i.st.tLoading));var o=l.$.BPBMmagnificPopup.modules;for(t=0;t<o.length;t++){var c=o[t];c=c.charAt(0).toUpperCase()+c.slice(1),i["init"+c].call(i)}k("BeforeOpen"),i.st.showCloseBtn&&(i.st.closeBtnInside?(A(d,(function(e,t,n,i){n.close_replaceWith=S(i.type)})),s+=" bpbmmfp-close-btn-in"):i.wrap.append(S())),i.st.alignTop&&(s+=" bpbmmfp-align-top"),i.fixedContentPos?i.wrap.css({overflow:i.st.overflowY,overflowX:"hidden",overflowY:i.st.overflowY}):i.wrap.css({top:_.scrollTop(),position:"absolute"}),(!1===i.st.fixedBgPos||"auto"===i.st.fixedBgPos&&!i.fixedContentPos)&&i.bgOverlay.css({height:a.height(),position:"absolute"}),i.st.enableEscapeKey&&a.on("keyup.bpbmmfp",(function(e){27===e.keyCode&&i.close()})),_.on("resize.bpbmmfp",(function(){i.updateSize()})),i.st.closeOnContentClick||(s+=" bpbmmfp-auto-cursor"),s&&i.wrap.addClass(s);var u=i.wH=_.height(),h={};if(i.fixedContentPos&&i._hasScrollBar(u)){var f=i._getScrollbarSize();f&&(h.marginRight=f)}i.fixedContentPos&&(i.isIE7?(0,l.$)("body, html").css("overflow","hidden"):h.overflow="hidden");var m=i.st.mainClass;return i.isIE7&&(m+=" bpbmmfp-ie7"),m&&i._addClassToMFP(m),i.updateItemHTML(),k("BuildControls"),(0,l.$)("html").css(h),i.bgOverlay.add(i.wrap).prependTo(i.st.prependTo||(0,l.$)(document.body)),i._lastFocusedEl=document.activeElement,setTimeout((function(){i.content?(i._addClassToMFP(g),i._setFocus()):i.bgOverlay.addClass(g),a.on("focusin.bpbmmfp",i._onFocusIn)}),16),i.isOpen=!0,i.updateSize(u),k(p),e}i.updateItemHTML()},close:function(){i.isOpen&&(k("BeforeClose"),i.isOpen=!1,i.st.removalDelay&&!i.isLowIE&&i.supportsTransition?(i._addClassToMFP("bpbmmfp-removing"),setTimeout((function(){i._close()}),i.st.removalDelay)):i._close())},_close:function(){k(u);var e="bpbmmfp-removing bpbmmfp-ready ";if(i.bgOverlay.detach(),i.wrap.detach(),i.container.empty(),i.st.mainClass&&(e+=i.st.mainClass+" "),i._removeClassFromMFP(e),i.fixedContentPos){var t={marginRight:""};i.isIE7?(0,l.$)("body, html").css("overflow",""):t.overflow="",(0,l.$)("html").css(t)}a.off("keyup.bpbmmfp focusin.bpbmmfp"),i.ev.off(m),i.wrap.attr("class","bpbmmfp-wrap").removeAttr("style"),i.bgOverlay.attr("class","bpbmmfp-bg"),i.container.attr("class","bpbmmfp-container"),!i.st.showCloseBtn||i.st.closeBtnInside&&!0!==i.currTemplate[i.currItem.type]||i.currTemplate.closeBtn&&i.currTemplate.closeBtn.detach(),i.st.autoFocusLast&&i._lastFocusedEl&&(0,l.$)(i._lastFocusedEl).focus(),i.currItem=null,i.content=null,i.currTemplate=null,i.prevHeight=0,k("AfterClose")},updateSize:function(e){if(i.isIOS){var t=document.documentElement.clientWidth/window.innerWidth,n=window.innerHeight*t;i.wrap.css("height",n),i.wH=n}else i.wH=e||_.height();i.fixedContentPos||i.wrap.css("height",i.wH),k("Resize")},updateItemHTML:function(){var e=i.items[i.index];i.contentContainer.detach(),i.content&&i.content.detach(),e.parsed||(e=i.parseEl(i.index));var t=e.type;if(k("BeforeChange",[i.currItem?i.currItem.type:"",t]),i.currItem=e,!i.currTemplate[t]){var n=!!i.st[t]&&i.st[t].markup;k("FirstMarkupParse",n),i.currTemplate[t]=!n||(0,l.$)(n)}o&&o!==e.type&&i.container.removeClass("bpbmmfp-"+o+"-holder");var r=i["get"+t.charAt(0).toUpperCase()+t.slice(1)](e,i.currTemplate[t]);i.appendContent(r,t),e.preloaded=!0,k(h,e),o=e.type,i.container.prepend(i.contentContainer),k("AfterChange")},appendContent:function(e,t){i.content=e,e?i.st.showCloseBtn&&i.st.closeBtnInside&&!0===i.currTemplate[t]?i.content.find(".bpbmmfp-close").length||i.content.append(S()):i.content=e:i.content="",k("BeforeAppend"),i.container.addClass("bpbmmfp-"+t+"-holder"),i.contentContainer.append(i.content)},parseEl:function(e){var t,n=i.items[e];if(n.tagName?n={el:(0,l.$)(n)}:(t=n.type,n={data:n,src:n.src}),n.el){for(var r=i.types,a=0;a<r.length;a++)if(n.el.hasClass("bpbmmfp-"+r[a])){t=r[a];break}n.src=n.el.attr("data-bpbmmfp-src"),n.src||(n.src=n.el.attr("href"))}return n.type=t||i.st.type||"inline",n.index=e,n.parsed=!0,i.items[e]=n,k("ElementParse",n),i.items[e]},addGroup:function(e,t){var n=function(n){n.mfpEl=this,i._openClick(n,e,t)};t||(t={});var r="click.BPBMmagnificPopup";t.mainEl=e,t.items?(t.isObj=!0,e.off(r).on(r,n)):(t.isObj=!1,t.delegate?e.off(r).on(r,t.delegate,n):(t.items=e,e.off(r).on(r,n)))},_openClick:function(e,t,n){if((void 0!==n.midClick?n.midClick:l.$.BPBMmagnificPopup.defaults.midClick)||!(2===e.which||e.ctrlKey||e.metaKey||e.altKey||e.shiftKey)){var r=void 0!==n.disableOn?n.disableOn:l.$.BPBMmagnificPopup.defaults.disableOn;if(r)if(l.$.isFunction(r)){if(!r.call(i))return!0}else if(_.width()<r)return!0;e.type&&(e.preventDefault(),i.isOpen&&e.stopPropagation()),n.el=(0,l.$)(e.mfpEl),n.delegate&&(n.items=t.find(n.delegate)),i.open(n)}},updateStatus:function(e,t){if(i.preloader){r!==e&&i.container.removeClass("bpbmmfp-s-"+r),t||"loading"!==e||(t=i.st.tLoading);var n={status:e,text:t};k("UpdateStatus",n),e=n.status,t=n.text,i.preloader.html(t),i.preloader.find("a").on("click",(function(e){e.stopImmediatePropagation()})),i.container.addClass("bpbmmfp-s-"+e),r=e}},_checkIfClose:function(e){if(!(0,l.$)(e).hasClass(v)){var t=i.st.closeOnContentClick,n=i.st.closeOnBgClick;if(t&&n)return!0;if(!i.content||(0,l.$)(e).hasClass("bpbmmfp-close")||i.preloader&&e===i.preloader[0])return!0;if(e===i.content[0]||l.$.contains(i.content[0],e)){if(t)return!0}else if(n&&l.$.contains(document,e))return!0;return!1}},_addClassToMFP:function(e){i.bgOverlay.addClass(e),i.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),i.wrap.removeClass(e)},_hasScrollBar:function(e){return(i.isIE7?a.height():document.body.scrollHeight)>(e||_.height())},_setFocus:function(){(i.st.focus?i.content.find(i.st.focus).eq(0):i.wrap).focus()},_onFocusIn:function(e){if(e.target!==i.wrap[0]&&!l.$.contains(i.wrap[0],e.target))return i._setFocus(),!1},_parseMarkup:function(e,t,n){var i;n.data&&(t=l.$.extend(n.data,t)),k(d,[e,t,n]),l.$.each(t,(function(t,n){if(void 0===n||!1===n)return!0;if((i=t.split("_")).length>1){var r=e.find(".bpbmmfp-"+i[0]);if(r.length>0){var a=i[1];"replaceWith"===a?r[0]!==n[0]&&r.replaceWith(n):"img"===a?r.is("img")?r.attr("src",n):r.replaceWith((0,l.$)("<img>").attr("src",n).attr("class",r.attr("class"))):r.attr(i[1],n)}}else e.find(".bpbmmfp-"+t).html(n)}))},_getScrollbarSize:function(){if(void 0===i.scrollbarSize){var e=document.createElement("div");e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),i.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return i.scrollbarSize}},l.$.BPBMmagnificPopup={instance:null,proto:b.prototype,modules:[],open:function(e,t){return C(),(e=e?l.$.extend(!0,{},e):{}).isObj=!0,e.index=t||0,this.instance.open(e)},close:function(){return l.$.BPBMmagnificPopup.instance&&l.$.BPBMmagnificPopup.instance.close()},registerModule:function(e,t){t.options&&(l.$.BPBMmagnificPopup.defaults[e]=t.options),l.$.extend(this.proto,t.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="bpbmmfp-close">&#215;</button>',tClose:"Close (Esc)",tLoading:"Loading...",autoFocusLast:!0}},l.$.fn.BPBMmagnificPopup=function(e){C();var t=(0,l.$)(this);if("string"==typeof e)if("open"===e){var n,r=y?t.data("BPBMmagnificPopup"):t[0].BPBMmagnificPopup,a=parseInt(arguments[1],10)||0;r.items?n=r.items[a]:(n=t,r.delegate&&(n=n.find(r.delegate)),n=n.eq(a)),i._openClick({mfpEl:n},t,r)}else i.isOpen&&i[e].apply(i,Array.prototype.slice.call(arguments,1));else e=l.$.extend(!0,{},e),y?t.data("BPBMmagnificPopup",e):t[0].BPBMmagnificPopup=e,i.addGroup(t,e);return t};var x,E,T,P="inline",R=function(){T&&(E.after(T.addClass(x)).detach(),T=null)};l.$.BPBMmagnificPopup.registerModule(P,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){i.types.push(P),A("Close.inline",(function(){R()}))},getInline:function(e,t){if(R(),e.src){var n=i.st.inline,r=(0,l.$)(e.src);if(r.length){var a=r[0].parentNode;a&&a.tagName&&(E||(x=n.hiddenClass,E=w(x),x="bpbmmfp-"+x),T=r.after(E).detach().removeClass(x)),i.updateStatus("ready")}else i.updateStatus("error",n.tNotFound),r=(0,l.$)("<div>");return e.inlineElement=r,r}return i.updateStatus("ready"),i._parseMarkup(t,{},e),t}}});var O,D,M=function(e){if(e.data&&void 0!==e.data.title)return e.data.title;var t=i.st.image.titleSrc;if(t){if(l.$.isFunction(t))return t.call(i,e);if(e.el)return e.el.attr(t)||""}return""};l.$.BPBMmagnificPopup.registerModule("image",{options:{markup:'<div class="bpbmmfp-figure"><div class="bpbmmfp-close"></div><figure><div class="bpbmmfp-img"></div><figcaption><div class="bpbmmfp-bottom-bar"><div class="bpbmmfp-title"></div><div class="bpbmmfp-counter"></div></div></figcaption></figure></div>',cursor:"bpbmmfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var e=i.st.image;i.types.push("image"),A("Open.image",(function(){"image"===i.currItem.type&&e.cursor&&(0,l.$)(document.body).addClass(e.cursor)})),A("Close.image",(function(){e.cursor&&(0,l.$)(document.body).removeClass(e.cursor),_.off("resize.bpbmmfp")})),A("Resize.image",i.resizeImage),i.isLowIE&&A("AfterChange",i.resizeImage)},resizeImage:function(){var e=i.currItem;if(e&&e.img&&i.st.image.verticalFit){var t=0;i.isLowIE&&(t=parseInt(e.img.css("padding-top"),10)+parseInt(e.img.css("padding-bottom"),10)),e.img.css("max-height",i.wH-t)}},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,O&&clearInterval(O),e.isCheckingImgSize=!1,k("ImageHasSize",e),e.imgHidden&&(i.content&&i.content.removeClass("bpbmmfp-loading"),e.imgHidden=!1))},findImageSize:function(e){var t=0,n=e.img[0];!function r(a){O&&clearInterval(O),O=setInterval((function(){n.naturalWidth>0?i._onImageHasSize(e):(t>200&&clearInterval(O),3==++t?r(10):40===t?r(50):100===t&&r(500))}),a)}(1)},getImage:function(e,t){var n=0,r=function(){e&&(e.img.off(".mfploader"),e===i.currItem&&(i._onImageHasSize(e),i.updateStatus("error",a.tError.replace("%url%",e.src))),e.hasSize=!0,e.loaded=!0,e.loadError=!0)},a=i.st.image,o=t.find(".bpbmmfp-img");if(o.length){var s=document.createElement("img");s.className="bpbmmfp-img",e.el&&e.el.find("img").length&&(s.alt=e.el.find("img").attr("alt")),e.img=(0,l.$)(s).on("load.mfploader",(function t(){e&&(e.img[0].complete?(e.img.off(".mfploader"),e===i.currItem&&(i._onImageHasSize(e),i.updateStatus("ready")),e.hasSize=!0,e.loaded=!0,k("ImageLoadComplete")):++n<200?setTimeout(t,100):r())})).on("error.mfploader",r),s.src=e.src,o.is("img")&&(e.img=e.img.clone()),(s=e.img[0]).naturalWidth>0?e.hasSize=!0:s.width||(e.hasSize=!1)}return i._parseMarkup(t,{title:M(e),img_replaceWith:e.img},e),i.resizeImage(),e.hasSize?(O&&clearInterval(O),e.loadError?(t.addClass("bpbmmfp-loading"),i.updateStatus("error",a.tError.replace("%url%",e.src))):(t.removeClass("bpbmmfp-loading"),i.updateStatus("ready")),t):(i.updateStatus("loading"),e.loading=!0,e.hasSize||(e.imgHidden=!0,t.addClass("bpbmmfp-loading"),i.findImageSize(e)),t)}}}),l.$.BPBMmagnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var e,t=i.st.zoom;if(t.enabled&&i.supportsTransition){var n,r,a=t.duration,o=function(e){var n=e.clone().removeAttr("style").removeAttr("class").addClass("bpbmmfp-animated-image"),i="all "+t.duration/1e3+"s "+t.easing,r={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},a="transition";return r["-webkit-"+a]=r["-moz-"+a]=r["-o-"+a]=r[a]=i,n.css(r),n},s=function(){i.content.css("visibility","visible")};A("BuildControls.zoom",(function(){if(i._allowZoom()){if(clearTimeout(n),i.content.css("visibility","hidden"),!(e=i._getItemToZoom()))return void s();(r=o(e)).css(i._getOffset()),i.wrap.append(r),n=setTimeout((function(){r.css(i._getOffset(!0)),n=setTimeout((function(){s(),setTimeout((function(){r.remove(),e=r=null,k("ZoomAnimationEnded")}),16)}),a)}),16)}})),A("BeforeClose.zoom",(function(){if(i._allowZoom()){if(clearTimeout(n),i.st.removalDelay=a,!e){if(!(e=i._getItemToZoom()))return;r=o(e)}r.css(i._getOffset(!0)),i.wrap.append(r),i.content.css("visibility","hidden"),setTimeout((function(){r.css(i._getOffset())}),16)}})),A("Close.zoom",(function(){i._allowZoom()&&(s(),r&&r.remove(),e=null)}))}},_allowZoom:function(){return"image"===i.currItem.type},_getItemToZoom:function(){return!!i.currItem.hasSize&&i.currItem.img},_getOffset:function(e){var t,n=(t=e?i.currItem.img:i.st.zoom.opener(i.currItem.el||i.currItem)).offset(),r=parseInt(t.css("padding-top"),10),a=parseInt(t.css("padding-bottom"),10);n.top-=(0,l.$)(window).scrollTop()-r;var o={width:t.width(),height:(y?t.innerHeight():t[0].offsetHeight)-a-r};return void 0===D&&(D=void 0!==document.createElement("p").style.MozTransform),D?o["-moz-transform"]=o.transform="translate("+n.left+"px,"+n.top+"px)":(o.left=n.left,o.top=n.top),o}}});var I=function(e){var t=i.items.length;return e>t-1?e-t:e<0?t+e:e},N=function(e,t,n){return e.replace(/%curr%/gi,t+1).replace(/%total%/gi,n)};l.$.BPBMmagnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="bpbmmfp-arrow bpbmmfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var e=i.st.gallery,t=".bpbmmfp-gallery";if(i.direction=!0,!e||!e.enabled)return!1;s+=" bpbmmfp-gallery",A(p+t,(function(){e.navigateByImgClick&&i.wrap.on("click"+t,".bpbmmfp-img",(function(){if(i.items.length>1)return i.next(),!1})),a.on("keydown"+t,(function(e){37===e.keyCode?i.prev():39===e.keyCode&&i.next()}))})),A("UpdateStatus"+t,(function(e,t){t.text&&(t.text=N(t.text,i.currItem.index,i.items.length))})),A(d+t,(function(t,n,r,a){var o=i.items.length;r.counter=o>1?N(e.tCounter,a.index,o):""})),A("BuildControls"+t,(function(){if(i.items.length>1&&e.arrows&&!i.arrowLeft){var t=e.arrowMarkup,n=i.arrowLeft=(0,l.$)(t.replace(/%title%/gi,e.tPrev).replace(/%dir%/gi,"left")).addClass(v),r=i.arrowRight=(0,l.$)(t.replace(/%title%/gi,e.tNext).replace(/%dir%/gi,"right")).addClass(v);n.click((function(){i.prev()})),r.click((function(){i.next()})),i.container.append(n.add(r))}})),A(h+t,(function(){i._preloadTimeout&&clearTimeout(i._preloadTimeout),i._preloadTimeout=setTimeout((function(){i.preloadNearbyImages(),i._preloadTimeout=null}),16)})),A(u+t,(function(){a.off(t),i.wrap.off("click"+t),i.arrowRight=i.arrowLeft=null}))},next:function(){i.direction=!0,i.index=I(i.index+1),i.updateItemHTML()},prev:function(){i.direction=!1,i.index=I(i.index-1),i.updateItemHTML()},goTo:function(e){i.direction=e>=i.index,i.index=e,i.updateItemHTML()},preloadNearbyImages:function(){var e,t=i.st.gallery.preload,n=Math.min(t[0],i.items.length),r=Math.min(t[1],i.items.length);for(e=1;e<=(i.direction?r:n);e++)i._preloadItem(i.index+e);for(e=1;e<=(i.direction?n:r);e++)i._preloadItem(i.index-e)},_preloadItem:function(e){if(e=I(e),!i.items[e].preloaded){var t=i.items[e];t.parsed||(t=i.parseEl(e)),k("LazyLoad",t),"image"===t.type&&(t.img=(0,l.$)('<img class="bpbmmfp-img" />').on("load.mfploader",(function(){t.hasSize=!0})).on("error.mfploader",(function(){t.hasSize=!0,t.loadError=!0,k("LazyLoadError",t)})).attr("src",t.src)),t.preloaded=!0}}}});l.$.BPBMmagnificPopup.registerModule("retina",{options:{replaceSrc:function(e){return e.src.replace(/\.\w+$/,(function(e){return"@2x"+e}))},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var e=i.st.retina,t=e.ratio;(t=isNaN(t)?t():t)>1&&(A("ImageHasSize.retina",(function(e,n){n.img.css({"max-width":n.img[0].naturalWidth/t,width:"100%"})})),A("ElementParse.retina",(function(n,i){i.src=e.replaceSrc(i,t)})))}}}}),C()},4891:(e,t,n)=>{"use strict";n.r(t);var i=n(1002),r=n(5474),a="left",o="right",s="up",c="down",l="in",u="out",d="none",p="auto",h="swipe",f="pinch",m="tap",g="doubletap",v="longtap",b="horizontal",y="vertical",_="all",A="start",w="move",k="end",S="cancel",C="ontouchstart"in window,x=window.navigator.msPointerEnabled&&!window.PointerEvent&&!C,E=(window.PointerEvent||window.navigator.msPointerEnabled)&&!C,T="TouchSwipe";function P(e){return!e||void 0!==e.allowPageScroll||void 0===e.swipe&&void 0===e.swipeStatus||(e.allowPageScroll=d),void 0!==e.click&&void 0===e.tap&&(e.tap=e.click),e||(e={}),e=r.$.extend({},r.$.fn.BPBMswipe.defaults,e),this.each((function(){var t=(0,r.$)(this),n=t.data(T);n||(n=new R(this,e),t.data(T,n))}))}function R(e,t){t=r.$.extend({},t);var n=C||E||!t.fallbackToMouseEvents,P=n?E?x?"MSPointerDown":"pointerdown":"touchstart":"mousedown",R=n?E?x?"MSPointerMove":"pointermove":"touchmove":"mousemove",O=n?E?x?"MSPointerUp":"pointerup":"touchend":"mouseup",D=n?E?"mouseleave":null:"mouseleave",M=E?x?"MSPointerCancel":"pointercancel":"touchcancel",I=0,N=null,L=null,B=0,$=0,j=0,U=1,F=0,Z=0,z=null,V=(0,r.$)(e),q="start",W=0,H={},Q=0,X=0,Y=0,G=0,J=0,K=null,ee=null;try{V.on(P,te),V.on(M,re)}catch(e){r.$.error("events not supported "+P+","+M+" on jQuery.swipe")}function te(e){if(!0!==V.data("TouchSwipe_intouch")&&!((0,r.$)(e.target).closest(t.excludedElements,V).length>0)){var n=e.originalEvent?e.originalEvent:e;if(!n.pointerType||"mouse"!=n.pointerType||0!=t.fallbackToMouseEvents){var i,l,u=n.touches,d=u?u[0]:n;return q=A,u?W=u.length:!1!==t.preventDefaultEvents&&e.preventDefault(),I=0,N=null,L=null,Z=null,B=0,$=0,j=0,U=1,F=0,(l={}).left=Te(a),l.right=Te(o),l.up=Te(s),l.down=Te(c),z=l,we(),Ce(0,d),!u||W===t.fingers||t.fingers===_||fe()?(Q=De(),2==W&&(Ce(1,u[1]),$=j=Re(H[0].start,H[1].start)),(t.swipeStatus||t.pinchStatus)&&(i=ce(n,q))):i=!1,!1===i?(ce(n,q=S),i):(t.hold&&(ee=setTimeout(r.$.proxy((function(){V.trigger("hold",[n.target]),t.hold&&(i=t.hold.call(V,n,n.target))}),this),t.longTapThreshold)),Se(!0),null)}}}function ne(e){var n=e.originalEvent?e.originalEvent:e;if(q!==k&&q!==S&&!ke()){var i,h,f,m,g,v=n.touches,A=xe(v?v[0]:n);if(X=De(),v&&(W=v.length),t.hold&&clearTimeout(ee),q=w,2==W&&(0==$?(Ce(1,v[1]),$=j=Re(H[0].start,H[1].start)):(xe(v[1]),j=Re(H[0].end,H[1].end),H[0].end,H[1].end,Z=U<1?u:l),U=(j/$*1).toFixed(2),F=Math.abs($-j)),W===t.fingers||t.fingers===_||!v||fe()){if(N=Oe(A.start,A.end),function(e,n){if(!1!==t.preventDefaultEvents)if(t.allowPageScroll===d)e.preventDefault();else{var i=t.allowPageScroll===p;switch(n){case a:(t.swipeLeft&&i||!i&&t.allowPageScroll!=b)&&e.preventDefault();break;case o:(t.swipeRight&&i||!i&&t.allowPageScroll!=b)&&e.preventDefault();break;case s:(t.swipeUp&&i||!i&&t.allowPageScroll!=y)&&e.preventDefault();break;case c:(t.swipeDown&&i||!i&&t.allowPageScroll!=y)&&e.preventDefault()}}}(e,L=Oe(A.last,A.end)),m=A.start,g=A.end,I=Math.round(Math.sqrt(Math.pow(g.x-m.x,2)+Math.pow(g.y-m.y,2))),B=Pe(),function(e,t){e!=d&&(t=Math.max(t,Ee(e)),z[e].distance=t)}(N,I),i=ce(n,q),!t.triggerOnTouchEnd||t.triggerOnTouchLeave){var C=!0;if(t.triggerOnTouchLeave){var x=(h=this,{left:(f=(h=(0,r.$)(h)).offset()).left,right:f.left+h.outerWidth(),top:f.top,bottom:f.top+h.outerHeight()});C=function(e,t){return e.x>t.left&&e.x<t.right&&e.y>t.top&&e.y<t.bottom}(A.end,x)}!t.triggerOnTouchEnd&&C?q=se(w):t.triggerOnTouchLeave&&!C&&(q=se(k)),q!=S&&q!=k||ce(n,q)}}else ce(n,q=S);!1===i&&ce(n,q=S)}}function ie(e){var n=e.originalEvent?e.originalEvent:e,i=n.touches;if(i){if(i.length&&!ke())return function(e){Y=De(),G=e.touches.length+1}(n),!0;if(i.length&&ke())return!0}return ke()&&(W=G),X=De(),B=Pe(),de()||!ue()?ce(n,q=S):t.triggerOnTouchEnd||!1===t.triggerOnTouchEnd&&q===w?(!1!==t.preventDefaultEvents&&!1!==e.cancelable&&e.preventDefault(),ce(n,q=k)):!t.triggerOnTouchEnd&&ye()?le(n,q=k,m):q===w&&ce(n,q=S),Se(!1),null}function re(){W=0,X=0,Q=0,$=0,j=0,U=1,we(),Se(!1)}function ae(e){var n=e.originalEvent?e.originalEvent:e;t.triggerOnTouchLeave&&ce(n,q=se(k))}function oe(){V.off(P,te),V.off(M,re),V.off(R,ne),V.off(O,ie),D&&V.off(D,ae),Se(!1)}function se(e){var n=e,i=pe(),r=ue(),a=de();return!i||a?n=S:!r||e!=w||t.triggerOnTouchEnd&&!t.triggerOnTouchLeave?!r&&e==k&&t.triggerOnTouchLeave&&(n=S):n=k,n}function ce(e,n){var i,r=e.touches;return(me()&&ge()||ge())&&(i=le(e,n,h)),(he()&&fe()||fe())&&!1!==i&&(i=le(e,n,f)),Ae()&&_e()&&!1!==i?i=le(e,n,g):B>t.longTapThreshold&&I<10&&t.longTap&&!1!==i?i=le(e,n,v):1!==W&&C||!(isNaN(I)||I<t.threshold)||!ye()||!1===i||(i=le(e,n,m)),n===S&&re(),n===k&&(r&&r.length||re()),i}function le(e,n,i){var d;if(i==h){if(V.trigger("swipeStatus",[n,N||null,I||0,B||0,W,H,L]),t.swipeStatus&&!1===(d=t.swipeStatus.call(V,e,n,N||null,I||0,B||0,W,H,L)))return!1;if(n==k&&me()){if(clearTimeout(K),clearTimeout(ee),V.trigger("swipe",[N,I,B,W,H,L]),t.swipe&&!1===(d=t.swipe.call(V,e,N,I,B,W,H,L)))return!1;switch(N){case a:V.trigger("swipeLeft",[N,I,B,W,H,L]),t.swipeLeft&&(d=t.swipeLeft.call(V,e,N,I,B,W,H,L));break;case o:V.trigger("swipeRight",[N,I,B,W,H,L]),t.swipeRight&&(d=t.swipeRight.call(V,e,N,I,B,W,H,L));break;case s:V.trigger("swipeUp",[N,I,B,W,H,L]),t.swipeUp&&(d=t.swipeUp.call(V,e,N,I,B,W,H,L));break;case c:V.trigger("swipeDown",[N,I,B,W,H,L]),t.swipeDown&&(d=t.swipeDown.call(V,e,N,I,B,W,H,L))}}}if(i==f){if(V.trigger("pinchStatus",[n,Z||null,F||0,B||0,W,U,H]),t.pinchStatus&&!1===(d=t.pinchStatus.call(V,e,n,Z||null,F||0,B||0,W,U,H)))return!1;if(n==k&&he())switch(Z){case l:V.trigger("pinchIn",[Z||null,F||0,B||0,W,U,H]),t.pinchIn&&(d=t.pinchIn.call(V,e,Z||null,F||0,B||0,W,U,H));break;case u:V.trigger("pinchOut",[Z||null,F||0,B||0,W,U,H]),t.pinchOut&&(d=t.pinchOut.call(V,e,Z||null,F||0,B||0,W,U,H))}}return i==m?n!==S&&n!==k||(clearTimeout(K),clearTimeout(ee),_e()&&!Ae()?(J=De(),K=setTimeout(r.$.proxy((function(){J=null,V.trigger("tap",[e.target]),t.tap&&(d=t.tap.call(V,e,e.target))}),this),t.doubleTapThreshold)):(J=null,V.trigger("tap",[e.target]),t.tap&&(d=t.tap.call(V,e,e.target)))):i==g?n!==S&&n!==k||(clearTimeout(K),clearTimeout(ee),J=null,V.trigger("doubletap",[e.target]),t.doubleTap&&(d=t.doubleTap.call(V,e,e.target))):i==v&&(n!==S&&n!==k||(clearTimeout(K),J=null,V.trigger("longtap",[e.target]),t.longTap&&(d=t.longTap.call(V,e,e.target)))),d}function ue(){var e=!0;return null!==t.threshold&&(e=I>=t.threshold),e}function de(){var e=!1;return null!==t.cancelThreshold&&null!==N&&(e=Ee(N)-I>=t.cancelThreshold),e}function pe(){return!(t.maxTimeThreshold&&B>=t.maxTimeThreshold)}function he(){var e=ve(),n=be(),i=null===t.pinchThreshold||F>=t.pinchThreshold;return e&&n&&i}function fe(){return!!(t.pinchStatus||t.pinchIn||t.pinchOut)}function me(){var e=pe(),t=ue(),n=ve(),i=be();return!de()&&i&&n&&t&&e}function ge(){return!!(t.swipe||t.swipeStatus||t.swipeLeft||t.swipeRight||t.swipeUp||t.swipeDown)}function ve(){return W===t.fingers||t.fingers===_||!C}function be(){return 0!==H[0].end.x}function ye(){return!!t.tap}function _e(){return!!t.doubleTap}function Ae(){if(null==J)return!1;var e=De();return _e()&&e-J<=t.doubleTapThreshold}function we(){Y=0,G=0}function ke(){var e=!1;return Y&&De()-Y<=t.fingerReleaseThreshold&&(e=!0),e}function Se(e){V&&(!0===e?(V.on(R,ne),V.on(O,ie),D&&V.on(D,ae)):(V.off(R,ne,!1),V.off(O,ie,!1),D&&V.off(D,ae,!1)),V.data("TouchSwipe_intouch",!0===e))}function Ce(e,t){var n={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return n.start.x=n.last.x=n.end.x=t.pageX||t.clientX,n.start.y=n.last.y=n.end.y=t.pageY||t.clientY,H[e]=n,n}function xe(e){var t=void 0!==e.identifier?e.identifier:0,n=function(e){return H[e]||null}(t);return null===n&&(n=Ce(t,e)),n.last.x=n.end.x,n.last.y=n.end.y,n.end.x=e.pageX||e.clientX,n.end.y=e.pageY||e.clientY,n}function Ee(e){if(z[e])return z[e].distance}function Te(e){return{direction:e,distance:0}}function Pe(){return X-Q}function Re(e,t){var n=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return Math.round(Math.sqrt(n*n+i*i))}function Oe(e,t){if(i=t,(n=e).x==i.x&&n.y==i.y)return d;var n,i,r=function(e,t){var n=e.x-t.x,i=t.y-e.y,r=Math.atan2(i,n),a=Math.round(180*r/Math.PI);return a<0&&(a=360-Math.abs(a)),a}(e,t);return r<=45&&r>=0||r<=360&&r>=315?a:r>=135&&r<=225?o:r>45&&r<135?c:s}function De(){return(new Date).getTime()}this.enable=function(){return this.disable(),V.on(P,te),V.on(M,re),V},this.disable=function(){return oe(),V},this.destroy=function(){oe(),V.data(T,null),V=null},this.option=function(e,n){if("object"===(0,i.Z)(e))t=r.$.extend(t,e);else if(void 0!==t[e]){if(void 0===n)return t[e];t[e]=n}else{if(!e)return t;r.$.error("Option "+e+" does not exist on jQuery.swipe.options")}return null}}r.$.fn.BPBMswipe=function(e){var t=(0,r.$)(this),n=t.data(T);if(n&&"string"==typeof e){if(n[e])return n[e].apply(n,Array.prototype.slice.call(arguments,1));r.$.error("Method "+e+" does not exist on jQuery.swipe")}else if(n&&"object"===(0,i.Z)(e))n.option.apply(n,arguments);else if(!(n||"object"!==(0,i.Z)(e)&&e))return P.apply(this,arguments);return t},r.$.fn.BPBMswipe.version="1.6.18",r.$.fn.BPBMswipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:".noSwipe",preventDefaultEvents:!0},r.$.fn.BPBMswipe.phases={PHASE_START:A,PHASE_MOVE:w,PHASE_END:k,PHASE_CANCEL:S},r.$.fn.BPBMswipe.directions={LEFT:a,RIGHT:o,UP:s,DOWN:c,IN:l,OUT:u},r.$.fn.BPBMswipe.pageScroll={NONE:d,HORIZONTAL:b,VERTICAL:y,AUTO:p},r.$.fn.BPBMswipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:_}},6575:(e,t,n)=>{"use strict";n.r(t);var i,r,a=n(1002),o=n(5474).$,s="object",c="function",l="array",u="string",d="boolean",p="number",h="null",f={c:"class",s:"style",i:"id",l:"length",p:"prototype",ti:"tabindex",oH:"offsetHeight",cH:"clientHeight",sH:"scrollHeight",oW:"offsetWidth",cW:"clientWidth",sW:"scrollWidth",hOP:"hasOwnProperty",bCR:"getBoundingClientRect"},m=function(){var e={},t={},n=["-webkit-","-moz-","-o-","-ms-"],i=["WebKit","Moz","O","MS"];function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}return{_cssPrefixes:n,_jsPrefixes:i,_cssProperty:function(e){var i=t[e];if(t[f.hOP](e))return i;for(var a,o,s,c=r(e),l=document.createElement("div")[f.s],u=0;u<n.length;u++)for(s=n[u].replace(/-/g,""),a=[e,n[u]+e,s+c,r(s)+c],o=0;o<a[f.l];o++)if(void 0!==l[a[o]]){i=a[o];break}return t[e]=i,i},_cssPropertyValue:function(e,n,i){var r=e+" "+n,a=t[r];if(t[f.hOP](r))return a;for(var o,s=document.createElement("div")[f.s],c=n.split(" "),l=i||"",u=0,d=-1;u<c[f.l];u++)for(;d<m._cssPrefixes[f.l];d++)if(o=d<0?c[u]:m._cssPrefixes[d]+c[u],s.cssText=e+":"+o+l,s[f.l]){a=o;break}return t[r]=a,a},_jsAPI:function(t,n,a){var o=0,s=e[t];if(!e[f.hOP](t)){for(s=window[t];o<i[f.l];o++)s=s||window[(n?i[o]:i[o].toLowerCase())+r(t)];e[t]=s}return s||a}}}(),g=function(){function e(e){return e?window.innerWidth||document.documentElement[f.cW]||document.body[f.cW]:window.innerHeight||document.documentElement[f.cH]||document.body[f.cH]}function t(e,t){if((0,a.Z)(e)!=c)throw"Can't bind function!";var n=f.p,i=Array[n].slice.call(arguments,2),r=function(){},o=function(){return e.apply(this instanceof r?this:t,i.concat(Array[n].slice.call(arguments)))};return e[n]&&(r[n]=e[n]),o[n]=new r,o}return{wW:t(e,0,!0),wH:t(e,0),mO:t(m._jsAPI,0,"MutationObserver",!0),rO:t(m._jsAPI,0,"ResizeObserver",!0),rAF:t(m._jsAPI,0,"requestAnimationFrame",!1,(function(e){return window.setTimeout(e,1e3/60)})),cAF:t(m._jsAPI,0,"cancelAnimationFrame",!1,(function(e){return window.clearTimeout(e)})),now:function(){return Date.now&&Date.now()||(new Date).getTime()},stpP:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},prvD:function(e){e.preventDefault&&e.cancelable?e.preventDefault():e.returnValue=!1},page:function(e){var t=((e=e.originalEvent||e).target||e.srcElement||document).ownerDocument||document,n=t.documentElement,i=t.body;if(void 0!==e.touches){var r=e.touches[0];return{x:r.pageX,y:r.pageY}}return!e.pageX&&e.clientX&&null!=e.clientX?{x:e.clientX+(n&&n.scrollLeft||i&&i.scrollLeft||0)-(n&&n.clientLeft||i&&i.clientLeft||0),y:e.clientY+(n&&n.scrollTop||i&&i.scrollTop||0)-(n&&n.clientTop||i&&i.clientTop||0)}:{x:e.pageX,y:e.pageY}},mBtn:function(e){var t=e.button;return e.which||void 0===t?e.which:1&t?1:2&t?3:4&t?2:0},inA:function(e,t){for(var n=0;n<t[f.l];n++)try{if(t[n]===e)return n}catch(e){}return-1},isA:function(e){var t=Array.isArray;return t?t(e):this.type(e)==l},type:function(e){return null==e?e+"":Object[f.p].toString.call(e).replace(/^\[object (.+)\]$/,"$1").toLowerCase()},bind:t}}(),v=Math,b=o,y=(o.easing,o),_=(i=[],r="__BPBMoverlayScrollbars__",function(e,t){var n=arguments[f.l];if(n<1)return i;if(t)e[r]=t,i.push(e);else{var a=g.inA(e,i);if(a>-1){if(!(n>1))return i[a][r];delete e[r],i.splice(a,1)}}}),A=function(){var e,t,n,i,r,o,A,w,k,S,C=[],x=(i=g.type,r=[d,p,u,l,s,c,h],k={className:["bpbm-os-theme-dark",[h,u]],resize:["none","n:none b:both h:horizontal v:vertical"],sizeAutoCapable:o=[!0,d],clipAlways:o,normalizeRTL:o,paddingAbsolute:A=[!1,d],autoUpdate:[null,[h,d]],autoUpdateInterval:[33,p],updateOnLoad:[["img"],[u,l,h]],nativeScrollbarsOverlaid:{showNativeScrollbars:A,initialize:o},overflowBehavior:{x:["scroll","v-h:visible-hidden v-s:visible-scroll s:scroll h:hidden"],y:["scroll","v-h:visible-hidden v-s:visible-scroll s:scroll h:hidden"]},scrollbars:{visibility:["auto","v:visible h:hidden a:auto"],autoHide:["never","n:never s:scroll l:leave m:move"],autoHideDelay:[800,p],dragScrolling:o,clickScrolling:A,touchSupport:o,snapHandle:A},textarea:{dynWidth:A,dynHeight:A,inheritedAttrs:[["style","class"],[u,l,h]]},callbacks:{onInitialized:w=[null,[h,c]],onInitializationWithdrawn:w,onDestroyed:w,onScrollStart:w,onScroll:w,onScrollStop:w,onOverflowChanged:w,onOverflowAmountChanged:w,onDirectionChanged:w,onContentSizeChanged:w,onHostSizeChanged:w,onUpdated:w}},{_defaults:(S=function(e){return function t(n){var r,a,o;for(r in n)n[f.hOP](r)&&(a=n[r],(o=i(a))==l?n[r]=a[e?1:0]:o==s&&(n[r]=t(a)));return n}(y.extend(!0,{},k))})(),_template:S(!0),_validate:function(e,t,n,a){var o={},c={},l=y.extend(!0,{},e),d=y.inArray,p=y.isEmptyObject;return function e(t,a,o,c,l,h){for(var m in a)if(a[f.hOP](m)&&t[f.hOP](m)){var v,b,_,A,w,k,S,C,x=!1,E=!1,T=a[m],P=i(T),R=P==s,O=g.isA(T)?T:[T],D=o[m],M=t[m],I=i(M),N=h?h+".":"",L='The option "'+N+m+"\" wasn't set, because",B=[],$=[];if(D=void 0===D?{}:D,R&&I==s)c[m]={},l[m]={},e(M,T,D,c[m],l[m],N+m),y.each([t,c,l],(function(e,t){p(t[m])&&delete t[m]}));else if(!R){for(k=0;k<O[f.l];k++)if(w=O[k],_=(P=i(w))==u&&-1===d(w,r))for(B.push(u),v=w.split(" "),$=$.concat(v),S=0;S<v[f.l];S++){for(A=(b=v[S].split(":"))[0],C=0;C<b[f.l];C++)if(M===b[C]){x=!0;break}if(x)break}else if(B.push(w),I===w){x=!0;break}x?((E=M!==D)&&(c[m]=M),(_?d(D,b)<0:E)&&(l[m]=_?A:M)):n&&console.warn(L+" it doesn't accept the type [ "+I.toUpperCase()+' ] with the value of "'+M+'".\r\nAccepted types are: [ '+B.join(", ").toUpperCase()+" ]."+($[length]>0?"\r\nValid strings are: [ "+$.join(", ").split(":").join(", ")+" ].":"")),delete t[m]}}}(l,t,a||{},o,c),!p(l)&&n&&console.warn("The following options are discarded due to invalidity:\r\n"+window.JSON.stringify(l,null,2)),{_default:o,_prepared:c}}});function E(){t||(t=new T(x._defaults)),n||(n=new P(t))}function T(e){var t=this,n="overflow",i="hidden",r=y("body"),a=y('<div id="bpbm-os-dummy-scrollbar-size"><div></div></div>'),o=a[0],s=y(a.children("div").eq(0));r.append(a),a.hide().show();var c=d(o),l={x:0===c.x,y:0===c.y},u=function(){var e,t=window.navigator.userAgent,n=t.indexOf("MSIE "),i=t.indexOf("Trident/"),r=t.indexOf("Edge/"),a=t.indexOf("rv:"),o=parseInt;return n>0?e=o(t.substring(n+5,t.indexOf(".",n)),10):i>0?e=o(t.substring(a+3,t.indexOf(".",a)),10):r>0&&(e=o(t.substring(r+5,t.indexOf(".",r)),10)),e}();function d(e){return{x:e[f.oH]-e[f.cH],y:e[f.oW]-e[f.cW]}}y.extend(t,{defaultOptions:e,msie:u,autoUpdateLoop:!1,autoUpdateRecommended:!g.mO(),nativeScrollbarSize:c,nativeScrollbarIsOverlaid:l,nativeScrollbarStyling:function(){var e=!1;a.addClass("bpbm-os-viewport-native-scrollbars-invisible");try{e="none"===a.css("scrollbar-width")&&(u>9||!u)||"none"===window.getComputedStyle(o,"::-webkit-scrollbar").getPropertyValue("display")}catch(e){}return e}(),overlayScrollbarDummySize:{x:30,y:30},cssCalc:m._cssPropertyValue("width","calc","(1px)")||null,restrictedMeasuring:function(){a.css(n,i);var e=o[f.sW],t=o[f.sH];a.css(n,"visible");var r=o[f.sW],s=o[f.sH];return e-r!=0||t-s!=0}(),rtlScrollBehavior:function(){a.css({"overflow-y":i,"overflow-x":"scroll",direction:"rtl"}).scrollLeft(0);var e=a.offset(),t=s.offset();a.scrollLeft(-999);var n=s.offset();return{i:e.left===t.left,n:t.left!==n.left}}(),supportTransform:!!m._cssProperty("transform"),supportTransition:!!m._cssProperty("transition"),supportPassiveEvents:function(){var e=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){e=!0}}))}catch(e){}return e}(),supportResizeObserver:!!g.rO(),supportMutationObserver:!!g.mO()}),a.removeAttr(f.s).remove(),function(){if(!l.x||!l.y){var e=v.abs,n=g.wW(),i=g.wH(),o=s();y(window).on("resize",(function(){if(_().length>0){var c=g.wW(),l=g.wH(),u=c-n,p=l-i;if(0===u&&0===p)return;var h,f=v.round(c/(n/100)),m=v.round(l/(i/100)),b=e(u),A=e(p),w=e(f),k=e(m),S=s(),C=b>2&&A>2,x=(P=k,!((R=e(w))!==(O=e(P))&&R+1!==O&&R-1!==O)),E=C&&x&&S!==o&&o>0,T=t.nativeScrollbarSize;E&&(r.append(a),h=t.nativeScrollbarSize=d(a[0]),a.remove(),T.x===h.x&&T.y===h.y||y.each(_(),(function(){_(this)&&_(this).update("zoom")}))),n=c,i=l,o=S}var P,R,O}))}function s(){var e=window.screen.deviceXDPI||0,t=window.screen.logicalXDPI||1;return window.devicePixelRatio||e/t}}()}function P(e){var t,n=y.inArray,i=g.now,r=f.l,a=[],o=[],s=!1,c=33,l=i(),u=function e(){if(a[r]>0&&s){t=g.rAF()((function(){e()}));var n,u,d,p,h,f,m=i(),b=m-l;if(b>c){l=m-b%c,n=33;for(var y=0;y<a[r];y++)void 0!==(u=a[y])&&(p=(d=u.options()).autoUpdate,h=v.max(1,d.autoUpdateInterval),f=i(),(!0===p||null===p)&&f-o[y]>h&&(u.update("auto"),o[y]=new Date(f+=h)),n=v.max(1,v.min(n,h)));c=n}}else c=33};this.add=function(t){-1===n(t,a)&&(a.push(t),o.push(i()),a[r]>0&&!s&&(s=!0,e.autoUpdateLoop=s,u()))},this.remove=function(i){var c=n(i,a);c>-1&&(o.splice(c,1),a.splice(c,1),0===a[r]&&s&&(s=!1,e.autoUpdateLoop=s,void 0!==t&&(g.cAF()(t),t=-1)))}}function R(t,n,i,r,o){var h=g.type,A=y.inArray,w=y.each,k=new e,S=y[f.p];if(Gi(t)){if(_(t)){var C=_(t);return C.options(n),C}var E,T,P,R,O,D,M,I,N,L,B,$,j,U,F,Z,z,V,q,W,H,Q,X,Y,G,J,K,ee,te,ne,ie,re,ae,oe,se,ce,le,ue,de,pe,he,fe,me,ge,ve,be,ye,_e,Ae,we,ke,Se,Ce,xe,Ee,Te,Pe,Re,Oe,De,Me,Ie,Ne,Le,Be,$e,je,Ue,Fe,Ze,ze,Ve,qe,We,He,Qe,Xe,Ye,Ge,Je,Ke,et,tt,nt,it,rt,at,ot,st,ct,lt,ut,dt,pt,ht,ft,mt,gt,vt,bt,yt,_t,At,wt,kt,St,Ct,xt,Et,Tt,Pt,Rt,Ot,Dt,Mt,It,Nt,Lt,Bt,$t,jt={},Ut={},Ft={},Zt={},zt={},Vt="-hidden",qt="margin-",Wt="padding-",Ht="border-",Qt="top",Xt="right",Yt="bottom",Gt="left",Jt="width",Kt="height",en="float",tn="",nn="auto",rn="sync",an="scroll",on="100%",sn="x",cn="y",ln=".",un=" ",dn="scrollbar",pn="-horizontal",hn="-vertical",fn="mousedown touchstart",mn="mouseup touchend touchcancel",gn="mousemove touchmove",vn="mouseenter",bn="mouseleave",yn="keydown",_n="keyup",An="selectstart",wn="transitionend webkitTransitionEnd oTransitionEnd",kn="bpbm-os-html",Sn="bpbm-os-host",Cn=Sn+"-foreign",xn=Sn+"-textarea",En=Sn+"-"+dn+pn+Vt,Tn=Sn+"-"+dn+hn+Vt,Pn=Sn+"-transition",Rn=Sn+"-rtl",On=Sn+"-resize-disabled",Dn=Sn+"-scrolling",Mn=Sn+"-overflow",In=(Mn=Sn+"-overflow")+"-x",Nn=Mn+"-y",Ln="bpbm-os-textarea",Bn=Ln+"-cover",$n="bpbm-os-padding",jn="bpbm-os-viewport",Un="bpbm-os-viewport-native-scrollbars-invisible",Fn="bpbm-os-viewport-native-scrollbars-overlaid",Zn="bpbm-os-content",zn="bpbm-os-resize-observer",Vn="bpbm-os-resize-observer-item",qn="bpbm-os-resize-observer-item-final",Wn="bpbm-os-text-inherit",Hn="bpbm-os-scrollbar-track",Qn="bpbm-os-scrollbar-track-off",Xn="bpbm-os-scrollbar-handle",Yn="bpbm-os-scrollbar-handle-off",Gn="bpbm-os-scrollbar-unusable",Jn="bpbm-os-scrollbar-auto-hidden",Kn="bpbm-os-scrollbar-corner",ei="bpbm-os-scrollbar-corner-resize",ti=ei+"-both",ni=ei+pn,ii=ei+hn,ri="bpbm-os-dragging",ai="bpbm-os-theme-none",oi=[Un,Fn,Qn,Yn,Gn,Jn,ei,ti,ni,ii,ri].join(un),si=[],ci=[f.ti],li={},ui={},di="load",pi=[],hi={},fi=["wrap","cols","rows"],mi=[f.i,f.c,f.s,"open"].concat(ci),gi=[];return k.sleep=function(){te=!0},k.update=function(e){var t,n,i,r,a;if(!F)return h(e)==u?e===nn?(t=function(){if(!te&&!St){var e,t,n,i=[],r=[{_elem:pe,_attrs:mi.concat(":visible")},{_elem:Z?de:void 0,_attrs:fi}];return w(r,(function(r,a){(e=a._elem)&&w(a._attrs,(function(r,a){t=":"===a.charAt(0)?e.is(a):e.attr(a),n=hi[a],or(t,n)&&i.push(a),hi[a]=t}))})),Oi(i),i[f.l]>0}}(),n=function(){if(te)return!1;var e,t,n,i,r=er(),a=Z&&Ze&&!ft?de.val().length:0,o=!St&&Ze&&!Z,s={};return o&&(e=ve.css(en),s.float=ee?Xt:Gt,s.width=nn,ve.css(s)),i={w:r[f.sW]+a,h:r[f.sH]+a},o&&(s.float=e,s.width=on,ve.css(s)),t=Pi(),n=or(i,rt),rt=i,n||t}(),(i=t||n)&&Mi({_contentSizeChanged:n,_changedOptions:U?void 0:re})):e===rn?St?(r=wt(_t.takeRecords()),a=kt(At.takeRecords())):r=k.update(nn):"zoom"===e&&Mi({_hostSizeChanged:!0,_contentSizeChanged:!0}):(e=te||e,te=!1,k.update(rn)&&!e||Mi({_force:e})),Ii(),i||r||a},k.options=function(e,t){var n,i={};if(y.isEmptyObject(e)||!y.isPlainObject(e)){if(h(e)!=u)return ie;if(!(arguments.length>1))return ir(ie,e);rr(i,e,t),n=Ni(i)}else n=Ni(e);y.isEmptyObject(n)||Mi({_changedOptions:n})},k.destroy=function(){if(!F){for(var e in o.remove(k),Ai(),yi(fe),yi(he),li)k.removeExt(e);for(;gi[f.l]>0;)gi.pop()();Ti(!0),ye&&dr(ye),be&&dr(be),H&&dr(he),Bi(!0),qi(!0),Li(!0);for(var n=0;n<pi[f.l];n++)y(pi[n]).off(di,Ei);pi=void 0,F=!0,te=!0,_(t,0),Wi("onDestroyed")}},k.scroll=function(e,t,n,i){if(0===arguments.length||void 0===e){var r=Ut,a=Ft,o=dt&&ee&&P.i,m=dt&&ee&&P.n,_=r._currentScroll,w=r._currentScrollRatio,S=r._maxScroll;return w=o?1-w:w,_=o?S-_:_,S*=m?-1:1,{position:{x:_*=m?-1:1,y:a._currentScroll},ratio:{x:w,y:a._currentScrollRatio},max:{x:S,y:a._maxScroll},handleOffset:{x:r._handleOffset,y:a._handleOffset},handleLength:{x:r._handleLength,y:a._handleLength},handleLengthRatio:{x:r._handleLengthRatio,y:a._handleLengthRatio},trackLength:{x:r._trackLength,y:a._trackLength},snappedHandleOffset:{x:r._snappedHandleOffset,y:a._snappedHandleOffset},isRTL:ee,isRTLNormalized:dt}}k.update(rn);var C,x,E,T,R,O,D,M,I,N=dt,B=[sn,Gt,"l"],$=[cn,Qt,"t"],j=["+=","-=","*=","/="],U=h(t)==s,F=U?t.complete:i,Z={},z={},V="end",q="begin",W="center",H="nearest",Q="always",X="never",Y="ifneeded",G=f.l,J=[sn,cn,"xy","yx"],K=[q,V,W,H],te=[Q,X,Y],ne=e[f.hOP]("el"),ie=ne?e.el:e,re=!!(ie instanceof y||b)&&ie instanceof b,ae=!re&&Gi(ie),oe=function(){x&&Zi(!0),E&&Zi(!1)},se=h(F)!=c?void 0:function(){oe(),F()};function ce(e,t){for(C=0;C<t[G];C++)if(e===t[C])return!0;return!1}function le(e,t){var n=e?B:$;if(t=h(t)==u||h(t)==p?[t,t]:t,g.isA(t))return e?t[0]:t[1];if(h(t)==s)for(C=0;C<n[G];C++)if(n[C]in t)return t[n[C]]}function ue(e,t){var n,i,r,a,o=h(t)==u,s=e?Ut:Ft,c=s._currentScroll,l=s._maxScroll,d=" * ",f=ee&&e,m=f&&P.n&&!N,g=eval;if(o?(t[G]>2&&(a=t.substr(0,2),A(a,j)>-1&&(n=a)),t=(t=n?t.substr(2):t).replace(/min/g,0).replace(/</g,0).replace(/max/g,(m?"-":tn)+on).replace(/>/g,(m?"-":tn)+on).replace(/px/g,tn).replace(/%/g,d+l*(f&&P.n?-1:1)/100).replace(/vw/g,d+Zt.w).replace(/vh/g,d+Zt.h),i=Ji(isNaN(t)?Ji(g(t),!0).toFixed():t)):i=t,void 0!==i&&!isNaN(i)&&h(i)==p){var b=N&&f,y=c*(b&&P.n?-1:1),_=b&&P.i,w=b&&P.n;switch(y=_?l-y:y,n){case"+=":r=y+i;break;case"-=":r=y-i;break;case"*=":r=y*i;break;case"/=":r=y/i;break;default:r=i}r=_?l-r:r,r*=w?-1:1,r=f&&P.n?v.min(0,v.max(l,r)):v.max(0,v.min(l,r))}return r===c?void 0:r}function de(e,t,n,i){var r,a,o=[n,n],c=h(e);if(c==t)e=[e,e];else if(c==l){if((r=e[G])>2||r<1)e=o;else for(1===r&&(e[1]=n),C=0;C<r;C++)if(a=e[C],h(a)!=t||!ce(a,i)){e=o;break}}else e=c==s?[e.x||n,e.y||n]:o;return{x:e[0],y:e[1]}}function pe(e){var t,n,i=[],r=[Qt,Xt,Yt,Gt];for(C=0;C<e[G]&&C!==r[G];C++)t=e[C],(n=h(t))==d?i.push(t?Ji(I.css(qt+r[C])):0):i.push(n==p?t:0);return i}if(re||ae){var he,fe=ne?e.margin:0,ve=ne?e.axis:0,be=ne?e.scroll:0,ye=ne?e.block:0,_e=[0,0,0,0],Ae=h(fe);if((I=re?ie:y(ie))[G]>0){fe=Ae==p||Ae==d?pe([fe,fe,fe,fe]):Ae==l?2===(he=fe[G])?pe([fe[0],fe[1],fe[0],fe[1]]):he>=4?pe(fe):_e:Ae==s?pe([fe.top,fe.right,fe.bottom,fe.left]):_e,R=ce(ve,J)?ve:"xy",O=de(be,u,Q,te),D=de(ye,u,q,K),M=fe;var we={l:Ut._currentScroll,t:Ft._currentScroll},ke=me.offset(),Se=I.offset(),Ce={x:O.x==X||R==cn,y:O.y==X||R==sn};Se.top-=M[0],Se.left-=M[3];var xe={x:v.round(Se.left-ke.left+we.l),y:v.round(Se.top-ke.top+we.t)};if(ee&&(P.n||P.i||(xe.x=v.round(ke.left-Se.left+we.l)),P.n&&N&&(xe.x*=-1),P.i&&N&&(xe.x=v.round(ke.left-Se.left+(Ut._maxScroll-we.l)))),D.x!=q||D.y!=q||O.x==Y||O.y==Y||ee){var Ee=I[0],Te=L?Ee[f.bCR]():{width:Ee[f.oW],height:Ee[f.oH]},Pe={w:Te.width+M[3]+M[1],h:Te.height+M[0]+M[2]},Re=function(e){var t=Vi(e),n=t._w_h,i=t._left_top,r=t._x_y,a=D[r]==(e&&ee?q:V),o=D[r]==W,s=D[r]==H,c=O[r]==X,l=O[r]==Y,u=Zt[n],d=ke[i],p=Pe[n],h=Se[i],f=o?2:1,m=h+p/2,g=d+u/2,v=p<=u&&h>=d&&h+p<=d+u;c?Ce[r]=!0:Ce[r]||((s||l)&&(Ce[r]=!!l&&v,a=p<u?m>g:m<g),xe[r]-=a||o?(u/f-p/f)*(e&&ee&&N?-1:1):0)};Re(!0),Re(!1)}Ce.y&&delete xe.y,Ce.x&&delete xe.x,e=xe}}Z.scrollLeft=ue(!0,le(!0,e)),Z.scrollTop=ue(!1,le(!1,e)),x=void 0!==Z.scrollLeft,E=void 0!==Z.scrollTop,(x||E)&&(t>0||U)?U?(t.complete=se,ge.animate(Z,t)):(T={duration:t,complete:se},g.isA(n)||y.isPlainObject(n)?(z.scrollLeft=n[0]||n.x,z.scrollTop=n[1]||n.y,T.specialEasing=z):T.easing=n,ge.animate(Z,T)):(x&&ge.scrollLeft(Z.scrollLeft),E&&ge.scrollTop(Z.scrollTop),oe())},k.scrollStop=function(e,t,n){return ge.stop(e,t,n),k},k.getElements=function(e){var t={target:Re,host:Oe,padding:Ie,viewport:Ne,content:Le,scrollbarHorizontal:{scrollbar:we[0],track:ke[0],handle:Se[0]},scrollbarVertical:{scrollbar:Ce[0],track:xe[0],handle:Ee[0]},scrollbarCorner:Ae[0]};return h(e)==u?ir(t,e):t},k.getState=function(e){function t(e){if(!y.isPlainObject(e))return e;var t=sr({},e),n=function(e,n){t[f.hOP](e)&&(t[n]=t[e],delete t[e])};return n("w",Jt),n("h",Kt),delete t.c,t}var n={destroyed:!!t(F),sleeping:!!t(te),autoUpdate:t(!St),widthAuto:t(Ze),heightAuto:t(ze),padding:t(qe),overflowAmount:t(et),hideOverflow:t(Fe),hasOverflow:t(Ue),contentScrollSize:t($e),viewportSize:t(Zt),hostSize:t(Be),documentMixed:t(V)};return h(e)==u?ir(n,e):n},k.ext=function(e){var t,n="added removed on contract".split(" "),i=0;if(h(e)==u){if(li[f.hOP](e))for(t=sr({},li[e]);i<n.length;i++)delete t[n[i]]}else for(i in t={},li)t[i]=sr({},k.ext(i));return t},k.addExt=function(t,n){var i,r,a,o,s=e.extension(t),l=!0;if(s){if(li[f.hOP](t))return k.ext(t);if((i=s.extensionFactory.call(k,sr({},s.defaultOptions),y,g))&&(a=i.contract,h(a)==c&&(o=a(window),l=h(o)==d?o:l),l))return li[t]=i,r=i.added,h(r)==c&&r(n),k.ext(t)}else console.warn('A extension with the name "'+t+"\" isn't registered.")},k.removeExt=function(e){var t,n=li[e];return!!n&&(delete li[e],t=n.removed,h(t)==c&&t(),!0)},e.valid(function(e,t,n){var i,o;return ne=r.defaultOptions,D=r.nativeScrollbarStyling,I=sr({},r.nativeScrollbarSize),E=sr({},r.nativeScrollbarIsOverlaid),T=sr({},r.overlayScrollbarDummySize),P=sr({},r.rtlScrollBehavior),Ni(sr({},ne,t)),M=r.cssCalc,O=r.msie,R=r.autoUpdateRecommended,N=r.supportTransition,L=r.supportTransform,B=r.supportPassiveEvents,$=r.supportResizeObserver,j=r.supportMutationObserver,r.restrictedMeasuring,ce=y(e.ownerDocument),Pe=ce[0],se=y(Pe.defaultView||Pe.parentWindow),Te=se[0],le=pr(ce,"html"),ue=pr(le,"body"),de=y(e),Re=de[0],Z=de.is("textarea"),z=de.is("body"),V=Pe!==document,q=Z?de.hasClass(Ln)&&de.parent().hasClass(Zn):de.hasClass(Sn)&&de.children(".bpbm-os-padding")[f.l],E.x&&E.y&&!re.nativeScrollbarsOverlaid.initialize?(Wi("onInitializationWithdrawn"),q&&(Li(!0),Bi(!0),qi(!0)),F=!0,te=!0,k):(z&&((i={}).l=v.max(de.scrollLeft(),le.scrollLeft(),se.scrollLeft()),i.t=v.max(de.scrollTop(),le.scrollTop(),se.scrollTop()),o=function(){ge.removeAttr(f.ti),vi(ge,fn,o,!0,!0)}),Li(),Bi(),qi(),function(){var e,t,n=[112,113,114,115,116,117,118,119,120,121,123,33,34,37,38,39,40,16,17,18,19,20,144],i=[],r="focus";function a(t){Di(),k.update(nn),t&&R&&clearInterval(e)}Z?(O>9||!R?bi(de,"input",a):bi(de,[yn,_n],[function(t){var r=t.keyCode;A(r,n)<0&&(i[f.l]||(a(),e=setInterval(a,1e3/60)),A(r,i)<0&&i.push(r))},function(e){var t=e.keyCode,r=A(t,i);A(t,n)<0&&(r>-1&&i.splice(r,1),i[f.l]||a(!0))}]),bi(de,[an,"drop",r,"focusout"],[function(e){return de.scrollLeft(P.i&&dt?9999999:0),de.scrollTop(0),g.prvD(e),g.stpP(e),!1},function(e){setTimeout((function(){F||a()}),50)},function(){Ct=!0,cr(pe,r)},function(){Ct=!1,i=[],lr(pe,r),a(!0)}])):bi(ve,wn,(function(e){!0!==nt&&function(e){if(!U)return!0;var t="flex-grow",n="flex-shrink",i="flex-basis",r=[Jt,"min-width","max-width","margin-left","margin-right",Gt,Xt,"font-weight","word-spacing",t,n,i],a=["padding-left","padding-right","border-leftwidth","border-rightwidth"],o=[Kt,"min-height","max-height","margin-top","margin-bottom",Qt,Yt,"line-height",t,n,i],s=["padding-top","padding-bottom","border-topwidth","border-bottomwidth"],c="s"===Ke.x||"v-s"===Ke.x,l=!1,u=function(e,t){for(var n=0;n<e[f.l];n++)if(e[n]===t)return!0;return!1};return("s"===Ke.y||"v-s"===Ke.y)&&((l=u(o,e))||W||(l=u(s,e))),c&&!l&&((l=u(r,e))||W||(l=u(a,e))),l}((e=e.originalEvent||e).propertyName)&&k.update(nn)})),bi(ge,an,(function(e){te||(void 0!==t?clearTimeout(t):((Rt||Ot)&&Ui(!0),Ki()||cr(pe,Dn),Wi("onScrollStart",e)),It||(Zi(!0),Zi(!1)),Wi("onScroll",e),t=setTimeout((function(){F||(clearTimeout(t),t=void 0,(Rt||Ot)&&Ui(!1),Ki()||lr(pe,Dn),Wi("onScrollStop",e))}),175))}),!0)}(),$i(!0),$i(!1),function(){var e,t=Te.top!==Te,n={},i={},r={};function a(e){if(s(e)){var t=c(e),a={};(Bt||Lt)&&(a.width=i.w+(t.x-n.x)*r.x),($t||Lt)&&(a.height=i.h+(t.y-n.y)*r.y),pe.css(a),g.stpP(e)}else o(e)}function o(t){var n=void 0!==t;vi(ce,[An,gn,mn],[xi,a,o],!0),lr(ue,ri),Ae.releaseCapture&&Ae.releaseCapture(),n&&(e&&_i(),k.update(nn)),e=!1}function s(e){var t=void 0!==(e.originalEvent||e).touches;return!te&&!F&&(1===g.mBtn(e)||t)}function c(e){return O&&t?{x:e.screenX,y:e.screenY}:g.page(e)}bi(Ae,fn,(function(t){s(t)&&!Nt&&(St&&(e=!0,Ai()),n=c(t),i.w=Oe[f.oW]-(W?0:Q),i.h=Oe[f.oH]-(W?0:X),r=Yi(),vi(ce,[An,gn,mn],[xi,a,o]),cr(ue,ri),Ae.setCapture&&Ae.setCapture(),g.prvD(t),g.stpP(t))}))}(),function(){if(j){var e,t,n,i,r,o,s,l,u,d,p=g.mO(),h=g.now();kt=function(e){var t=!1;return U&&!te&&(w(e,(function(){return t=function(e){var t=e.attributeName,n=e.target,i=e.type,r="closest";if(n===Le)return null===t;if("attributes"===i&&(t===f.c||t===f.s)&&!Z){if(t===f.c&&y(n).hasClass(Sn))return Ri(e.oldValue,n.className);if((0,a.Z)(n[r])!=c)return!0;if(null!==n[r](".bpbm-os-resize-observer")||null!==n[r](".bpbm-os-scrollbar")||null!==n[r](".bpbm-os-scrollbar-corner"))return!1}return!0}(this),!t})),t&&(l=g.now(),u=ze||Ze,d=function(){F||(h=l,Z&&Di(),u?Mi():k.update(nn))},clearTimeout(s),l-h>11||!u?d():s=setTimeout(d,11))),t},_t=new p(wt=function(a){var s,c=!1,l=!1,u=[];return U&&!te&&(w(a,(function(){e=(s=this).target,t=s.attributeName,n=t===f.c,i=s.oldValue,r=e.className,q&&n&&!l&&i.indexOf(Cn)>-1&&r.indexOf(Cn)<0&&(o=Xi(!0),Oe.className=r.split(un).concat(i.split(un).filter((function(e){return e.match(o)}))).join(un),c=l=!0),c||(c=n?Ri(i,r):t!==f.s||i!==e[f.s].cssText),u.push(t)})),Oi(u),c&&k.update(l||nn)),c}),At=new p(kt)}}(),yi(fe,wi),z&&(ge.scrollLeft(i.l).scrollTop(i.t),document.activeElement==e&&Ne.focus&&(ge.attr(f.ti,"-1"),Ne.focus(),vi(ge,fn,o,!1,!0))),k.update(nn),U=!0,Wi("onInitialized"),w(si,(function(e,t){Wi(t.n,t.a)})),si=[],h(n)==u&&(n=[n]),g.isA(n)?w(n,(function(e,t){k.addExt(t)})):y.isPlainObject(n)&&w(n,(function(e,t){k.addExt(e,t)})),setTimeout((function(){N&&!F&&cr(pe,Pn)}),333),k)}(t,n,i))&&_(t,k),k}function vi(e,t,n,i,r){var a=g.isA(t)&&g.isA(n),o=i?"removeEventListener":"addEventListener",s=i?"off":"on",c=!a&&t.split(un),l=0,u=y.isPlainObject(r),d=B&&(u?r._passive:r)||!1,p=u&&(r._capture||!1),h=B?{passive:d,capture:p}:p;if(a)for(;l<t[f.l];l++)vi(e,t[l],n[l],i,r);else for(;l<c[f.l];l++)B?e[0][o](c[l],n,h):e[s](c[l],n)}function bi(e,t,n,i){vi(e,t,n,!1,i),gi.push(g.bind(vi,0,e,t,n,!0,i))}function yi(e,t){if(e){var n=g.rO(),i="animationstart mozAnimationStart webkitAnimationStart MSAnimationStart",a=3333333,o=function(){e.scrollTop(a).scrollLeft(ee?P.n?-3333333:P.i?0:a:a),t()};if(t){if($)((I=e.addClass("observed").append(tr(zn)).contents()[0]).__BPBMoverlayScrollbarsRO__=new n(o)).observe(I);else if(O>9||!R){e.prepend(tr(zn,tr({c:Vn,dir:"ltr"},tr(Vn,tr(qn))+tr(Vn,tr({c:qn,style:"width: 200%; height: 200%"})))));var c,l,u,d,p=e[0].childNodes[0].childNodes[0],h=y(p.childNodes[1]),m=y(p.childNodes[0]),v=y(m[0].childNodes[0]),b=p[f.oW],_=p[f.oH],A=r.nativeScrollbarSize,w=function(){m.scrollLeft(a).scrollTop(a),h.scrollLeft(a).scrollTop(a)},k=function(){l=0,c&&(b=u,_=d,o())},S=function(e){return u=p[f.oW],d=p[f.oH],c=u!=b||d!=_,e&&c&&!l?(g.cAF()(l),l=g.rAF()(k)):e||k(),w(),e&&(g.prvD(e),g.stpP(e)),!1},C={},x={};Hi(x,tn,[-2*(A.y+1),-2*A.x,-2*A.y,-2*(A.x+1)]),y(p).css(x),m.on(an,S),h.on(an,S),e.on(i,(function(){S(!1)})),C.width=a,C.height=a,v.css(C),w()}else{var E=Pe.attachEvent,T=void 0!==O;if(E)e.prepend(tr(zn)),pr(e,".bpbm-os-resize-observer")[0].attachEvent("onresize",o);else{var D=Pe.createElement(s);D.setAttribute(f.ti,"-1"),D.setAttribute(f.c,zn),D.onload=function(){var e=this.contentDocument.defaultView;e.addEventListener("resize",o),e.document.documentElement.style.display="none"},D.type="text/html",T&&e.prepend(D),D.data="about:blank",T||e.prepend(D),e.on(i,o)}}if(e[0]===Me){var M=function(){var e=pe.css("direction"),t={},n=0,i=!1;return e!==Xe&&("ltr"===e?(t.left=0,t.right=nn,n=a):(t.left=nn,t.right=0,n=P.n?-3333333:P.i?0:a),fe.children().eq(0).css(t),fe.scrollLeft(n).scrollTop(a),Xe=e,i=!0),i};M(),bi(e,an,(function(e){return M()&&Mi(),g.prvD(e),g.stpP(e),!1}))}}else if($){var I,N=(I=e.contents()[0]).__BPBMoverlayScrollbarsRO__;N&&(N.disconnect(),delete I.__BPBMoverlayScrollbarsRO__)}else dr(e.children(".bpbm-os-resize-observer").eq(0))}}function _i(){j&&!St&&(_t.observe(Oe,{attributes:!0,attributeOldValue:!0,attributeFilter:mi}),At.observe(Z?Re:Le,{attributes:!0,attributeOldValue:!0,subtree:!Z,childList:!Z,characterData:!Z,attributeFilter:Z?fi:mi}),St=!0)}function Ai(){j&&St&&(_t.disconnect(),At.disconnect(),St=!1)}function wi(){if(!te){var e,t={w:Me[f.sW],h:Me[f.sH]};e=or(t,at),at=t,e&&Mi({_hostSizeChanged:!0})}}function ki(){Dt&&Ui(!0)}function Si(){Dt&&!ue.hasClass(ri)&&Ui(!1)}function Ci(){Ot&&(Ui(!0),clearTimeout(Et),Et=setTimeout((function(){Ot&&!F&&Ui(!1)}),100))}function xi(e){return g.prvD(e),!1}function Ei(e){var t=y(e.target);ar((function(e,n){t.is(n)&&Mi({_contentSizeChanged:!0})}))}function Ti(e){e||Ti(!0),vi(pe,gn.split(un)[0],Ci,!Ot||e,!0),vi(pe,[vn,bn],[ki,Si],!Dt||e,!0),U||e||pe.one("mouseover",ki)}function Pi(){var e={};return z&&be&&(e.w=Ji(be.css("min-width")),e.h=Ji(be.css("min-height")),e.c=or(e,yt),e.f=!0),yt=e,!!e.c}function Ri(e,t){var n,i,r=(0,a.Z)(t)==u?t.split(un):[],o=function(e,t){var n,i,r=[],a=[];for(n=0;n<e.length;n++)r[e[n]]=!0;for(n=0;n<t.length;n++)r[t[n]]?delete r[t[n]]:r[t[n]]=!0;for(i in r)a.push(i);return a}((0,a.Z)(e)==u?e.split(un):[],r),s=A(ai,o);if(s>-1&&o.splice(s,1),o[f.l]>0)for(i=Xi(!0,!0),n=0;n<o.length;n++)if(!o[n].match(i))return!0;return!1}function Oi(e){w(e=e||ci,(function(e,t){if(g.inA(t,ci)>-1){var n=de.attr(t);h(n)==u?ge.attr(t,n):ge.removeAttr(t)}}))}function Di(){if(!te){var e,t,n,i,r=!ft,a=Zt.w,o=Zt.h,s={},c=Ze||r;return s["min-width"]=tn,s["min-height"]=tn,s.width=nn,de.css(s),e=Re[f.oW],t=c?v.max(e,Re[f.sW]-1):1,s.width=Ze?nn:on,s["min-width"]=on,s.height=nn,de.css(s),n=Re[f.oH],i=v.max(n,Re[f.sH]-1),s.width=t,s.height=i,_e.css(s),s["min-width"]=a,s["min-height"]=o,de.css(s),{_originalWidth:e,_originalHeight:n,_dynamicWidth:t,_dynamicHeight:i}}}function Mi(e){clearTimeout(oe),e=e||{},ui._hostSizeChanged|=e._hostSizeChanged,ui._contentSizeChanged|=e._contentSizeChanged,ui._force|=e._force;var t,n=g.now(),i=!!ui._hostSizeChanged,a=!!ui._contentSizeChanged,s=!!ui._force,c=e._changedOptions,l=U&&!F&&!s&&!c&&n-ae<42&&!ze&&!Ze;if(l&&(oe=setTimeout(Mi,42)),!(F||l||te&&!c||U&&!s&&(t=pe.is(":hidden"))||"inline"===pe.css("display"))){ae=n,ui={},!D||E.x&&E.y?I=sr({},r.nativeScrollbarSize):(I.x=0,I.y=0),zt={x:3*(I.x+(E.x?0:3)),y:3*(I.y+(E.y?0:3))},c=c||{};var u=function(){return or.apply(this,[].slice.call(arguments).concat([s]))},d={x:ge.scrollLeft(),y:ge.scrollTop()},p=re.scrollbars,h=re.textarea,b=p.visibility,_=u(b,ot),A=p.autoHide,w=u(A,st),S=p.clickScrolling,C=u(S,ct),x=p.dragScrolling,O=u(x,lt),N=re.className,L=u(N,pt),B=re.resize,$=u(B,ut)&&!z,j=re.paddingAbsolute,V=u(j,Ye),q=re.clipAlways,ne=u(q,Ge),ie=re.sizeAutoCapable&&!z,se=u(ie,it),ce=re.nativeScrollbarsOverlaid.showNativeScrollbars,le=u(ce,tt),ue=re.autoUpdate,we=u(ue,nt),ke=re.overflowBehavior,Se=u(ke,Ke,s),Ce=h.dynWidth,xe=u(bt,Ce),Ee=h.dynHeight,Te=u(vt,Ee);if(Pt="n"===A,Rt="s"===A,Ot="m"===A,Dt="l"===A,Tt=p.autoHideDelay,ht=pt,Nt="n"===B,Lt="b"===B,Bt="h"===B,$t="v"===B,dt=re.normalizeRTL,ce=ce&&E.x&&E.y,ot=b,st=A,ct=S,lt=x,pt=N,ut=B,Ye=j,Ge=q,it=ie,tt=ce,nt=ue,Ke=sr({},ke),bt=Ce,vt=Ee,Ue=Ue||{x:!1,y:!1},L&&(lr(pe,ht+un+ai),cr(pe,null!=N&&N.length>0?N:ai)),we&&(!0===ue||null===ue&&R?(Ai(),o.add(k)):(o.remove(k),_i())),se)if(ie)if(ye?ye.show():(ye=y(tr("bpbm-os-content-glue")),me.before(ye)),H)he.show();else{he=y(tr("bpbm-os-size-auto-observer")),De=he[0],ye.before(he);var Pe={w:-1,h:-1};yi(he,(function(){var e={w:De[f.oW],h:De[f.oH]};or(e,Pe)&&(U&&ze&&e.h>0||Ze&&e.w>0||U&&!ze&&0===e.h||!Ze&&0===e.w)&&Mi(),Pe=e})),H=!0,null!==M&&he.css(Kt,M+"(100% + 1px)")}else H&&he.hide(),ye&&ye.hide();s&&(fe.find("*").trigger(an),H&&he.find("*").trigger(an)),t=void 0===t?pe.is(":hidden"):t;var Me,Xe=!!Z&&"off"!==de.attr("wrap"),rt=u(Xe,ft),at=pe.css("direction"),_t=u(at,Qe),At=pe.css("box-sizing"),wt=u(At,Ve),kt=Qi(Wt);try{Me=H?De[f.bCR]():null}catch(e){return}W="border-box"===At;var xt=(ee="rtl"===at)?Gt:Xt,Et=ee?Xt:Gt,Mt=!1,It=!(!H||"none"===pe.css(en))&&0===v.round(Me.right-Me.left)&&(!!j||Oe[f.cW]-Q>0);if(ie&&!It){var Ut=Oe[f.oW],Ft=ye.css(Jt);ye.css(Jt,nn);var Vt=Oe[f.oW];ye.css(Jt,Ft),(Mt=Ut!==Vt)||(ye.css(Jt,Ut+1),Vt=Oe[f.oW],ye.css(Jt,Ft),Mt=Ut!==Vt)}var Qt=(It||Mt)&&ie&&!t,rn=u(Qt,Ze),sn=!Qt&&Ze,cn=!(!H||!ie||t)&&0===v.round(Me.bottom-Me.top),ln=u(cn,ze),dn=!cn&&ze,pn=Qi(Ht,"-width",!(Qt&&W||!W),!(cn&&W||!W)),hn=Qi(qt),fn={},mn={},gn=function(){return{w:Oe[f.cW],h:Oe[f.cH]}},vn=function(){return{w:Ie[f.oW]+v.max(0,Le[f.cW]-Le[f.sW]),h:Ie[f.oH]+v.max(0,Le[f.cH]-Le[f.sH])}},bn=Q=kt.l+kt.r,yn=X=kt.t+kt.b;if(bn*=j?1:0,yn*=j?1:0,kt.c=u(kt,qe),Y=pn.l+pn.r,G=pn.t+pn.b,pn.c=u(pn,We),J=hn.l+hn.r,K=hn.t+hn.b,hn.c=u(hn,He),ft=Xe,Qe=at,Ve=At,Ze=Qt,ze=cn,qe=kt,We=pn,He=hn,_t&&H&&he.css(en,Et),kt.c||_t||V||rn||ln||wt||se){var _n={},An={},wn=[kt.t,kt.r,kt.b,kt.l];Hi(mn,qt,[-kt.t,-kt.r,-kt.b,-kt.l]),j?(Hi(_n,tn,wn),Hi(Z?An:fn,Wt)):(Hi(_n,tn),Hi(Z?An:fn,Wt,wn)),me.css(_n),de.css(An)}Zt=vn();var kn=!!Z&&Di(),Sn=Z&&u(kn,gt),Cn=Z&&kn?{w:Ce?kn._dynamicWidth:kn._originalWidth,h:Ee?kn._dynamicHeight:kn._originalHeight}:{};if(gt=kn,cn&&(ln||V||wt||kt.c||pn.c)?fn.height=nn:(ln||V)&&(fn.height=on),Qt&&(rn||V||wt||kt.c||pn.c||_t)?(fn.width=nn,mn["max-width"]=on):(rn||V)&&(fn.width=on,fn.float=tn,mn["max-width"]=tn),Qt?(mn.width=nn,fn.width=m._cssPropertyValue(Jt,"max-content intrinsic")||nn,fn.float=Et):mn.width=tn,mn.height=cn?Cn.h||Le[f.cH]:tn,ie&&ye.css(mn),ve.css(fn),fn={},mn={},i||a||Sn||_t||wt||V||rn||Qt||ln||cn||le||Se||ne||$||_||w||O||C||xe||Te||rt){var xn="overflow",En="overflow-x",Tn="overflow-y";if(!D){var Pn={},Ln=Ue.y&&Fe.ys&&!ce?E.y?ge.css(xt):-I.y:0,Bn=Ue.x&&Fe.xs&&!ce?E.x?ge.css(Yt):-I.x:0;Hi(Pn,tn),ge.css(Pn)}var $n=er(),jn={w:Cn.w||$n[f.cW],h:Cn.h||$n[f.cH]},Fn={w:$n[f.sW],h:$n[f.sH]};D||(Pn.bottom=dn?tn:Bn,Pn[xt]=sn?tn:Ln,ge.css(Pn)),Zt=vn();var Zn=gn(),zn={w:Zn.w-J-Y-(W?0:Q),h:Zn.h-K-G-(W?0:X)},Vn={w:v.max((Qt?jn.w:Fn.w)+bn,zn.w),h:v.max((cn?jn.h:Fn.h)+yn,zn.h)};if(Vn.c=u(Vn,Je),Je=Vn,ie){(Vn.c||cn||Qt)&&(mn.width=Vn.w,mn.height=Vn.h,Z||(jn={w:$n[f.cW],h:$n[f.cH]}));var qn={},Wn=function(e){var t=Vi(e),n=t._w_h,i=t._width_height,r=e?Qt:cn,a=e?Y:G,o=e?Q:X,s=e?J:K,c=Zt[n]-a-s-(W?0:o);(!r||!r&&pn.c)&&(mn[i]=zn[n]-1),!(r&&jn[n]<c)||e&&Z&&Xe||(Z&&(qn[i]=Ji(_e.css(i))-1),mn[i]-=1),jn[n]>0&&(mn[i]=v.max(1,mn[i]))};Wn(!0),Wn(!1),Z&&_e.css(qn),ye.css(mn)}Qt&&(fn.width=on),!Qt||W||St||(fn.float="none"),ve.css(fn),fn={};var Hn={w:$n[f.sW],h:$n[f.sH]};Hn.c=a=u(Hn,$e),$e=Hn,Zt=vn(),i=u(Zn=gn(),Be),Be=Zn;var Qn=Z&&(0===Zt.w||0===Zt.h),Xn=et,Yn={},Gn={},Jn={},Kn={},ri={},oi={},si={},ci=Ie[f.bCR](),li=function(e){var t=Vi(e),n=Vi(!e)._x_y,i=t._x_y,r=t._w_h,a=t._width_height,o=an+t._Left_Top+"Max",s=ci[a]?v.abs(ci[a]-Zt[r]):0,c=Xn&&Xn[i]>0&&0===Ne[o];Yn[i]="v-s"===ke[i],Gn[i]="v-h"===ke[i],Jn[i]="s"===ke[i],Kn[i]=v.max(0,v.round(100*(Hn[r]-Zt[r]))/100),Kn[i]*=Qn||c&&s>0&&s<1?0:1,ri[i]=Kn[i]>0,oi[i]=Yn[i]||Gn[i]?ri[n]&&!Yn[n]&&!Gn[n]:ri[i],oi[i+"s"]=!!oi[i]&&(Jn[i]||Yn[i]),si[i]=ri[i]&&oi[i+"s"]};if(li(!0),li(!1),Kn.c=u(Kn,et),et=Kn,ri.c=u(ri,Ue),Ue=ri,oi.c=u(oi,Fe),Fe=oi,E.x||E.y){var di,pi={},hi={},fi=s;(ri.x||ri.y)&&(hi.w=E.y&&ri.y?Hn.w+T.y:tn,hi.h=E.x&&ri.x?Hn.h+T.x:tn,fi=u(hi,je),je=hi),(ri.c||oi.c||Hn.c||_t||rn||ln||Qt||cn||le)&&(fn[qt+Et]=fn[Ht+Et]=tn,di=function(e){var t=Vi(e),n=Vi(!e),i=t._x_y,r=e?Yt:xt,a=e?cn:Qt;E[i]&&ri[i]&&oi[i+"s"]?(fn[qt+r]=a?ce?tn:T[i]:tn,fn[Ht+r]=e&&a||ce?tn:T[i]+"px solid transparent"):(hi[n._w_h]=fn[qt+r]=fn[Ht+r]=tn,fi=!0)},D?ur(ge,Un,!ce):(di(!0),di(!1))),ce&&(hi.w=hi.h=tn,fi=!0),fi&&!D&&(pi.width=oi.y?hi.w:tn,pi.height=oi.x?hi.h:tn,be||(be=y(tr("bpbm-os-content-arrange")),ge.prepend(be)),be.css(pi)),ve.css(fn)}var mi,gi={};if(_n={},(i||ri.c||oi.c||Hn.c||Se||wt||le||_t||ne||ln)&&(gi[Et]=tn,(mi=function(e){var t=Vi(e),n=Vi(!e),i=t._x_y,r=t._X_Y,a=e?Yt:xt,o=function(){gi[a]=tn,jt[n._w_h]=0};ri[i]&&oi[i+"s"]?(gi[xn+r]=an,ce||D?o():(gi[a]=-(E[i]?T[i]:I[i]),jt[n._w_h]=E[i]?T[n._x_y]:0)):(gi[xn+r]=tn,o())})(!0),mi(!1),!D&&(Zt.h<zt.x||Zt.w<zt.y)&&(ri.x&&oi.x&&!E.x||ri.y&&oi.y&&!E.y)?(gi["padding-top"]=zt.x,gi["margin-top"]=-zt.x,gi[Wt+Et]=zt.y,gi[qt+Et]=-zt.y):gi["padding-top"]=gi["margin-top"]=gi[Wt+Et]=gi[qt+Et]=tn,gi[Wt+xt]=gi[qt+xt]=tn,ri.x&&oi.x||ri.y&&oi.y||Qn?Z&&Qn&&(_n[En]=_n[Tn]="hidden"):(!q||Gn.x||Yn.x||Gn.y||Yn.y)&&(Z&&(_n[En]=_n[Tn]=tn),gi[En]=gi[Tn]="visible"),me.css(_n),ge.css(gi),gi={},(ri.c||wt||rn||ln)&&(!E.x||!E.y))){var vi=Le[f.s];vi.webkitTransform="scale(1)",vi.display="run-in",Le[f.oH],vi.display=tn,vi.webkitTransform=tn}if(fn={},_t||rn||ln)if(ee&&Qt){var bi=ve.css(en),wi=v.round(ve.css(en,tn).css(Gt,tn).position().left);ve.css(en,bi),wi!==v.round(ve.position().left)&&(fn.left=wi)}else fn.left=tn;if(ve.css(fn),Z&&a){var ki=function(){var e=Re.selectionStart;if(void 0!==e){var t,n,i=de.val(),r=i[f.l],a=i.split("\n"),o=a[f.l],s=i.substr(0,e).split("\n"),c=0,l=0,u=s[f.l],d=s[s[f.l]-1][f.l];for(n=0;n<a[f.l];n++)(t=a[n][f.l])>l&&(c=n+1,l=t);return{_cursorRow:u,_cursorColumn:d,_rows:o,_columns:l,_widestRow:c,_cursorPosition:e,_cursorMax:r}}}();if(ki){var Si=void 0===mt||ki._rows!==mt._rows,Ci=ki._cursorRow,xi=ki._cursorColumn,Ei=ki._widestRow,Ri=ki._rows,Oi=ki._columns,Ni=ki._cursorPosition>=ki._cursorMax&&Ct,Li={x:Xe||xi!==Oi||Ci!==Ei?-1:et.x,y:(Xe?Ni||Si&&Xn&&d.y===Xn.y:(Ni||Si)&&Ci===Ri)?et.y:-1};d.x=Li.x>-1?ee&&dt&&P.i?0:Li.x:d.x,d.y=Li.y>-1?Li.y:d.y}mt=ki}ee&&P.i&&E.y&&ri.x&&dt&&(d.x+=jt.w||0),Qt&&pe.scrollLeft(0),cn&&pe.scrollTop(0),ge.scrollLeft(d.x).scrollTop(d.y);var Bi="v"===b,$i="h"===b,qi="a"===b,Xi=function(e,t){t=void 0===t?e:t,ji(!0,e,si.x),ji(!1,t,si.y)};ur(pe,Mn,oi.x||oi.y),ur(pe,In,oi.x),ur(pe,Nn,oi.y),_t&&!z&&ur(pe,Rn,ee),z&&cr(pe,On),$&&(ur(pe,On,Nt),ur(Ae,ei,!Nt),ur(Ae,ti,Lt),ur(Ae,ni,Bt),ur(Ae,ii,$t)),(_||Se||oi.c||ri.c||le)&&(ce?le&&(lr(pe,Dn),ce&&Xi(!1)):qi?Xi(si.x,si.y):Bi?Xi(!0):$i&&Xi(!1)),(w||le)&&(Ti(!Dt&&!Ot),Ui(Pt,!Pt)),(i||Kn.c||ln||rn||$||wt||V||le||_t)&&(Fi(!0),Zi(!0),Fi(!1),Zi(!1)),C&&zi(!0,S),O&&zi(!1,x),Wi("onDirectionChanged",{isRTL:ee,dir:at},_t),Wi("onHostSizeChanged",{width:Be.w,height:Be.h},i),Wi("onContentSizeChanged",{width:$e.w,height:$e.h},a),Wi("onOverflowChanged",{x:ri.x,y:ri.y,xScrollable:oi.xs,yScrollable:oi.ys,clipped:oi.x||oi.y},ri.c||oi.c),Wi("onOverflowAmountChanged",{x:Kn.x,y:Kn.y},Kn.c)}z&&yt&&(Ue.c||yt.c)&&(yt.f||Pi(),E.y&&Ue.x&&ve.css("min-width",yt.w+T.y),E.x&&Ue.y&&ve.css("min-height",yt.h+T.x),yt.c=!1),U&&c.updateOnLoad&&Ii(),Wi("onUpdated",{forced:s})}}function Ii(){Z||ar((function(e,t){ve.find(t).each((function(e,t){g.inA(t,pi)<0&&(pi.push(t),y(t).off(di,Ei).on(di,Ei))}))}))}function Ni(e){var t=x._validate(e,x._template,!0,ie);return ie=sr({},ie,t._default),re=sr({},re,t._prepared),t._prepared}function Li(e){var t=Ln+un+Wn,n=Z?un+Wn:tn,i=re.textarea.inheritedAttrs,r={},a=function(){var t=e?de:pe;w(r,(function(e,n){h(n)==u&&(e==f.c?t.addClass(n):t.attr(e,n))}))},o=[Sn,Cn,xn,On,Rn,En,Tn,Pn,Dn,Mn,In,Nn,ai,Ln,Wn,pt].join(un),s={};pe=pe||(Z?q?de.parent().parent().parent().parent():y(tr(xn)):de),ve=ve||nr(Zn+n),ge=ge||nr(jn+n),me=me||nr($n+n),fe=fe||nr("bpbm-os-resize-observer-host"),_e=_e||(Z?nr(Bn):void 0),q&&cr(pe,Cn),e&&lr(pe,o),i=h(i)==u?i.split(un):i,g.isA(i)&&Z&&w(i,(function(t,n){h(n)==u&&(r[n]=e?pe.attr(n):de.attr(n))})),e?(q&&U?(fe.children().remove(),w([me,ge,ve,_e],(function(e,t){t&&lr(t.removeAttr(f.s),oi)})),cr(pe,Z?xn:Sn)):(dr(fe),ve.contents().unwrap().unwrap().unwrap(),Z&&(de.unwrap(),dr(pe),dr(_e),a())),Z&&de.removeAttr(f.s),z&&lr(le,kn)):(Z&&(re.sizeAutoCapable||(s.width=de.css(Jt),s.height=de.css(Kt)),q||de.addClass(Wn).wrap(pe),pe=de.parent().css(s)),q||(cr(de,Z?t:Sn),pe.wrapInner(ve).wrapInner(ge).wrapInner(me).prepend(fe),ve=pr(pe,".bpbm-os-content"),ge=pr(pe,".bpbm-os-viewport"),me=pr(pe,".bpbm-os-padding"),Z&&(ve.prepend(_e),a())),D&&cr(ge,Un),E.x&&E.y&&cr(ge,Fn),z&&cr(le,kn),Me=fe[0],Oe=pe[0],Ie=me[0],Ne=ge[0],Le=ve[0],Oi())}function Bi(e){var t,n,i=function(t){var n=nr("bpbm-os-scrollbar "+(t?"bpbm-os-scrollbar-horizontal":"bpbm-os-scrollbar-vertical"),!0),i=nr(Hn,n),r=nr(Xn,n);return q||e||(n.append(i),i.append(r)),{_scrollbar:n,_track:i,_handle:r}};function r(e){var t=Vi(e),n=t._scrollbar,r=t._track,a=t._handle;q&&U?w([n,r,a],(function(e,t){lr(t.removeAttr(f.s),oi)})):dr(n||i(e)._scrollbar)}e?(r(!0),r()):(t=i(!0),n=i(),we=t._scrollbar,ke=t._track,Se=t._handle,Ce=n._scrollbar,xe=n._track,Ee=n._handle,q||(me.after(Ce),me.after(we)))}function $i(e){var t,n,i,r,a=Vi(e),o=a._info,s=Te.top!==Te,c=a._x_y,l=a._X_Y,u=an+a._Left_Top,d="active",p="snapHandle",h="click",m=1,b=[16,17];function y(e){return O&&s?e["screen"+l]:g.page(e)[c]}function _(e){return re.scrollbars[e]}function w(){m=.5}function S(){m=1}function C(e){g.stpP(e)}function x(e){A(e.keyCode,b)>-1&&w()}function E(e){A(e.keyCode,b)>-1&&S()}function T(e){var t=void 0!==(e.originalEvent||e).touches;return!(te||F||Ki()||!lt||t&&!_("touchSupport"))&&(1===g.mBtn(e)||t)}function R(t){if(T(t)){var a=o._trackLength,s=o._handleLength,c=o._maxScroll*((y(t)-i)*r/(a-s));c=isFinite(c)?c:0,ee&&e&&!P.i&&(c*=-1),ge[u](v.round(n+c)),It&&Zi(e,n+c),B||g.prvD(t)}else D(t)}function D(o){if(o=o||o.originalEvent,vi(ce,[gn,mn,yn,_n,An],[R,D,x,E,xi],!0),g.rAF()((function(){vi(ce,h,C,!0,{_capture:!0})})),It&&Zi(e,!0),It=!1,lr(ue,ri),lr(a._handle,d),lr(a._track,d),lr(a._scrollbar,d),n=void 0,i=void 0,r=1,S(),void 0!==t&&(k.scrollStop(),clearTimeout(t),t=void 0),o){var s=Oe[f.bCR]();o.clientX>=s.left&&o.clientX<=s.right&&o.clientY>=s.top&&o.clientY<=s.bottom||Si(),(Rt||Ot)&&Ui(!1)}}function M(t){n=ge[u](),n=isNaN(n)?0:n,(ee&&e&&!P.n||!ee)&&(n=n<0?0:n),r=Yi()[c],i=y(t),It=!_(p),cr(ue,ri),cr(a._handle,d),cr(a._scrollbar,d),vi(ce,[gn,mn,An],[R,D,xi]),g.rAF()((function(){vi(ce,h,C,!1,{_capture:!0})})),!O&&V||g.prvD(t),g.stpP(t)}bi(a._handle,fn,(function(e){T(e)&&M(e)})),bi(a._track,[fn,vn,bn],[function(n){if(T(n)){var s,l=a._info._handleLength/Math.round(v.min(1,Zt[a._w_h]/$e[a._w_h])*a._info._trackLength),h=v.round(Zt[a._w_h]*l),f=270*l,b=400*l,y=a._track.offset()[a._left_top],A=n.ctrlKey,S=n.shiftKey,C=S&&A,R=!0,O=function(t){It&&Zi(e,t)},I=function(){O(),M(n)};A&&w(),r=Yi()[c],i=g.page(n)[c],It=!_(p),cr(ue,ri),cr(a._track,d),cr(a._scrollbar,d),vi(ce,[mn,yn,_n,An],[D,x,E,xi]),function n(){if(!F){var a=(i-y)*r,l=o._handleOffset,d=o._trackLength,p=o._handleLength,g=o._maxScroll,_=o._currentScroll,A=f*m,w=R?v.max(b,A):A,x=g*((a-p/2)/(d-p)),E=ee&&e&&(!P.i&&!P.n||dt),T=E?l<a:l>a,D={},M={easing:"linear",step:function(t){It&&(ge[u](t),Zi(e,t))}};x=isFinite(x)?x:0,x=ee&&e&&!P.i?g-x:x,S?(ge[u](x),C?(x=ge[u](),ge[u](_),x=E&&P.i?g-x:x,x=E&&P.n?-x:x,D[c]=x,k.scroll(D,sr(M,{duration:130,complete:I}))):I()):(s=R?T:s,(E?s?l+p>=a:l<=a:s?l<=a:l+p>=a)?(clearTimeout(t),k.scrollStop(),t=void 0,O(!0)):(t=setTimeout(n,w),D[c]=(s?"-=":"+=")+h,k.scroll(D,sr(M,{duration:A}))),R=!1)}}(),g.prvD(n),g.stpP(n)}},function(e){Mt=!0,(Rt||Ot)&&Ui(!0)},function(e){Mt=!1,(Rt||Ot)&&Ui(!1)}]),bi(a._scrollbar,fn,(function(e){g.stpP(e)})),N&&bi(a._scrollbar,wn,(function(t){t.target===a._scrollbar[0]&&(Fi(e),Zi(e))}))}function ji(e,t,n){var i=e?we:Ce;ur(pe,e?En:Tn,!t),ur(i,Gn,!n)}function Ui(e,t){if(clearTimeout(xt),e)lr(we,Jn),lr(Ce,Jn);else{var n,i="active",r=function(){Mt||F||(!(n=Se.hasClass(i)||Ee.hasClass(i))&&(Rt||Ot||Dt)&&cr(we,Jn),!n&&(Rt||Ot||Dt)&&cr(Ce,Jn))};Tt>0&&!0!==t?xt=setTimeout(r,Tt):r()}}function Fi(e){var t={},n=Vi(e),i=n._info,r=1e6,a=v.min(1,Zt[n._w_h]/$e[n._w_h]);t[n._width_height]=v.floor(100*a*r)/r+"%",Ki()||n._handle.css(t),i._handleLength=n._handle[0]["offset"+n._Width_Height],i._handleLengthRatio=a}function Zi(e,t){var n,i,r=h(t)==d,a=ee&&e,o=Vi(e),s=o._info,c=m._cssProperty("transform"),l=m._cssProperty("transition"),u=e?ge.scrollLeft():ge.scrollTop(),p=void 0===t||r?u:t,g=s._handleLength,b=o._track[0]["offset"+o._Width_Height],y=b-g,_={},A=(Ne[an+o._Width_Height]-Ne["client"+o._Width_Height])*(P.n&&a?-1:1),w=function(e){return isNaN(e/A)?0:v.max(0,v.min(1,e/A))},k=function(e){var t=y*e;return t=isNaN(t)?0:t,t=a&&!P.i?b-g-t:t,v.max(0,t)},S=w(u),C=k(w(p)),x=k(S);s._maxScroll=A,s._currentScroll=u,s._currentScrollRatio=S,L?(n=a?-(b-g-C):C,i=e?"translate("+n+"px, 0)":"translate(0, "+n+"px)",_[c]=i,N&&(_[l]=r&&v.abs(C-s._handleOffset)>1?function(e){var t=m._cssProperty("transition"),n=e.css(t);if(n)return n;for(var i,r,a,o="\\s*(([^,(]+(\\(.+?\\))?)+)[\\s,]*",s=new RegExp(o),c=new RegExp("^("+o+")+$"),l="property duration timing-function delay".split(" "),u=[],d=0,p=function(e){if(i=[],!e.match(c))return e;for(;e.match(s);)i.push(RegExp.$1),e=e.replace(s,tn);return i};d<l[f.l];d++)for(r=p(e.css(t+"-"+l[d])),a=0;a<r[f.l];a++)u[a]=(u[a]?u[a]+un:tn)+r[a];return u.join(", ")}(o._handle)+", "+(c+un+250)+"ms":tn)):_[o._left_top]=C,Ki()||(o._handle.css(_),L&&N&&r&&o._handle.one(wn,(function(){F||o._handle.css(l,tn)}))),s._handleOffset=C,s._snappedHandleOffset=x,s._trackLength=b}function zi(e,t){var n=t?"removeClass":"addClass",i=e?xe:Ee,r=e?Qn:Yn;(e?ke:Se)[n](r),i[n](r)}function Vi(e){return{_width_height:e?Jt:Kt,_Width_Height:e?"Width":"Height",_left_top:e?Gt:Qt,_Left_Top:e?"Left":"Top",_x_y:e?sn:cn,_X_Y:e?"X":"Y",_w_h:e?"w":"h",_l_t:e?"l":"t",_track:e?ke:xe,_handle:e?Se:Ee,_scrollbar:e?we:Ce,_info:e?Ut:Ft}}function qi(e){Ae=Ae||nr(Kn,!0),e?q&&U?lr(Ae.removeAttr(f.s),oi):dr(Ae):q||pe.append(Ae)}function Wi(e,t,n){if(!1!==n)if(U){var i,r=re.callbacks[e],a=e;"on"===a.substr(0,2)&&(a=a.substr(2,1).toLowerCase()+a.substr(3)),h(r)==c&&r.call(k,t),w(li,(function(){h((i=this).on)==c&&i.on(a,t)}))}else F||si.push({n:e,a:t})}function Hi(e,t,n){n=n||[tn,tn,tn,tn],e[(t=t||tn)+Qt]=n[0],e[t+Xt]=n[1],e[t+Yt]=n[2],e[t+Gt]=n[3]}function Qi(e,t,n,i){return t=t||tn,e=e||tn,{t:i?0:Ji(pe.css(e+Qt+t)),r:n?0:Ji(pe.css(e+Xt+t)),b:i?0:Ji(pe.css(e+Yt+t)),l:n?0:Ji(pe.css(e+Gt+t))}}function Xi(e,t){var n,i,r,o=function(e,t){if(r="",t&&(0,a.Z)(e)==u)for(i=e.split(un),n=0;n<i[f.l];n++)r+="|"+i[n]+"$";return r};return new RegExp("(^"+Sn+"([-_].+|)$)"+o(pt,e)+o(ht,t),"g")}function Yi(){var e=Ie[f.bCR]();return{x:L&&1/(v.round(e.width)/Ie[f.oW])||1,y:L&&1/(v.round(e.height)/Ie[f.oH])||1}}function Gi(e){var t=e&&e.ownerDocument&&e.ownerDocument.parentWindow||window;return(0,a.Z)(t.HTMLElement)==s?e instanceof t.HTMLElement:e&&(0,a.Z)(e)==s&&null!==e&&1===e.nodeType&&(0,a.Z)(e.nodeName)==u}function Ji(e,t){var n=t?parseFloat(e):parseInt(e,10);return isNaN(n)?0:n}function Ki(){return tt&&E.x&&E.y}function er(){return Z?_e[0]:Le}function tr(e,t){return"<div "+(e?h(e)==u?'class="'+e+'"':function(){var t,n=tn;if(y.isPlainObject(e))for(t in e)n+=("c"===t?"class":t)+'="'+e[t]+'" ';return n}():tn)+">"+(t||tn)+"</div>"}function nr(e,t){var n=h(t)==d,i=n?pe:t||pe;return q&&!i[f.l]?null:q?i[n?"children":"find"](ln+e.replace(/\s/g,ln)).eq(0):y(tr(e))}function ir(e,t){for(var n,i=t.split(ln),r=0;r<i.length;r++){if(!e[f.hOP](i[r]))return;n=e[i[r]],r<i.length&&h(n)==s&&(e=n)}return n}function rr(e,t,n){for(var i=t.split(ln),r=i.length,a=0,o={},s=o;a<r;a++)o=o[i[a]]=a+1<r?{}:n;y.extend(e,s,!0)}function ar(e){var t=re.updateOnLoad;t=h(t)==u?t.split(un):t,g.isA(t)&&!F&&w(t,e)}function or(e,t,n){if(n)return n;if(h(e)!=s||h(t)!=s)return e!==t;for(var i in e)if("c"!==i){if(!e[f.hOP](i)||!t[f.hOP](i))return!0;if(or(e[i],t[i]))return!0}return!1}function sr(){return y.extend.apply(this,[!0].concat([].slice.call(arguments)))}function cr(e,t){return S.addClass.call(e,t)}function lr(e,t){return S.removeClass.call(e,t)}function ur(e,t,n){return n?cr(e,t):lr(e,t)}function dr(e){return S.remove.call(e)}function pr(e,t){return S.find.call(e,t).eq(0)}}return e=window.BPBMoverlayScrollbars=function(i,r,a){if(0===arguments[f.l])return this;var o,s,l=[],u=y.isPlainObject(r);return i?(i=null!=i[f.l]?i:[i[0]||i],E(),i[f.l]>0&&(u?y.each(i,(function(e,i){void 0!==(o=i)&&l.push(R(o,r,a,t,n))})):y.each(i,(function(t,n){o=_(n),("!"===r&&e.valid(o)||g.type(r)==c&&r(n,o)||void 0===r)&&l.push(o)})),s=1===l[f.l]?l[0]:l),s):u||!r?s:l},e.globals=function(){E();var e=y.extend(!0,{},t);return delete e.msie,e},e.defaultOptions=function(e){E();var n=t.defaultOptions;if(void 0===e)return y.extend(!0,{},n);t.defaultOptions=y.extend(!0,{},n,x._validate(e,x._template,!0,n)._default)},e.valid=function(t){return t instanceof e&&!t.getState().destroyed},e.extension=function(e,t,n){var i=g.type(e)==u,r=arguments[f.l],a=0;if(r<1||!i)return y.extend(!0,{length:C[f.l]},C);if(i)if(g.type(t)==c)C.push({name:e,extensionFactory:t,defaultOptions:n});else for(;a<C[f.l];a++)if(C[a].name===e){if(!(r>1))return y.extend(!0,{},C[a]);C.splice(a,1)}},e}();b&&b.fn&&(b.fn.BPBMoverlayScrollbars=function(e,t){var n=this;return b.isPlainObject(e)?(b.each(n,(function(){A(this,e,t)})),n):A(n,e)})},4817:(e,t,n)=>{"use strict";n.r(t);var i=n(1002),r=n(5474),a=n(6252),o=n(5069),s=function(e,t){if("string"!=typeof t||t.length){var n="string"==typeof t?new RegExp(t,"i"):t,i=function e(t){var i=0;if(3===t.nodeType){var r=t.data.search(n);if(r>=0&&t.data.length>0){var a=t.data.match(n),o=document.createElement("span");o.className="highlight";var s=t.splitText(r),c=(s.splitText(a[0].length),s.cloneNode(!0));o.appendChild(c),s.parentNode.replaceChild(o,s),i=1}}else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName)&&("highlight"!==t.className||"SPAN"!==t.tagName))for(var l=0;l<t.childNodes.length;++l)l+=e(t.childNodes[l]);return i};return e.each((function(){i(this)}))}};r.$.fn.removeHighlight=function(){return this.find("span.highlight").each((function(){this.parentNode.firstChild.nodeName;var e=this.parentNode;e.replaceChild(this.firstChild,this),e.normalize()})).end()};var c=function(){};c.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var n=arguments.length;return 0===n?delete this._events:1===n?delete this._events[e]:(this._events=this._events||{},void(e in this._events!=0&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){if(this._events=this._events||{},e in this._events!=0)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},c.mixin=function(e){for(var t=["on","off","trigger"],n=0;n<t.length;n++)e.prototype[t[n]]=c.prototype[t[n]]};var l,u=/Mac/.test(navigator.userAgent),d=u?91:17,p=u?18:17,h=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("input").validity,f=function(e){return void 0!==e},m=function(e){return null==e?null:"boolean"==typeof e?e?"1":"0":e+""},g=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},v=function(e,t,n){var i=e[t];e[t]=function(){var t=i.apply(e,arguments);return n.apply(e,arguments),t}},b=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}},y=function(e,t,n){var i,r=e.trigger,a={};for(i in e.trigger=function(){var n=arguments[0];if(-1===t.indexOf(n))return r.apply(e,arguments);a[n]=arguments},n.apply(e,[]),e.trigger=r,a)a.hasOwnProperty(i)&&r.apply(e,a[i])},_=function(e){var t={};if(void 0===e)return console.warn("WARN getSelection cannot locate input control"),t;if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var n=document.selection.createRange(),i=document.selection.createRange().text.length;n.moveStart("character",-e.value.length),t.start=n.text.length-i,t.length=i}return t},A=function(e,t){return e?(w.$testInput||(w.$testInput=(0,r.$)("<span />").css({position:"absolute",width:"auto",padding:0,whiteSpace:"pre"}),(0,r.$)("<div />").css({position:"absolute",width:0,height:0,overflow:"hidden"}).append(w.$testInput).appendTo("body")),w.$testInput.text(e),function(e,t,n){var i,r,a={};if(n)for(i=0,r=n.length;i<r;i++)a[n[i]]=e.css(n[i]);else a=e.css();t.css(a)}(t,w.$testInput,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]),w.$testInput.width()):0},w=function e(t,n){var i,a,s,c,l=this;(c=t[0]).bmselectize=l;var u,d,p,h=window.getComputedStyle&&window.getComputedStyle(c,null);if(s=(s=h?h.getPropertyValue("direction"):c.currentStyle&&c.currentStyle.direction)||t.parents("[dir]:first").attr("dir")||"",r.$.extend(l,{order:0,settings:n,$input:t,tabIndex:t.attr("tabindex")||"",tagType:"select"===c.tagName.toLowerCase()?1:2,rtl:/rtl/i.test(s),eventNS:".bmselectize"+ ++e.count,highlightedValue:null,isBlurring:!1,isOpen:!1,isDisabled:!1,isRequired:t.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",lastValidValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===n.loadThrottle?l.onSearchChange:(u=l.onSearchChange,d=n.loadThrottle,function(){var e=this,t=arguments;window.clearTimeout(p),p=window.setTimeout((function(){u.apply(e,t)}),d)})}),l.sifter=new o(this.options,{diacritics:n.diacritics}),l.settings.options){for(i=0,a=l.settings.options.length;i<a;i++)l.registerOption(l.settings.options[i]);delete l.settings.options}if(l.settings.optgroups){for(i=0,a=l.settings.optgroups.length;i<a;i++)l.registerOptionGroup(l.settings.optgroups[i]);delete l.settings.optgroups}l.settings.mode=l.settings.mode||(1===l.settings.maxItems?"single":"multi"),"boolean"!=typeof l.settings.hideSelected&&(l.settings.hideSelected="multi"===l.settings.mode),l.initializePlugins(l.settings.plugins),l.setupCallbacks(),l.setupTemplates(),l.setup()};c.mixin(w),void 0!==a?a.mixin(w):("Dependency MicroPlugin is missing",(l={explanation:'Make sure you either: (1) are using the "standalone" version of Bmselectize, or (2) require MicroPlugin before you load Bmselectize.'})||(l={}),console.error("Bmselectize: Dependency MicroPlugin is missing"),l.explanation&&(console.group&&console.group(),console.error(l.explanation),console.group&&console.groupEnd())),r.$.extend(w.prototype,{setup:function(){var e,t,n,i,a,o,s,c,l,f,m,g,v=this,b=v.settings,y=v.eventNS,w=(0,r.$)(window),k=(0,r.$)(document),S=v.$input;if(s=v.settings.mode,c=S.attr("class")||"",e=(0,r.$)("<div>").addClass(b.wrapperClass).addClass(c).addClass(s),t=(0,r.$)("<div>").addClass(b.inputClass).addClass("items").appendTo(e),n=(0,r.$)('<input type="text" autocomplete="new-password" autofill="no" />').appendTo(t).attr("tabindex",S.is(":disabled")?"-1":v.tabIndex),o=(0,r.$)(b.dropdownParent||e),i=(0,r.$)("<div>").addClass(b.dropdownClass).addClass(s).hide().appendTo(o),a=(0,r.$)("<div>").addClass(b.dropdownContentClass).attr("tabindex","-1").appendTo(i),(f=S.attr("id"))&&(n.attr("id",f+"-bmselectized"),(0,r.$)("label[for='"+f+"']").attr("for",f+"-bmselectized")),v.settings.copyClassesToDropdown&&i.addClass(c),e.css({width:S[0].style.width}),v.plugins.names.length&&(l="plugin-"+v.plugins.names.join(" plugin-"),e.addClass(l),i.addClass(l)),(null===b.maxItems||b.maxItems>1)&&1===v.tagType&&S.attr("multiple","multiple"),v.settings.placeholder&&n.attr("placeholder",b.placeholder),!v.settings.splitOn&&v.settings.delimiter){var C=v.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");v.settings.splitOn=new RegExp("\\s*"+C+"+\\s*")}S.attr("autocorrect")&&n.attr("autocorrect",S.attr("autocorrect")),S.attr("autocapitalize")&&n.attr("autocapitalize",S.attr("autocapitalize")),S.is("input")&&(n[0].type=S[0].type),v.$wrapper=e,v.$control=t,v.$control_input=n,v.$dropdown=i,v.$dropdown_content=a,i.on("mouseenter mousedown click","[data-disabled]>[data-selectable]",(function(e){e.stopImmediatePropagation()})),i.on("mouseenter","[data-selectable]",(function(){return v.onOptionHover.apply(v,arguments)})),i.on("mousedown click","[data-selectable]",(function(){return v.onOptionSelect.apply(v,arguments)})),g=function(){return v.onItemSelect.apply(v,arguments)},(m=t).on("mousedown","*:not(input)",(function(e){for(var t=e.target;t&&t.parentNode!==m[0];)t=t.parentNode;return e.currentTarget=t,g.apply(this,[e])})),function(e){var t=null,n=function(n,i){var r,a,o,s,c,l,u,d,p;i=i||{},(n=n||window.event||{}).metaKey||n.altKey||(i.force||!1!==e.data("grow"))&&(r=e.val(),n.type&&"keydown"===n.type.toLowerCase()&&(o=(a=n.keyCode)>=48&&a<=57||a>=65&&a<=90||a>=96&&a<=111||a>=186&&a<=222||32===a,46===a||8===a?(p=_(e[0])).length?r=r.substring(0,p.start)+r.substring(p.start+p.length):8===a&&p.start?r=r.substring(0,p.start-1)+r.substring(p.start+1):46===a&&void 0!==p.start&&(r=r.substring(0,p.start)+r.substring(p.start+1)):o&&(u=n.shiftKey,d=String.fromCharCode(n.keyCode),r+=d=u?d.toUpperCase():d.toLowerCase())),l=(c=e.attr("placeholder"))?A(c,e)+4:0,(s=Math.max(A(r,e),l)+4)!==t&&(t=s,e.width(s),e.triggerHandler("resize")))};e.on("keydown keyup update blur",n),n()}(n),t.on({mousedown:function(){return v.onMouseDown.apply(v,arguments)},click:function(){return v.onClick.apply(v,arguments)}}),n.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return v.onKeyDown.apply(v,arguments)},keypress:function(){return v.onKeyPress.apply(v,arguments)},input:function(){return v.onInput.apply(v,arguments)},resize:function(){v.positionDropdown.apply(v,[])},blur:function(){return v.onBlur.apply(v,arguments)},focus:function(){return v.ignoreBlur=!1,v.onFocus.apply(v,arguments)},paste:function(){return v.onPaste.apply(v,arguments)}}),k.on("keydown"+y,(function(e){v.isCmdDown=e[u?"metaKey":"ctrlKey"],v.isCtrlDown=e[u?"altKey":"ctrlKey"],v.isShiftDown=e.shiftKey})),k.on("keyup"+y,(function(e){e.keyCode===p&&(v.isCtrlDown=!1),16===e.keyCode&&(v.isShiftDown=!1),e.keyCode===d&&(v.isCmdDown=!1)})),k.on("mousedown"+y,(function(e){if(v.isFocused){if(e.target===v.$dropdown[0]||e.target.parentNode===v.$dropdown[0])return!1;v.$control.has(e.target).length||e.target===v.$control[0]||v.blur(e.target)}})),w.on(["scroll"+y,"resize"+y].join(" "),(function(){v.isOpen&&v.positionDropdown.apply(v,arguments)})),w.on("mousemove"+y,(function(){v.ignoreHover=!1})),this.revertSettings={$children:S.children().detach(),tabindex:S.attr("tabindex")},S.attr("tabindex",-1).hide().after(v.$wrapper),Array.isArray(b.items)&&(v.lastValidValue=b.items,v.setValue(b.items),delete b.items),h&&S.on("invalid"+y,(function(e){e.preventDefault(),v.isInvalid=!0,v.refreshState()})),v.updateOriginalInput(),v.refreshItems(),v.refreshState(),v.updatePlaceholder(),v.isSetup=!0,S.is(":disabled")&&v.disable(),v.on("change",this.onChange),S.data("bmselectize",v),S.addClass("bmselectized"),v.trigger("initialize"),!0===b.preload&&v.onSearchChange("")},setupTemplates:function(){var e=this,t=e.settings.labelField,n=e.settings.valueField,i=e.settings.optgroupLabelField,a={optgroup:function(e){return'<div class="optgroup">'+e.html+"</div>"},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[i])+"</div>"},option:function(e,i){return'<div class="option '+(""===e[n]?"bmselectize-dropdown-emptyoptionlabel":"")+'">'+i(e[t])+"</div>"},item:function(e,n){return'<div class="item">'+n(e[t])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"}};e.settings.render=r.$.extend({},a,e.settings.render)},setupCallbacks:function(){var e,t,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur",dropdown_item_activate:"onDropdownItemActivate",dropdown_item_deactivate:"onDropdownItemDeactivate"};for(e in n)n.hasOwnProperty(e)&&(t=this.settings[n[e]])&&this.on(e,t)},onClick:function(e){var t=this;t.isFocused&&t.isOpen||(t.focus(),e.preventDefault())},onMouseDown:function(e){var t=this,n=e.isDefaultPrevented();if((0,r.$)(e.target),t.isFocused){if(e.target!==t.$control_input[0])return"single"===t.settings.mode?t.isOpen?t.close():t.open():n||t.setActiveItem(null),!1}else n||window.setTimeout((function(){t.focus()}),0)},onChange:function(){var e=this;""!==e.getValue()&&(e.lastValidValue=e.getValue()),this.$input.trigger("input"),this.$input.trigger("change")},onPaste:function(e){var t=this;t.isFull()||t.isInputHidden||t.isLocked?e.preventDefault():t.settings.splitOn&&setTimeout((function(){var e=t.$control_input.val();if(e.match(t.settings.splitOn))for(var n=e.trim().split(t.settings.splitOn),i=0,r=n.length;i<r;i++)t.createItem(n[i])}),0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&"multi"===this.settings.mode&&t===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){e.target,this.$control_input[0];var t=this;if(t.isLocked)9!==e.keyCode&&e.preventDefault();else{switch(e.keyCode){case 65:if(t.isCmdDown)return void t.selectAll();break;case 27:return void(t.isOpen&&(e.preventDefault(),e.stopPropagation(),t.close()));case 78:if(!e.ctrlKey||e.altKey)break;case 40:if(!t.isOpen&&t.hasOptions)t.open();else if(t.$activeOption){t.ignoreHover=!0;var n=t.getAdjacentOption(t.$activeOption,1);n.length&&t.setActiveOption(n,!0,!0)}return void e.preventDefault();case 80:if(!e.ctrlKey||e.altKey)break;case 38:if(t.$activeOption){t.ignoreHover=!0;var i=t.getAdjacentOption(t.$activeOption,-1);i.length&&t.setActiveOption(i,!0,!0)}return void e.preventDefault();case 13:return void(t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),e.preventDefault()));case 37:return void t.advanceSelection(-1,e);case 39:return void t.advanceSelection(1,e);case 9:return t.settings.selectOnTab&&t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),t.isFull()||e.preventDefault()),void(t.settings.create&&t.createItem()&&t.settings.showAddOptionOnCreate&&e.preventDefault());case 8:case 46:return void t.deleteSelection(e)}!t.isFull()&&!t.isInputHidden||(u?e.metaKey:e.ctrlKey)||e.preventDefault()}},onInput:function(e){var t=this,n=t.$control_input.val()||"";t.lastValue!==n&&(t.lastValue=n,t.onSearchChange(n),t.refreshOptions(),t.trigger("type",n))},onSearchChange:function(e){var t=this,n=t.settings.load;n&&(t.loadedSearches.hasOwnProperty(e)||(t.loadedSearches[e]=!0,t.load((function(i){n.apply(t,[e,i])}))))},onFocus:function(e){var t=this,n=t.isFocused;if(t.isDisabled)return t.blur(),e&&e.preventDefault(),!1;t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.onSearchChange(""),n||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())},onBlur:function(e,t){var n=this;if(n.isFocused&&(n.isFocused=!1,!n.ignoreFocus)){if(!n.ignoreBlur&&document.activeElement===n.$dropdown_content[0])return n.ignoreBlur=!0,void n.onFocus(e);var i=function(){n.close(),n.setTextboxValue(""),n.setActiveItem(null),n.setActiveOption(null),n.setCaret(n.items.length),n.refreshState(),t&&t.focus&&t.focus(),n.isBlurring=!1,n.ignoreFocus=!1,n.trigger("blur")};n.isBlurring=!0,n.ignoreFocus=!0,n.settings.create&&n.settings.createOnBlur?n.createItem(null,!1,i):i()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(e){var t,n,i=this;e.preventDefault&&(e.preventDefault(),e.stopPropagation()),(n=(0,r.$)(e.currentTarget)).hasClass("create")?i.createItem(null,(function(){i.settings.closeAfterSelect&&i.close()})):void 0!==(t=n.attr("data-value"))&&(i.lastQuery=null,i.setTextboxValue(""),i.addItem(t),i.settings.closeAfterSelect?i.close():!i.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&i.setActiveOption(i.getOption(t)))},onItemSelect:function(e){var t=this;t.isLocked||"multi"===t.settings.mode&&(e.preventDefault(),t.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,n=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(e){t.loading=Math.max(t.loading-1,0),e&&e.length&&(t.addOption(e),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||n.removeClass(t.settings.loadingClass),t.trigger("load",e)}])},getTextboxValue:function(){return this.$control_input.val()},setTextboxValue:function(e){var t=this.$control_input;t.val()!==e&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return 1===this.tagType&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){y(this,t?[]:["change"],(function(){this.clear(t),this.addItems(e,t)}))},setMaxItems:function(e){0===e&&(e=null),this.settings.maxItems=e,this.settings.mode=this.settings.mode||(1===this.settings.maxItems?"single":"multi"),this.refreshState()},setActiveItem:function(e,t){var n,i,a,o,s,c,l,u,d=this;if("single"!==d.settings.mode){if(!(e=(0,r.$)(e)).length)return(0,r.$)(d.$activeItems).removeClass("active"),d.$activeItems=[],void(d.isFocused&&d.showInput());if("mousedown"===(n=t&&t.type.toLowerCase())&&d.isShiftDown&&d.$activeItems.length){for(u=d.$control.children(".active:last"),(o=Array.prototype.indexOf.apply(d.$control[0].childNodes,[u[0]]))>(s=Array.prototype.indexOf.apply(d.$control[0].childNodes,[e[0]]))&&(l=o,o=s,s=l),i=o;i<=s;i++)c=d.$control[0].childNodes[i],-1===d.$activeItems.indexOf(c)&&((0,r.$)(c).addClass("active"),d.$activeItems.push(c));t.preventDefault()}else"mousedown"===n&&d.isCtrlDown||"keydown"===n&&this.isShiftDown?e.hasClass("active")?(a=d.$activeItems.indexOf(e[0]),d.$activeItems.splice(a,1),e.removeClass("active")):d.$activeItems.push(e.addClass("active")[0]):((0,r.$)(d.$activeItems).removeClass("active"),d.$activeItems=[e.addClass("active")[0]]);d.hideInput(),this.isFocused||d.focus()}},setActiveOption:function(e,t,n){var i,a,o,s,c,l=this;l.$activeOption&&(l.$activeOption.removeClass("active"),l.trigger("dropdown_item_deactivate",l.$activeOption.attr("data-value"))),l.$activeOption=null,(e=(0,r.$)(e)).length&&(l.$activeOption=e.addClass("active"),l.isOpen&&l.trigger("dropdown_item_activate",l.$activeOption.attr("data-value")),!t&&f(t)||(i=l.$dropdown_content.height(),a=l.$activeOption.outerHeight(!0),t=l.$dropdown_content.scrollTop()||0,s=o=l.$activeOption.offset().top-l.$dropdown_content.offset().top+t,c=o-i+a,o+a>i+t?l.$dropdown_content.stop().animate({scrollTop:c},n?l.settings.scrollDuration:0):o<t&&l.$dropdown_content.stop().animate({scrollTop:s},n?l.settings.scrollDuration:0)))},selectAll:function(){var e=this;"single"!==e.settings.mode&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){var e=this;e.setTextboxValue(""),e.$control_input.css({opacity:0,position:"absolute",left:e.rtl?1e4:-1e4}),e.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;return e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout((function(){e.ignoreFocus=!1,e.onFocus()}),0)),e},blur:function(e){return this.$control_input[0].blur(),this.onBlur(null,e),this},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting}},search:function(e){var t,n,i,a=this,o=a.settings,s=this.getSearchOptions();if(o.score&&"function"!=typeof(i=a.settings.score.apply(this,[e])))throw new Error('Bmselectize "score" setting must be a function that returns a function');if(e!==a.lastQuery?(a.lastQuery=e,n=a.sifter.search(e,r.$.extend(s,{score:i})),a.currentResults=n):n=r.$.extend(!0,{},a.currentResults),o.hideSelected)for(t=n.items.length-1;t>=0;t--)-1!==a.items.indexOf(m(n.items[t].id))&&n.items.splice(t,1);return n},refreshOptions:function(e){var t,n,i,a,o,c,l,u,d,p,h,f,g,v,b,y;void 0===e&&(e=!0);var _,A,w=this,k=w.$control_input.val().trim(),S=w.search(k),C=w.$dropdown_content,x=w.$activeOption&&m(w.$activeOption.attr("data-value"));for(a=S.items.length,"number"==typeof w.settings.maxOptions&&(a=Math.min(a,w.settings.maxOptions)),o={},c=[],t=0;t<a;t++)for(l=w.options[S.items[t].id],u=w.render("option",l),d=l[w.settings.optgroupField]||"",n=0,i=(p=Array.isArray(d)?d:[d])&&p.length;n<i;n++)d=p[n],w.optgroups.hasOwnProperty(d)||(d=""),o.hasOwnProperty(d)||(o[d]=document.createDocumentFragment(),c.push(d)),o[d].appendChild(u);for(this.settings.lockOptgroupOrder&&c.sort((function(e,t){return(w.optgroups[e]&&w.optgroups[e].$order||0)-(w.optgroups[t]&&w.optgroups[t].$order||0)})),h=document.createDocumentFragment(),t=0,a=c.length;t<a;t++)d=c[t],w.optgroups.hasOwnProperty(d)&&o[d].childNodes.length?((f=document.createDocumentFragment()).appendChild(w.render("optgroup_header",w.optgroups[d])),f.appendChild(o[d]),h.appendChild(w.render("optgroup",r.$.extend({},w.optgroups[d],{html:(_=f,A=void 0,A=document.createElement("div"),A.appendChild(_.cloneNode(!0)),A.innerHTML),dom:f})))):h.appendChild(o[d]);if(C.html(h),w.settings.highlight&&(C.removeHighlight(),S.query.length&&S.tokens.length))for(t=0,a=S.tokens.length;t<a;t++)s(C,S.tokens[t].regex);if(!w.settings.hideSelected)for(w.$dropdown.find(".selected").removeClass("selected"),t=0,a=w.items.length;t<a;t++)w.getOption(w.items[t]).addClass("selected");(g=w.canCreate(k))&&w.settings.showAddOptionOnCreate&&(C.prepend(w.render("option_create",{input:k})),y=(0,r.$)(C[0].childNodes[0])),w.hasOptions=S.items.length>0||g&&w.settings.showAddOptionOnCreate,w.hasOptions?(S.items.length>0?(b=x&&w.getOption(x),""!==S.query&&b&&b.length?v=b:"single"===w.settings.mode&&w.items.length&&(v=w.getOption(w.items[0])),v&&v.length||(v=y&&!w.settings.addPrecedence?w.getAdjacentOption(y,1):C.find("[data-selectable]:first"))):v=y,w.setActiveOption(v),e&&!w.isOpen&&w.open()):(w.setActiveOption(null),e&&w.isOpen&&w.close())},addOption:function(e){var t,n,i,r=this;if(Array.isArray(e))for(t=0,n=e.length;t<n;t++)r.addOption(e[t]);else(i=r.registerOption(e))&&(r.userOptions[i]=!0,r.lastQuery=null,r.trigger("option_add",i,e))},registerOption:function(e){var t=m(e[this.settings.valueField]);return null!=t&&!this.options.hasOwnProperty(t)&&(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=m(e[this.settings.optgroupValueField]);return!!t&&(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(e,t){var n,i,a,o,s,c,l,u=this;if(e=m(e),a=m(t[u.settings.valueField]),null!==e&&u.options.hasOwnProperty(e)){if("string"!=typeof a)throw new Error("Value must be set in option data");l=u.options[e].$order,a!==e&&(delete u.options[e],-1!==(o=u.items.indexOf(e))&&u.items.splice(o,1,a)),t.$order=t.$order||l,u.options[a]=t,s=u.renderCache.item,c=u.renderCache.option,s&&(delete s[e],delete s[a]),c&&(delete c[e],delete c[a]),-1!==u.items.indexOf(a)&&(n=u.getItem(e),i=(0,r.$)(u.render("item",t)),n.hasClass("active")&&i.addClass("active"),n.replaceWith(i)),u.lastQuery=null,u.isOpen&&u.refreshOptions(!1)}},removeOption:function(e,t){var n=this;e=m(e);var i=n.renderCache.item,r=n.renderCache.option;i&&delete i[e],r&&delete r[e],delete n.userOptions[e],delete n.options[e],n.lastQuery=null,n.trigger("option_remove",e),n.removeItem(e,t)},clearOptions:function(e){var t=this;t.loadedSearches={},t.userOptions={},t.renderCache={};var n=t.options;r.$.each(t.options,(function(e,i){-1==t.items.indexOf(e)&&delete n[e]})),t.options=t.sifter.items=n,t.lastQuery=null,t.trigger("option_clear"),t.clear(e)},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getFirstOption:function(){var e=this.$dropdown.find("[data-selectable]");return e.length>0?e.eq(0):(0,r.$)()},getAdjacentOption:function(e,t){var n=this.$dropdown.find("[data-selectable]"),i=n.index(e)+t;return i>=0&&i<n.length?n.eq(i):(0,r.$)()},getElementWithValue:function(e,t){if(null!=(e=m(e)))for(var n=0,i=t.length;n<i;n++)if(t[n].getAttribute("data-value")===e)return(0,r.$)(t[n]);return(0,r.$)()},getElementWithTextContent:function(e,t,n){if(null!=(e=m(e)))for(var i=0,a=n.length;i<a;i++){var o=n[i].textContent;if(1==t&&(o=null!==o?o.toLowerCase():null,e=e.toLowerCase()),o===e)return(0,r.$)(n[i])}return(0,r.$)()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},getFirstItemMatchedByTextContent:function(e,t){return t=null!==t&&!0===t,this.getElementWithTextContent(e,t,this.$dropdown_content.find("[data-selectable]"))},addItems:function(e,t){this.buffer=document.createDocumentFragment();for(var n=this.$control[0].childNodes,i=0;i<n.length;i++)this.buffer.appendChild(n[i]);for(var r=Array.isArray(e)?e:[e],a=(i=0,r.length);i<a;i++)this.isPending=i<a-1,this.addItem(r[i],t);var o=this.$control[0];o.insertBefore(this.buffer,o.firstChild),this.buffer=null},addItem:function(e,t){y(this,t?[]:["change"],(function(){var n,i,a,o,s,c=this,l=c.settings.mode;e=m(e),-1===c.items.indexOf(e)?c.options.hasOwnProperty(e)&&("single"===l&&c.clear(t),"multi"===l&&c.isFull()||(n=(0,r.$)(c.render("item",c.options[e])),s=c.isFull(),c.items.splice(c.caretPos,0,e),c.insertAtCaret(n),(!c.isPending||!s&&c.isFull())&&c.refreshState(),c.isSetup&&(a=c.$dropdown_content.find("[data-selectable]"),c.isPending||(i=c.getOption(e),o=c.getAdjacentOption(i,1).attr("data-value"),c.refreshOptions(c.isFocused&&"single"!==l),o&&c.setActiveOption(c.getOption(o))),!a.length||c.isFull()?c.close():c.isPending||c.positionDropdown(),c.updatePlaceholder(),c.trigger("item_add",e,n),c.isPending||c.updateOriginalInput({silent:t})))):"single"===l&&c.close()}))},removeItem:function(e,t){var n,i,a,o=this;n=e instanceof r.$?e:o.getItem(e),e=m(n.attr("data-value")),-1!==(i=o.items.indexOf(e))&&(o.trigger("item_before_remove",e,n),n.remove(),n.hasClass("active")&&(a=o.$activeItems.indexOf(n[0]),o.$activeItems.splice(a,1)),o.items.splice(i,1),o.lastQuery=null,!o.settings.persist&&o.userOptions.hasOwnProperty(e)&&o.removeOption(e,t),i<o.caretPos&&o.setCaret(o.caretPos-1),o.refreshState(),o.updatePlaceholder(),o.updateOriginalInput({silent:t}),o.positionDropdown(),o.trigger("item_remove",e,n))},createItem:function(e,t){var n=this,r=n.caretPos;e=e||(n.$control_input.val()||"").trim();var a=arguments[arguments.length-1];if("function"!=typeof a&&(a=function(){}),"boolean"!=typeof t&&(t=!0),!n.canCreate(e))return a(),!1;n.lock();var o="function"==typeof n.settings.create?this.settings.create:function(e){var t={};t[n.settings.labelField]=e;var r=e;if(n.settings.formatValueToKey&&"function"==typeof n.settings.formatValueToKey&&(null==(r=n.settings.formatValueToKey.apply(this,[r]))||"object"===(0,i.Z)(r)||"function"==typeof r))throw new Error('Bmselectize "formatValueToKey" setting must be a function that returns a value other than object or function.');return t[n.settings.valueField]=r,t},s=b((function(e){if(n.unlock(),!e||"object"!==(0,i.Z)(e))return a();var o=m(e[n.settings.valueField]);if("string"!=typeof o)return a();n.setTextboxValue(""),n.addOption(e),n.setCaret(r),n.addItem(o),n.refreshOptions(t&&"single"!==n.settings.mode),a(e)})),c=o.apply(this,[e,s]);return void 0!==c&&s(c),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){this.refreshValidityState(),this.refreshClasses()},refreshValidityState:function(){if(!this.isRequired)return!1;var e=!this.items.length;this.isInvalid=e,this.$control_input.prop("required",e),this.$input.prop("required",!e)},refreshClasses:function(){var e=this,t=e.isFull(),n=e.isLocked;e.$wrapper.toggleClass("rtl",e.rtl),e.$control.toggleClass("focus",e.isFocused).toggleClass("disabled",e.isDisabled).toggleClass("required",e.isRequired).toggleClass("invalid",e.isInvalid).toggleClass("locked",n).toggleClass("full",t).toggleClass("not-full",!t).toggleClass("input-active",e.isFocused&&!e.isInputHidden).toggleClass("dropdown-active",e.isOpen).toggleClass("has-options",!r.$.isEmptyObject(e.options)).toggleClass("has-items",e.items.length>0),e.$control_input.data("grow",!t&&!n)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,n,i,r,a=this;if(e=e||{},1===a.tagType){for(i=[],t=0,n=a.items.length;t<n;t++)r=a.options[a.items[t]][a.settings.labelField]||"",i.push('<option value="'+g(a.items[t])+'" selected="selected">'+g(r)+"</option>");i.length||this.$input.attr("multiple")||i.push('<option value="" selected="selected"></option>'),a.$input.html(i.join(""))}else a.$input.val(a.getValue()),a.$input.attr("value",a.$input.val());a.isSetup&&(e.silent||a.trigger("change",a.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;"single"===e.settings.mode&&e.items.length&&(e.hideInput(),e.isBlurring&&e.$control_input.blur()),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e[0].getBoundingClientRect().width,top:t.top,left:t.left})},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(e){var t=Math.min(this.caretPos,this.items.length),n=e[0],i=this.buffer||this.$control[0];0===t?i.insertBefore(n,i.firstChild):i.insertBefore(n,i.childNodes[t]),this.setCaret(t+1)},deleteSelection:function(e){var t,n,i,a,o,s,c,l,u,d=this;if(i=e&&8===e.keyCode?-1:1,a=_(d.$control_input[0]),d.$activeOption&&!d.settings.hideSelected&&(c="string"==typeof d.settings.deselectBehavior&&"top"===d.settings.deselectBehavior?d.getFirstOption().attr("data-value"):d.getAdjacentOption(d.$activeOption,-1).attr("data-value")),o=[],d.$activeItems.length){for(u=d.$control.children(".active:"+(i>0?"last":"first")),s=d.$control.children(":not(input)").index(u),i>0&&s++,t=0,n=d.$activeItems.length;t<n;t++)o.push((0,r.$)(d.$activeItems[t]).attr("data-value"));e&&(e.preventDefault(),e.stopPropagation())}else(d.isFocused||"single"===d.settings.mode)&&d.items.length&&(i<0&&0===a.start&&0===a.length?o.push(d.items[d.caretPos-1]):i>0&&a.start===d.$control_input.val().length&&o.push(d.items[d.caretPos]));if(!o.length||"function"==typeof d.settings.onDelete&&!1===d.settings.onDelete.apply(d,[o]))return!1;for(void 0!==s&&d.setCaret(s);o.length;)d.removeItem(o.pop());return d.showInput(),d.positionDropdown(),d.refreshOptions(!0),c&&(l=d.getOption(c)).length&&d.setActiveOption(l),!0},advanceSelection:function(e,t){var n,i,r,a,o,s=this;0!==e&&(s.rtl&&(e*=-1),n=e>0?"last":"first",i=_(s.$control_input[0]),s.isFocused&&!s.isInputHidden?(a=s.$control_input.val().length,(e<0?0===i.start&&0===i.length:i.start===a)&&!a&&s.advanceCaret(e,t)):(o=s.$control.children(".active:"+n)).length&&(r=s.$control.children(":not(input)").index(o),s.setActiveItem(null),s.setCaret(e>0?r+1:r)))},advanceCaret:function(e,t){var n,i,r=this;0!==e&&(n=e>0?"next":"prev",r.isShiftDown?(i=r.$control_input[n]()).length&&(r.hideInput(),r.setActiveItem(i),t&&t.preventDefault()):r.setCaret(r.caretPos+e))},setCaret:function(e){var t,n,i,a,o=this;if(e="single"===o.settings.mode?o.items.length:Math.max(0,Math.min(o.items.length,e)),!o.isPending)for(t=0,n=(i=o.$control.children(":not(input)")).length;t<n;t++)a=(0,r.$)(i[t]).detach(),t<e?o.$control_input.before(a):o.$control.append(a);o.caretPos=e},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var e=this;e.$input.prop("disabled",!0),e.$control_input.prop("disabled",!0).prop("tabindex",-1),e.isDisabled=!0,e.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var e=this,t=e.eventNS,n=e.revertSettings;e.trigger("destroy"),e.off(),e.$wrapper.remove(),e.$dropdown.remove(),e.$input.html("").append(n.$children).removeAttr("tabindex").removeClass("bmselectized").attr({tabindex:n.tabindex}).show(),e.$control_input.removeData("grow"),e.$input.removeData("bmselectize"),0==--w.count&&w.$testInput&&(w.$testInput.remove(),w.$testInput=void 0),(0,r.$)(window).off(t),(0,r.$)(document).off(t),(0,r.$)(document.body).off(t),delete e.$input[0].bmselectize},render:function(e,t){var n,i,a="",o=!1,s=this;return"option"!==e&&"item"!==e||(o=!!(n=m(t[s.settings.valueField]))),o&&(f(s.renderCache[e])||(s.renderCache[e]={}),s.renderCache[e].hasOwnProperty(n))?s.renderCache[e][n]:(a=(0,r.$)(s.settings.render[e].apply(this,[t,g])),"option"===e||"option_create"===e?t[s.settings.disabledField]||a.attr("data-selectable",""):"optgroup"===e&&(i=t[s.settings.optgroupValueField]||"",a.attr("data-group",i),t[s.settings.disabledField]&&a.attr("data-disabled","")),"option"!==e&&"item"!==e||a.attr("data-value",n||""),o&&(s.renderCache[e][n]=a[0]),a[0])},clearCache:function(e){void 0===e?this.renderCache={}:delete this.renderCache[e]},canCreate:function(e){var t=this;if(!t.settings.create)return!1;var n=t.settings.createFilter;return e.length&&("function"!=typeof n||n.apply(t,[e]))&&("string"!=typeof n||new RegExp(n).test(e))&&(!(n instanceof RegExp)||n.test(e))}}),w.count=0,w.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,showAddOptionOnCreate:!0,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!0,preload:!1,allowEmptyOption:!1,showEmptyOptionInDropdown:!1,emptyOptionLabel:"--",closeAfterSelect:!1,scrollDuration:60,deselectBehavior:"previous",loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"bmselectize-control",inputClass:"bmselectize-input",dropdownClass:"bmselectize-dropdown",dropdownContentClass:"bmselectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},r.$.fn.bmselectize=function(e){var t=r.$.fn.bmselectize.defaults,n=r.$.extend({},t,e),i=n.dataAttr,a=n.labelField,o=n.valueField,s=n.disabledField,c=n.optgroupField,l=n.optgroupLabelField,u=n.optgroupValueField;return this.each((function(){if(!this.bmselectize){var d=(0,r.$)(this),p=this.tagName.toLowerCase(),h=d.attr("placeholder")||d.attr("data-placeholder");if(h||n.allowEmptyOption||(h=d.children('option[value=""]').text()),n.allowEmptyOption&&n.showEmptyOptionInDropdown&&!d.children('option[value=""]').length){var f=d.html();d.html('<option value="">'+n.emptyOptionLabel+"</option>"+f)}var g={placeholder:h,options:[],optgroups:[],items:[]};"select"===p?function(e,t){var d,p,h,f,g=t.options,v={},b=function(e){var t=i&&e.attr(i);return"string"==typeof t&&t.length?JSON.parse(t):null},y=function(e,i){e=(0,r.$)(e);var l=m(e.val());if(l||n.allowEmptyOption)if(v.hasOwnProperty(l)){if(i){var u=v[l][c];u?r.$.isArray(u)?u.push(i):v[l][c]=[u,i]:v[l][c]=i}}else{var d=b(e)||{};d[a]=d[a]||e.text(),d[o]=d[o]||l,d[s]=d[s]||e.prop("disabled"),d[c]=d[c]||i,v[l]=d,g.push(d),e.is(":selected")&&t.items.push(l)}},_=function(e){var n,i,a,o,c;for((a=(e=(0,r.$)(e)).attr("label"))&&((o=b(e)||{})[l]=a,o[u]=a,o[s]=e.prop("disabled"),t.optgroups.push(o)),n=0,i=(c=(0,r.$)("option",e)).length;n<i;n++)y(c[n],a)};for(t.maxItems=e.attr("multiple")?null:1,d=0,p=(f=e.children()).length;d<p;d++)"optgroup"===(h=f[d].tagName.toLowerCase())?_(f[d]):"option"===h&&y(f[d])}(d,g):function(e,t){var s,c,l,u,d=e.attr(i);if(d)for(t.options=JSON.parse(d),s=0,c=t.options.length;s<c;s++)t.items.push(t.options[s][o]);else{var p=r.$.trim(e.val()||"");if(!n.allowEmptyOption&&!p.length)return;for(s=0,c=(l=p.split(n.delimiter)).length;s<c;s++)(u={})[a]=l[s],u[o]=l[s],t.options.push(u);t.items=l}}(d,g),new w(d,r.$.extend(!0,{},t,g,e))}}))},r.$.fn.bmselectize.defaults=w.defaults,r.$.fn.bmselectize.support={validity:h},w.define("auto_position",(function(){this.positionDropdown=function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0);var n=this.$dropdown.prop("scrollHeight")+5,i=this.$control.get(0).getBoundingClientRect().top+n+this.$wrapper.height()>window.innerHeight?"top":"bottom",r={width:e.outerWidth(),left:t.left};"top"===i?(Object.assign(r,{bottom:t.top,top:"unset",margin:"0 0 5px 0"}),this.$dropdown.addClass("bmselectize-position-top")):(Object.assign(r,{top:t.top,bottom:"unset",margin:"5px 0 0 0"}),this.$dropdown.removeClass("bmselectize-position-top")),this.$dropdown.css(r)}})),w.define("auto_select_on_type",(function(e){var t,n=this;n.onBlur=(t=n.onBlur,function(e){var i=n.getFirstItemMatchedByTextContent(n.lastValue,!0);return void 0!==i.attr("data-value")&&n.getValue()!==i.attr("data-value")&&n.setValue(i.attr("data-value")),t.apply(this,arguments)})})),w.define("autofill_disable",(function(e){var t,n=this;n.setup=(t=n.setup,function(){t.apply(n,arguments),n.$control_input.attr({autocomplete:"new-password",autofill:"no"})})})),w.define("drag_drop",(function(e){if(!r.$.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var t,n=this;n.lock=(t=n.lock,function(){var e=n.$control.data("sortable");return e&&e.disable(),t.apply(n,arguments)}),n.unlock=function(){var e=n.unlock;return function(){var t=n.$control.data("sortable");return t&&t.enable(),e.apply(n,arguments)}}(),n.setup=function(){var e=n.setup;return function(){e.apply(this,arguments);var t=n.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:n.isLocked,start:function(e,n){n.placeholder.css("width",n.helper.css("width")),t.addClass("dragging")},stop:function(){t.removeClass("dragging");var e=n.$activeItems?n.$activeItems.slice():null,i=[];t.children("[data-value]").each((function(){i.push((0,r.$)(this).attr("data-value"))})),n.isFocused=!1,n.setValue(i),n.isFocused=!0,n.setActiveItem(e),n.positionDropdown()}})}}()}})),w.define("dropdown_header",(function(e){var t,n=this;e=r.$.extend({title:"Untitled",headerClass:"bmselectize-dropdown-header",titleRowClass:"bmselectize-dropdown-header-title",labelClass:"bmselectize-dropdown-header-label",closeClass:"bmselectize-dropdown-header-close",html:function(e){return'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a href="javascript:void(0)" class="'+e.closeClass+'">&times;</a></div></div>'}},e),n.setup=(t=n.setup,function(){t.apply(n,arguments),n.$dropdown_header=(0,r.$)(e.html(e)),n.$dropdown.prepend(n.$dropdown_header)})})),w.define("optgroup_columns",(function(e){var t,n=this;e=r.$.extend({equalizeWidth:!0,equalizeHeight:!0},e),this.getAdjacentOption=function(e,t){var n=e.closest("[data-group]").find("[data-selectable]"),i=n.index(e)+t;return i>=0&&i<n.length?n.eq(i):(0,r.$)()},this.onKeyDown=(t=n.onKeyDown,function(e){var i,r,a,o;return!this.isOpen||37!==e.keyCode&&39!==e.keyCode?t.apply(this,arguments):(n.ignoreHover=!0,i=(o=this.$activeOption.closest("[data-group]")).find("[data-selectable]").index(this.$activeOption),void((r=(a=(o=37===e.keyCode?o.prev("[data-group]"):o.next("[data-group]")).find("[data-selectable]")).eq(Math.min(a.length-1,i))).length&&this.setActiveOption(r)))});var i=function e(){var t,n=e.width,i=document;return void 0===n&&((t=i.createElement("div")).innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',t=t.firstChild,i.body.appendChild(t),n=e.width=t.offsetWidth-t.clientWidth,i.body.removeChild(t)),n},a=function(){var t,a,o,s,c,l,u;if((a=(u=(0,r.$)("[data-group]",n.$dropdown_content)).length)&&n.$dropdown_content.width()){if(e.equalizeHeight){for(o=0,t=0;t<a;t++)o=Math.max(o,u.eq(t).height());u.css({height:o})}e.equalizeWidth&&(l=n.$dropdown_content.innerWidth()-i(),s=Math.round(l/a),u.css({width:s}),a>1&&(c=l-s*(a-1),u.eq(a-1).css({width:c})))}};(e.equalizeHeight||e.equalizeWidth)&&(v(this,"positionDropdown",a),v(this,"refreshOptions",a))})),w.define("remove_button",(function(e){e=r.$.extend({label:"&times;",title:"Remove",className:"remove",append:!0},e),"single"!==this.settings.mode?function(e,t){var n,i=e,a='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+g(t.title)+'">'+t.label+"</a>",o=function(e,t){var n=e.search(/(<\/[^>]+>\s*)$/);return e.substring(0,n)+t+e.substring(n)};e.setup=(n=i.setup,function(){if(t.append){var s=i.settings.render.item;i.settings.render.item=function(t){return o(s.apply(e,arguments),a)}}n.apply(e,arguments),e.$control.on("click","."+t.className,(function(e){if(e.preventDefault(),!i.isLocked){var t=(0,r.$)(e.currentTarget).parent();return i.setActiveItem(t),i.deleteSelection()&&i.setCaret(i.items.length),!1}}))})}(this,e):function(e,t){t.className="remove-single";var n,i=e,a='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+g(t.title)+'">'+t.label+"</a>",o=function(e,t){return(0,r.$)("<span>").append(e).append(t)};e.setup=(n=i.setup,function(){if(t.append){var s=(0,r.$)(i.$input.context).attr("id"),c=((0,r.$)("#"+s),i.settings.render.item);i.settings.render.item=function(t){return o(c.apply(e,arguments),a)}}n.apply(e,arguments),e.$control.on("click","."+t.className,(function(e){e.preventDefault(),i.isLocked||i.clear()}))})}(this,e)})),w.define("restore_on_backspace",(function(e){var t;e.text=e.text||function(e){return e[this.settings.labelField]},this.onKeyDown=(t=this.onKeyDown,function(n){var i,r;return 8===n.keyCode&&""===this.$control_input.val()&&!this.$activeItems.length&&(i=this.caretPos-1)>=0&&i<this.items.length?(r=this.options[this.items[i]],this.deleteSelection(n)&&(this.setTextboxValue(e.text.apply(this,[r])),this.refreshOptions(!0)),void n.preventDefault()):t.apply(this,arguments)})})),w.define("select_on_focus",(function(e){var t,n,i=this;i.on("focus",(t=i.onFocus,function(e){var n=i.getItem(i.getValue()).text();return i.clear(),i.setTextboxValue(n),i.$control_input.select(),setTimeout((function(){i.settings.selectOnTab&&i.setActiveOption(i.getFirstItemMatchedByTextContent(n)),i.settings.score=null}),0),t.apply(this,arguments)})),i.onBlur=(n=i.onBlur,function(e){return""===i.getValue()&&i.lastValidValue!==i.getValue()&&i.setValue(i.lastValidValue),setTimeout((function(){i.settings.score=function(){return function(){return 1}}}),0),n.apply(this,arguments)}),i.settings.score=function(){return function(){return 1}}})),w.define("tag_limit",(function(e){var t,n=this;e.tagLimit=e.tagLimit,this.onBlur=(t=n.onBlur,function(n){if(t.apply(this,n),n){var i=this.$control,a=i.find(".item"),o=e.tagLimit;void 0===o||a.length<=o||(a.toArray().forEach((function(e,t){t<o||(0,r.$)(e).hide()})),i.append("<span><b>"+(a.length-o)+"</b></span>"))}}),this.onFocus=function(e){var t=n.onFocus;return function(e){if(t.apply(this,e),e){var n=this.$control;n.find(".item").show(),n.find("span").remove()}}}()}))},9742:(e,t)=>{"use strict";t.byteLength=function(e){var t=c(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){var t,n,a=c(e),o=a[0],s=a[1],l=new r(function(e,t,n){return 3*(t+n)/4-n}(0,o,s)),u=0,d=s>0?o-4:o;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,l[u++]=255&t),1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},t.fromByteArray=function(e){for(var t,i=e.length,r=i%3,a=[],o=16383,s=0,c=i-r;s<c;s+=o)a.push(l(e,s,s+o>c?c:s+o));return 1===r?(t=e[i-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===r&&(t=(e[i-2]<<8)+e[i-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),a.join("")};for(var n=[],i=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,s=a.length;o<s;++o)n[o]=a[o],i[a.charCodeAt(o)]=o;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,i){for(var r,a,o=[],s=t;s<i;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(n[(a=r)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},8764:(e,t,n)=>{"use strict";var i=n(9742),r=n(645),a=n(5826);function o(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,n)}function l(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i),c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=p(e,t),e}(e,t,n,i):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|f(t,n),r=(e=s(e,i)).write(t,n);return r!==i&&(e=e.slice(0,r)),e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|h(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?s(e,0):p(e,t);if("Buffer"===t.type&&a(t.data))return p(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(u(t),e=s(e,t<0?0:0|h(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|h(t.length);e=s(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function h(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function f(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(e).length;default:if(i)return U(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return x(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return P(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function g(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function v(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=c.from(t,i)),c.isBuffer(t))return 0===t.length?-1:b(e,t,n,i,r);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,i,r){var a,o=1,s=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,s/=2,c/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(r){var u=-1;for(a=n;a<s;a++)if(l(e,a)===l(t,-1===u?0:a-u)){if(-1===u&&(u=a),a-u+1===c)return u*o}else-1!==u&&(a-=a-u),u=-1}else for(n+c>s&&(n=s-c),a=n;a>=0;a--){for(var d=!0,p=0;p<c;p++)if(l(e,a+p)!==l(t,p)){d=!1;break}if(d)return a}return-1}function y(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");i>a/2&&(i=a/2);for(var o=0;o<i;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function _(e,t,n,i){return Z(U(t,e.length-n),e,n,i)}function A(e,t,n,i){return Z(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function w(e,t,n,i){return A(e,t,n,i)}function k(e,t,n,i){return Z(F(t),e,n,i)}function S(e,t,n,i){return Z(function(e,t){for(var n,i,r,a=[],o=0;o<e.length&&!((t-=2)<0);++o)i=(n=e.charCodeAt(o))>>8,r=n%256,a.push(r),a.push(i);return a}(t,e.length-n),e,n,i)}function C(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function x(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var a,o,s,c,l=e[r],u=null,d=l>239?4:l>223?3:l>191?2:1;if(r+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(a=e[r+1]))&&(c=(31&l)<<6|63&a)>127&&(u=c);break;case 3:a=e[r+1],o=e[r+2],128==(192&a)&&128==(192&o)&&(c=(15&l)<<12|(63&a)<<6|63&o)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:a=e[r+1],o=e[r+2],s=e[r+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(c=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=d}return function(e){var t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=E));return n}(i)}t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return l(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,i){return u(t),t<=0?s(e,t):void 0!==n?"string"==typeof i?s(e,t).fill(n,i):s(e,t).fill(n):s(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,a=Math.min(n,i);r<a;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=c.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var o=e[n];if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?x(this,0,e):m.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,i,r){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(r>>>=0)-(i>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),l=this.slice(i,r),u=e.slice(t,n),d=0;d<s;++d)if(l[d]!==u[d]){a=l[d],o=u[d];break}return a<o?-1:o<a?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},c.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return A(this,e,t,n);case"latin1":case"binary":return w(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function T(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function P(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function R(e,t,n){var i,r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var a="",o=t;o<n;++o)a+=(i=e[o])<16?"0"+i.toString(16):i.toString(16);return a}function O(e,t,n){for(var i=e.slice(t,n),r="",a=0;a<i.length;a+=2)r+=String.fromCharCode(i[a]+256*i[a+1]);return r}function D(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,i,r,a){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function I(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,a=Math.min(e.length-n,2);r<a;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function N(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,a=Math.min(e.length-n,4);r<a;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function L(e,t,n,i,r,a){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,i,a){return a||L(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function $(e,t,n,i,a){return a||L(e,0,n,8),r.write(e,t,n,i,52,8),n+8}c.prototype.slice=function(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var r=t-e;n=new c(r,void 0);for(var a=0;a<r;++a)n[a]=this[a+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return i},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},c.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var i=t,r=1,a=this[e+--i];i>0&&(r*=256);)a+=this[e+--i]*r;return a>=(r*=128)&&(a-=Math.pow(2,8*t)),a},c.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),r.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),r.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),r.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),r.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,i){e=+e,t|=0,n|=0,i||M(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,a=0;for(this[t]=255&e;++a<n&&(r*=256);)this[t+a]=e/r&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,i){e=+e,t|=0,n|=0,i||M(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,a=1;for(this[t+r]=255&e;--r>=0&&(a*=256);)this[t+r]=e/a&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);M(this,e,t,n,r-1,-r)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);M(this,e,t,n,r-1,-r)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return $(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return $(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,a=i-n;if(this===e&&n<t&&t<i)for(r=a-1;r>=0;--r)e[r+t]=this[r+n];else if(a<1e3||!c.TYPED_ARRAY_SUPPORT)for(r=0;r<a;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},c.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=c.isBuffer(e)?e:U(new c(e,i).toString()),s=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function U(e,t){var n;t=t||1/0;for(var i=e.length,r=null,a=[],o=0;o<i;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&a.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&a.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function F(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Z(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}},6010:(e,t,n)=>{"use strict";function i(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=i(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function r(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=i(e))&&(r&&(r+=" "),r+=t);return r}n.r(t),n.d(t,{default:()=>r})},2114:e=>{"use strict";function t(e,t){for(const n in t)Object.defineProperty(e,n,{value:t[n],enumerable:!0,configurable:!0});return e}e.exports=function(e,n,i){if(!e||"string"==typeof e)throw new TypeError("Please pass an Error to err-code");i||(i={}),"object"==typeof n&&(i=n,n=""),n&&(i.code=n);try{return t(e,i)}catch(n){i.message=e.message,i.stack=e.stack;const r=function(){};return r.prototype=Object.create(Object.getPrototypeOf(e)),t(new r,i)}}},7187:e=>{function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function r(e){return void 0===e}e.exports=t,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},t.prototype.emit=function(e){var t,a,o,s,c,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(r(a=this._events[e]))return!1;if(n(a))switch(arguments.length){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),a.apply(this,s)}else if(i(a))for(s=Array.prototype.slice.call(arguments,1),o=(l=a.slice()).length,c=0;c<o;c++)l[c].apply(this,s);return!0},t.prototype.addListener=function(e,a){var o;if(!n(a))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(a.listener)?a.listener:a),this._events[e]?i(this._events[e])?this._events[e].push(a):this._events[e]=[this._events[e],a]:this._events[e]=a,i(this._events[e])&&!this._events[e].warned&&(o=r(this._maxListeners)?t.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var i=!1;function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},t.prototype.removeListener=function(e,t){var r,a,o,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(r=this._events[e]).length,a=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(s=o;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){a=s;break}if(a<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},t.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(i=this._events[e]))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},t.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},t.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},t.listenerCount=function(e,t){return e.listenerCount(t)}},2007:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},r=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],a=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],o=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],s="undefined"!=typeof window&&void 0!==window.document?window.document:{},c="fullscreenEnabled"in s&&Object.keys(i)||r[0]in s&&r||a[0]in s&&a||o[0]in s&&o||[];const l={requestFullscreen:function(e){return e[c[i.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[c[i.requestFullscreen]]},get exitFullscreen(){return s[c[i.exitFullscreen]].bind(s)},get fullscreenPseudoClass(){return":"+c[i.fullscreen]},addEventListener:function(e,t,n){return s.addEventListener(c[i[e]],t,n)},removeEventListener:function(e,t,n){return s.removeEventListener(c[i[e]],t,n)},get fullscreenEnabled(){return Boolean(s[c[i.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return s[c[i.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return s[("on"+c[i.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return s[("on"+c[i.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return s[("on"+c[i.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return s[("on"+c[i.fullscreenerror]).toLowerCase()]=e}}},5177:e=>{e.exports=function(){if("undefined"==typeof globalThis)return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},1766:(e,t)=>{var n;!function(){"use strict";var i=function(){this.init()};i.prototype={init:function(){var e=this||r;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||r;if(e=parseFloat(e),t.ctx||p(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,r.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var i=t._howls[n]._getSoundIds(),a=0;a<i.length;a++){var o=t._howls[n]._soundById(i[a]);o&&o._node&&(o._node.volume=o._volume*e)}return t}return t._volume},mute:function(e){var t=this||r;t.ctx||p(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,r.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var i=t._howls[n]._getSoundIds(),a=0;a<i.length;a++){var o=t._howls[n]._soundById(i[a]);o&&o._node&&(o._node.muted=!!e||o._muted)}return t},stop:function(){for(var e=this||r,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||r,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,p()),e},codecs:function(e){return(this||r)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||r;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||r,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),i=e._navigator?e._navigator.userAgent:"",a=i.match(/OPR\/([0-6].)/g),o=a&&parseInt(a[0].split("/")[1],10)<33,s=-1!==i.indexOf("Safari")&&-1===i.indexOf("Chrome"),c=i.match(/Version\/(.*?) /),l=s&&c&&parseInt(c[1],10)<15;return e._codecs={mp3:!(o||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(l||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(l||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||r;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(n){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var i=new Audio;i._unlocked=!0,e._releaseHtml5Audio(i)}catch(n){e.noAudio=!0;break}for(var r=0;r<e._howls.length;r++)if(!e._howls[r]._webAudio)for(var a=e._howls[r]._getSoundIds(),o=0;o<a.length;o++){var s=e._howls[r]._soundById(a[o]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}e._autoResume();var c=e.ctx.createBufferSource();c.buffer=e._scratchBuffer,c.connect(e.ctx.destination),void 0===c.start?c.noteOn(0):c.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),c.onended=function(){c.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("keydown",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),document.addEventListener("keydown",t,!0),e}},_obtainHtml5Audio:function(){var e=this||r;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var t=this||r;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&r.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&r.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var r=new i,a=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};a.prototype={init:function(e){var t=this;return r.ctx||p(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=r.usingWebAudio&&!t._html5,void 0!==r.ctx&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=this,t=null;if(r.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var n=0;n<e._src.length;n++){var i,a;if(e._format&&e._format[n])i=e._format[n];else{if("string"!=typeof(a=e._src[n])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(i=/^data:audio\/([^;,]+);/i.exec(a))||(i=/\.([^.]+)$/.exec(a.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&r.codecs(i)){t=e._src[n];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new o(e),e._webAudio&&c(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var n=this,i=null;if("number"==typeof e)i=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e&&(e="__default",!n._playLock)){for(var a=0,o=0;o<n._sounds.length;o++)n._sounds[o]._paused&&!n._sounds[o]._ended&&(a++,i=n._sounds[o]._id);1===a?e=null:i=null}}var s=i?n._soundById(i):n._inactiveSound();if(!s)return null;if(i&&!e&&(e=s._sprite||"__default"),"loaded"!==n._state){s._sprite=e,s._ended=!1;var c=s._id;return n._queue.push({event:"play",action:function(){n.play(c)}}),c}if(i&&!s._paused)return t||n._loadQueue("play"),s._id;n._webAudio&&r._autoResume();var l=Math.max(0,s._seek>0?s._seek:n._sprite[e][0]/1e3),u=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-l),d=1e3*u/Math.abs(s._rate),p=n._sprite[e][0]/1e3,h=(n._sprite[e][0]+n._sprite[e][1])/1e3;s._sprite=e,s._ended=!1;var f=function(){s._paused=!1,s._seek=l,s._start=p,s._stop=h,s._loop=!(!s._loop&&!n._sprite[e][2])};if(!(l>=h)){var m=s._node;if(n._webAudio){var g=function(){n._playLock=!1,f(),n._refreshBuffer(s);var e=s._muted||n._muted?0:s._volume;m.gain.setValueAtTime(e,r.ctx.currentTime),s._playStart=r.ctx.currentTime,void 0===m.bufferSource.start?s._loop?m.bufferSource.noteGrainOn(0,l,86400):m.bufferSource.noteGrainOn(0,l,u):s._loop?m.bufferSource.start(0,l,86400):m.bufferSource.start(0,l,u),d!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),d)),t||setTimeout((function(){n._emit("play",s._id),n._loadQueue()}),0)};"running"===r.state&&"interrupted"!==r.ctx.state?g():(n._playLock=!0,n.once("resume",g),n._clearTimer(s._id))}else{var v=function(){m.currentTime=l,m.muted=s._muted||n._muted||r._muted||m.muted,m.volume=s._volume*r.volume(),m.playbackRate=s._rate;try{var i=m.play();if(i&&"undefined"!=typeof Promise&&(i instanceof Promise||"function"==typeof i.then)?(n._playLock=!0,f(),i.then((function(){n._playLock=!1,m._unlocked=!0,t?n._loadQueue():n._emit("play",s._id)})).catch((function(){n._playLock=!1,n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0}))):t||(n._playLock=!1,f(),n._emit("play",s._id)),m.playbackRate=s._rate,m.paused)return void n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),d):(n._endTimers[s._id]=function(){n._ended(s),m.removeEventListener("ended",n._endTimers[s._id],!1)},m.addEventListener("ended",n._endTimers[s._id],!1))}catch(e){n._emit("playerror",s._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=n._src,m.load());var b=window&&window.ejecta||!m.readyState&&r._navigator.isCocoonJS;if(m.readyState>=3||b)v();else{n._playLock=!0,n._state="loading";var y=function(){n._state="loaded",v(),m.removeEventListener(r._canPlayEvent,y,!1)};m.addEventListener(r._canPlayEvent,y,!1),n._clearTimer(s._id)}}return s._id}n._ended(s)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),i=0;i<n.length;i++){t._clearTimer(n[i]);var r=t._soundById(n[i]);if(r&&!r._paused&&(r._seek=t.seek(n[i]),r._rateSeek=0,r._paused=!0,t._stopFade(n[i]),r._node))if(t._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),t._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||t._emit("pause",r?r._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var i=n._getSoundIds(e),r=0;r<i.length;r++){n._clearTimer(i[r]);var a=n._soundById(i[r]);a&&(a._seek=a._start||0,a._rateSeek=0,a._paused=!0,a._ended=!0,n._stopFade(i[r]),a._node&&(n._webAudio?a._node.bufferSource&&(void 0===a._node.bufferSource.stop?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),n._cleanBuffer(a._node)):isNaN(a._node.duration)&&a._node.duration!==1/0||(a._node.currentTime=a._start||0,a._node.pause(),a._node.duration===1/0&&n._clearSound(a._node))),t||n._emit("stop",a._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var i=n._getSoundIds(t),a=0;a<i.length;a++){var o=n._soundById(i[a]);o&&(o._muted=e,o._interval&&n._stopFade(o._id),n._webAudio&&o._node?o._node.gain.setValueAtTime(e?0:o._volume,r.ctx.currentTime):o._node&&(o._node.muted=!!r._muted||e),n._emit("mute",o._id))}return n},volume:function(){var e,t,n,i=this,a=arguments;if(0===a.length)return i._volume;if(1===a.length||2===a.length&&void 0===a[1]){var o=i._getSoundIds(),s=o.indexOf(a[0]);s>=0?t=parseInt(a[0],10):e=parseFloat(a[0])}else a.length>=2&&(e=parseFloat(a[0]),t=parseInt(a[1],10));if(!(void 0!==e&&e>=0&&e<=1))return(n=t?i._soundById(t):i._sounds[0])?n._volume:0;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,a)}}),i;void 0===t&&(i._volume=e),t=i._getSoundIds(t);for(var c=0;c<t.length;c++)(n=i._soundById(t[c]))&&(n._volume=e,a[2]||i._stopFade(t[c]),i._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,r.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*r.volume()),i._emit("volume",n._id));return i},fade:function(e,t,n,i){var a=this;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"fade",action:function(){a.fade(e,t,n,i)}}),a;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),n=parseFloat(n),a.volume(e,i);for(var o=a._getSoundIds(i),s=0;s<o.length;s++){var c=a._soundById(o[s]);if(c){if(i||a._stopFade(o[s]),a._webAudio&&!c._muted){var l=r.ctx.currentTime,u=l+n/1e3;c._volume=e,c._node.gain.setValueAtTime(e,l),c._node.gain.linearRampToValueAtTime(t,u)}a._startFadeInterval(c,e,t,n,o[s],void 0===i)}}return a},_startFadeInterval:function(e,t,n,i,r,a){var o=this,s=t,c=n-t,l=Math.abs(c/.01),u=Math.max(4,l>0?i/l:i),d=Date.now();e._fadeTo=n,e._interval=setInterval((function(){var r=(Date.now()-d)/i;d=Date.now(),s+=c*r,s=Math.round(100*s)/100,s=c<0?Math.max(n,s):Math.min(n,s),o._webAudio?e._volume=s:o.volume(s,e._id,!0),a&&(o._volume=s),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,o.volume(n,e._id),o._emit("fade",e._id))}),u)},_stopFade:function(e){var t=this,n=t._soundById(e);return n&&n._interval&&(t._webAudio&&n._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(n._interval),n._interval=null,t.volume(n._fadeTo,e),n._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e,t,n,i=this,r=arguments;if(0===r.length)return i._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(n=i._soundById(parseInt(r[0],10)))&&n._loop;e=r[0],i._loop=e}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var a=i._getSoundIds(t),o=0;o<a.length;o++)(n=i._soundById(a[o]))&&(n._loop=e,i._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,i.playing(a[o])&&(i.pause(a[o],!0),i.play(a[o],!0)))));return i},rate:function(){var e,t,n,i=this,a=arguments;if(0===a.length)t=i._sounds[0]._id;else if(1===a.length){var o=i._getSoundIds(),s=o.indexOf(a[0]);s>=0?t=parseInt(a[0],10):e=parseFloat(a[0])}else 2===a.length&&(e=parseFloat(a[0]),t=parseInt(a[1],10));if("number"!=typeof e)return(n=i._soundById(t))?n._rate:i._rate;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,a)}}),i;void 0===t&&(i._rate=e),t=i._getSoundIds(t);for(var c=0;c<t.length;c++)if(n=i._soundById(t[c])){i.playing(t[c])&&(n._rateSeek=i.seek(t[c]),n._playStart=i._webAudio?r.ctx.currentTime:n._playStart),n._rate=e,i._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,r.ctx.currentTime):n._node&&(n._node.playbackRate=e);var l=i.seek(t[c]),u=(i._sprite[n._sprite][0]+i._sprite[n._sprite][1])/1e3-l,d=1e3*u/Math.abs(n._rate);!i._endTimers[t[c]]&&n._paused||(i._clearTimer(t[c]),i._endTimers[t[c]]=setTimeout(i._ended.bind(i,n),d)),i._emit("rate",n._id)}return i},seek:function(){var e,t,n=this,i=arguments;if(0===i.length)n._sounds.length&&(t=n._sounds[0]._id);else if(1===i.length){var a=n._getSoundIds(),o=a.indexOf(i[0]);o>=0?t=parseInt(i[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(i[0]))}else 2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if(void 0===t)return 0;if("number"==typeof e&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,i)}}),n;var s=n._soundById(t);if(s){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var c=n.playing(t)?r.ctx.currentTime-s._playStart:0,l=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(l+c*Math.abs(s._rate))}return s._node.currentTime}var u=n.playing(t);u&&n.pause(t,!0),s._seek=e,s._ended=!1,n._clearTimer(t),n._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=e);var d=function(){u&&n.play(t,!0),n._emit("seek",t)};if(u&&!n._webAudio){var p=function(){n._playLock?setTimeout(p,0):d()};setTimeout(p,0)}else d()}return n},playing:function(e){var t=this;if("number"==typeof e){var n=t._soundById(e);return!!n&&!n._paused}for(var i=0;i<t._sounds.length;i++)if(!t._sounds[i]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,i=t._soundById(e);return i&&(n=t._sprite[i._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++)t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(r._canPlayEvent,t[n]._loadFn,!1),t[n]._node.removeEventListener("ended",t[n]._endFn,!1),r._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);var i=r._howls.indexOf(e);i>=0&&r._howls.splice(i,1);var a=!0;for(n=0;n<r._howls.length;n++)if(r._howls[n]._src===e._src||e._src.indexOf(r._howls[n]._src)>=0){a=!1;break}return s&&a&&delete s[e._src],r.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,i){var r=this["_on"+e];return"function"==typeof t&&r.push(i?{id:n,fn:t,once:i}:{id:n,fn:t}),this},off:function(e,t,n){var i=this,r=i["_on"+e],a=0;if("number"==typeof t&&(n=t,t=null),t||n)for(a=0;a<r.length;a++){var o=n===r[a].id;if(t===r[a].fn&&o||!t&&o){r.splice(a,1);break}}else if(e)i["_on"+e]=[];else{var s=Object.keys(i);for(a=0;a<s.length;a++)0===s[a].indexOf("_on")&&Array.isArray(i[s[a]])&&(i[s[a]]=[])}return i},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var i=this,r=i["_on"+e],a=r.length-1;a>=0;a--)r[a].id&&r[a].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(i,r[a].fn),0),r[a].once&&i.off(e,r[a].fn,r[a].id));return i._loadQueue(e),i},_loadQueue:function(e){var t=this;if(t._queue.length>0){var n=t._queue[0];n.event===e&&(t._queue.shift(),t._loadQueue()),e||n.action()}return t},_ended:function(e){var t=this,n=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var i=!(!e._loop&&!t._sprite[n][2]);if(t._emit("end",e._id),!t._webAudio&&i&&t.stop(e._id,!0).play(e._id),t._webAudio&&i){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=r.ctx.currentTime;var a=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),a)}return t._webAudio&&!i&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),r._autoSuspend()),t._webAudio||i||t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var n=t._soundById(e);n&&n._node&&n._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new o(e)},_drain:function(){var e=this,t=e._pool,n=0,i=0;if(!(e._sounds.length<t)){for(i=0;i<e._sounds.length;i++)e._sounds[i]._ended&&n++;for(i=e._sounds.length-1;i>=0;i--){if(n<=t)return;e._sounds[i]._ended&&(e._webAudio&&e._sounds[i]._node&&e._sounds[i]._node.disconnect(0),e._sounds.splice(i,1),n--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=r.ctx.createBufferSource(),e._node.bufferSource.buffer=s[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,r.ctx.currentTime),this},_cleanBuffer:function(e){var t=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(r._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=r._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var o=function(e){this._parent=e,this.init()};o.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++r._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,n=r._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===r.ctx.createGain?r.ctx.createGainNode():r.ctx.createGain(),e._node.gain.setValueAtTime(n,r.ctx.currentTime),e._node.paused=!0,e._node.connect(r.masterGain)):r.noAudio||(e._node=r._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(r._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=!0===t._preload?"auto":t._preload,e._node.volume=n*r.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++r._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(r._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(10*e._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var s={},c=function(e){var t=e._src;if(s[t])return e._duration=s[t].duration,void d(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),i=new Uint8Array(n.length),r=0;r<n.length;++r)i[r]=n.charCodeAt(r);u(i.buffer,e)}else{var a=new XMLHttpRequest;a.open(e._xhr.method,t,!0),a.withCredentials=e._xhr.withCredentials,a.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(t){a.setRequestHeader(t,e._xhr.headers[t])})),a.onload=function(){var t=(a.status+"")[0];"0"===t||"2"===t||"3"===t?u(a.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+a.status+".")},a.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete s[t],e.load())},l(a)}},l=function(e){try{e.send()}catch(t){e.onerror()}},u=function(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},i=function(e){e&&t._sounds.length>0?(s[t._src]=e,d(t,e)):n()};"undefined"!=typeof Promise&&1===r.ctx.decodeAudioData.length?r.ctx.decodeAudioData(e).then(i).catch(n):r.ctx.decodeAudioData(e,i,n)},d=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},p=function(){if(r.usingWebAudio){try{"undefined"!=typeof AudioContext?r.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch(e){r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),t=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var i=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!i&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=void 0===r.ctx.createGain?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};void 0===(n=function(){return{Howler:r,Howl:a}}.apply(t,[]))||(e.exports=n),t.Howler=r,t.Howl=a,"undefined"!=typeof global?(global.HowlerGlobal=i,global.Howler=r,global.Howl=a,global.Sound=o):"undefined"!=typeof window&&(window.HowlerGlobal=i,window.Howler=r,window.Howl=a,window.Sound=o)}(),function(){"use strict";var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var n=t._howls.length-1;n>=0;n--)t._howls[n].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,n){var i=this;return i.ctx&&i.ctx.listener?(t="number"!=typeof t?i._pos[1]:t,n="number"!=typeof n?i._pos[2]:n,"number"!=typeof e?i._pos:(i._pos=[e,t,n],void 0!==i.ctx.listener.positionX?(i.ctx.listener.positionX.setTargetAtTime(i._pos[0],Howler.ctx.currentTime,.1),i.ctx.listener.positionY.setTargetAtTime(i._pos[1],Howler.ctx.currentTime,.1),i.ctx.listener.positionZ.setTargetAtTime(i._pos[2],Howler.ctx.currentTime,.1)):i.ctx.listener.setPosition(i._pos[0],i._pos[1],i._pos[2]),i)):i},HowlerGlobal.prototype.orientation=function(e,t,n,i,r,a){var o=this;if(!o.ctx||!o.ctx.listener)return o;var s=o._orientation;return t="number"!=typeof t?s[1]:t,n="number"!=typeof n?s[2]:n,i="number"!=typeof i?s[3]:i,r="number"!=typeof r?s[4]:r,a="number"!=typeof a?s[5]:a,"number"!=typeof e?s:(o._orientation=[e,t,n,i,r,a],void 0!==o.ctx.listener.forwardX?(o.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),o.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),o.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),o.ctx.listener.upX.setTargetAtTime(i,Howler.ctx.currentTime,.1),o.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,.1),o.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):o.ctx.listener.setOrientation(e,t,n,i,r,a),o)},Howl.prototype.init=(e=Howl.prototype.init,function(t){var n=this;return n._orientation=t.orientation||[1,0,0],n._stereo=t.stereo||null,n._pos=t.pos||null,n._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},n._onstereo=t.onstereo?[{fn:t.onstereo}]:[],n._onpos=t.onpos?[{fn:t.onpos}]:[],n._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,n){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"stereo",action:function(){i.stereo(e,n)}}),i;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof e)return i._stereo;i._stereo=e,i._pos=[e,0,0]}for(var a=i._getSoundIds(n),o=0;o<a.length;o++){var s=i._soundById(a[o]);if(s){if("number"!=typeof e)return s._stereo;s._stereo=e,s._pos=[e,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||t(s,r),"spatial"===r?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(e,0,0):s._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),i._emit("stereo",s._id)}}return i},Howl.prototype.pos=function(e,n,i,r){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"pos",action:function(){a.pos(e,n,i,r)}}),a;if(n="number"!=typeof n?0:n,i="number"!=typeof i?-.5:i,void 0===r){if("number"!=typeof e)return a._pos;a._pos=[e,n,i]}for(var o=a._getSoundIds(r),s=0;s<o.length;s++){var c=a._soundById(o[s]);if(c){if("number"!=typeof e)return c._pos;c._pos=[e,n,i],c._node&&(c._panner&&!c._panner.pan||t(c,"spatial"),void 0!==c._panner.positionX?(c._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):c._panner.setPosition(e,n,i)),a._emit("pos",c._id)}}return a},Howl.prototype.orientation=function(e,n,i,r){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"orientation",action:function(){a.orientation(e,n,i,r)}}),a;if(n="number"!=typeof n?a._orientation[1]:n,i="number"!=typeof i?a._orientation[2]:i,void 0===r){if("number"!=typeof e)return a._orientation;a._orientation=[e,n,i]}for(var o=a._getSoundIds(r),s=0;s<o.length;s++){var c=a._soundById(o[s]);if(c){if("number"!=typeof e)return c._orientation;c._orientation=[e,n,i],c._node&&(c._panner||(c._pos||(c._pos=a._pos||[0,0,-.5]),t(c,"spatial")),void 0!==c._panner.orientationX?(c._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):c._panner.setOrientation(e,n,i)),a._emit("orientation",c._id)}}return a},Howl.prototype.pannerAttr=function(){var e,n,i,r=this,a=arguments;if(!r._webAudio)return r;if(0===a.length)return r._pannerAttr;if(1===a.length){if("object"!=typeof a[0])return(i=r._soundById(parseInt(a[0],10)))?i._pannerAttr:r._pannerAttr;e=a[0],void 0===n&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),r._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:r._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:r._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:r._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:r._panningModel})}else 2===a.length&&(e=a[0],n=parseInt(a[1],10));for(var o=r._getSoundIds(n),s=0;s<o.length;s++)if(i=r._soundById(o[s])){var c=i._pannerAttr;c={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:c.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:c.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:c.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:c.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:c.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:c.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:c.panningModel};var l=i._panner;l?(l.coneInnerAngle=c.coneInnerAngle,l.coneOuterAngle=c.coneOuterAngle,l.coneOuterGain=c.coneOuterGain,l.distanceModel=c.distanceModel,l.maxDistance=c.maxDistance,l.refDistance=c.refDistance,l.rolloffFactor=c.rolloffFactor,l.panningModel=c.panningModel):(i._pos||(i._pos=r._pos||[0,0,-.5]),t(i,"spatial"))}return r},Sound.prototype.init=function(e){return function(){var t=this,n=t._parent;t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,e.call(this),t._stereo?n.stereo(t._stereo):t._pos&&n.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,n=t._parent;return t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,t._stereo?n.stereo(t._stereo):t._pos?n.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,n._refreshBuffer(t)),e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()},645:(e,t)=>{t.read=function(e,t,n,i,r){var a,o,s=8*r-i-1,c=(1<<s)-1,l=c>>1,u=-7,d=n?r-1:0,p=n?-1:1,h=e[t+d];for(d+=p,a=h&(1<<-u)-1,h>>=-u,u+=s;u>0;a=256*a+e[t+d],d+=p,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=i;u>0;o=256*o+e[t+d],d+=p,u-=8);if(0===a)a=1-l;else{if(a===c)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,i),a-=l}return(h?-1:1)*o*Math.pow(2,a-i)},t.write=function(e,t,n,i,r,a){var o,s,c,l=8*a-r-1,u=(1<<l)-1,d=u>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:a-1,f=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+d>=1?p/c:p*Math.pow(2,1-d))*c>=2&&(o++,c/=2),o+d>=u?(s=0,o=u):o+d>=1?(s=(t*c-1)*Math.pow(2,r),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,r),o=0));r>=8;e[n+h]=255&s,h+=f,s/=256,r-=8);for(o=o<<r|s,l+=r;l>0;e[n+h]=255&o,h+=f,o/=256,l-=8);e[n+h-f]|=128*m}},5281:function(e,t,n){var i;(function(){void 0===(i=function(){return s={},n=document,l=!1,u="active",a=6e4,r=!1,m={},f="__ceGUID",t={add:function(e,t,n){return e[f]=void 0,e[f]||(e[f]="ifvisible.object.event.identifier"),m[e[f]]||(m[e[f]]={}),m[e[f]][t]||(m[e[f]][t]=[]),m[e[f]][t].push(n)},remove:function(e,t,n){var i,r,a,o,s;if(n){if(e[f]&&m[e[f]]&&m[e[f]][t])for(r=a=0,o=(s=m[e[f]][t]).length;a<o;r=++a)if((i=s[r])===n)return m[e[f]][t].splice(r,1),i}else if(e[f]&&m[e[f]]&&m[e[f]][t])return delete m[e[f]][t]},fire:function(e,t,n){var i,r,a,o,s;if(e[f]&&m[e[f]]&&m[e[f]][t]){for(s=[],r=0,a=(o=m[e[f]][t]).length;r<a;r++)i=o[r],s.push(i(n||{}));return s}}},h=!1,e=function(e,t,n){return h||(h=e.addEventListener?function(e,t,n){return e.addEventListener(t,n,!1)}:e.attachEvent?function(e,t,n){return e.attachEvent("on"+t,n,!1)}:function(e,t,n){return e["on"+t]=n}),h(e,t,n)},o=function(){var e,t,i,r;for(void 0,r=3,i=n.createElement("div"),e=i.getElementsByTagName("i"),t=function(){return i.innerHTML="\x3c!--[if gt IE "+ ++r+"]><i></i><![endif]--\x3e",e[0]};t(););return r>4?r:undefined}(),i=!1,p=void 0,void 0!==n.hidden?(i="hidden",p="visibilitychange"):void 0!==n.mozHidden?(i="mozHidden",p="mozvisibilitychange"):void 0!==n.msHidden?(i="msHidden",p="msvisibilitychange"):void 0!==n.webkitHidden&&(i="webkitHidden",p="webkitvisibilitychange"),d=function(){var t,i;return t=!1,(i=function(){return clearTimeout(t),"active"!==u&&s.wakeup(),r=+new Date,t=setTimeout((function(){if("active"===u)return s.idle()}),a)})(),e(n,"mousemove",i),e(n,"keyup",i),e(n,"touchstart",i),e(window,"scroll",i),s.focus(i),s.wakeup(i)},c=function(){var t;return!!l||(!1===i?(t="blur",o<9&&(t="focusout"),e(window,t,(function(){return s.blur()})),e(window,"focus",(function(){return s.focus()}))):e(n,p,(function(){return n[i]?s.blur():s.focus()})),l=!0,d())},s={setIdleDuration:function(e){return a=1e3*e},getIdleDuration:function(){return a},getIdleInfo:function(){var e,t;return e=+new Date,t={},"idle"===u?(t.isIdle=!0,t.idleFor=e-r,t.timeLeft=0,t.timeLeftPer=100):(t.isIdle=!1,t.idleFor=e-r,t.timeLeft=r+a-e,t.timeLeftPer=(100-100*t.timeLeft/a).toFixed(2)),t},focus:function(e){return"function"==typeof e?this.on("focus",e):(u="active",t.fire(this,"focus"),t.fire(this,"wakeup"),t.fire(this,"statusChanged",{status:u})),this},blur:function(e){return"function"==typeof e?this.on("blur",e):(u="hidden",t.fire(this,"blur"),t.fire(this,"idle"),t.fire(this,"statusChanged",{status:u})),this},idle:function(e){return"function"==typeof e?this.on("idle",e):(u="idle",t.fire(this,"idle"),t.fire(this,"statusChanged",{status:u})),this},wakeup:function(e){return"function"==typeof e?this.on("wakeup",e):(u="active",t.fire(this,"wakeup"),t.fire(this,"statusChanged",{status:u})),this},on:function(e,n){return c(),t.add(this,e,n),this},off:function(e,n){return c(),t.remove(this,e,n),this},onEvery:function(e,t){var n,i;return c(),n=!1,t&&(i=setInterval((function(){if("active"===u&&!1===n)return t()}),1e3*e)),{stop:function(){return clearInterval(i)},pause:function(){return n=!0},resume:function(){return n=!1},code:i,callback:t}},now:function(e){return c(),u===(e||"active")}};var e,t,n,i,r,a,o,s,c,l,u,d,p,h,f,m}.call(t,n,t,e))||(e.exports=i)}).call(this)},5717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},5826:e=>{var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},6252:function(e,t,n){var i,r;void 0===(r="function"==typeof(i=function(){var e={mixin:function(e){e.plugins={},e.prototype.initializePlugins=function(e){var n,i,r,a=this,o=[];if(a.plugins={names:[],settings:{},requested:{},loaded:{}},t.isArray(e))for(n=0,i=e.length;n<i;n++)"string"==typeof e[n]?o.push(e[n]):(a.plugins.settings[e[n].name]=e[n].options,o.push(e[n].name));else if(e)for(r in e)e.hasOwnProperty(r)&&(a.plugins.settings[r]=e[r],o.push(r));for(;o.length;)a.require(o.shift())},e.prototype.loadPlugin=function(t){var n=this,i=n.plugins,r=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');i.requested[t]=!0,i.loaded[t]=r.fn.apply(n,[n.plugins.settings[t]||{}]),i.names.push(t)},e.prototype.require=function(e){var t=this,n=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(n.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return n.loaded[e]},e.define=function(t,n){e.plugins[t]={name:t,fn:n}}}},t={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}};return e})?i.call(t,n,t,e):i)||(e.exports=r)},9550:e=>{var t=1e3,n=60*t,i=60*n,r=24*i;function a(e,t,n,i){var r=t>=1.5*n;return Math.round(e/n)+" "+i+(r?"s":"")}e.exports=function(e,o){o=o||{};var s,c,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(a){var o=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*r;case"hours":case"hour":case"hrs":case"hr":case"h":return o*i;case"minutes":case"minute":case"mins":case"min":case"m":return o*n;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(e);if("number"===l&&isFinite(e))return o.long?(s=e,(c=Math.abs(s))>=r?a(s,c,r,"day"):c>=i?a(s,c,i,"hour"):c>=n?a(s,c,n,"minute"):c>=t?a(s,c,t,"second"):s+" ms"):function(e){var a=Math.abs(e);return a>=r?Math.round(e/r)+"d":a>=i?Math.round(e/i)+"h":a>=n?Math.round(e/n)+"m":a>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},8928:(e,t,n)=>{"use strict";n.d(t,{Z:()=>un});var i={},r="function"==typeof Map?new Map:null,a="swap",o="move",s="layoutStart",c="layoutEnd",l="layoutAbort",u="remove",d="hideStart",p="filter",h="sort",f="move",m="send",g="beforeSend",v="receive",b="beforeReceive",y="dragReleaseEnd",_="ontouchstart"in window,A=!!window.PointerEvent,w=!!window.navigator.msPointerEnabled;function k(){this._events={},this._queue=[],this._counter=0,this._clearOnEmit=!1}k.prototype.on=function(e,t){if(!this._events||!e||!t)return this;var n=this._events[e];return n||(n=this._events[e]=[]),n.push(t),this},k.prototype.off=function(e,t){if(!this._events||!e||!t)return this;var n,i=this._events[e];if(!i||!i.length)return this;for(;-1!==(n=i.indexOf(t));)i.splice(n,1);return this},k.prototype.clear=function(e){if(!this._events||!e)return this;var t=this._events[e];return t&&(t.length=0,delete this._events[e]),this},k.prototype.emit=function(e){if(!this._events||!e)return this._clearOnEmit=!1,this;var t=this._events[e];if(!t||!t.length)return this._clearOnEmit=!1,this;var n,i=this._queue,r=i.length,a=arguments.length-1;a>3&&((n=[]).push.apply(n,arguments),n.shift()),i.push.apply(i,t),this._clearOnEmit&&(t.length=0,this._clearOnEmit=!1),++this._counter;for(var o=r,s=i.length;o<s;o++)if(0===a?i[o]():1===a?i[o](arguments[1]):2===a?i[o](arguments[1],arguments[2]):3===a?i[o](arguments[1],arguments[2],arguments[3]):i[o].apply(null,n),!this._events)return this;return--this._counter,this._counter||(i.length=0),this},k.prototype.burst=function(){return this._events?(this._clearOnEmit=!0,this.emit.apply(this,arguments),this):this},k.prototype.countListeners=function(e){if(!this._events)return 0;var t=this._events[e];return t?t.length:0},k.prototype.destroy=function(){return this._events?(this._queue.length=this._counter=0,this._events=null,this):this};var S=A?"pointerout":w?"MSPointerOut":"";function C(e){S&&(this._dragger=e,this._timeout=null,this._outEvent=null,this._isActive=!1,this._addBehaviour=this._addBehaviour.bind(this),this._removeBehaviour=this._removeBehaviour.bind(this),this._onTimeout=this._onTimeout.bind(this),this._resetData=this._resetData.bind(this),this._onStart=this._onStart.bind(this),this._onOut=this._onOut.bind(this),this._dragger.on("start",this._onStart))}C.prototype._addBehaviour=function(){this._isActive||(this._isActive=!0,this._dragger.on("move",this._resetData),this._dragger.on("cancel",this._removeBehaviour),this._dragger.on("end",this._removeBehaviour),window.addEventListener(S,this._onOut))},C.prototype._removeBehaviour=function(){this._isActive&&(this._dragger.off("move",this._resetData),this._dragger.off("cancel",this._removeBehaviour),this._dragger.off("end",this._removeBehaviour),window.removeEventListener(S,this._onOut),this._resetData(),this._isActive=!1)},C.prototype._resetData=function(){window.clearTimeout(this._timeout),this._timeout=null,this._outEvent=null},C.prototype._onStart=function(e){"mouse"!==e.pointerType&&this._addBehaviour()},C.prototype._onOut=function(e){this._dragger._getTrackedTouch(e)&&(this._resetData(),this._outEvent=e,this._timeout=window.setTimeout(this._onTimeout,100))},C.prototype._onTimeout=function(){var e=this._outEvent;this._resetData(),this._dragger.isActive()&&this._dragger._onCancel(e)},C.prototype.destroy=function(){S&&(this._dragger.off("start",this._onStart),this._removeBehaviour())};var x=["","webkit","moz","ms","o","Webkit","Moz","MS","O"],E={};function T(e,t){var n=E[t]||"";if(n)return n;for(var i=t[0].toUpperCase()+t.slice(1),r=0;r<x.length;){if((n=x[r]?x[r]+i:t)in e)return E[t]=n,n;++r}return""}function P(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}return e}var R=window.navigator.userAgent.toLowerCase(),O=R.indexOf("edge")>-1,D=R.indexOf("trident")>-1,M=R.indexOf("firefox")>-1,I=R.indexOf("android")>-1,N=!!P()&&{passive:!0},L="touchAction",B=T(document.documentElement.style,L);function $(e,t){this._element=e,this._emitter=new k,this._isDestroyed=!1,this._cssProps={},this._touchAction="",this._isActive=!1,this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._onStart=this._onStart.bind(this),this._onMove=this._onMove.bind(this),this._onCancel=this._onCancel.bind(this),this._onEnd=this._onEnd.bind(this),this._edgeHack=null,(O||D)&&(A||w)&&(this._edgeHack=new C(this)),this.setCssProps(t),this._touchAction||this.setTouchAction("auto"),e.addEventListener("dragstart",$._preventDefault,!1),e.addEventListener($._inputEvents.start,this._onStart,N)}$._pointerEvents={start:"pointerdown",move:"pointermove",cancel:"pointercancel",end:"pointerup"},$._msPointerEvents={start:"MSPointerDown",move:"MSPointerMove",cancel:"MSPointerCancel",end:"MSPointerUp"},$._touchEvents={start:"touchstart",move:"touchmove",cancel:"touchcancel",end:"touchend"},$._mouseEvents={start:"mousedown",move:"mousemove",cancel:"",end:"mouseup"},$._inputEvents=_?$._touchEvents:A?$._pointerEvents:w?$._msPointerEvents:$._mouseEvents,$._emitter=new k,$._emitterEvents={start:"start",move:"move",end:"end",cancel:"cancel"},$._activeInstances=[],$._preventDefault=function(e){e.preventDefault&&!1!==e.cancelable&&e.preventDefault()},$._activateInstance=function(e){$._activeInstances.indexOf(e)>-1||($._activeInstances.push(e),$._emitter.on($._emitterEvents.move,e._onMove),$._emitter.on($._emitterEvents.cancel,e._onCancel),$._emitter.on($._emitterEvents.end,e._onEnd),1===$._activeInstances.length&&$._bindListeners())},$._deactivateInstance=function(e){var t=$._activeInstances.indexOf(e);-1!==t&&($._activeInstances.splice(t,1),$._emitter.off($._emitterEvents.move,e._onMove),$._emitter.off($._emitterEvents.cancel,e._onCancel),$._emitter.off($._emitterEvents.end,e._onEnd),$._activeInstances.length||$._unbindListeners())},$._bindListeners=function(){window.addEventListener($._inputEvents.move,$._onMove,N),window.addEventListener($._inputEvents.end,$._onEnd,N),$._inputEvents.cancel&&window.addEventListener($._inputEvents.cancel,$._onCancel,N)},$._unbindListeners=function(){window.removeEventListener($._inputEvents.move,$._onMove,N),window.removeEventListener($._inputEvents.end,$._onEnd,N),$._inputEvents.cancel&&window.removeEventListener($._inputEvents.cancel,$._onCancel,N)},$._getEventPointerId=function(e){return"number"==typeof e.pointerId?e.pointerId:e.changedTouches?e.changedTouches[0]?e.changedTouches[0].identifier:null:1},$._getTouchById=function(e,t){if("number"==typeof e.pointerId)return e.pointerId===t?e:null;if(e.changedTouches){for(var n=0;n<e.changedTouches.length;n++)if(e.changedTouches[n].identifier===t)return e.changedTouches[n];return null}return e},$._onMove=function(e){$._emitter.emit($._emitterEvents.move,e)},$._onCancel=function(e){$._emitter.emit($._emitterEvents.cancel,e)},$._onEnd=function(e){$._emitter.emit($._emitterEvents.end,e)},$.prototype._reset=function(){this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._isActive=!1,$._deactivateInstance(this)},$.prototype._createEvent=function(e,t){var n=this._getTrackedTouch(t);return{type:e,srcEvent:t,distance:this.getDistance(),deltaX:this.getDeltaX(),deltaY:this.getDeltaY(),deltaTime:e===$._emitterEvents.start?0:this.getDeltaTime(),isFirst:e===$._emitterEvents.start,isFinal:e===$._emitterEvents.end||e===$._emitterEvents.cancel,pointerType:t.pointerType||(t.touches?"touch":"mouse"),identifier:this._pointerId,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY,pageX:n.pageX,pageY:n.pageY,target:n.target}},$.prototype._emit=function(e,t){this._emitter.emit(e,this._createEvent(e,t))},$.prototype._getTrackedTouch=function(e){return null===this._pointerId?null:$._getTouchById(e,this._pointerId)},$.prototype._onStart=function(e){if(!this._isDestroyed&&null===this._pointerId&&(this._pointerId=$._getEventPointerId(e),null!==this._pointerId)){var t=this._getTrackedTouch(e);this._startX=this._currentX=t.clientX,this._startY=this._currentY=t.clientY,this._startTime=Date.now(),this._isActive=!0,this._emit($._emitterEvents.start,e),this._isActive&&$._activateInstance(this)}},$.prototype._onMove=function(e){var t=this._getTrackedTouch(e);t&&(this._currentX=t.clientX,this._currentY=t.clientY,this._emit($._emitterEvents.move,e))},$.prototype._onCancel=function(e){this._getTrackedTouch(e)&&(this._emit($._emitterEvents.cancel,e),this._reset())},$.prototype._onEnd=function(e){this._getTrackedTouch(e)&&(this._emit($._emitterEvents.end,e),this._reset())},$.prototype.isActive=function(){return this._isActive},$.prototype.setTouchAction=function(e){this._touchAction=e,B&&(this._cssProps[B]="",this._element.style[B]=e),_&&(this._element.removeEventListener($._touchEvents.start,$._preventDefault,!0),(this._element.style[B]!==e||M&&I)&&this._element.addEventListener($._touchEvents.start,$._preventDefault,!0))},$.prototype.setCssProps=function(e){if(e){var t,n,i=this._cssProps,r=this._element;for(t in i)r.style[t]=i[t],delete i[t];for(t in e)e[t]&&(t!==L?(n=T(r.style,t))&&(i[n]="",r.style[n]=e[t]):this.setTouchAction(e[t]))}},$.prototype.getDeltaX=function(){return this._currentX-this._startX},$.prototype.getDeltaY=function(){return this._currentY-this._startY},$.prototype.getDistance=function(){var e=this.getDeltaX(),t=this.getDeltaY();return Math.sqrt(e*e+t*t)},$.prototype.getDeltaTime=function(){return this._startTime?Date.now()-this._startTime:0},$.prototype.on=function(e,t){this._emitter.on(e,t)},$.prototype.off=function(e,t){this._emitter.off(e,t)},$.prototype.destroy=function(){if(!this._isDestroyed){var e=this._element;for(var t in this._edgeHack&&this._edgeHack.destroy(),this._reset(),this._emitter.destroy(),e.removeEventListener($._inputEvents.start,this._onStart,N),e.removeEventListener("dragstart",$._preventDefault,!1),e.removeEventListener($._touchEvents.start,$._preventDefault,!0),this._cssProps)e.style[t]=this._cssProps[t],delete this._cssProps[t];this._element=null,this._isDestroyed=!0}};var j=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return this.setTimeout((function(){e(Date.now())}),16.666666666666668)}).bind(window);function U(e){this._nextStep=null,this._lanes=[],this._stepQueue=[],this._stepCallbacks={},this._step=this._step.bind(this);for(var t=0;t<e;t++)this._lanes.push(new F)}function F(){this.queue=[],this.indices={},this.callbacks={}}U.prototype._step=function(e){var t,n,i,r,a,o,s=this._lanes,c=this._stepQueue,l=this._stepCallbacks;for(this._nextStep=null,t=0;t<s.length;t++){for(r=s[t].queue,a=s[t].callbacks,o=s[t].indices,n=0;n<r.length;n++)(i=r[n])&&(c.push(i),l[i]=a[i],delete a[i],delete o[i]);r.length=0}for(t=0;t<c.length;t++)l[i=c[t]]&&l[i](e),delete l[i];c.length=0},U.prototype.add=function(e,t,n){this._lanes[e].add(t,n),this._nextStep||(this._nextStep=j(this._step))},U.prototype.remove=function(e,t){this._lanes[e].remove(t)},F.prototype.add=function(e,t){var n=this.indices[e];void 0!==n&&(this.queue[n]=void 0),this.queue.push(e),this.callbacks[e]=t,this.indices[e]=this.queue.length-1},F.prototype.remove=function(e){var t=this.indices[e];void 0!==t&&(this.queue[t]=void 0,delete this.callbacks[e],delete this.indices[e])};var Z="layoutRead",z="layoutWrite",V="visibilityRead",q="visibilityWrite",W="dragStartRead",H="dragStartWrite",Q="dragMoveRead",X="dragMoveWrite",Y="dragScrollRead",G="dragScrollWrite",J="dragSortRead",K="placeholderLayoutRead",ee="placeholderLayoutWrite",te="placeholderResizeWrite",ne="autoScrollRead",ie="autoScrollWrite",re="debounceRead",ae=new U(3);function oe(e){ae.remove(0,Z+e),ae.remove(2,z+e)}function se(e){ae.remove(0,V+e),ae.remove(2,q+e)}function ce(e){ae.remove(0,W+e),ae.remove(2,H+e)}function le(e){ae.remove(0,Q+e),ae.remove(2,X+e)}function ue(e){ae.remove(0,Y+e),ae.remove(2,G+e)}function de(e,t){ae.add(1,J+e,t)}function pe(e){ae.remove(0,K+e),ae.remove(2,ee+e)}function he(e,t){ae.add(0,ne,e),ae.add(2,ie,t)}function fe(e){return"function"==typeof e}var me="function"==typeof WeakMap?new WeakMap:null;function ge(e,t){var n=me&&me.get(e);return n||(n=window.getComputedStyle(e,null),me&&me.set(e,n)),n.getPropertyValue(t)}function ve(e,t){return parseFloat(ge(e,t))||0}var be,ye=document.documentElement,_e=document.body,Ae={value:0,offset:0};function we(e){return e===window||e===ye||e===_e?window:e}function ke(e){return e===window?e.pageXOffset:e.scrollLeft}function Se(e){return e===window?e.pageYOffset:e.scrollTop}function Ce(e){return e===window?ye.scrollWidth-ye.clientWidth:e.scrollWidth-e.clientWidth}function xe(e){return e===window?ye.scrollHeight-ye.clientHeight:e.scrollHeight-e.clientHeight}function Ee(e,t){if(t=t||{},e===window)t.width=ye.clientWidth,t.height=ye.clientHeight,t.left=0,t.right=t.width,t.top=0,t.bottom=t.height;else{var n=e.getBoundingClientRect(),i=e.clientLeft||ve(e,"border-left-width"),r=e.clientTop||ve(e,"border-top-width");t.width=e.clientWidth,t.height=e.clientHeight,t.left=n.left+i,t.right=t.left+t.width,t.top=n.top+r,t.bottom=t.top+t.height}return t}function Te(e){return e._drag._getGrid()._settings.dragAutoScroll}function Pe(e){if(e._drag&&e._isActive){var t=e._drag;t._scrollDiffX=t._scrollDiffY=0,e._setTranslate(t._left,t._top)}}function Re(e,t,n,i){return Ae.value=Math.min(i/2,e),Ae.offset=Math.max(0,n+2*Ae.value+i*t-i)/2,Ae}function Oe(){this.reset()}function De(){this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0}function Me(e,t){this.pool=[],this.createItem=e,this.releaseItem=t}function Ie(e,t){var n=function(e,t){return function(e,t){return!(e.left+e.width<=t.left||t.left+t.width<=e.left||e.top+e.height<=t.top||t.top+t.height<=e.top)}(e,t)?(Math.min(e.left+e.width,t.left+t.width)-Math.max(e.left,t.left))*(Math.min(e.top+e.height,t.top+t.height)-Math.max(e.top,t.top)):0}(e,t);return n?n/(Math.min(e.width,t.width)*Math.min(e.height,t.height))*100:0}Oe.prototype.reset=function(){this.isActive&&this.onStop(),this.item=null,this.element=null,this.isActive=!1,this.isEnding=!1,this.direction=null,this.value=null,this.maxValue=0,this.threshold=0,this.distance=0,this.speed=0,this.duration=0,this.action=null},Oe.prototype.hasReachedEnd=function(){return 4&this.direction?this.value>=this.maxValue:this.value<=0},Oe.prototype.computeCurrentScrollValue=function(){return null===this.value?1&this.direction?ke(this.element):Se(this.element):Math.max(0,Math.min(this.value,this.maxValue))},Oe.prototype.computeNextScrollValue=function(e){var t=this.speed*(e/1e3),n=4&this.direction?this.value+t:this.value-t;return Math.max(0,Math.min(n,this.maxValue))},Oe.prototype.computeSpeed=(be={direction:null,threshold:0,distance:0,value:0,maxValue:0,deltaTime:0,duration:0,isEnding:!1},function(e){var t=this.item,n=Te(t).speed;return fe(n)?(be.direction=this.direction,be.threshold=this.threshold,be.distance=this.distance,be.value=this.value,be.maxValue=this.maxValue,be.duration=this.duration,be.speed=this.speed,be.deltaTime=e,be.isEnding=this.isEnding,n(t,this.element,be)):n}),Oe.prototype.tick=function(e){return this.isActive||(this.isActive=!0,this.onStart()),this.value=this.computeCurrentScrollValue(),this.speed=this.computeSpeed(e),this.value=this.computeNextScrollValue(e),this.duration+=e,this.value},Oe.prototype.onStart=function(){var e=this.item,t=Te(e).onStart;fe(t)&&t(e,this.element,this.direction)},Oe.prototype.onStop=function(){var e=this.item,t=Te(e).onStop;fe(t)&&t(e,this.element,this.direction),e._drag&&e._drag.sort()},De.prototype.reset=function(){this.requestX&&(this.requestX.action=null),this.requestY&&(this.requestY.action=null),this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0},De.prototype.addRequest=function(e){1&e.direction?(this.removeRequest(this.requestX),this.requestX=e):(this.removeRequest(this.requestY),this.requestY=e),e.action=this},De.prototype.removeRequest=function(e){e&&(this.requestX===e?(this.requestX=null,e.action=null):this.requestY===e&&(this.requestY=null,e.action=null))},De.prototype.computeScrollValues=function(){this.scrollLeft=this.requestX?this.requestX.value:ke(this.element),this.scrollTop=this.requestY?this.requestY.value:Se(this.element)},De.prototype.scroll=function(){var e=this.element;e&&(e.scrollTo?e.scrollTo(this.scrollLeft,this.scrollTop):(e.scrollLeft=this.scrollLeft,e.scrollTop=this.scrollTop))},Me.prototype.pick=function(){return this.pool.pop()||this.createItem()},Me.prototype.release=function(e){this.releaseItem(e),-1===this.pool.indexOf(e)&&this.pool.push(e)},Me.prototype.reset=function(){this.pool.length=0};var Ne={width:0,height:0,left:0,right:0,top:0,bottom:0},Le={width:0,height:0,left:0,right:0,top:0,bottom:0};function Be(){this._isDestroyed=!1,this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,this._items=[],this._actions=[],this._requests={},this._requests[1]={},this._requests[2]={},this._requestOverlapCheck={},this._dragPositions={},this._dragDirections={},this._overlapCheckInterval=150,this._requestPool=new Me((function(){return new Oe}),(function(e){e.reset()})),this._actionPool=new Me((function(){return new De}),(function(e){e.reset()})),this._readTick=this._readTick.bind(this),this._writeTick=this._writeTick.bind(this)}Be.AXIS_X=1,Be.AXIS_Y=2,Be.FORWARD=4,Be.BACKWARD=8,Be.LEFT=9,Be.RIGHT=5,Be.UP=10,Be.DOWN=6,Be.smoothSpeed=function(e,t,n){return function(i,r,a){var o=0;if(!a.isEnding)if(a.threshold>0){var s=a.threshold-Math.max(0,a.distance);o=e/a.threshold*s}else o=e;var c=a.speed,l=o;return c===o?l:c<o?(l=c+t*(a.deltaTime/1e3),Math.min(o,l)):(l=c-n*(a.deltaTime/1e3),Math.max(o,l))}},Be.pointerHandle=function(e){var t={left:0,top:0,width:0,height:0},n=e||1;return function(e,i,r,a,o,s,c){return t.left=s-.5*n,t.top=c-.5*n,t.width=n,t.height=n,t}},Be.prototype._readTick=function(e){this._isDestroyed||(e&&this._tickTime?(this._tickDeltaTime=e-this._tickTime,this._tickTime=e,this._updateRequests(),this._updateActions()):(this._tickTime=e,this._tickDeltaTime=0))},Be.prototype._writeTick=function(){this._isDestroyed||(this._applyActions(),he(this._readTick,this._writeTick))},Be.prototype._startTicking=function(){this._isTicking=!0,he(this._readTick,this._writeTick)},Be.prototype._stopTicking=function(){this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,ae.remove(0,ne),ae.remove(2,ie)},Be.prototype._getItemHandleRect=function(e,t,n){var i=e._drag;if(t){var r=i._dragMoveEvent||i._dragStartEvent,a=t(e,i._clientX,i._clientY,e._width,e._height,r.clientX,r.clientY);n.left=a.left,n.top=a.top,n.width=a.width,n.height=a.height}else n.left=i._clientX,n.top=i._clientY,n.width=e._width,n.height=e._height;return n.right=n.left+n.width,n.bottom=n.top+n.height,n},Be.prototype._requestItemScroll=function(e,t,n,i,r,a,o){var s=this._requests[t],c=s[e._id];c?c.element===n&&c.direction===i||c.reset():c=this._requestPool.pick(),c.item=e,c.element=n,c.direction=i,c.threshold=r,c.distance=a,c.maxValue=o,s[e._id]=c},Be.prototype._cancelItemScroll=function(e,t){var n=this._requests[t],i=n[e._id];i&&(i.action&&i.action.removeRequest(i),this._requestPool.release(i),delete n[e._id])},Be.prototype._checkItemOverlap=function(e,t,n){var i=Te(e),r=fe(i.targets)?i.targets(e):i.targets,a=i.threshold,o=i.safeZone;if(!r||!r.length)return t&&this._cancelItemScroll(e,1),void(n&&this._cancelItemScroll(e,2));var s=this._dragDirections[e._id],c=s[0],l=s[1];if(!c&&!l)return t&&this._cancelItemScroll(e,1),void(n&&this._cancelItemScroll(e,2));for(var u=this._getItemHandleRect(e,i.handle,Ne),d=Le,p=null,h=null,f=!0,m=!0,g=0,v=0,b=null,y=null,_=0,A=0,w=0,k=null,S=-1/0,C=0,x=0,E=null,T=0,P=0,R=null,O=-1/0,D=0,M=0,I=null,N=0,L=0,B=0;B<r.length;B++)p=r[B],f=t&&c&&2!==p.axis,m=n&&l&&1!==p.axis,v=p.priority||0,(!f||v<S)&&(!m||v<O)||(h=we(p.element||p),A=f?Ce(h):-1,w=m?xe(h):-1,(A||w)&&((g=Ie(u,d=Ee(h,d)))<=0||(f&&v>=S&&A>0&&(v>S||g>x)&&(y=null,b=Re("number"==typeof p.threshold?p.threshold:a,o,u.width,d.width),5===c?(_=d.right+b.offset-u.right)<=b.value&&ke(h)<A&&(y=5):9===c&&(_=u.left-(d.left-b.offset))<=b.value&&ke(h)>0&&(y=9),null!==y&&(k=h,S=v,C=b.value,x=g,E=y,T=_,P=A)),m&&v>=O&&w>0&&(v>O||g>M)&&(y=null,b=Re("number"==typeof p.threshold?p.threshold:a,o,u.height,d.height),6===l?(_=d.bottom+b.offset-u.bottom)<=b.value&&Se(h)<w&&(y=6):10===l&&(_=u.top-(d.top-b.offset))<=b.value&&Se(h)>0&&(y=10),null!==y&&(R=h,O=v,D=b.value,M=g,I=y,N=_,L=w)))));t&&(k?this._requestItemScroll(e,1,k,E,C,T,P):this._cancelItemScroll(e,1)),n&&(R?this._requestItemScroll(e,2,R,I,D,N,L):this._cancelItemScroll(e,2))},Be.prototype._updateScrollRequest=function(e){for(var t=e.item,n=Te(t),i=fe(n.targets)?n.targets(t):n.targets,r=i&&i.length||0,a=n.threshold,o=n.safeZone,s=this._getItemHandleRect(t,n.handle,Ne),c=Le,l=null,u=null,d=!1,p=null,h=null,f=null,m=null,g=null,v=0;v<r;v++)if((u=we((l=i[v]).element||l))===e.element){if(d=!!(1&e.direction)){if(2===l.axis)continue}else if(1===l.axis)continue;if((m=d?Ce(u):xe(u))<=0)break;if(Ie(s,c=Ee(u,c))<=0)break;if(p=Re("number"==typeof l.threshold?l.threshold:a,o,d?s.width:s.height,d?c.width:c.height),(h=9===e.direction?s.left-(c.left-p.offset):5===e.direction?c.right+p.offset-s.right:10===e.direction?s.top-(c.top-p.offset):c.bottom+p.offset-s.bottom)>p.value)break;if(f=d?ke(u):Se(u),g=4&e.direction?f>=m:f<=0)break;return e.maxValue=m,e.threshold=p.value,e.distance=h,e.isEnding=!1,!0}return!0===n.smoothStop&&e.speed>0?(null===g&&(g=e.hasReachedEnd()),e.isEnding=!g):e.isEnding=!1,e.isEnding},Be.prototype._updateRequests=function(){for(var e,t,n,i,r,a,o,s=this._items,c=this._requests[1],l=this._requests[2],u=0;u<s.length;u++)e=s[u],r=(i=this._requestOverlapCheck[e._id])>0&&this._tickTime-i>this._overlapCheckInterval,a=!0,(t=c[e._id])&&t.isActive&&(a=!this._updateScrollRequest(t))&&(r=!0,this._cancelItemScroll(e,1)),o=!0,(n=l[e._id])&&n.isActive&&(o=!this._updateScrollRequest(n))&&(r=!0,this._cancelItemScroll(e,2)),r&&(this._requestOverlapCheck[e._id]=0,this._checkItemOverlap(e,a,o))},Be.prototype._requestAction=function(e,t){for(var n=this._actions,i=1===t,r=null,a=0;a<n.length;a++){if(r=n[a],e.element===r.element){if(i?r.requestX:r.requestY)return void this._cancelItemScroll(e.item,t);break}r=null}r||(r=this._actionPool.pick()),r.element=e.element,r.addRequest(e),e.tick(this._tickDeltaTime),n.push(r)},Be.prototype._updateActions=function(){var e,t,n,i,r=this._items,a=this._requests,o=this._actions;for(i=0;i<r.length;i++)e=r[i]._id,t=a[1][e],n=a[2][e],t&&this._requestAction(t,1),n&&this._requestAction(n,2);for(i=0;i<o.length;i++)o[i].computeScrollValues()},Be.prototype._applyActions=function(){var e,t=this._actions,n=this._items;if(t.length){for(e=0;e<t.length;e++)t[e].scroll(),this._actionPool.release(t[e]);for(t.length=0,e=0;e<n.length;e++)(i=n[e])._drag&&i._drag._prepareScroll();var i;for(e=0;e<n.length;e++)Pe(n[e])}},Be.prototype._updateDragDirection=function(e){var t=this._dragPositions[e._id],n=this._dragDirections[e._id],i=e._drag._left,r=e._drag._top;if(t.length){var a=t[0],o=t[1];n[0]=i>a?5:i<a?9:n[0]||0,n[1]=r>o?6:r<o?10:n[1]||0}t[0]=i,t[1]=r},Be.prototype.addItem=function(e){this._isDestroyed||-1===this._items.indexOf(e)&&(this._items.push(e),this._requestOverlapCheck[e._id]=this._tickTime,this._dragDirections[e._id]=[0,0],this._dragPositions[e._id]=[],this._isTicking||this._startTicking())},Be.prototype.updateItem=function(e){this._isDestroyed||this._dragDirections[e._id]&&(this._updateDragDirection(e),this._requestOverlapCheck[e._id]||(this._requestOverlapCheck[e._id]=this._tickTime))},Be.prototype.removeItem=function(e){if(!this._isDestroyed){var t=this._items.indexOf(e);if(-1!==t){var n=e._id;this._requests[1][n]&&(this._cancelItemScroll(e,1),delete this._requests[1][n]),this._requests[2][n]&&(this._cancelItemScroll(e,2),delete this._requests[2][n]),delete this._requestOverlapCheck[n],delete this._dragPositions[n],delete this._dragDirections[n],this._items.splice(t,1),this._isTicking&&!this._items.length&&this._stopTicking()}}},Be.prototype.isItemScrollingX=function(e){var t=this._requests[1][e._id];return!(!t||!t.isActive)},Be.prototype.isItemScrollingY=function(e){var t=this._requests[2][e._id];return!(!t||!t.isActive)},Be.prototype.isItemScrolling=function(e){return this.isItemScrollingX(e)||this.isItemScrollingY(e)},Be.prototype.destroy=function(){if(!this._isDestroyed){for(var e=this._items.slice(0),t=0;t<e.length;t++)this.removeItem(e[t]);this._actions.length=0,this._requestPool.reset(),this._actionPool.reset(),this._isDestroyed=!0}};var $e=window.Element.prototype,je=$e.matches||$e.matchesSelector||$e.webkitMatchesSelector||$e.mozMatchesSelector||$e.msMatchesSelector||$e.oMatchesSelector||function(){return!1};function Ue(e,t){return je.call(e,t)}function Fe(e,t){t&&(e.classList?e.classList.add(t):Ue(e,"."+t)||(e.className+=" "+t))}var Ze=[];function ze(e,t,n){var i="number"==typeof n?n:-1;i<0&&(i=e.length-i+1),e.splice.apply(e,Ze.concat(i,0,t)),Ze.length=0}function Ve(e,t,n){var i=Math.max(0,e.length-1+(n||0));return t>i?i:t<0?Math.max(i+t+1,0):t}function qe(e,t,n){if(!(e.length<2)){var i=Ve(e,t),r=Ve(e,n);i!==r&&e.splice(r,0,e.splice(i,1)[0])}}function We(e,t,n){if(!(e.length<2)){var i,r=Ve(e,t),a=Ve(e,n);r!==a&&(i=e[r],e[r]=e[a],e[a]=i)}}var He=T(document.documentElement.style,"transform")||"transform",Qe=/([A-Z])/g,Xe=/^(webkit-|moz-|ms-|o-)/,Ye=/^(-m-s-)/;function Ge(e){var t=e.replace(Qe,"-$1").toLowerCase();return(t=t.replace(Xe,"-$1")).replace(Ye,"-ms-")}var Je=Ge(He);function Ke(e){var t=ge(e,Je);if(!t||"none"===t)return!1;var n=ge(e,"display");return"inline"!==n&&"none"!==n}function et(e){for(var t=document,n=e||t;n&&n!==t&&"static"===ge(n,"position")&&!Ke(n);)n=n.parentElement||t;return n}var tt={},nt={},it={};function rt(e,t){var n,i=t||{};return i.left=0,i.top=0,e===document||(i.left=window.pageXOffset||0,i.top=window.pageYOffset||0,e.self===window.self||(n=e.getBoundingClientRect(),i.left+=n.left,i.top+=n.top,i.left+=ve(e,"border-left-width"),i.top+=ve(e,"border-top-width"))),i}function at(e,t,n){return it.left=0,it.top=0,e===t||n&&(e=et(e))===(t=et(t))||(rt(e,tt),rt(t,nt),it.left=nt.left-tt.left,it.top=nt.top-tt.top),it}function ot(e){return"auto"===e||"scroll"===e||"overlay"===e}function st(e){return ot(ge(e,"overflow"))||ot(ge(e,"overflow-x"))||ot(ge(e,"overflow-y"))}function ct(e,t){for(t=t||[];e&&e!==document;)e.getRootNode&&e instanceof DocumentFragment?e=e.getRootNode().host:(st(e)&&t.push(e),e=e.parentNode);return t.push(window),t}var lt={},ut=/^matrix3d/,dt=/([^,]*,){4}/,pt=/([^,]*,){12}/,ht=/[^,]*,/;function ft(e){lt.x=0,lt.y=0;var t=ge(e,Je);if(!t||"none"===t)return lt;var n=ut.test(t),i=t.replace(n?pt:dt,""),r=i.replace(ht,"");return lt.x=parseFloat(i)||0,lt.y=parseFloat(r)||0,lt}function mt(e,t){t&&(e.classList?e.classList.remove(t):Ue(e,"."+t)&&(e.className=(" "+e.className+" ").replace(" "+t+" "," ").trim()))}var gt,vt,bt,yt,_t=/^(iPad|iPhone|iPod)/.test(window.navigator.platform)||/^Mac/.test(window.navigator.platform)&&window.navigator.maxTouchPoints>1,At=!!P()&&{passive:!0};function wt(e){var t=e._element,n=e.getGrid(),i=n._settings;this._item=e,this._gridId=n._id,this._isDestroyed=!1,this._isMigrating=!1,this._startPredicate=fe(i.dragStartPredicate)?i.dragStartPredicate:wt.defaultStartPredicate,this._startPredicateState=0,this._startPredicateResult=void 0,this._isSortNeeded=!1,this._sortTimer=void 0,this._blockedSortIndex=null,this._sortX1=0,this._sortX2=0,this._sortY1=0,this._sortY2=0,this._reset(),this._preStartCheck=this._preStartCheck.bind(this),this._preEndCheck=this._preEndCheck.bind(this),this._onScroll=this._onScroll.bind(this),this._prepareStart=this._prepareStart.bind(this),this._applyStart=this._applyStart.bind(this),this._prepareMove=this._prepareMove.bind(this),this._applyMove=this._applyMove.bind(this),this._prepareScroll=this._prepareScroll.bind(this),this._applyScroll=this._applyScroll.bind(this),this._handleSort=this._handleSort.bind(this),this._handleSortDelayed=this._handleSortDelayed.bind(this),this._handle=i.dragHandle&&t.querySelector(i.dragHandle)||t,this._dragger=new $(this._handle,i.dragCssProps),this._dragger.on("start",this._preStartCheck),this._dragger.on("move",this._preStartCheck),this._dragger.on("cancel",this._preEndCheck),this._dragger.on("end",this._preEndCheck)}function kt(e,t){var n,i,r={};if(Array.isArray(t))for(i=0;i<t.length;i++)r[n=t[i]]=ge(e,Ge(n));else for(n in t)r[n]=ge(e,Ge(n));return r}wt.autoScroller=new Be,wt.defaultStartPredicate=function(e,t,n){var i=e._drag;if(t.isFirst&&t.srcEvent.button)return!1;if(!_t&&t.isFirst&&!0===t.srcEvent.isTrusted&&!1===t.srcEvent.defaultPrevented&&!1===t.srcEvent.cancelable)return!1;if(!t.isFinal){var r=i._startPredicateData;if(!r){var a=n||i._getGrid()._settings.dragStartPredicate||{};i._startPredicateData=r={distance:Math.max(a.distance,0)||0,delay:Math.max(a.delay,0)||0}}return r.delay&&(r.event=t,r.delayTimer||(r.delayTimer=window.setTimeout((function(){r.delay=0,i._resolveStartPredicate(r.event)&&(i._forceResolveStartPredicate(r.event),i._resetStartPredicate())}),r.delay))),i._resolveStartPredicate(t)}i._finishStartPredicate(t)},wt.defaultSortPredicate=(gt={},vt={},bt={},yt=[],function(e,t){var n=e._drag,i=n._getGrid(),r=t&&"number"==typeof t.threshold?t.threshold:50,s=t&&t.action===a?a:o,c=t&&t.migrateAction===a?a:o;r=Math.min(Math.max(r,1),100),gt.width=e._width,gt.height=e._height,gt.left=n._clientX,gt.top=n._clientY;var l=function(e,t,n){var i,r,a,o,s,c,l,u,d,p,h=null,f=t._settings.dragSort,m=-1;if(!0===f?(yt[0]=t,r=yt):fe(f)&&(r=f.call(t,e)),!r||!Array.isArray(r)||!r.length)return h;for(p=0;p<r.length;p++)if(!(a=r[p])._isDestroyed){for(a._updateBoundingRect(),c=Math.max(0,a._left),l=Math.max(0,a._top),u=Math.min(window.innerWidth,a._right),d=Math.min(window.innerHeight,a._bottom),o=a._element.parentNode;o&&o!==document&&o!==document.documentElement&&o!==document.body;)if(o.getRootNode&&o instanceof DocumentFragment)o=o.getRootNode().host;else{if("visible"!==ge(o,"overflow")&&(s=o.getBoundingClientRect(),c=Math.max(c,s.left),l=Math.max(l,s.top),u=Math.min(u,s.right),d=Math.min(d,s.bottom)),"fixed"===ge(o,"position"))break;o=o.parentNode}c>=u||l>=d||(vt.left=c,vt.top=l,vt.width=u-c,vt.height=d-l,(i=Ie(gt,vt))>n&&i>m&&(m=i,h=a))}return yt.length=0,h}(e,i,r);if(!l)return null;var u,d,p,h=e.getGrid()!==l,f=0,m=0,g=0,v=-1,b=!1;for(l===i?(gt.left=n._gridX+e._marginLeft,gt.top=n._gridY+e._marginTop):(l._updateBorders(1,0,1,0),f=l._left+l._borderLeft,m=l._top+l._borderTop),p=0;p<l._items.length;p++)(u=l._items[p])._isActive&&u!==e&&(b=!0,vt.width=u._width,vt.height=u._height,vt.left=u._left+u._marginLeft+f,vt.top=u._top+u._marginTop+m,(d=Ie(gt,vt))>g&&(v=p,g=d));return h&&g<r&&(v=b?v:0,g=r),g>=r?(bt.grid=l,bt.index=v,bt.action=h?c:s,bt):null}),wt.prototype.stop=function(){if(this._isActive)if(this._isMigrating)this._finishMigration();else{var e=this._item,t=e._id;if(wt.autoScroller.removeItem(e),ce(t),le(t),ue(t),this._cancelSort(),this._isStarted){this._unbindScrollListeners();var n=e._element,i=this._getGrid(),r=i._settings.itemDraggingClass;n.parentNode!==i._element&&(i._element.appendChild(n),e._setTranslate(this._gridX,this._gridY),r&&n.clientWidth),mt(n,r)}this._reset()}},wt.prototype.sort=function(e){var t=this._item;this._isActive&&t._isActive&&this._dragMoveEvent&&(!0===e?this._handleSort():de(t._id,this._handleSort))},wt.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._dragger.destroy(),wt.autoScroller.removeItem(this._item),this._isDestroyed=!0)},wt.prototype._getGrid=function(){return i[this._gridId]||null},wt.prototype._reset=function(){this._isActive=!1,this._isStarted=!1,this._container=null,this._containingBlock=null,this._dragStartEvent=null,this._dragMoveEvent=null,this._dragPrevMoveEvent=null,this._scrollEvent=null,this._scrollers=[],this._left=0,this._top=0,this._gridX=0,this._gridY=0,this._clientX=0,this._clientY=0,this._scrollDiffX=0,this._scrollDiffY=0,this._moveDiffX=0,this._moveDiffY=0,this._containerDiffX=0,this._containerDiffY=0},wt.prototype._bindScrollListeners=function(){var e,t,n=this._getGrid()._element,i=this._container,r=this._scrollers;if(r.length=0,ct(this._item._element.parentNode,r),i!==n)for(ct(n,e=[]),t=0;t<e.length;t++)r.indexOf(e[t])<0&&r.push(e[t]);for(t=0;t<r.length;t++)r[t].addEventListener("scroll",this._onScroll,At)},wt.prototype._unbindScrollListeners=function(){var e,t=this._scrollers;for(e=0;e<t.length;e++)t[e].removeEventListener("scroll",this._onScroll,At);t.length=0},wt.prototype._resolveStartPredicate=function(e){var t=this._startPredicateData;if(!(e.distance<t.distance||t.delay))return this._resetStartPredicate(),!0},wt.prototype._forceResolveStartPredicate=function(e){this._isDestroyed||1!==this._startPredicateState||(this._startPredicateState=2,this._onStart(e))},wt.prototype._finishStartPredicate=function(e){var t=this._item._element,n=Math.abs(e.deltaX)<2&&Math.abs(e.deltaY)<2&&e.deltaTime<200;this._resetStartPredicate(),n&&function(e){if("a"===e.tagName.toLowerCase()){var t=e.getAttribute("href");if(t){var n=e.getAttribute("target");n&&"_self"!==n?window.open(t,n):window.location.href=t}}}(t)},wt.prototype._resetHeuristics=function(e,t){this._blockedSortIndex=null,this._sortX1=this._sortX2=e,this._sortY1=this._sortY2=t},wt.prototype._checkHeuristics=function(e,t){var n=this._getGrid()._settings.dragSortHeuristics,i=n.minDragDistance;if(i<=0)return this._blockedSortIndex=null,!0;var r=e-this._sortX2,a=t-this._sortY2,o=i>3&&n.minBounceBackAngle>0;if(o||(this._blockedSortIndex=null),Math.abs(r)>i||Math.abs(a)>i){if(o){var s=Math.atan2(r,a),c=Math.atan2(this._sortX2-this._sortX1,this._sortY2-this._sortY1),l=Math.atan2(Math.sin(s-c),Math.cos(s-c));Math.abs(l)>n.minBounceBackAngle&&(this._blockedSortIndex=null)}return this._sortX1=this._sortX2,this._sortY1=this._sortY2,this._sortX2=e,this._sortY2=t,!0}return!1},wt.prototype._resetStartPredicate=function(){var e=this._startPredicateData;e&&(e.delayTimer&&(e.delayTimer=window.clearTimeout(e.delayTimer)),this._startPredicateData=null)},wt.prototype._handleSort=function(){if(this._isActive){var e=this._getGrid()._settings;if(!e.dragSort||!e.dragAutoScroll.sortDuringScroll&&wt.autoScroller.isItemScrolling(this._item))return this._sortX1=this._sortX2=this._gridX,this._sortY1=this._sortY2=this._gridY,this._isSortNeeded=!0,void(void 0!==this._sortTimer&&(this._sortTimer=window.clearTimeout(this._sortTimer)));var t=this._checkHeuristics(this._gridX,this._gridY);if(this._isSortNeeded||t){var n=e.dragSortHeuristics.sortInterval;n<=0||this._isSortNeeded?(this._isSortNeeded=!1,void 0!==this._sortTimer&&(this._sortTimer=window.clearTimeout(this._sortTimer)),this._checkOverlap()):void 0===this._sortTimer&&(this._sortTimer=window.setTimeout(this._handleSortDelayed,n))}}},wt.prototype._handleSortDelayed=function(){this._isSortNeeded=!0,this._sortTimer=void 0,de(this._item._id,this._handleSort)},wt.prototype._cancelSort=function(){var e;this._isSortNeeded=!1,void 0!==this._sortTimer&&(this._sortTimer=window.clearTimeout(this._sortTimer)),e=this._item._id,ae.remove(1,J+e)},wt.prototype._finishSort=function(){var e=this._getGrid()._settings.dragSort&&(this._isSortNeeded||void 0!==this._sortTimer);this._cancelSort(),e&&this._checkOverlap()},wt.prototype._checkOverlap=function(){if(this._isActive){var e,t,n,i,r,s,c,l,u=this._item,d=this._getGrid()._settings;(e=fe(d.dragSortPredicate)?d.dragSortPredicate(u,this._dragMoveEvent):wt.defaultSortPredicate(u,d.dragSortPredicate))&&"number"==typeof e.index&&(c=e.action===a?a:o,l=(t=u.getGrid())!==(i=e.grid||t),n=t._items.indexOf(u),r=Ve(i._items,e.index,l&&c===o?1:0),(l||r!==this._blockedSortIndex)&&(l?(this._blockedSortIndex=null,s=i._items[r],t._hasListeners(g)&&t._emit(g,{item:u,fromGrid:t,fromIndex:n,toGrid:i,toIndex:r}),i._hasListeners(b)&&i._emit(b,{item:u,fromGrid:t,fromIndex:n,toGrid:i,toIndex:r}),u._gridId=i._id,this._isMigrating=u._gridId!==this._gridId,t._items.splice(n,1),ze(i._items,u,r),u._sortData=null,t._hasListeners(m)&&t._emit(m,{item:u,fromGrid:t,fromIndex:n,toGrid:i,toIndex:r}),i._hasListeners(v)&&i._emit(v,{item:u,fromGrid:t,fromIndex:n,toGrid:i,toIndex:r}),c===a&&s&&s.isActive()&&i._items.indexOf(s)>-1&&i.send(s,t,n,{appendTo:this._container||document.body,layoutSender:!1,layoutReceiver:!1}),t.layout(),i.layout()):n!==r&&(this._blockedSortIndex=n,(c===a?We:qe)(t._items,n,r),t._hasListeners(f)&&t._emit(f,{item:u,fromIndex:n,toIndex:r,action:c}),t.layout())))}},wt.prototype._finishMigration=function(){var e,t,n=this._item,i=n._dragRelease,r=n._element,a=n._isActive,o=n.getGrid(),s=o._element,c=o._settings,l=c.dragContainer||s,u=this._getGrid()._settings,d=r.parentNode,p=a?u.itemVisibleClass:u.itemHiddenClass,h=a?c.itemVisibleClass:c.itemHiddenClass;this._isMigrating=!1,this.destroy(),u.itemClass!==c.itemClass&&(mt(r,u.itemClass),Fe(r,c.itemClass)),p!==h&&(mt(r,p),Fe(r,h)),l!==d&&(l.appendChild(r),t=at(d,l,!0),(e=ft(r)).x-=t.left,e.y-=t.top),n._refreshDimensions(),t=at(l,s,!0),i._containerDiffX=t.left,i._containerDiffY=t.top,n._drag=c.dragEnabled?new wt(n):null,l!==d&&n._setTranslate(e.x,e.y),n._visibility.setStyles(a?c.visibleStyles:c.hiddenStyles),i.start()},wt.prototype._preStartCheck=function(e){0===this._startPredicateState&&(this._startPredicateState=1),1===this._startPredicateState?(this._startPredicateResult=this._startPredicate(this._item,e),!0===this._startPredicateResult?(this._startPredicateState=2,this._onStart(e)):!1===this._startPredicateResult&&(this._resetStartPredicate(e),this._dragger._reset(),this._startPredicateState=0)):2===this._startPredicateState&&this._isActive&&this._onMove(e)},wt.prototype._preEndCheck=function(e){var t=2===this._startPredicateState;this._startPredicate(this._item,e),this._startPredicateState=0,t&&this._isActive&&(this._isStarted?this._onEnd(e):this.stop())},wt.prototype._onStart=function(e){var t,n,i,r=this._item;r._isActive&&(this._isActive=!0,this._dragStartEvent=e,wt.autoScroller.addItem(r),t=r._id,n=this._prepareStart,i=this._applyStart,ae.add(0,W+t,n),ae.add(2,H+t,i))},wt.prototype._prepareStart=function(){if(this._isActive){var e=this._item;if(e._isActive){var t=e._element,n=this._getGrid(),i=n._settings,r=n._element,a=i.dragContainer||r,o=et(a),s=ft(t),c=t.getBoundingClientRect(),l=a!==r;if(this._container=a,this._containingBlock=o,this._clientX=c.left,this._clientY=c.top,this._left=this._gridX=s.x,this._top=this._gridY=s.y,this._scrollDiffX=this._scrollDiffY=0,this._moveDiffX=this._moveDiffY=0,this._resetHeuristics(this._gridX,this._gridY),l){var u=at(o,r);this._containerDiffX=u.left,this._containerDiffY=u.top}}}},wt.prototype._applyStart=function(){if(this._isActive){var e=this._item;if(e._isActive){var t=this._getGrid(),n=e._element,i=e._dragRelease,r=e._migrate,a=this._container!==t._element;e.isPositioning()&&e._layout.stop(!0,this._left,this._top),r._isActive&&(this._left-=r._containerDiffX,this._top-=r._containerDiffY,this._gridX-=r._containerDiffX,this._gridY-=r._containerDiffY,r.stop(!0,this._left,this._top)),e.isReleasing()&&i._reset(),t._settings.dragPlaceholder.enabled&&e._dragPlaceholder.create(),this._isStarted=!0,t._emit("dragInit",e,this._dragStartEvent),a&&(n.parentNode===this._container?(this._gridX-=this._containerDiffX,this._gridY-=this._containerDiffY):(this._left+=this._containerDiffX,this._top+=this._containerDiffY,this._container.appendChild(n),e._setTranslate(this._left,this._top))),Fe(n,t._settings.itemDraggingClass),this._bindScrollListeners(),t._emit("dragStart",e,this._dragStartEvent)}}},wt.prototype._onMove=function(e){var t,n,i,r=this._item;r._isActive?(this._dragMoveEvent=e,t=r._id,n=this._prepareMove,i=this._applyMove,ae.add(0,Q+t,n),ae.add(2,X+t,i),de(r._id,this._handleSort)):this.stop()},wt.prototype._prepareMove=function(){if(this._isActive&&this._item._isActive){var e=this._getGrid()._settings.dragAxis,t=this._dragMoveEvent,n=this._dragPrevMoveEvent||this._dragStartEvent||t;if("y"!==e){var i=t.clientX-n.clientX;this._left=this._left-this._moveDiffX+i,this._gridX=this._gridX-this._moveDiffX+i,this._clientX=this._clientX-this._moveDiffX+i,this._moveDiffX=i}if("x"!==e){var r=t.clientY-n.clientY;this._top=this._top-this._moveDiffY+r,this._gridY=this._gridY-this._moveDiffY+r,this._clientY=this._clientY-this._moveDiffY+r,this._moveDiffY=r}this._dragPrevMoveEvent=t}},wt.prototype._applyMove=function(){if(this._isActive){var e=this._item;e._isActive&&(this._moveDiffX=this._moveDiffY=0,e._setTranslate(this._left,this._top),this._getGrid()._emit("dragMove",e,this._dragMoveEvent),wt.autoScroller.updateItem(e))}},wt.prototype._onScroll=function(e){var t,n,i,r=this._item;r._isActive?(this._scrollEvent=e,t=r._id,n=this._prepareScroll,i=this._applyScroll,ae.add(0,Y+t,n),ae.add(2,G+t,i),de(r._id,this._handleSort)):this.stop()},wt.prototype._prepareScroll=function(){if(this._isActive){var e=this._item;if(e._isActive){var t=e._element,n=this._getGrid()._element,i=t.getBoundingClientRect();if(this._container!==n){var r=at(this._containingBlock,n);this._containerDiffX=r.left,this._containerDiffY=r.top}var a=this._clientX-this._moveDiffX-i.left;this._left=this._left-this._scrollDiffX+a,this._scrollDiffX=a;var o=this._clientY-this._moveDiffY-i.top;this._top=this._top-this._scrollDiffY+o,this._scrollDiffY=o,this._gridX=this._left-this._containerDiffX,this._gridY=this._top-this._containerDiffY}}},wt.prototype._applyScroll=function(){if(this._isActive){var e=this._item;e._isActive&&(this._scrollDiffX=this._scrollDiffY=0,e._setTranslate(this._left,this._top),this._getGrid()._emit("dragScroll",e,this._scrollEvent))}},wt.prototype._onEnd=function(e){var t=this._item,n=t._element,i=this._getGrid(),r=i._settings,a=t._dragRelease;t._isActive?(ce(t._id),le(t._id),ue(t._id),this._finishSort(),this._unbindScrollListeners(),a._containerDiffX=this._containerDiffX,a._containerDiffY=this._containerDiffY,this._reset(),mt(n,r.itemDraggingClass),wt.autoScroller.removeItem(t),i._emit("dragEnd",t,e),this._isMigrating?this._finishMigration():a.start()):this.stop()};var St=/^(webkit|moz|ms|o|Webkit|Moz|MS|O)(?=[A-Z])/,Ct={};function xt(e){var t=Ct[e];return t||((t=e.replace(St,""))!==e&&(t=t[0].toLowerCase()+t.slice(1)),Ct[e]=t,t)}function Et(e,t){for(var n in t)e.style[n]=t[n]}var Tt,Pt,Rt=!(!Element||!fe(Element.prototype.animate)),Ot=!!(Element&&(Tt=Element.prototype.animate,Pt=window.Symbol,Tt&&fe(Pt)&&fe(Pt.toString)&&Pt(Tt).toString().indexOf("[native code]")>-1));function Dt(e){this._element=e,this._animation=null,this._duration=0,this._easing="",this._callback=null,this._props=[],this._values=[],this._isDestroyed=!1,this._onFinish=this._onFinish.bind(this)}function Mt(e,t){var n={};for(var i in e)n[t?i:xt(i)]=e[i];return n}function It(e,t){return"translateX("+e+"px) translateY("+t+"px)"}function Nt(e){this._item=e,this._animation=new Dt,this._element=null,this._className="",this._didMigrate=!1,this._resetAfterLayout=!1,this._left=0,this._top=0,this._transX=0,this._transY=0,this._nextTransX=0,this._nextTransY=0,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this),this._updateDimensions=this._updateDimensions.bind(this),this._onLayoutStart=this._onLayoutStart.bind(this),this._onLayoutEnd=this._onLayoutEnd.bind(this),this._onReleaseEnd=this._onReleaseEnd.bind(this),this._onMigrate=this._onMigrate.bind(this),this._onHide=this._onHide.bind(this)}function Lt(e){this._item=e,this._isActive=!1,this._isDestroyed=!1,this._isPositioningStarted=!1,this._containerDiffX=0,this._containerDiffY=0}function Bt(e){var t=e._element,n=t.style;this._item=e,this._isActive=!1,this._isDestroyed=!1,this._isInterrupted=!1,this._currentStyles={},this._targetStyles={},this._nextLeft=0,this._nextTop=0,this._offsetLeft=0,this._offsetTop=0,this._skipNextAnimation=!1,this._animOptions={onFinish:this._finish.bind(this),duration:0,easing:0},n.left="0px",n.top="0px",e._setTranslate(0,0),this._animation=new Dt(t),this._queue="layout-"+e._id,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this)}function $t(e){this._item=e,this._isActive=!1,this._isDestroyed=!1,this._container=!1,this._containerDiffX=0,this._containerDiffY=0}function jt(e){var t=e._isActive,n=e._element,i=n.children[0],r=e.getGrid()._settings;if(!i)throw new Error("No valid child element found within item element.");this._item=e,this._isDestroyed=!1,this._isHidden=!t,this._isHiding=!1,this._isShowing=!1,this._childElement=i,this._currentStyleProps=[],this._animation=new Dt(i),this._queue="visibility-"+e._id,this._finishShow=this._finishShow.bind(this),this._finishHide=this._finishHide.bind(this),n.style.display=t?"":"none",Fe(n,t?r.itemVisibleClass:r.itemHiddenClass),this.setStyles(t?r.visibleStyles:r.hiddenStyles)}Dt.prototype.start=function(e,t,n){if(!this._isDestroyed){var i=this._element,r=n||{};if(!Rt)return Et(i,t),this._callback=fe(r.onFinish)?r.onFinish:null,void this._onFinish();var a,o,s,c=this._animation,l=this._props,u=this._values,d=r.duration||300,p=r.easing||"ease",h=!1;if(c&&(o=0,d===this._duration&&p===this._easing||(h=!0),!h)){for(a in t)if(++o,-1===(s=l.indexOf(a))||t[a]!==u[s]){h=!0;break}o!==l.length&&(h=!0)}if(h&&c.cancel(),this._callback=fe(r.onFinish)?r.onFinish:null,!c||h){for(a in l.length=u.length=0,t)l.push(a),u.push(t[a]);this._duration=d,this._easing=p,this._animation=i.animate([Mt(e,Ot),Mt(t,Ot)],{duration:d,easing:p}),this._animation.onfinish=this._onFinish,Et(i,t)}}},Dt.prototype.stop=function(){!this._isDestroyed&&this._animation&&(this._animation.cancel(),this._animation=this._callback=null,this._props.length=this._values.length=0)},Dt.prototype.getCurrentStyles=function(){return kt(element,currentProps)},Dt.prototype.isAnimating=function(){return!!this._animation},Dt.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._element=null,this._isDestroyed=!0)},Dt.prototype._onFinish=function(){var e=this._callback;this._animation=this._callback=null,this._props.length=this._values.length=0,e&&e()},Nt.prototype._updateDimensions=function(){this.isActive()&&Et(this._element,{width:this._item._width+"px",height:this._item._height+"px"})},Nt.prototype._onLayoutStart=function(e,t){var n=this._item;if(-1!==e.indexOf(n)){var i=n._left,r=n._top,a=this._left,o=this._top;if(this._left=i,this._top=r,t||this._didMigrate||a!==i||o!==r){var s,c,l,u=i+n._marginLeft,d=r+n._marginTop,p=n.getGrid();if(t||!(p._settings.layoutDuration>0)||this._didMigrate)return pe(n._id),this._element.style[He]=It(u,d),this._animation.stop(),void(this._didMigrate&&(p.getElement().appendChild(this._element),this._didMigrate=!1));this._nextTransX=u,this._nextTransY=d,s=n._id,c=this._setupAnimation,l=this._startAnimation,ae.add(0,K+s,c),ae.add(2,ee+s,l)}}else this.reset()},Nt.prototype._setupAnimation=function(){if(this.isActive()){var e=ft(this._element);this._transX=e.x,this._transY=e.y}},Nt.prototype._startAnimation=function(){if(this.isActive()){var e=this._animation,t=this._transX,n=this._transY,i=this._nextTransX,r=this._nextTransY;if(t!==i||n!==r){var a=this._item.getGrid()._settings,o={},s={};o[He]=It(t,n),s[He]=It(i,r),e.start(o,s,{duration:a.layoutDuration,easing:a.layoutEasing,onFinish:this._onLayoutEnd})}else e.isAnimating()&&(this._element.style[He]=It(i,r),e.stop())}},Nt.prototype._onLayoutEnd=function(){this._resetAfterLayout&&this.reset()},Nt.prototype._onReleaseEnd=function(e){if(e._id===this._item._id){if(!this._animation.isAnimating())return void this.reset();this._resetAfterLayout=!0}},Nt.prototype._onMigrate=function(e){if(e.item===this._item){var t=this._item.getGrid(),n=e.toGrid;t.off(y,this._onReleaseEnd),t.off(s,this._onLayoutStart),t.off(g,this._onMigrate),t.off(d,this._onHide),n.on(y,this._onReleaseEnd),n.on(s,this._onLayoutStart),n.on(g,this._onMigrate),n.on(d,this._onHide),this._didMigrate=!0}},Nt.prototype._onHide=function(e){e.indexOf(this._item)>-1&&this.reset()},Nt.prototype.create=function(){if(this.isActive())this._resetAfterLayout=!1;else{var e,t=this._item,n=t.getGrid(),i=n._settings,r=this._animation;this._left=t._left,this._top=t._top,e=fe(i.dragPlaceholder.createElement)?i.dragPlaceholder.createElement(t):document.createElement("div"),this._element=e,r._element=e,this._className=i.itemPlaceholderClass||"",this._className&&Fe(e,this._className),Et(e,{position:"absolute",left:"0px",top:"0px",width:t._width+"px",height:t._height+"px"}),e.style[He]=It(t._left+t._marginLeft,t._top+t._marginTop),n.on(s,this._onLayoutStart),n.on(y,this._onReleaseEnd),n.on(g,this._onMigrate),n.on(d,this._onHide),fe(i.dragPlaceholder.onCreate)&&i.dragPlaceholder.onCreate(t,e),n.getElement().appendChild(e)}},Nt.prototype.reset=function(){if(this.isActive()){var e,t=this._element,n=this._item,i=n.getGrid(),r=i._settings,a=this._animation;this._resetAfterLayout=!1,pe(n._id),e=n._id,ae.remove(2,te+e),a.stop(),a._element=null,i.off(y,this._onReleaseEnd),i.off(s,this._onLayoutStart),i.off(g,this._onMigrate),i.off(d,this._onHide),this._className&&(mt(t,this._className),this._className=""),t.parentNode.removeChild(t),this._element=null,fe(r.dragPlaceholder.onRemove)&&r.dragPlaceholder.onRemove(n,t)}},Nt.prototype.isActive=function(){return!!this._element},Nt.prototype.getElement=function(){return this._element},Nt.prototype.updateDimensions=function(){var e,t;this.isActive()&&(e=this._item._id,t=this._updateDimensions,ae.add(2,te+e,t))},Nt.prototype.destroy=function(){this.reset(),this._animation.destroy(),this._item=this._animation=null},Lt.prototype.start=function(){if(!this._isDestroyed&&!this._isActive){var e=this._item,t=e.getGrid(),n=t._settings;this._isActive=!0,Fe(e._element,n.itemReleasingClass),n.dragRelease.useDragContainer||this._placeToGrid(),t._emit("dragReleaseStart",e),t._nextLayoutData||e._layout.start(!1)}},Lt.prototype.stop=function(e,t,n){if(!this._isDestroyed&&this._isActive){var i=this._item,r=i.getGrid();e||void 0!==t&&void 0!==n||(t=i._left,n=i._top);var a=this._placeToGrid(t,n);this._reset(a),e||r._emit(y,i)}},Lt.prototype.isJustReleased=function(){return this._isActive&&!1===this._isPositioningStarted},Lt.prototype.destroy=function(){this._isDestroyed||(this.stop(!0),this._item=null,this._isDestroyed=!0)},Lt.prototype._placeToGrid=function(e,t){if(!this._isDestroyed){var n=this._item,i=n._element,r=n.getGrid()._element,a=!1;if(i.parentNode!==r){if(void 0===e||void 0===t){var o=ft(i);e=o.x-this._containerDiffX,t=o.y-this._containerDiffY}r.appendChild(i),n._setTranslate(e,t),a=!0}return this._containerDiffX=0,this._containerDiffY=0,a}},Lt.prototype._reset=function(e){if(!this._isDestroyed){var t=this._item,n=t.getGrid()._settings.itemReleasingClass;this._isActive=!1,this._isPositioningStarted=!1,this._containerDiffX=0,this._containerDiffY=0,n&&(e&&t._element.clientWidth,mt(t._element,n))}},Bt.prototype.start=function(e,t){if(!this._isDestroyed){var n,i,r,a=this._item,o=a._dragRelease,s=a.getGrid()._settings,c=this._isActive,l=o.isJustReleased(),u=l?s.dragRelease.duration:s.layoutDuration,d=l?s.dragRelease.easing:s.layoutEasing,p=!e&&!this._skipNextAnimation&&u>0;if(c&&(oe(a._id),a._emitter.burst(this._queue,!0,a)),l&&(o._isPositioningStarted=!0),fe(t)&&a._emitter.on(this._queue,t),this._skipNextAnimation=!1,!p)return this._updateOffsets(),a._setTranslate(this._nextLeft,this._nextTop),this._animation.stop(),void this._finish();this._animation.isAnimating()&&(this._animation._animation.onfinish=null),this._isActive=!0,this._animOptions.easing=d,this._animOptions.duration=u,this._isInterrupted=c,n=a._id,i=this._setupAnimation,r=this._startAnimation,ae.add(0,Z+n,i),ae.add(2,z+n,r)}},Bt.prototype.stop=function(e,t,n){if(!this._isDestroyed&&this._isActive){var i=this._item;if(oe(i._id),this._animation.isAnimating()){if(void 0===t||void 0===n){var r=ft(i._element);t=r.x,n=r.y}i._setTranslate(t,n),this._animation.stop()}mt(i._element,i.getGrid()._settings.itemPositioningClass),this._isActive=!1,e&&i._emitter.burst(this._queue,!0,i)}},Bt.prototype.destroy=function(){if(!this._isDestroyed){var e=this._item._element.style;this.stop(!0,0,0),this._item._emitter.clear(this._queue),this._animation.destroy(),e[He]="",e.left="",e.top="",this._item=null,this._currentStyles=null,this._targetStyles=null,this._animOptions=null,this._isDestroyed=!0}},Bt.prototype._updateOffsets=function(){if(!this._isDestroyed){var e=this._item,t=e._migrate,n=e._dragRelease;this._offsetLeft=n._isActive?n._containerDiffX:t._isActive?t._containerDiffX:0,this._offsetTop=n._isActive?n._containerDiffY:t._isActive?t._containerDiffY:0,this._nextLeft=this._item._left+this._offsetLeft,this._nextTop=this._item._top+this._offsetTop}},Bt.prototype._finish=function(){if(!this._isDestroyed){var e=this._item,t=e._migrate,n=e._dragRelease;e._tX=this._nextLeft,e._tY=this._nextTop,this._isActive&&(this._isActive=!1,mt(e._element,e.getGrid()._settings.itemPositioningClass)),n._isActive&&n.stop(),t._isActive&&t.stop(),e._emitter.burst(this._queue,!1,e)}},Bt.prototype._setupAnimation=function(){var e=this._item;if(void 0===e._tX||void 0===e._tY){var t=ft(e._element);e._tX=t.x,e._tY=t.y}},Bt.prototype._startAnimation=function(){var e=this._item,t=e.getGrid()._settings,n=this._animOptions.duration<=0;this._updateOffsets();var i=Math.abs(e._left-(e._tX-this._offsetLeft)),r=Math.abs(e._top-(e._tY-this._offsetTop));if(n||i<2&&r<2)return(i||r||this._isInterrupted)&&e._setTranslate(this._nextLeft,this._nextTop),this._animation.stop(),void this._finish();this._isInterrupted||Fe(e._element,t.itemPositioningClass),this._currentStyles[He]=It(e._tX,e._tY),this._targetStyles[He]=It(this._nextLeft,this._nextTop),e._tX=e._tY=void 0,this._animation.start(this._currentStyles,this._targetStyles,this._animOptions)},$t.prototype.start=function(e,t,n){if(!this._isDestroyed){var i,r,a,o,s,c,l,u,d,p,h=this._item,f=h._element,y=h.isActive(),_=h.isVisible(),A=h.getGrid(),w=A._settings,k=e._settings,S=e._element,C=e._items,x=A._items.indexOf(h),E=n||document.body;if("number"==typeof t)i=Ve(C,t,1);else{if(!(r=e.getItem(t)))return;i=C.indexOf(r)}(h.isPositioning()||this._isActive||h.isReleasing())&&(l=(c=ft(f)).x,u=c.y),h.isPositioning()&&h._layout.stop(!0,l,u),this._isActive&&(l-=this._containerDiffX,u-=this._containerDiffY,this.stop(!0,l,u)),h.isReleasing()&&(l-=h._dragRelease._containerDiffX,u-=h._dragRelease._containerDiffY,h._dragRelease.stop(!0,l,u)),h._visibility.stop(!0),h._drag&&h._drag.destroy(),A._hasListeners(g)&&A._emit(g,{item:h,fromGrid:A,fromIndex:x,toGrid:e,toIndex:i}),e._hasListeners(b)&&e._emit(b,{item:h,fromGrid:A,fromIndex:x,toGrid:e,toIndex:i}),w.itemClass!==k.itemClass&&(mt(f,w.itemClass),Fe(f,k.itemClass)),(d=_?w.itemVisibleClass:w.itemHiddenClass)!==(p=_?k.itemVisibleClass:k.itemHiddenClass)&&(mt(f,d),Fe(f,p)),A._items.splice(x,1),ze(C,h,i),h._gridId=e._id,y?E!==(a=f.parentNode)&&(E.appendChild(f),o=at(E,a,!0),c||(l=(c=ft(f)).x,u=c.y),h._setTranslate(l+o.left,u+o.top)):S.appendChild(f),h._visibility.setStyles(_?k.visibleStyles:k.hiddenStyles),y&&(s=at(E,S,!0)),h._refreshDimensions(),h._sortData=null,h._drag=k.dragEnabled?new wt(h):null,y?(this._isActive=!0,this._container=E,this._containerDiffX=s.left,this._containerDiffY=s.top):(this._isActive=!1,this._container=null,this._containerDiffX=0,this._containerDiffY=0),A._hasListeners(m)&&A._emit(m,{item:h,fromGrid:A,fromIndex:x,toGrid:e,toIndex:i}),e._hasListeners(v)&&e._emit(v,{item:h,fromGrid:A,fromIndex:x,toGrid:e,toIndex:i})}},$t.prototype.stop=function(e,t,n){if(!this._isDestroyed&&this._isActive){var i,r=this._item,a=r._element,o=r.getGrid()._element;this._container!==o&&(void 0!==t&&void 0!==n||(e?(t=(i=ft(a)).x-this._containerDiffX,n=i.y-this._containerDiffY):(t=r._left,n=r._top)),o.appendChild(a),r._setTranslate(t,n)),this._isActive=!1,this._container=null,this._containerDiffX=0,this._containerDiffY=0}},$t.prototype.destroy=function(){this._isDestroyed||(this.stop(!0),this._item=null,this._isDestroyed=!0)},jt.prototype.show=function(e,t){if(!this._isDestroyed){var n=this._item,i=n._element,r=fe(t)?t:null,a=n.getGrid()._settings;this._isShowing||this._isHidden?!this._isShowing||e?(this._isShowing||(n._emitter.burst(this._queue,!0,n),mt(i,a.itemHiddenClass),Fe(i,a.itemVisibleClass),this._isHiding||(i.style.display="")),r&&n._emitter.on(this._queue,r),this._isShowing=!0,this._isHiding=this._isHidden=!1,this._startAnimation(!0,e,this._finishShow)):r&&n._emitter.on(this._queue,r):r&&r(!1,n)}},jt.prototype.hide=function(e,t){if(!this._isDestroyed){var n=this._item,i=n._element,r=fe(t)?t:null,a=n.getGrid()._settings;this._isHiding||!this._isHidden?!this._isHiding||e?(this._isHiding||(n._emitter.burst(this._queue,!0,n),Fe(i,a.itemHiddenClass),mt(i,a.itemVisibleClass)),r&&n._emitter.on(this._queue,r),this._isHidden=this._isHiding=!0,this._isShowing=!1,this._startAnimation(!1,e,this._finishHide)):r&&n._emitter.on(this._queue,r):r&&r(!1,n)}},jt.prototype.stop=function(e){if(!this._isDestroyed&&(this._isHiding||this._isShowing)){var t=this._item;se(t._id),this._animation.stop(),e&&t._emitter.burst(this._queue,!0,t)}},jt.prototype.setStyles=function(e){var t=this._childElement,n=this._currentStyleProps;for(var i in this._removeCurrentStyles(),e)n.push(i),t.style[i]=e[i]},jt.prototype.destroy=function(){if(!this._isDestroyed){var e=this._item,t=e._element,n=e.getGrid()._settings;this.stop(!0),e._emitter.clear(this._queue),this._animation.destroy(),this._removeCurrentStyles(),mt(t,n.itemVisibleClass),mt(t,n.itemHiddenClass),t.style.display="",this._isHiding=this._isShowing=!1,this._isDestroyed=this._isHidden=!0}},jt.prototype._startAnimation=function(e,t,n){if(!this._isDestroyed){var i,r=this._item,a=this._animation,o=this._childElement,s=r.getGrid()._settings,c=e?s.visibleStyles:s.hiddenStyles,l=e?s.showDuration:s.hideDuration,u=e?s.showEasing:s.hideEasing,d=t||l<=0;if(c){if(se(r._id),d)return Et(o,c),a.stop(),void(n&&n());var p,h,f;a.isAnimating()&&(a._animation.onfinish=null),p=r._id,h=function(){i=kt(o,c)},f=function(){a.start(i,c,{duration:l,easing:u,onFinish:n})},ae.add(0,V+p,h),ae.add(2,q+p,f)}else n&&n()}},jt.prototype._finishShow=function(){this._isHidden||(this._isShowing=!1,this._item._emitter.burst(this._queue,!1,this._item))},jt.prototype._finishHide=function(){if(this._isHidden){var e=this._item;this._isHiding=!1,e._layout.stop(!0,0,0),e._element.style.display="none",e._emitter.burst(this._queue,!1,e)}},jt.prototype._removeCurrentStyles=function(){for(var e=this._childElement,t=this._currentStyleProps,n=0;n<t.length;n++)e.style[t[n]]="";t.length=0};var Ut=0;function Ft(){return++Ut}function Zt(e,t,n){var i=e._settings;if(r){if(r.has(t))throw new Error("You can only create one Muuri Item per element!");r.set(t,this)}this._id=Ft(),this._gridId=e._id,this._element=t,this._isDestroyed=!1,this._left=0,this._top=0,this._width=0,this._height=0,this._marginLeft=0,this._marginRight=0,this._marginTop=0,this._marginBottom=0,this._tX=void 0,this._tY=void 0,this._sortData=null,this._emitter=new k,t.parentNode!==e._element&&e._element.appendChild(t),Fe(t,i.itemClass),"boolean"!=typeof n&&(n="none"!==ge(t,"display")),this._isActive=n,this._visibility=new jt(this),this._layout=new Bt(this),this._migrate=new $t(this),this._drag=i.dragEnabled?new wt(this):null,this._dragRelease=new Lt(this),this._dragPlaceholder=new Nt(this)}function zt(e){var t,n,i,r,a,o=.001,s=.5;function c(e){return((1e3*e+.5<<0)/10<<0)/100}function l(){this.currentRects=[],this.nextRects=[],this.rectTarget={},this.rectStore=[],this.slotSizes=[],this.rectId=0,this.slotIndex=-1,this.slotData={left:0,top:0,width:0,height:0},this.sortRectsLeftTop=this.sortRectsLeftTop.bind(this),this.sortRectsTopLeft=this.sortRectsTopLeft.bind(this)}if(l.prototype.computeLayout=function(e,t){var n,i,r,a,o,s,l=e.items,u=e.slots,d=!!(1&t),p=!!(2&t),h=!!(4&t),f=!!(8&t),m=!!(16&t),g="number"==typeof l[0];if(!l.length)return e;for(i=g?2:1,n=0;n<l.length;n+=i)g?(a=l[n],o=l[n+1]):(a=(r=l[n])._width+r._marginLeft+r._marginRight,o=r._height+r._marginTop+r._marginBottom),m&&(a=c(a),o=c(o)),s=this.computeNextSlot(e,a,o,d,p),p?s.left+s.width>e.width&&(e.width=s.left+s.width):s.top+s.height>e.height&&(e.height=s.top+s.height),u[++this.slotIndex]=s.left,u[++this.slotIndex]=s.top,(h||f)&&this.slotSizes.push(s.width,s.height);if(h)for(n=0;n<u.length;n+=2)u[n]=e.width-(u[n]+this.slotSizes[n]);if(f)for(n=1;n<u.length;n+=2)u[n]=e.height-(u[n]+this.slotSizes[n]);return this.slotSizes.length=0,this.currentRects.length=0,this.nextRects.length=0,this.rectStore.length=0,this.rectId=0,this.slotIndex=-1,e},l.prototype.computeNextSlot=function(e,t,n,i,r){var a,c,l,u,d,p=this.slotData,h=this.currentRects,f=this.nextRects,m=!1;for(f.length=0,p.left=null,p.top=null,p.width=t,p.height=n,u=0;u<h.length;u++)if((c=h[u])&&(a=this.getRect(c),p.width<=a.width+o&&p.height<=a.height+o)){p.left=a.left,p.top=a.top;break}if(null===p.left&&(r?(p.left=e.width,p.top=0):(p.left=0,p.top=e.height),i||(m=!0)),!r&&p.top+p.height>e.height+o&&(p.left>s&&f.push(this.addRect(0,e.height,p.left,1/0)),p.left+p.width<e.width-s&&f.push(this.addRect(p.left+p.width,e.height,e.width-p.left-p.width,1/0)),e.height=p.top+p.height),r&&p.left+p.width>e.width+o&&(p.top>s&&f.push(this.addRect(e.width,0,1/0,p.top)),p.top+p.height<e.height-s&&f.push(this.addRect(e.width,p.top+p.height,1/0,e.height-p.top-p.height)),e.width=p.left+p.width),!m)for(i&&(u=0);u<h.length;u++)if(c=h[u])for(a=this.getRect(c),l=this.splitRect(a,p),d=0;d<l.length;d++)c=l[d],a=this.getRect(c),(r?a.left+o<e.width-o:a.top+o<e.height-o)&&f.push(c);return f.length>1&&this.purgeRects(f).sort(r?this.sortRectsLeftTop:this.sortRectsTopLeft),this.currentRects=f,this.nextRects=h,p},l.prototype.addRect=function(e,t,n,i){var r=++this.rectId;return this.rectStore[r]=e||0,this.rectStore[++this.rectId]=t||0,this.rectStore[++this.rectId]=n||0,this.rectStore[++this.rectId]=i||0,r},l.prototype.getRect=function(e,t){return t||(t=this.rectTarget),t.left=this.rectStore[e]||0,t.top=this.rectStore[++e]||0,t.width=this.rectStore[++e]||0,t.height=this.rectStore[++e]||0,t},l.prototype.splitRect=(t=[],n=0,i=0,function(e,r){return t.length=0,e.left+e.width<=r.left+o||r.left+r.width<=e.left+o||e.top+e.height<=r.top+o||r.top+r.height<=e.top+o?(t.push(this.addRect(e.left,e.top,e.width,e.height)),t):((n=r.left-e.left)>=s&&t.push(this.addRect(e.left,e.top,n,e.height)),(n=e.left+e.width-(r.left+r.width))>=s&&t.push(this.addRect(r.left+r.width,e.top,n,e.height)),(i=r.top-e.top)>=s&&t.push(this.addRect(e.left,e.top,e.width,i)),(i=e.top+e.height-(r.top+r.height))>=s&&t.push(this.addRect(e.left,r.top+r.height,e.width,i)),t)}),l.prototype.isRectAWithinRectB=function(e,t){return e.left+o>=t.left&&e.top+o>=t.top&&e.left+e.width-o<=t.left+t.width&&e.top+e.height-o<=t.top+t.height},l.prototype.purgeRects=(r={},a={},function(e){for(var t,n=e.length;n--;)if(t=e.length,e[n])for(this.getRect(e[n],r);t--;)if(e[t]&&n!==t&&(this.getRect(e[t],a),this.isRectAWithinRectB(r,a))){e[n]=0;break}return e}),l.prototype.sortRectsTopLeft=function(){var e={},t={};return function(n,i){return this.getRect(n,e),this.getRect(i,t),e.top<t.top&&e.top+o<t.top?-1:e.top>t.top&&e.top-o>t.top?1:e.left<t.left&&e.left+o<t.left?-1:e.left>t.left&&e.left-o>t.left?1:0}}(),l.prototype.sortRectsLeftTop=function(){var e={},t={};return function(n,i){return this.getRect(n,e),this.getRect(i,t),e.left<t.left&&e.left+o<t.left?-1:e.left>t.left&&e.left-o<t.left?1:e.top<t.top&&e.top+o<t.top?-1:e.top>t.top&&e.top-o>t.top?1:0}}(),e){var u=new l;self.onmessage=function(e){var t=new Float32Array(e.data),n=t.subarray(4,t.length),i=new Float32Array(n.length),r=t[3],a={items:n,slots:i,width:t[1],height:t[2]};u.computeLayout(a,r),t[1]=a.width,t[2]=a.height,t.set(a.slots,4),postMessage(t.buffer,[t.buffer])}}return l}Zt.prototype.getGrid=function(){return i[this._gridId]},Zt.prototype.getElement=function(){return this._element},Zt.prototype.getWidth=function(){return this._width},Zt.prototype.getHeight=function(){return this._height},Zt.prototype.getMargin=function(){return{left:this._marginLeft,right:this._marginRight,top:this._marginTop,bottom:this._marginBottom}},Zt.prototype.getPosition=function(){return{left:this._left,top:this._top}},Zt.prototype.isActive=function(){return this._isActive},Zt.prototype.isVisible=function(){return!!this._visibility&&!this._visibility._isHidden},Zt.prototype.isShowing=function(){return!(!this._visibility||!this._visibility._isShowing)},Zt.prototype.isHiding=function(){return!(!this._visibility||!this._visibility._isHiding)},Zt.prototype.isPositioning=function(){return!(!this._layout||!this._layout._isActive)},Zt.prototype.isDragging=function(){return!(!this._drag||!this._drag._isActive)},Zt.prototype.isReleasing=function(){return!(!this._dragRelease||!this._dragRelease._isActive)},Zt.prototype.isDestroyed=function(){return this._isDestroyed},Zt.prototype._refreshDimensions=function(e){if(!(this._isDestroyed||!0!==e&&this._visibility._isHidden)){var t=this._element,n=this._dragPlaceholder,i=t.getBoundingClientRect();this._width=i.width,this._height=i.height,this._marginLeft=Math.max(0,ve(t,"margin-left")),this._marginRight=Math.max(0,ve(t,"margin-right")),this._marginTop=Math.max(0,ve(t,"margin-top")),this._marginBottom=Math.max(0,ve(t,"margin-bottom")),n&&n.updateDimensions()}},Zt.prototype._refreshSortData=function(){if(!this._isDestroyed){var e,t=this._sortData={},n=this.getGrid()._settings.sortData;for(e in n)t[e]=n[e](this,this._element)}},Zt.prototype._addToLayout=function(e,t){!0!==this._isActive&&(this._isActive=!0,this._left=e||0,this._top=t||0)},Zt.prototype._removeFromLayout=function(){!1!==this._isActive&&(this._isActive=!1,this._left=0,this._top=0)},Zt.prototype._canSkipLayout=function(e,t){return this._left===e&&this._top===t&&!this._migrate._isActive&&!this._layout._skipNextAnimation&&!this._dragRelease.isJustReleased()},Zt.prototype._setTranslate=function(e,t){return(this._tX!==e||this._tY!==t)&&(this._tX=e,this._tY=t,this._element.style[He]=It(e,t),!0)},Zt.prototype._destroy=function(e){if(!this._isDestroyed){var t=this._element,n=this.getGrid()._settings;this._dragPlaceholder.destroy(),this._dragRelease.destroy(),this._migrate.destroy(),this._layout.destroy(),this._visibility.destroy(),this._drag&&this._drag.destroy(),this._emitter.destroy(),mt(t,n.itemClass),e&&t.parentNode.removeChild(t),r&&r.delete(t),this._isActive=!1,this._isDestroyed=!0}};var Vt=zt(),qt=null,Wt=[];function Ht(e,t){if(this._options=0,this._processor=null,this._layoutQueue=[],this._layouts={},this._layoutCallbacks={},this._layoutWorkers={},this._layoutWorkerData={},this._workers=[],this._onWorkerMessage=this._onWorkerMessage.bind(this),this.setOptions(t),(e="number"==typeof e?Math.max(0,e):0)&&window.Worker&&window.URL&&window.Blob)try{this._workers=function(e,t){var n=[];if(e>0){qt||(qt=URL.createObjectURL(new Blob(["("+zt.toString()+")(true)"],{type:"application/javascript"})));for(var i,r=0;r<e;r++)i=new Worker(qt),t&&(i.onmessage=t),n.push(i),Wt.push(i)}return n}(e,this._onWorkerMessage)}catch(e){this._processor=new Vt}else this._processor=new Vt}Ht.prototype._sendToWorker=function(){if(this._layoutQueue.length&&this._workers.length){var e=this._layoutQueue.shift(),t=this._workers.pop(),n=this._layoutWorkerData[e];delete this._layoutWorkerData[e],this._layoutWorkers[e]=t,t.postMessage(n.buffer,[n.buffer])}},Ht.prototype._onWorkerMessage=function(e){var t=new Float32Array(e.data),n=t[0],i=this._layouts[n],r=this._layoutCallbacks[n],a=this._layoutWorkers[n];i&&delete this._layouts[n],r&&delete this._layoutCallbacks[n],a&&delete this._layoutWorkers[n],i&&r&&(i.width=t[1],i.height=t[2],i.slots=t.subarray(4,t.length),this._finalizeLayout(i),r(i)),a&&(this._workers.push(a),this._sendToWorker())},Ht.prototype._finalizeLayout=function(e){var t=e._grid,n=2&e._settings,i="border-box"===t._boxSizing;return delete e._grid,delete e._settings,e.styles={},n?e.styles.width=(i?e.width+t._borderLeft+t._borderRight:e.width)+"px":e.styles.height=(i?e.height+t._borderTop+t._borderBottom:e.height)+"px",e},Ht.prototype.setOptions=function(e){var t,n,i,r,a;e&&(t="boolean"==typeof e.fillGaps?e.fillGaps?1:0:1&this._options,n="boolean"==typeof e.horizontal?e.horizontal?2:0:2&this._options,i="boolean"==typeof e.alignRight?e.alignRight?4:0:4&this._options,r="boolean"==typeof e.alignBottom?e.alignBottom?8:0:8&this._options,a="boolean"==typeof e.rounding?e.rounding?16:0:16&this._options,this._options=t|n|i|r|a)},Ht.prototype.createLayout=function(e,t,n,i,r,a){if(this._layouts[t])throw new Error("A layout with the provided id is currently being processed.");var o=2&this._options,s={id:t,items:n,slots:null,width:o?0:i,height:o?r:0,_grid:e,_settings:this._options};if(!n.length)return s.slots=[],this._finalizeLayout(s),void a(s);if(this._processor)return s.slots=window.Float32Array?new Float32Array(2*n.length):new Array(2*n.length),this._processor.computeLayout(s,s._settings),this._finalizeLayout(s),void a(s);var c,l,u,d=new Float32Array(4+2*n.length);for(d[0]=t,d[1]=s.width,d[2]=s.height,d[3]=s._settings,c=0,l=3;c<n.length;c++)u=n[c],d[++l]=u._width+u._marginLeft+u._marginRight,d[++l]=u._height+u._marginTop+u._marginBottom;return this._layoutQueue.push(t),this._layouts[t]=s,this._layoutCallbacks[t]=a,this._layoutWorkerData[t]=d,this._sendToWorker(),this.cancelLayout.bind(this,t)},Ht.prototype.cancelLayout=function(e){if(this._layouts[e]&&(delete this._layouts[e],delete this._layoutCallbacks[e],this._layoutWorkerData[e])){delete this._layoutWorkerData[e];var t=this._layoutQueue.indexOf(e);t>-1&&this._layoutQueue.splice(t,1)}},Ht.prototype.destroy=function(){for(var e in this._layoutWorkers)this._workers.push(this._layoutWorkers[e]);!function(e){for(var t,n,i=0;i<e.length;i++)(t=e[i]).onmessage=null,t.onerror=null,t.onmessageerror=null,t.terminate(),(n=Wt.indexOf(t))>-1&&Wt.splice(n,1);qt&&!Wt.length&&(URL.revokeObjectURL(qt),qt=null)}(this._workers),this._workers.length=0,this._layoutQueue.length=0,this._layouts={},this._layoutCallbacks={},this._layoutWorkers={},this._layoutWorkerData={}};var Qt=0;function Xt(e){var t=Object.prototype.toString.call(e);return"[object HTMLCollection]"===t||"[object NodeList]"===t}var Yt=Object.prototype.toString;function Gt(e){return"object"==typeof e&&"[object Object]"===Yt.call(e)}function Jt(){}var Kt,en="number",tn="string",nn="instant",rn=0;function an(e,t){if(typeof e===tn&&(e=document.querySelector(e)),!(e.getRootNode?e.getRootNode({composed:!0})===document:document.body.contains(e))||e===document.documentElement)throw new Error("Container element must be an existing DOM element.");var n,r,a=function(e,t){var n=on({},e);return t&&(n=on(n,t)),t&&t.visibleStyles?n.visibleStyles=t.visibleStyles:e&&e.visibleStyles&&(n.visibleStyles=e.visibleStyles),t&&t.hiddenStyles?n.hiddenStyles=t.hiddenStyles:e&&e.hiddenStyles&&(n.hiddenStyles=e.hiddenStyles),n}(an.defaultOptions,t);a.visibleStyles=sn(a.visibleStyles),a.hiddenStyles=sn(a.hiddenStyles),fe(a.dragSort)||(a.dragSort=!!a.dragSort),this._id=Ft(),this._element=e,this._settings=a,this._isDestroyed=!1,this._items=[],this._layout={id:0,items:[],slots:[]},this._isLayoutFinished=!0,this._nextLayoutData=null,this._emitter=new k,this._onLayoutDataReceived=this._onLayoutDataReceived.bind(this),i[this._id]=this,Fe(e,a.containerClass),n=this,typeof(r=a.layoutOnResize)!==en&&(r=!0===r?0:-1),r>=0&&(n._resizeHandler=function(e,t){var n=++Qt,i=0,r=0,a=!1,o=function(t){a||(r&&(i-=t-r),r=t,i>0?function(e,t){ae.add(0,re+e,t)}(n,o):(i=r=0,e()))};return function(s){if(!a){if(!(t<=0))return!0===s?(a=!0,i=r=0,o=void 0,void function(e){ae.remove(0,re+e)}(n)):void(i<=0?(i=t,o(0)):i=t);!0!==s&&e()}}}((function(){n.refreshItems().layout()}),r),window.addEventListener("resize",n._resizeHandler)),this.add(function(e,t){if("*"===t)return e.children;if(typeof t===tn){for(var n=[],i=e.children,r=0;r<i.length;r++)Ue(i[r],t)&&n.push(i[r]);return n}return Array.isArray(t)||Xt(t)?t:[]}(e,a.items),{layout:!1}),a.layoutOnInit&&this.layout(!0)}function on(e,t){var n,i,r,a=Object.keys(t),o=a.length;for(r=0;r<o;r++)n=Gt(t[i=a[r]]),Gt(e[i])&&n?e[i]=on(on({},e[i]),t[i]):n?e[i]=on({},t[i]):Array.isArray(t[i])?e[i]=t[i].slice(0):e[i]=t[i];return e}function sn(e){var t,n,i={},r=document.documentElement.style;for(t in e)e[t]&&(n=T(r,t))&&(i[n]=e[t]);return i}function cn(e){for(var t={},n=0;n<e.length;n++)t[e[n]._id]=n;return t}function ln(e,t,n){return e[t._id]-e[n._id]}an.Item=Zt,an.ItemLayout=Bt,an.ItemVisibility=jt,an.ItemMigrate=$t,an.ItemDrag=wt,an.ItemDragRelease=Lt,an.ItemDragPlaceholder=Nt,an.Emitter=k,an.Animator=Dt,an.Dragger=$,an.Packer=Ht,an.AutoScroller=Be,an.defaultPacker=new Ht(2),an.defaultOptions={items:"*",showDuration:300,showEasing:"ease",hideDuration:300,hideEasing:"ease",visibleStyles:{opacity:"1",transform:"scale(1)"},hiddenStyles:{opacity:"0",transform:"scale(0.5)"},layout:{fillGaps:!1,horizontal:!1,alignRight:!1,alignBottom:!1,rounding:!1},layoutOnResize:150,layoutOnInit:!0,layoutDuration:300,layoutEasing:"ease",sortData:null,dragEnabled:!1,dragContainer:null,dragHandle:null,dragStartPredicate:{distance:0,delay:0},dragAxis:"xy",dragSort:!0,dragSortHeuristics:{sortInterval:100,minDragDistance:10,minBounceBackAngle:1},dragSortPredicate:{threshold:50,action:o,migrateAction:o},dragRelease:{duration:300,easing:"ease",useDragContainer:!0},dragCssProps:{touchAction:"none",userSelect:"none",userDrag:"none",tapHighlightColor:"rgba(0, 0, 0, 0)",touchCallout:"none",contentZooming:"none"},dragPlaceholder:{enabled:!1,createElement:null,onCreate:null,onRemove:null},dragAutoScroll:{targets:[],handle:null,threshold:50,safeZone:.2,speed:Be.smoothSpeed(1e3,2e3,2500),sortDuringScroll:!0,smoothStop:!1,onStart:null,onStop:null},containerClass:"muuri",itemClass:"muuri-item",itemVisibleClass:"muuri-item-shown",itemHiddenClass:"muuri-item-hidden",itemPositioningClass:"muuri-item-positioning",itemDraggingClass:"muuri-item-dragging",itemReleasingClass:"muuri-item-releasing",itemPlaceholderClass:"muuri-item-placeholder"},an.prototype.on=function(e,t){return this._emitter.on(e,t),this},an.prototype.off=function(e,t){return this._emitter.off(e,t),this},an.prototype.getElement=function(){return this._element},an.prototype.getItem=function(e){if(this._isDestroyed||!e&&0!==e)return null;if(typeof e===en)return this._items[e>-1?e:this._items.length+e]||null;if(e instanceof Zt)return e._gridId===this._id?e:null;if(r){var t=r.get(e);return t&&t._gridId===this._id?t:null}for(var n=0;n<this._items.length;n++)if(this._items[n]._element===e)return this._items[n];return null},an.prototype.getItems=function(e){if(this._isDestroyed||void 0===e)return this._items.slice(0);var t,n,i=[];if(Array.isArray(e)||Xt(e))for(t=0;t<e.length;t++)(n=this.getItem(e[t]))&&i.push(n);else(n=this.getItem(e))&&i.push(n);return i},an.prototype.refreshItems=function(e,t){if(this._isDestroyed)return this;var n,i,r,a,o=e||this._items;if(!0===t)for(a=[],n=0;n<o.length;n++)(i=o[n]).isVisible()||i.isHiding()||((r=i.getElement().style).visibility="hidden",r.display="",a.push(r));for(n=0;n<o.length;n++)o[n]._refreshDimensions(t);if(!0===t){for(n=0;n<a.length;n++)(r=a[n]).visibility="",r.display="none";a.length=0}return this},an.prototype.refreshSortData=function(e){if(this._isDestroyed)return this;for(var t=e||this._items,n=0;n<t.length;n++)t[n]._refreshSortData();return this},an.prototype.synchronize=function(){if(this._isDestroyed)return this;var e,t,n=this._items;if(!n.length)return this;for(var i=0;i<n.length;i++)(t=n[i]._element).parentNode===this._element&&(e=e||document.createDocumentFragment()).appendChild(t);return e?(this._element.appendChild(e),this._emit("synchronize"),this):this},an.prototype.layout=function(e,t){if(this._isDestroyed)return this;var n=this._nextLayoutData;n&&fe(n.cancel)&&n.cancel();var i=rn=rn%16777216+1;this._nextLayoutData={id:i,instant:e,onFinish:t,cancel:null};for(var r=this._items,a=[],o=0;o<r.length;o++)r[o]._isActive&&a.push(r[o]);this._refreshDimensions();var s,c=this._width-this._borderLeft-this._borderRight,l=this._height-this._borderTop-this._borderBottom,u=this._settings.layout;return fe(u)?s=u(this,i,a,c,l,this._onLayoutDataReceived):(an.defaultPacker.setOptions(u),s=an.defaultPacker.createLayout(this,i,a,c,l,this._onLayoutDataReceived)),fe(s)&&this._nextLayoutData&&this._nextLayoutData.id===i&&(this._nextLayoutData.cancel=s),this},an.prototype.add=function(e,t){if(this._isDestroyed||!e)return[];var n,i=Xt(n=e)?Array.prototype.slice.call(n):Array.prototype.concat(n);if(!i.length)return i;var r,a,o,s,c=t||{},l=c.layout?c.layout:void 0===c.layout,u=this._items,d=!1;for(s=0;s<i.length;s++)(a=i[s]).parentNode!==this._element&&(r=r||document.createDocumentFragment()).appendChild(a);for(r&&this._element.appendChild(r),s=0;s<i.length;s++)a=i[s],(o=i[s]=new Zt(this,a,c.active))._isActive&&(d=!0,o._layout._skipNextAnimation=!0);for(s=0;s<i.length;s++)(o=i[s])._refreshDimensions(),o._refreshSortData();return ze(u,i,c.index),this._hasListeners("add")&&this._emit("add",i.slice(0)),d&&l&&this.layout(l===nn,fe(l)?l:void 0),i},an.prototype.remove=function(e,t){if(this._isDestroyed||!e.length)return[];var n,i,r,a=t||{},o=a.layout?a.layout:void 0===a.layout,s=!1,c=this.getItems(),l=[],d=[];for(r=0;r<e.length;r++)(i=e[r])._isDestroyed||-1!==(n=this._items.indexOf(i))&&(i._isActive&&(s=!0),l.push(i),d.push(c.indexOf(i)),i._destroy(a.removeElements),this._items.splice(n,1));return this._hasListeners(u)&&this._emit(u,l.slice(0),d),s&&o&&this.layout(o===nn,fe(o)?o:void 0),l},an.prototype.show=function(e,t){return!this._isDestroyed&&e.length&&this._setItemsVisibility(e,!0,t),this},an.prototype.hide=function(e,t){return!this._isDestroyed&&e.length&&this._setItemsVisibility(e,!1,t),this},an.prototype.filter=function(e,t){if(this._isDestroyed||!this._items.length)return this;var n,i,r=[],a=[],o=typeof e===tn,s=fe(e),c=t||{},l=!0===c.instant,u=c.syncWithLayout,d=c.layout?c.layout:void 0===c.layout,h=fe(c.onFinish)?c.onFinish:null,f=-1,m=Jt;if(h&&(m=function(){++f&&h(r.slice(0),a.slice(0))}),s||o)for(i=0;i<this._items.length;i++)n=this._items[i],(s?e(n):Ue(n._element,e))?r.push(n):a.push(n);return r.length?this.show(r,{instant:l,syncWithLayout:u,onFinish:m,layout:!1}):m(),a.length?this.hide(a,{instant:l,syncWithLayout:u,onFinish:m,layout:!1}):m(),(r.length||a.length)&&(this._hasListeners(p)&&this._emit(p,r.slice(0),a.slice(0)),d&&this.layout(d===nn,fe(d)?d:void 0)),this},an.prototype.sort=function(){var e,t,n,i;function r(r,a){for(var o,s,c,l,u=0,d=0;d<e.length;d++)if(o=e[d][0],s=e[d][1],c=(r._sortData?r:r._refreshSortData())._sortData[o],l=(a._sortData?a:a._refreshSortData())._sortData[o],u="desc"===s||!s&&t?l<c?-1:l>c?1:0:c<l?-1:c>l?1:0)return u;return u||(i||(i=cn(n)),u=t?ln(i,a,r):ln(i,r,a)),u}function a(r,a){var o=t?-e(r,a):e(r,a);return o||(i||(i=cn(n)),o=t?ln(i,a,r):ln(i,r,a)),o}return function(o,s){if(this._isDestroyed||this._items.length<2)return this;var c=this._items,l=s||{},u=l.layout?l.layout:void 0===l.layout;if(t=!!l.descending,n=c.slice(0),i=null,fe(o))e=o,c.sort(a);else if(typeof o===tn)e=o.trim().split(" ").filter((function(e){return e})).map((function(e){return e.split(":")})),c.sort(r);else{if(!Array.isArray(o))throw e=t=n=i=null,new Error("Invalid comparer argument provided.");c.length=0,c.push.apply(c,o)}return this._hasListeners(h)&&this._emit(h,c.slice(0),n),u&&this.layout(u===nn,fe(u)?u:void 0),e=t=n=i=null,this}}(),an.prototype.move=function(e,t,n){if(this._isDestroyed||this._items.length<2)return this;var i,r,s=this._items,c=n||{},l=c.layout?c.layout:void 0===c.layout,u=c.action===a,d=u?a:o,p=this.getItem(e),h=this.getItem(t);return p&&h&&p!==h&&(i=s.indexOf(p),r=s.indexOf(h),u?We(s,i,r):qe(s,i,r),this._hasListeners(f)&&this._emit(f,{item:p,fromIndex:i,toIndex:r,action:d}),l&&this.layout(l===nn,fe(l)?l:void 0)),this},an.prototype.send=function(e,t,n,i){if(this._isDestroyed||t._isDestroyed||this===t)return this;if(!(e=this.getItem(e)))return this;var r=i||{},a=r.appendTo||document.body,o=r.layoutSender?r.layoutSender:void 0===r.layoutSender,s=r.layoutReceiver?r.layoutReceiver:void 0===r.layoutReceiver;return e._migrate.start(t,n,a),e._migrate._isActive&&e._isActive&&(o&&this.layout(o===nn,fe(o)?o:void 0),s&&t.layout(s===nn,fe(s)?s:void 0)),this},an.prototype.destroy=function(e){if(this._isDestroyed)return this;var t,n,r,a=this._element,o=this._items.slice(0),s=this._layout&&this._layout.styles||{};for((r=this)._resizeHandler&&(r._resizeHandler(!0),window.removeEventListener("resize",r._resizeHandler),r._resizeHandler=null),t=0;t<o.length;t++)o[t]._destroy(e);for(n in this._items.length=0,mt(a,this._settings.containerClass),s)a.style[n]="";return this._emit("destroy"),this._emitter.destroy(),delete i[this._id],this._isDestroyed=!0,this},an.prototype._emit=function(){this._isDestroyed||this._emitter.emit.apply(this._emitter,arguments)},an.prototype._hasListeners=function(e){return!this._isDestroyed&&this._emitter.countListeners(e)>0},an.prototype._updateBoundingRect=function(){var e=this._element.getBoundingClientRect();this._width=e.width,this._height=e.height,this._left=e.left,this._top=e.top,this._right=e.right,this._bottom=e.bottom},an.prototype._updateBorders=function(e,t,n,i){var r=this._element;e&&(this._borderLeft=ve(r,"border-left-width")),t&&(this._borderRight=ve(r,"border-right-width")),n&&(this._borderTop=ve(r,"border-top-width")),i&&(this._borderBottom=ve(r,"border-bottom-width"))},an.prototype._refreshDimensions=function(){this._updateBoundingRect(),this._updateBorders(1,1,1,1),this._boxSizing=ge(this._element,"box-sizing")},an.prototype._onLayoutDataReceived=(Kt=[],function(e){if(!this._isDestroyed&&this._nextLayoutData&&this._nextLayoutData.id===e.id){var t,n,i,r,a=this,o=this._nextLayoutData.instant,u=this._nextLayoutData.onFinish,d=e.items.length,p=d;for(this._nextLayoutData=null,!this._isLayoutFinished&&this._hasListeners(l)&&this._emit(l,this._layout.items.slice(0)),this._layout=e,Kt.length=0,r=0;r<d;r++)(t=e.items[r])?(n=e.slots[2*r],i=e.slots[2*r+1],t._canSkipLayout(n,i)?--p:(t._left=n,t._top=i,t.isActive()&&!t.isDragging()?Kt.push(t):--p)):--p;if(e.styles&&Et(this._element,e.styles),!this._hasListeners(s)||(this._emit(s,e.items.slice(0),!0===o),this._layout.id===e.id)){var h=function(){if(!(--p>0)){var t=a._layout.id!==e.id,n=fe(o)?o:u;t||(a._isLayoutFinished=!0),fe(n)&&n(e.items.slice(0),t),!t&&a._hasListeners(c)&&a._emit(c,e.items.slice(0))}};if(!Kt.length)return h(),this;for(this._isLayoutFinished=!1,r=0;r<Kt.length&&this._layout.id===e.id;r++)Kt[r]._layout.start(!0===o,h);return this._layout.id===e.id&&(Kt.length=0),this}}}),an.prototype._setItemsVisibility=function(e,t,n){var i,r,a=this,o=e.slice(0),c=n||{},l=!0===c.instant,u=c.onFinish,p=c.layout?c.layout:void 0===c.layout,h=o.length,f=t?"showStart":d,m=t?"showEnd":"hideEnd",g=t?"show":"hide",v=!1,b=[],y=[];if(h){for(r=0;r<o.length;r++)i=o[r],(t&&!i._isActive||!t&&i._isActive)&&(v=!0),i._layout._skipNextAnimation=!(!t||i._isActive),t&&i._visibility._isHidden&&y.push(i),t?i._addToLayout():i._removeFromLayout();y.length&&(this.refreshItems(y,!0),y.length=0),v&&!1!==c.syncWithLayout?this.on(s,_):_(),v&&p&&this.layout(p===nn,fe(p)?p:void 0)}else fe(u)&&u(o);function _(){for(v&&!1!==c.syncWithLayout&&a.off(s,_),a._hasListeners(f)&&a._emit(f,o.slice(0)),r=0;r<o.length;r++)o[r]._gridId===a._id?o[r]._visibility[g](l,(function(e,t){e||b.push(t),--h<1&&(fe(u)&&u(b.slice(0)),a._hasListeners(m)&&a._emit(m,b.slice(0)))})):--h<1&&(fe(u)&&u(b.slice(0)),a._hasListeners(m)&&a._emit(m,b.slice(0)))}};const un=an},1332:(e,t,n)=>{var i=n(7199).z;n(2362),n(2485),n(1604),n(1703),n(7111);n(6217).$;t.z=i},7111:(e,t,n)=>{var i=n(7199).z;!function(){var e=i,t=e.lib.BlockCipher,n=e.algo,r=[],a=[],o=[],s=[],c=[],l=[],u=[],d=[],p=[],h=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,i=0;for(t=0;t<256;t++){var f=i^i<<1^i<<2^i<<3^i<<4;f=f>>>8^255&f^99,r[n]=f,a[f]=n;var m=e[n],g=e[m],v=e[g],b=257*e[f]^16843008*f;o[n]=b<<24|b>>>8,s[n]=b<<16|b>>>16,c[n]=b<<8|b>>>24,l[n]=b,b=16843009*v^65537*g^257*m^16843008*n,u[f]=b<<24|b>>>8,d[f]=b<<16|b>>>16,p[f]=b<<8|b>>>24,h[f]=b,n?(n=m^e[e[e[v^m]]],i^=e[e[i]]):n=i=1}}();var f=[0,1,2,4,8,16,32,64,128,27,54],m=n.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes/4,i=4*((this._nRounds=n+6)+1),a=this._keySchedule=[],o=0;o<i;o++)if(o<n)a[o]=t[o];else{var s=a[o-1];o%n?n>6&&o%n==4&&(s=r[s>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s]):(s=r[(s=s<<8|s>>>24)>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s],s^=f[o/n|0]<<24),a[o]=a[o-n]^s}for(var c=this._invKeySchedule=[],l=0;l<i;l++)o=i-l,s=l%4?a[o]:a[o-4],c[l]=l<4||o<=4?s:u[r[s>>>24]]^d[r[s>>>16&255]]^p[r[s>>>8&255]]^h[r[255&s]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,s,c,l,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,d,p,h,a),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,i,r,a,o,s){for(var c=this._nRounds,l=e[t]^n[0],u=e[t+1]^n[1],d=e[t+2]^n[2],p=e[t+3]^n[3],h=4,f=1;f<c;f++){var m=i[l>>>24]^r[u>>>16&255]^a[d>>>8&255]^o[255&p]^n[h++],g=i[u>>>24]^r[d>>>16&255]^a[p>>>8&255]^o[255&l]^n[h++],v=i[d>>>24]^r[p>>>16&255]^a[l>>>8&255]^o[255&u]^n[h++],b=i[p>>>24]^r[l>>>16&255]^a[u>>>8&255]^o[255&d]^n[h++];l=m,u=g,d=v,p=b}m=(s[l>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&p])^n[h++],g=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[p>>>8&255]<<8|s[255&l])^n[h++],v=(s[d>>>24]<<24|s[p>>>16&255]<<16|s[l>>>8&255]<<8|s[255&u])^n[h++],b=(s[p>>>24]<<24|s[l>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^n[h++],e[t]=m,e[t+1]=g,e[t+2]=v,e[t+3]=b},keySize:8});e.AES=t._createHelper(m)}()},1703:(e,t,n)=>{var i,r,a,o,s,c,l,u,d,p,h,f,m,g,v,b,y,_,A=n(7199).z;A.lib.Cipher||(a=(r=(i=A).lib).Base,o=r.WordArray,s=r.BufferedBlockAlgorithm,(c=i.enc).Utf8,l=c.Base64,u=i.algo.EvpKDF,d=r.Cipher=s.extend({cfg:a.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?_:b}return function(t){return{encrypt:function(n,i,r){return e(i).encrypt(t,n,i,r)},decrypt:function(n,i,r){return e(i).decrypt(t,n,i,r)}}}}()}),r.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),p=i.mode={},h=r.BlockCipherMode=a.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=p.CBC=function(){var e=h.extend();function t(e,t,n){var i=this._iv;if(i){var r=i;this._iv=void 0}else r=this._prevBlock;for(var a=0;a<n;a++)e[t+a]^=r[a]}return e.Encryptor=e.extend({processBlock:function(e,n){var i=this._cipher,r=i.blockSize;t.call(this,e,n,r),i.encryptBlock(e,n),this._prevBlock=e.slice(n,n+r)}}),e.Decryptor=e.extend({processBlock:function(e,n){var i=this._cipher,r=i.blockSize,a=e.slice(n,n+r);i.decryptBlock(e,n),t.call(this,e,n,r),this._prevBlock=a}}),e}(),m=(i.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,i=n-e.sigBytes%n,r=i<<24|i<<16|i<<8|i,a=[],s=0;s<i;s+=4)a.push(r);var c=o.create(a,i);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},r.BlockCipher=d.extend({cfg:d.cfg.extend({mode:f,padding:m}),reset:function(){d.reset.call(this);var e=this.cfg,t=e.iv,n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=n.createEncryptor;else i=n.createDecryptor,this._minBufferSize=1;this._mode=i.call(n,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4}),g=r.CipherParams=a.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),v=(i.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;if(n)var i=o.create([1398893684,1701076831]).concat(n).concat(t);else i=t;return i.toString(l)},parse:function(e){var t=l.parse(e),n=t.words;if(1398893684==n[0]&&1701076831==n[1]){var i=o.create(n.slice(2,4));n.splice(0,4),t.sigBytes-=16}return g.create({ciphertext:t,salt:i})}},b=r.SerializableCipher=a.extend({cfg:a.extend({format:v}),encrypt:function(e,t,n,i){i=this.cfg.extend(i);var r=e.createEncryptor(n,i),a=r.finalize(t),o=r.cfg;return g.create({ciphertext:a,key:n,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(n,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(i.kdf={}).OpenSSL={execute:function(e,t,n,i){i||(i=o.random(8));var r=u.create({keySize:t+n}).compute(e,i),a=o.create(r.words.slice(t),4*n);return r.sigBytes=4*t,g.create({key:r,iv:a,salt:i})}},_=r.PasswordBasedCipher=b.extend({cfg:b.cfg.extend({kdf:y}),encrypt:function(e,t,n,i){var r=(i=this.cfg.extend(i)).kdf.execute(n,e.keySize,e.ivSize);i.iv=r.iv;var a=b.encrypt.call(this,e,t,r.key,i);return a.mixIn(r),a},decrypt:function(e,t,n,i){i=this.cfg.extend(i),t=this._parse(t,i.format);var r=i.kdf.execute(n,e.keySize,e.ivSize,t.salt);return i.iv=r.iv,b.decrypt.call(this,e,t,r.key,i)}}))},7199:(e,t)=>{var n=n||function(e,t){var n={},i=n.lib={},r=i.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),a=i.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,r=e.sigBytes;if(this.clamp(),i%4)for(var a=0;a<r;a++){var o=n[a>>>2]>>>24-a%4*8&255;t[i+a>>>2]|=o<<24-(i+a)%4*8}else if(n.length>65535)for(a=0;a<r;a+=4)t[i+a>>>2]=n[a>>>2];else t.push.apply(t,n);return this.sigBytes+=r,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],i=0;i<t;i+=4)n.push(4294967296*e.random()|0);return new a.init(n,t)}}),o=n.enc={},s=o.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var a=t[r>>>2]>>>24-r%4*8&255;i.push((a>>>4).toString(16)),i.push((15&a).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new a.init(n,t/2)}},c=o.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var a=t[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new a.init(n,t)}},l=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},u=i.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,i=n.words,r=n.sigBytes,o=this.blockSize,s=r/(4*o),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*o,l=e.min(4*c,r);if(c){for(var u=0;u<c;u+=o)this._doProcessBlock(i,u);var d=i.splice(0,c);n.sigBytes-=l}return new a.init(d,l)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),d=(i.Hasher=u.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}}),n.algo={});return n}(Math);t.z=n},2362:(e,t,n)=>{var i,r,a=n(7199).z;r=(i=a).lib.WordArray,i.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,i=this._map;e.clamp();for(var r=[],a=0;a<n;a+=3)for(var o=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;s<4&&a+.75*s<n;s++)r.push(i.charAt(o>>>6*(3-s)&63));var c=i.charAt(64);if(c)for(;r.length%4;)r.push(c);return r.join("")},parse:function(e){var t=e.length,n=this._map,i=n.charAt(64);if(i){var a=e.indexOf(i);-1!=a&&(t=a)}for(var o=[],s=0,c=0;c<t;c++)if(c%4){var l=n.indexOf(e.charAt(c-1))<<c%4*2,u=n.indexOf(e.charAt(c))>>>6-c%4*2;o[s>>>2]|=(l|u)<<24-s%4*8,s++}return r.create(o,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},1604:(e,t,n)=>{var i,r,a,o,s,c,l;a=(r=(i=n(7199).z).lib).Base,o=r.WordArray,c=(s=i.algo).MD5,l=s.EvpKDF=a.extend({cfg:a.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,i=n.hasher.create(),r=o.create(),a=r.words,s=n.keySize,c=n.iterations;a.length<s;){l&&i.update(l);var l=i.update(e).finalize(t);i.reset();for(var u=1;u<c;u++)l=i.finalize(l),i.reset();r.concat(l)}return r.sigBytes=4*s,r}}),i.EvpKDF=function(e,t,n){return l.create(n).compute(e,t)}},6217:(e,t,n)=>{var i=n(7199).z,r={stringify:function(e){var t={ct:e.ciphertext.toString(i.enc.Base64)};return e.iv&&(t.iv=e.iv.toString()),e.salt&&(t.s=e.salt.toString()),JSON.stringify(t)},parse:function(e){var t=JSON.parse(e),n=i.lib.CipherParams.create({ciphertext:i.enc.Base64.parse(t.ct)});return t.iv&&(n.iv=i.enc.Hex.parse(t.iv)),t.s&&(n.salt=i.enc.Hex.parse(t.s)),n}};t.$=r},2485:(e,t,n)=>{var i=n(7199).z;!function(e){var t=i,n=t.lib,r=n.WordArray,a=n.Hasher,o=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=o.MD5=a.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var i=t+n,r=e[i];e[i]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var a=this._hash.words,o=e[t+0],c=e[t+1],h=e[t+2],f=e[t+3],m=e[t+4],g=e[t+5],v=e[t+6],b=e[t+7],y=e[t+8],_=e[t+9],A=e[t+10],w=e[t+11],k=e[t+12],S=e[t+13],C=e[t+14],x=e[t+15],E=a[0],T=a[1],P=a[2],R=a[3];E=l(E,T,P,R,o,7,s[0]),R=l(R,E,T,P,c,12,s[1]),P=l(P,R,E,T,h,17,s[2]),T=l(T,P,R,E,f,22,s[3]),E=l(E,T,P,R,m,7,s[4]),R=l(R,E,T,P,g,12,s[5]),P=l(P,R,E,T,v,17,s[6]),T=l(T,P,R,E,b,22,s[7]),E=l(E,T,P,R,y,7,s[8]),R=l(R,E,T,P,_,12,s[9]),P=l(P,R,E,T,A,17,s[10]),T=l(T,P,R,E,w,22,s[11]),E=l(E,T,P,R,k,7,s[12]),R=l(R,E,T,P,S,12,s[13]),P=l(P,R,E,T,C,17,s[14]),E=u(E,T=l(T,P,R,E,x,22,s[15]),P,R,c,5,s[16]),R=u(R,E,T,P,v,9,s[17]),P=u(P,R,E,T,w,14,s[18]),T=u(T,P,R,E,o,20,s[19]),E=u(E,T,P,R,g,5,s[20]),R=u(R,E,T,P,A,9,s[21]),P=u(P,R,E,T,x,14,s[22]),T=u(T,P,R,E,m,20,s[23]),E=u(E,T,P,R,_,5,s[24]),R=u(R,E,T,P,C,9,s[25]),P=u(P,R,E,T,f,14,s[26]),T=u(T,P,R,E,y,20,s[27]),E=u(E,T,P,R,S,5,s[28]),R=u(R,E,T,P,h,9,s[29]),P=u(P,R,E,T,b,14,s[30]),E=d(E,T=u(T,P,R,E,k,20,s[31]),P,R,g,4,s[32]),R=d(R,E,T,P,y,11,s[33]),P=d(P,R,E,T,w,16,s[34]),T=d(T,P,R,E,C,23,s[35]),E=d(E,T,P,R,c,4,s[36]),R=d(R,E,T,P,m,11,s[37]),P=d(P,R,E,T,b,16,s[38]),T=d(T,P,R,E,A,23,s[39]),E=d(E,T,P,R,S,4,s[40]),R=d(R,E,T,P,o,11,s[41]),P=d(P,R,E,T,f,16,s[42]),T=d(T,P,R,E,v,23,s[43]),E=d(E,T,P,R,_,4,s[44]),R=d(R,E,T,P,k,11,s[45]),P=d(P,R,E,T,x,16,s[46]),E=p(E,T=d(T,P,R,E,h,23,s[47]),P,R,o,6,s[48]),R=p(R,E,T,P,b,10,s[49]),P=p(P,R,E,T,C,15,s[50]),T=p(T,P,R,E,g,21,s[51]),E=p(E,T,P,R,k,6,s[52]),R=p(R,E,T,P,f,10,s[53]),P=p(P,R,E,T,A,15,s[54]),T=p(T,P,R,E,c,21,s[55]),E=p(E,T,P,R,y,6,s[56]),R=p(R,E,T,P,x,10,s[57]),P=p(P,R,E,T,v,15,s[58]),T=p(T,P,R,E,S,21,s[59]),E=p(E,T,P,R,m,6,s[60]),R=p(R,E,T,P,w,10,s[61]),P=p(P,R,E,T,h,15,s[62]),T=p(T,P,R,E,_,21,s[63]),a[0]=a[0]+E|0,a[1]=a[1]+T|0,a[2]=a[2]+P|0,a[3]=a[3]+R|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;n[r>>>5]|=128<<24-r%32;var a=e.floor(i/4294967296),o=i;n[15+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),n[14+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,n,i,r,a,o){var s=e+(t&n|~t&i)+r+o;return(s<<a|s>>>32-a)+t}function u(e,t,n,i,r,a,o){var s=e+(t&i|n&~i)+r+o;return(s<<a|s>>>32-a)+t}function d(e,t,n,i,r,a,o){var s=e+(t^n^i)+r+o;return(s<<a|s>>>32-a)+t}function p(e,t,n,i,r,a,o){var s=e+(n^(t|~i))+r+o;return(s<<a|s>>>32-a)+t}t.MD5=a._createHelper(c),t.HmacMD5=a._createHmacHelper(c)}(Math)},6126:(e,t,n)=>{const{webm:i,mp4:r}=n(7505),a=()=>"undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,o=()=>"wakeLock"in navigator;e.exports=class{constructor(){if(this.enabled=!1,o()){this._wakeLock=null;const e=()=>{null!==this._wakeLock&&"visible"===document.visibilityState&&this.enable()};document.addEventListener("visibilitychange",e),document.addEventListener("fullscreenchange",e)}else a()?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm",i),this._addSourceToVideo(this.noSleepVideo,"mp4",r),this.noSleepVideo.addEventListener("loadedmetadata",(()=>{this.noSleepVideo.duration<=1?this.noSleepVideo.setAttribute("loop",""):this.noSleepVideo.addEventListener("timeupdate",(()=>{this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}))})))}_addSourceToVideo(e,t,n){var i=document.createElement("source");i.src=n,i.type=`video/${t}`,e.appendChild(i)}get isEnabled(){return this.enabled}enable(){return o()?navigator.wakeLock.request("screen").then((e=>{this._wakeLock=e,this.enabled=!0,console.log("Wake Lock active."),this._wakeLock.addEventListener("release",(()=>{console.log("Wake Lock released.")}))})).catch((e=>{throw this.enabled=!1,console.error(`${e.name}, ${e.message}`),e})):a()?(this.disable(),console.warn("\n        NoSleep enabled for older iOS devices. This can interrupt\n        active or long-running network requests from completing successfully.\n        See https://github.com/richtr/NoSleep.js/issues/15 for more details.\n      "),this.noSleepTimer=window.setInterval((()=>{document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))}),15e3),this.enabled=!0,Promise.resolve()):this.noSleepVideo.play().then((e=>(this.enabled=!0,e))).catch((e=>{throw this.enabled=!1,e}))}disable(){o()?(this._wakeLock&&this._wakeLock.release(),this._wakeLock=null):a()?this.noSleepTimer&&(console.warn("\n          NoSleep now disabled for older iOS devices.\n        "),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause(),this.enabled=!1}}},7505:e=>{e.exports={webm:"data:video/webm;base64,GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4EEQoWBAhhTgGcBAAAAAAAVkhFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsghV17AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU1LjMzLjEwMFdBjUxhdmY1NS4zMy4xMDBzpJBlrrXf3DCDVB8KcgbMpcr+RImIQJBgAAAAAAAWVK5rAQAAAAAAD++uAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDiDgQEj44OEAmJaAOABAAAAAAAABrCBsLqBkK4BAAAAAAAPq9eBAnPFgQKcgQAitZyDdW5khohBX1ZPUkJJU4OBAuEBAAAAAAAAEZ+BArWIQOdwAAAAAABiZIEgY6JPbwIeVgF2b3JiaXMAAAAAAoC7AAAAAAAAgLUBAAAAAAC4AQN2b3JiaXMtAAAAWGlwaC5PcmcgbGliVm9yYmlzIEkgMjAxMDExMDEgKFNjaGF1ZmVudWdnZXQpAQAAABUAAABlbmNvZGVyPUxhdmM1NS41Mi4xMDIBBXZvcmJpcyVCQ1YBAEAAACRzGCpGpXMWhBAaQlAZ4xxCzmvsGUJMEYIcMkxbyyVzkCGkoEKIWyiB0JBVAABAAACHQXgUhIpBCCGEJT1YkoMnPQghhIg5eBSEaUEIIYQQQgghhBBCCCGERTlokoMnQQgdhOMwOAyD5Tj4HIRFOVgQgydB6CCED0K4moOsOQghhCQ1SFCDBjnoHITCLCiKgsQwuBaEBDUojILkMMjUgwtCiJqDSTX4GoRnQXgWhGlBCCGEJEFIkIMGQcgYhEZBWJKDBjm4FITLQagahCo5CB+EIDRkFQCQAACgoiiKoigKEBqyCgDIAAAQQFEUx3EcyZEcybEcCwgNWQUAAAEACAAAoEiKpEiO5EiSJFmSJVmSJVmS5omqLMuyLMuyLMsyEBqyCgBIAABQUQxFcRQHCA1ZBQBkAAAIoDiKpViKpWiK54iOCISGrAIAgAAABAAAEDRDUzxHlETPVFXXtm3btm3btm3btm3btm1blmUZCA1ZBQBAAAAQ0mlmqQaIMAMZBkJDVgEACAAAgBGKMMSA0JBVAABAAACAGEoOogmtOd+c46BZDppKsTkdnEi1eZKbirk555xzzsnmnDHOOeecopxZDJoJrTnnnMSgWQqaCa0555wnsXnQmiqtOeeccc7pYJwRxjnnnCateZCajbU555wFrWmOmkuxOeecSLl5UptLtTnnnHPOOeecc84555zqxekcnBPOOeecqL25lpvQxTnnnE/G6d6cEM4555xzzjnnnHPOOeecIDRkFQAABABAEIaNYdwpCNLnaCBGEWIaMulB9+gwCRqDnELq0ehopJQ6CCWVcVJKJwgNWQUAAAIAQAghhRRSSCGFFFJIIYUUYoghhhhyyimnoIJKKqmooowyyyyzzDLLLLPMOuyssw47DDHEEEMrrcRSU2011lhr7jnnmoO0VlprrbVSSimllFIKQkNWAQAgAAAEQgYZZJBRSCGFFGKIKaeccgoqqIDQkFUAACAAgAAAAABP8hzRER3RER3RER3RER3R8RzPESVREiVREi3TMjXTU0VVdWXXlnVZt31b2IVd933d933d+HVhWJZlWZZlWZZlWZZlWZZlWZYgNGQVAAACAAAghBBCSCGFFFJIKcYYc8w56CSUEAgNWQUAAAIACAAAAHAUR3EcyZEcSbIkS9IkzdIsT/M0TxM9URRF0zRV0RVdUTdtUTZl0zVdUzZdVVZtV5ZtW7Z125dl2/d93/d93/d93/d93/d9XQdCQ1YBABIAADqSIymSIimS4ziOJElAaMgqAEAGAEAAAIriKI7jOJIkSZIlaZJneZaomZrpmZ4qqkBoyCoAABAAQAAAAAAAAIqmeIqpeIqoeI7oiJJomZaoqZoryqbsuq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq4LhIasAgAkAAB0JEdyJEdSJEVSJEdygNCQVQCADACAAAAcwzEkRXIsy9I0T/M0TxM90RM901NFV3SB0JBVAAAgAIAAAAAAAAAMybAUy9EcTRIl1VItVVMt1VJF1VNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVN0zRNEwgNWQkAkAEAkBBTLS3GmgmLJGLSaqugYwxS7KWxSCpntbfKMYUYtV4ah5RREHupJGOKQcwtpNApJq3WVEKFFKSYYyoVUg5SIDRkhQAQmgHgcBxAsixAsiwAAAAAAAAAkDQN0DwPsDQPAAAAAAAAACRNAyxPAzTPAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAA0DwP8DwR8EQRAAAAAAAAACzPAzTRAzxRBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAAsDwP8EQR0DwRAAAAAAAAACzPAzxRBDzRAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAEOAAABBgIRQasiIAiBMAcEgSJAmSBM0DSJYFTYOmwTQBkmVB06BpME0AAAAAAAAAAAAAJE2DpkHTIIoASdOgadA0iCIAAAAAAAAAAAAAkqZB06BpEEWApGnQNGgaRBEAAAAAAAAAAAAAzzQhihBFmCbAM02IIkQRpgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAGHAAAAgwoQwUGrIiAIgTAHA4imUBAIDjOJYFAACO41gWAABYliWKAABgWZooAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAYcAAACDChDBQashIAiAIAcCiKZQHHsSzgOJYFJMmyAJYF0DyApgFEEQAIAAAocAAACLBBU2JxgEJDVgIAUQAABsWxLE0TRZKkaZoniiRJ0zxPFGma53meacLzPM80IYqiaJoQRVE0TZimaaoqME1VFQAAUOAAABBgg6bE4gCFhqwEAEICAByKYlma5nmeJ4qmqZokSdM8TxRF0TRNU1VJkqZ5niiKommapqqyLE3zPFEURdNUVVWFpnmeKIqiaaqq6sLzPE8URdE0VdV14XmeJ4qiaJqq6roQRVE0TdNUTVV1XSCKpmmaqqqqrgtETxRNU1Vd13WB54miaaqqq7ouEE3TVFVVdV1ZBpimaaqq68oyQFVV1XVdV5YBqqqqruu6sgxQVdd1XVmWZQCu67qyLMsCAAAOHAAAAoygk4wqi7DRhAsPQKEhKwKAKAAAwBimFFPKMCYhpBAaxiSEFEImJaXSUqogpFJSKRWEVEoqJaOUUmopVRBSKamUCkIqJZVSAADYgQMA2IGFUGjISgAgDwCAMEYpxhhzTiKkFGPOOScRUoox55yTSjHmnHPOSSkZc8w556SUzjnnnHNSSuacc845KaVzzjnnnJRSSuecc05KKSWEzkEnpZTSOeecEwAAVOAAABBgo8jmBCNBhYasBABSAQAMjmNZmuZ5omialiRpmud5niiapiZJmuZ5nieKqsnzPE8URdE0VZXneZ4oiqJpqirXFUXTNE1VVV2yLIqmaZqq6rowTdNUVdd1XZimaaqq67oubFtVVdV1ZRm2raqq6rqyDFzXdWXZloEsu67s2rIAAPAEBwCgAhtWRzgpGgssNGQlAJABAEAYg5BCCCFlEEIKIYSUUggJAAAYcAAACDChDBQashIASAUAAIyx1lprrbXWQGettdZaa62AzFprrbXWWmuttdZaa6211lJrrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmstpZRSSimllFJKKaWUUkoppZRSSgUA+lU4APg/2LA6wknRWGChISsBgHAAAMAYpRhzDEIppVQIMeacdFRai7FCiDHnJKTUWmzFc85BKCGV1mIsnnMOQikpxVZjUSmEUlJKLbZYi0qho5JSSq3VWIwxqaTWWoutxmKMSSm01FqLMRYjbE2ptdhqq7EYY2sqLbQYY4zFCF9kbC2m2moNxggjWywt1VprMMYY3VuLpbaaizE++NpSLDHWXAAAd4MDAESCjTOsJJ0VjgYXGrISAAgJACAQUooxxhhzzjnnpFKMOeaccw5CCKFUijHGnHMOQgghlIwx5pxzEEIIIYRSSsaccxBCCCGEkFLqnHMQQgghhBBKKZ1zDkIIIYQQQimlgxBCCCGEEEoopaQUQgghhBBCCKmklEIIIYRSQighlZRSCCGEEEIpJaSUUgohhFJCCKGElFJKKYUQQgillJJSSimlEkoJJYQSUikppRRKCCGUUkpKKaVUSgmhhBJKKSWllFJKIYQQSikFAAAcOAAABBhBJxlVFmGjCRcegEJDVgIAZAAAkKKUUiktRYIipRikGEtGFXNQWoqocgxSzalSziDmJJaIMYSUk1Qy5hRCDELqHHVMKQYtlRhCxhik2HJLoXMOAAAAQQCAgJAAAAMEBTMAwOAA4XMQdAIERxsAgCBEZohEw0JweFAJEBFTAUBigkIuAFRYXKRdXECXAS7o4q4DIQQhCEEsDqCABByccMMTb3jCDU7QKSp1IAAAAAAADADwAACQXAAREdHMYWRobHB0eHyAhIiMkAgAAAAAABcAfAAAJCVAREQ0cxgZGhscHR4fICEiIyQBAIAAAgAAAAAggAAEBAQAAAAAAAIAAAAEBB9DtnUBAAAAAAAEPueBAKOFggAAgACjzoEAA4BwBwCdASqwAJAAAEcIhYWIhYSIAgIABhwJ7kPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99YAD+/6tQgKOFggADgAqjhYIAD4AOo4WCACSADqOZgQArADECAAEQEAAYABhYL/QACIBDmAYAAKOFggA6gA6jhYIAT4AOo5mBAFMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAGSADqOFggB6gA6jmYEAewAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAj4AOo5mBAKMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAKSADqOFggC6gA6jmYEAywAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAz4AOo4WCAOSADqOZgQDzADECAAEQEAAYABhYL/QACIBDmAYAAKOFggD6gA6jhYIBD4AOo5iBARsAEQIAARAQFGAAYWC/0AAiAQ5gGACjhYIBJIAOo4WCATqADqOZgQFDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggFPgA6jhYIBZIAOo5mBAWsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAXqADqOFggGPgA6jmYEBkwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIBpIAOo4WCAbqADqOZgQG7ADECAAEQEAAYABhYL/QACIBDmAYAAKOFggHPgA6jmYEB4wAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIB5IAOo4WCAfqADqOZgQILADECAAEQEAAYABhYL/QACIBDmAYAAKOFggIPgA6jhYICJIAOo5mBAjMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAjqADqOFggJPgA6jmYECWwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYICZIAOo4WCAnqADqOZgQKDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggKPgA6jhYICpIAOo5mBAqsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCArqADqOFggLPgA6jmIEC0wARAgABEBAUYABhYL/QACIBDmAYAKOFggLkgA6jhYIC+oAOo5mBAvsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAw+ADqOZgQMjADECAAEQEAAYABhYL/QACIBDmAYAAKOFggMkgA6jhYIDOoAOo5mBA0sAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA0+ADqOFggNkgA6jmYEDcwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIDeoAOo4WCA4+ADqOZgQObADECAAEQEAAYABhYL/QACIBDmAYAAKOFggOkgA6jhYIDuoAOo5mBA8MAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA8+ADqOFggPkgA6jhYID+oAOo4WCBA+ADhxTu2sBAAAAAAAAEbuPs4EDt4r3gQHxghEr8IEK",mp4:"data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"}},4155:e=>{var t,n,i=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var s,c=[],l=!1,u=-1;function d(){l&&s&&(l=!1,s.length?c=s.concat(c):u=-1,c.length&&p())}function p(){if(!l){var e=o(d);l=!0;for(var t=c.length;t;){for(s=c,c=[];++u<t;)s&&s[u].run();u=-1,t=c.length}s=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function f(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||o(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},2703:(e,t,n)=>{"use strict";var i=n(414);function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,a,o){if(o!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},5697:(e,t,n)=>{e.exports=n(2703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4375:e=>{let t;e.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:global):e=>(t||(t=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))},1798:(e,t,n)=>{"use strict";var i=n(4155),r=65536,a=n(9509).Buffer,o=global.crypto||global.msCrypto;o&&o.getRandomValues?e.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var n=a.allocUnsafe(e);if(e>0)if(e>r)for(var s=0;s<e;s+=r)o.getRandomValues(n.slice(s,s+r));else o.getRandomValues(n);return"function"==typeof t?i.nextTick((function(){t(null,n)})):n}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},4448:(e,t,n)=>{"use strict";var i=n(7294),r=n(3840);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function m(e,t,n,i,r,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,n,i){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null==t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!d.call(f,e)||!d.call(h,e)&&(p.test(e)?f[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),w=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),E=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function N(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=I&&e[I]||e["@@iterator"])?e:null}var L,B=Object.assign;function $(e){if(void 0===L)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var j=!1;function U(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var i=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){i=e}e.call(t.prototype)}else{try{throw Error()}catch(e){i=e}e()}}catch(t){if(t&&i&&"string"==typeof t.stack){for(var r=t.stack.split("\n"),a=i.stack.split("\n"),o=r.length-1,s=a.length-1;1<=o&&0<=s&&r[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(r[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||r[o]!==a[s]){var c="\n"+r[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=o&&0<=s);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?$(e):""}function F(e){switch(e.tag){case 5:return $(e.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return U(e.type,!1);case 11:return U(e.type.render,!1);case 1:return U(e.type,!0);default:return""}}function Z(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case k:return"Fragment";case w:return"Portal";case C:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case R:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case x:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:Z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return Z(e(t))}catch(e){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=q(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function Q(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function G(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function J(e,t){G(e,t);var n=V(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function K(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function ae(e,t){var n=V(t.value),i=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function pe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=me(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(he).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ve=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function Ae(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,ke=null,Se=null;function Ce(e){if(e=yr(e)){if("function"!=typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=Ar(t),we(e.stateNode,e.type,t))}}function xe(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Ee(){if(ke){var e=ke,t=Se;if(Se=ke=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Te(e,t){return e(t)}function Pe(){}var Re=!1;function Oe(e,t,n){if(Re)return e(t,n);Re=!0;try{return Te(e,t,n)}finally{Re=!1,(null!==ke||null!==Se)&&(Pe(),Ee())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var i=Ar(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}var Me=!1;if(u)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(ue){Me=!1}function Ne(e,t,n,i,r,a,o,s,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this.onError(e)}}var Le=!1,Be=null,$e=!1,je=null,Ue={onError:function(e){Le=!0,Be=e}};function Fe(e,t,n,i,r,a,o,s,c){Le=!1,Be=null,Ne.apply(Ue,arguments)}function Ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Ve(e){if(Ze(e)!==e)throw Error(a(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Ve(r),e;if(o===i)return Ve(r),t;o=o.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=o;else{for(var s=!1,c=r.child;c;){if(c===n){s=!0,n=r,i=o;break}if(c===i){s=!0,i=r,n=o;break}c=c.sibling}if(!s){for(c=o.child;c;){if(c===n){s=!0,n=o,i=r;break}if(c===i){s=!0,i=o,n=r;break}c=c.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=r.unstable_scheduleCallback,Qe=r.unstable_cancelCallback,Xe=r.unstable_shouldYield,Ye=r.unstable_requestPaint,Ge=r.unstable_now,Je=r.unstable_getCurrentPriorityLevel,Ke=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,at=null,ot=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(st(e)/ct|0)|0},st=Math.log,ct=Math.LN2,lt=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~r;0!==s?i=dt(s):0!=(a&=o)&&(i=dt(a))}else 0!=(o=n&~r)?i=dt(o):0!==a&&(i=dt(a));if(0===i)return 0;if(0!==t&&t!==i&&0==(t&r)&&((r=i&-i)>=(a=t&-t)||16===r&&0!=(4194240&a)))return t;if(0!=(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-ot(t)),i|=e[n],t&=~r;return i}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0==(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ot(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var yt=0;function _t(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var At,wt,kt,St,Ct,xt=!1,Et=[],Tt=null,Pt=null,Rt=null,Ot=new Map,Dt=new Map,Mt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Lt(e,t,n,i,r,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[r]},null!==t&&null!==(t=yr(t))&&wt(t),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Bt(e){var t=br(e.target);if(null!==t){var n=Ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Ct(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function $t(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yr(n))&&wt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);_e=i,n.target.dispatchEvent(i),_e=null,t.shift()}return!0}function jt(e,t,n){$t(e)&&n.delete(t)}function Ut(){xt=!1,null!==Tt&&$t(Tt)&&(Tt=null),null!==Pt&&$t(Pt)&&(Pt=null),null!==Rt&&$t(Rt)&&(Rt=null),Ot.forEach(jt),Dt.forEach(jt)}function Ft(e,t){e.blockedOn===t&&(e.blockedOn=null,xt||(xt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ut)))}function Zt(e){function t(t){return Ft(t,e)}if(0<Et.length){Ft(Et[0],e);for(var n=1;n<Et.length;n++){var i=Et[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Tt&&Ft(Tt,e),null!==Pt&&Ft(Pt,e),null!==Rt&&Ft(Rt,e),Ot.forEach(t),Dt.forEach(t),n=0;n<Mt.length;n++)(i=Mt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)Bt(n),null===n.blockedOn&&Mt.shift()}var zt=_.ReactCurrentBatchConfig,Vt=!0;function qt(e,t,n,i){var r=yt,a=zt.transition;zt.transition=null;try{yt=1,Ht(e,t,n,i)}finally{yt=r,zt.transition=a}}function Wt(e,t,n,i){var r=yt,a=zt.transition;zt.transition=null;try{yt=4,Ht(e,t,n,i)}finally{yt=r,zt.transition=a}}function Ht(e,t,n,i){if(Vt){var r=Xt(e,t,n,i);if(null===r)Vi(e,t,i,Qt,n),Nt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,i,r),!0;case"dragenter":return Pt=Lt(Pt,e,t,n,i,r),!0;case"mouseover":return Rt=Lt(Rt,e,t,n,i,r),!0;case"pointerover":var a=r.pointerId;return Ot.set(a,Lt(Ot.get(a)||null,e,t,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,Dt.set(a,Lt(Dt.get(a)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Nt(e,i),4&t&&-1<It.indexOf(e)){for(;null!==r;){var a=yr(r);if(null!==a&&At(a),null===(a=Xt(e,t,n,i))&&Vi(e,t,i,Qt,n),a===r)break;r=a}null!==r&&i.stopPropagation()}else Vi(e,t,i,null,n)}}var Qt=null;function Xt(e,t,n,i){if(Qt=null,null!==(e=br(e=Ae(i))))if(null===(t=Ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ke:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Gt=null,Jt=null,Kt=null;function en(){if(Kt)return Kt;var e,t,n=Jt,i=n.length,r="value"in Gt?Gt.value:Gt.textContent,a=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[a-t];t++);return Kt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,i,r,a){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(ln),dn=B({},ln,{view:0,detail:0}),pn=an(dn),hn=B({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,sn=e.screenY-cn.screenY):sn=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=an(hn),mn=an(B({},hn,{dataTransfer:0})),gn=an(B({},dn,{relatedTarget:0})),vn=an(B({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=B({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=an(bn),_n=an(B({},ln,{data:0})),An={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Cn(){return Sn}var xn=B({},dn,{key:function(e){if(e.key){var t=An[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(xn),Tn=an(B({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=an(B({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Rn=an(B({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=B({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(On),Mn=[9,13,27,32],In=u&&"CompositionEvent"in window,Nn=null;u&&"documentMode"in document&&(Nn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Nn,Bn=u&&(!In||Nn&&8<Nn&&11>=Nn),$n=String.fromCharCode(32),jn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Zn=!1,zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function qn(e,t,n,i){xe(i),0<(t=Wi(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function Qn(e){$i(e,0)}function Xn(e){if(H(_r(e)))return e}function Yn(e,t){if("change"===e)return t}var Gn=!1;if(u){var Jn;if(u){var Kn="oninput"in document;if(!Kn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Kn="function"==typeof ei.oninput}Jn=Kn}else Jn=!1;Gn=Jn&&(!document.documentMode||9<document.documentMode)}function ti(){Wn&&(Wn.detachEvent("onpropertychange",ni),Hn=Wn=null)}function ni(e){if("value"===e.propertyName&&Xn(Hn)){var t=[];qn(t,Hn,e,Ae(e)),Oe(Qn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Hn=n,(Wn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Hn)}function ai(e,t){if("click"===e)return Xn(t)}function oi(e,t){if("input"===e||"change"===e)return Xn(t)}var si="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function ci(e,t){if(si(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!d.call(t,r)||!si(e[r],t[r]))return!1}return!0}function li(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=li(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=li(i)}}function di(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?di(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pi(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function hi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=pi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&di(n.ownerDocument.documentElement,n)){if(null!==i&&hi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,a=Math.min(i.start,r);i=void 0===i.end?a:Math.min(i.end,r),!e.extend&&a>i&&(r=i,i=a,a=r),r=ui(n,a);var o=ui(n,i);r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),a>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=u&&"documentMode"in document&&11>=document.documentMode,gi=null,vi=null,bi=null,yi=!1;function _i(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yi||null==gi||gi!==Q(i)||(i="selectionStart"in(i=gi)&&hi(i)?{start:i.selectionStart,end:i.selectionEnd}:{anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},bi&&ci(bi,i)||(bi=i,0<(i=Wi(vi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gi)))}function Ai(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:Ai("Animation","AnimationEnd"),animationiteration:Ai("Animation","AnimationIteration"),animationstart:Ai("Animation","AnimationStart"),transitionend:Ai("Transition","TransitionEnd")},ki={},Si={};function Ci(e){if(ki[e])return ki[e];if(!wi[e])return e;var t,n=wi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Si)return ki[e]=n[t];return e}u&&(Si=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var xi=Ci("animationend"),Ei=Ci("animationiteration"),Ti=Ci("animationstart"),Pi=Ci("transitionend"),Ri=new Map,Oi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(e,t){Ri.set(e,t),c(t,[e])}for(var Mi=0;Mi<Oi.length;Mi++){var Ii=Oi[Mi];Di(Ii.toLowerCase(),"on"+(Ii[0].toUpperCase()+Ii.slice(1)))}Di(xi,"onAnimationEnd"),Di(Ei,"onAnimationIteration"),Di(Ti,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(Pi,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ni="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Li=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ni));function Bi(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,o,s,c,l){if(Fe.apply(this,arguments),Le){if(!Le)throw Error(a(198));var u=Be;Le=!1,Be=null,$e||($e=!0,je=u)}}(i,t,void 0,e),e.currentTarget=null}function $i(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var o=i.length-1;0<=o;o--){var s=i[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&r.isPropagationStopped())break e;Bi(r,s,l),a=c}else for(o=0;o<i.length;o++){if(c=(s=i[o]).instance,l=s.currentTarget,s=s.listener,c!==a&&r.isPropagationStopped())break e;Bi(r,s,l),a=c}}}if($e)throw e=je,$e=!1,je=null,e}function ji(e,t){var n=t[mr];void 0===n&&(n=t[mr]=new Set);var i=e+"__bubble";n.has(i)||(zi(t,e,2,!1),n.add(i))}function Ui(e,t,n){var i=0;t&&(i|=4),zi(n,e,i,t)}var Fi="_reactListening"+Math.random().toString(36).slice(2);function Zi(e){if(!e[Fi]){e[Fi]=!0,o.forEach((function(t){"selectionchange"!==t&&(Li.has(t)||Ui(t,!1,e),Ui(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fi]||(t[Fi]=!0,Ui("selectionchange",!1,t))}}function zi(e,t,n,i){switch(Yt(t)){case 1:var r=qt;break;case 4:r=Wt;break;default:r=Ht}n=r.bind(null,t,n,e),r=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Vi(e,t,n,i,r){var a=i;if(0==(1&t)&&0==(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var s=i.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===r||8===c.nodeType&&c.parentNode===r))return;o=o.return}for(;null!==s;){if(null===(o=br(s)))return;if(5===(c=o.tag)||6===c){i=a=o;continue e}s=s.parentNode}}i=i.return}Oe((function(){var i=a,r=Ae(n),o=[];e:{var s=Ri.get(e);if(void 0!==s){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=En;break;case"focusin":l="focus",c=gn;break;case"focusout":l="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Pn;break;case xi:case Ei:case Ti:c=vn;break;case Pi:c=Rn;break;case"scroll":c=pn;break;case"wheel":c=Dn;break;case"copy":case"cut":case"paste":c=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Tn}var u=0!=(4&t),d=!u&&"scroll"===e,p=u?null!==s?s+"Capture":null:s;u=[];for(var h,f=i;null!==f;){var m=(h=f).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==p&&null!=(m=De(f,p))&&u.push(qi(f,m,h))),d)break;f=f.return}0<u.length&&(s=new c(s,l,null,n,r),o.push({event:s,listeners:u}))}}if(0==(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===_e||!(l=n.relatedTarget||n.fromElement)||!br(l)&&!l[fr])&&(c||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=i,null!==(l=(l=n.relatedTarget||n.toElement)?br(l):null)&&(l!==(d=Ze(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=i),c!==l)){if(u=fn,m="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,m="onPointerLeave",p="onPointerEnter",f="pointer"),d=null==c?s:_r(c),h=null==l?s:_r(l),(s=new u(m,f+"leave",c,n,r)).target=d,s.relatedTarget=h,m=null,br(r)===i&&((u=new u(p,f+"enter",l,n,r)).target=h,u.relatedTarget=d,m=u),d=m,c&&l)e:{for(p=l,f=0,h=u=c;h;h=Hi(h))f++;for(h=0,m=p;m;m=Hi(m))h++;for(;0<f-h;)u=Hi(u),f--;for(;0<h-f;)p=Hi(p),h--;for(;f--;){if(u===p||null!==p&&u===p.alternate)break e;u=Hi(u),p=Hi(p)}u=null}else u=null;null!==c&&Qi(o,s,c,u,!1),null!==l&&null!==d&&Qi(o,d,l,u,!0)}if("select"===(c=(s=i?_r(i):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var g=Yn;else if(Vn(s))if(Gn)g=oi;else{g=ri;var v=ii}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ai);switch(g&&(g=g(e,i))?qn(o,g,n,r):(v&&v(e,s,i),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=i?_r(i):window,e){case"focusin":(Vn(v)||"true"===v.contentEditable)&&(gi=v,vi=i,bi=null);break;case"focusout":bi=vi=gi=null;break;case"mousedown":yi=!0;break;case"contextmenu":case"mouseup":case"dragend":yi=!1,_i(o,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":_i(o,n,r)}var b;if(In)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Zn?Un(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Bn&&"ko"!==n.locale&&(Zn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Zn&&(b=en()):(Jt="value"in(Gt=r)?Gt.value:Gt.textContent,Zn=!0)),0<(v=Wi(i,y)).length&&(y=new _n(y,e,null,n,r),o.push({event:y,listeners:v}),(b||null!==(b=Fn(n)))&&(y.data=b))),(b=Ln?function(e,t){switch(e){case"compositionend":return Fn(t);case"keypress":return 32!==t.which?null:(jn=!0,$n);case"textInput":return(e=t.data)===$n&&jn?null:e;default:return null}}(e,n):function(e,t){if(Zn)return"compositionend"===e||!In&&Un(e,t)?(e=en(),Kt=Jt=Gt=null,Zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(i=Wi(i,"onBeforeInput")).length&&(r=new _n("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=b)}$i(o,t)}))}function qi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,a=r.stateNode;5===r.tag&&null!==a&&(r=a,null!=(a=De(e,n))&&i.unshift(qi(e,a,r)),null!=(a=De(e,t))&&i.push(qi(e,a,r))),e=e.return}return i}function Hi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qi(e,t,n,i,r){for(var a=t._reactName,o=[];null!==n&&n!==i;){var s=n,c=s.alternate,l=s.stateNode;if(null!==c&&c===i)break;5===s.tag&&null!==l&&(s=l,r?null!=(c=De(n,a))&&o.unshift(qi(n,c,s)):r||null!=(c=De(n,a))&&o.push(qi(n,c,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Xi=/\r\n?/g,Yi=/\u0000|\uFFFD/g;function Gi(e){return("string"==typeof e?e:""+e).replace(Xi,"\n").replace(Yi,"")}function Ji(e,t,n){if(t=Gi(t),Gi(e)!==t&&n)throw Error(a(425))}function Ki(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"==typeof setTimeout?setTimeout:void 0,rr="function"==typeof clearTimeout?clearTimeout:void 0,ar="function"==typeof Promise?Promise:void 0,or="function"==typeof queueMicrotask?queueMicrotask:void 0!==ar?function(e){return ar.resolve(null).then(e).catch(sr)}:ir;function sr(e){setTimeout((function(){throw e}))}function cr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Zt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Zt(t)}function lr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),pr="__reactFiber$"+dr,hr="__reactProps$"+dr,fr="__reactContainer$"+dr,mr="__reactEvents$"+dr,gr="__reactListeners$"+dr,vr="__reactHandles$"+dr;function br(e){var t=e[pr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[pr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[pr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function yr(e){return!(e=e[pr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _r(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Ar(e){return e[hr]||null}var wr=[],kr=-1;function Sr(e){return{current:e}}function Cr(e){0>kr||(e.current=wr[kr],wr[kr]=null,kr--)}function xr(e,t){kr++,wr[kr]=e.current,e.current=t}var Er={},Tr=Sr(Er),Pr=Sr(!1),Rr=Er;function Or(e,t){var n=e.type.contextTypes;if(!n)return Er;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Dr(e){return null!=e.childContextTypes}function Mr(){Cr(Pr),Cr(Tr)}function Ir(e,t,n){if(Tr.current!==Er)throw Error(a(168));xr(Tr,t),xr(Pr,n)}function Nr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!=typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(a(108,z(e)||"Unknown",r));return B({},n,i)}function Lr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Er,Rr=Tr.current,xr(Tr,e),xr(Pr,Pr.current),!0}function Br(e,t,n){var i=e.stateNode;if(!i)throw Error(a(169));n?(e=Nr(e,t,Rr),i.__reactInternalMemoizedMergedChildContext=e,Cr(Pr),Cr(Tr),xr(Tr,e)):Cr(Pr),xr(Pr,n)}var $r=null,jr=!1,Ur=!1;function Fr(e){null===$r?$r=[e]:$r.push(e)}function Zr(){if(!Ur&&null!==$r){Ur=!0;var e=0,t=yt;try{var n=$r;for(yt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}$r=null,jr=!1}catch(t){throw null!==$r&&($r=$r.slice(e+1)),He(Ke,Zr),t}finally{yt=t,Ur=!1}}return null}var zr=_.ReactCurrentBatchConfig;function Vr(e,t){if(e&&e.defaultProps){for(var n in t=B({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var qr=Sr(null),Wr=null,Hr=null,Qr=null;function Xr(){Qr=Hr=Wr=null}function Yr(e){var t=qr.current;Cr(qr),e._currentValue=t}function Gr(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Jr(e,t){Wr=e,Qr=Hr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(As=!0),e.firstContext=null)}function Kr(e){var t=e._currentValue;if(Qr!==e)if(e={context:e,memoizedValue:t,next:null},null===Hr){if(null===Wr)throw Error(a(308));Hr=e,Wr.dependencies={lanes:0,firstContext:e}}else Hr=Hr.next=e;return t}var ea=null,ta=!1;function na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ia(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function aa(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,tl(e)?(null===(e=n.interleaved)?(t.next=t,null===ea?ea=[n]:ea.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,bt(e,n)}}function sa(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?r=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?r=a=t:a=a.next=t}else r=a=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ca(e,t,n,i){var r=e.updateQueue;ta=!1;var a=r.firstBaseUpdate,o=r.lastBaseUpdate,s=r.shared.pending;if(null!==s){r.shared.pending=null;var c=s,l=c.next;c.next=null,null===o?a=l:o.next=l,o=c;var u=e.alternate;null!==u&&(s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c)}if(null!==a){var d=r.baseState;for(o=0,u=l=c=null,s=a;;){var p=s.lane,h=s.eventTime;if((i&p)===p){null!==u&&(u=u.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(p=t,h=n,m.tag){case 1:if("function"==typeof(f=m.payload)){d=f.call(h,d,p);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(p="function"==typeof(f=m.payload)?f.call(h,d,p):f))break e;d=B({},d,p);break e;case 2:ta=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(p=r.effects)?r.effects=[s]:p.push(s))}else h={eventTime:h,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(l=u=h,c=d):u=u.next=h,o|=p;if(null===(s=s.next)){if(null===(s=r.shared.pending))break;s=(p=s).next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}if(null===u&&(c=d),r.baseState=c,r.firstBaseUpdate=l,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===a&&(r.shared.lanes=0);Mc|=o,e.lanes=o,e.memoizedState=d}}function la(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!=typeof r)throw Error(a(191,r));r.call(i)}}}var ua=(new i.Component).refs;function da(e,t,n,i){n=null==(n=n(i,t=e.memoizedState))?t:B({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var pa={isMounted:function(e){return!!(e=e._reactInternals)&&Ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Gc(),r=Jc(e),a=ra(i,r);a.payload=t,null!=n&&(a.callback=n),aa(e,a),null!==(t=Kc(e,r,i))&&oa(t,e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Gc(),r=Jc(e),a=ra(i,r);a.tag=1,a.payload=t,null!=n&&(a.callback=n),aa(e,a),null!==(t=Kc(e,r,i))&&oa(t,e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Gc(),i=Jc(e),r=ra(n,i);r.tag=2,null!=t&&(r.callback=t),aa(e,r),null!==(t=Kc(e,i,n))&&oa(t,e,i)}};function ha(e,t,n,i,r,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,o):!(t.prototype&&t.prototype.isPureReactComponent&&ci(n,i)&&ci(r,a))}function fa(e,t,n){var i=!1,r=Er,a=t.contextType;return"object"==typeof a&&null!==a?a=Kr(a):(r=Dr(t)?Rr:Tr.current,a=(i=null!=(i=t.contextTypes))?Or(e,r):Er),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=pa,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function ma(e,t,n,i){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&pa.enqueueReplaceState(t,t.state,null)}function ga(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=ua,na(e);var a=t.contextType;"object"==typeof a&&null!==a?r.context=Kr(a):(a=Dr(t)?Rr:Tr.current,r.context=Or(e,a)),r.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(da(e,t,a,n),r.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(t=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&pa.enqueueReplaceState(r,r.state,null),ca(e,n,r,i),r.state=e.memoizedState),"function"==typeof r.componentDidMount&&(e.flags|=4194308)}var va=[],ba=0,ya=null,_a=0,Aa=[],wa=0,ka=null,Sa=1,Ca="";function xa(e,t){va[ba++]=_a,va[ba++]=ya,ya=e,_a=t}function Ea(e,t,n){Aa[wa++]=Sa,Aa[wa++]=Ca,Aa[wa++]=ka,ka=e;var i=Sa;e=Ca;var r=32-ot(i)-1;i&=~(1<<r),n+=1;var a=32-ot(t)+r;if(30<a){var o=r-r%5;a=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Sa=1<<32-ot(t)+r|n<<r|i,Ca=a+e}else Sa=1<<a|n<<r|i,Ca=e}function Ta(e){null!==e.return&&(xa(e,1),Ea(e,1,0))}function Pa(e){for(;e===ya;)ya=va[--ba],va[ba]=null,_a=va[--ba],va[ba]=null;for(;e===ka;)ka=Aa[--wa],Aa[wa]=null,Ca=Aa[--wa],Aa[wa]=null,Sa=Aa[--wa],Aa[wa]=null}var Ra=null,Oa=null,Da=!1,Ma=null;function Ia(e,t){var n=Rl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Na(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ra=e,Oa=lr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ra=e,Oa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==ka?{id:Sa,overflow:Ca}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ra=e,Oa=null,!0);default:return!1}}function La(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function Ba(e){if(Da){var t=Oa;if(t){var n=t;if(!Na(e,t)){if(La(e))throw Error(a(418));t=lr(n.nextSibling);var i=Ra;t&&Na(e,t)?Ia(i,n):(e.flags=-4097&e.flags|2,Da=!1,Ra=e)}}else{if(La(e))throw Error(a(418));e.flags=-4097&e.flags|2,Da=!1,Ra=e}}}function $a(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ra=e}function ja(e){if(e!==Ra)return!1;if(!Da)return $a(e),Da=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=Oa)){if(La(e)){for(e=Oa;e;)e=lr(e.nextSibling);throw Error(a(418))}for(;t;)Ia(e,t),t=lr(t.nextSibling)}if($a(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Oa=lr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Oa=null}}else Oa=Ra?lr(e.stateNode.nextSibling):null;return!0}function Ua(){Oa=Ra=null,Da=!1}function Fa(e){null===Ma?Ma=[e]:Ma.push(e)}function Za(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var i=n.stateNode}if(!i)throw Error(a(147,e));var r=i,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;t===ua&&(t=r.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function za(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Va(e){return(0,e._init)(e._payload)}function qa(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Dl(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,i){return null===t||6!==t.tag?((t=Ll(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function l(e,t,n,i){var a=n.type;return a===k?d(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===D&&Va(a)===t.type)?((i=r(t,n.props)).ref=Za(e,t,n),i.return=e,i):((i=Ml(n.type,n.key,n.props,null,e.mode,i)).ref=Za(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bl(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,i,a){return null===t||7!==t.tag?((t=Il(n,e.mode,i,a)).return=e,t):((t=r(t,n)).return=e,t)}function p(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Ll(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case A:return(n=Ml(t.type,t.key,t.props,null,e.mode,n)).ref=Za(e,null,t),n.return=e,n;case w:return(t=Bl(t,e.mode,n)).return=e,t;case D:return p(e,(0,t._init)(t._payload),n)}if(te(t)||N(t))return(t=Il(t,e.mode,n,null)).return=e,t;za(e,t)}return null}function h(e,t,n,i){var r=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==r?null:c(e,t,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case A:return n.key===r?l(e,t,n,i):null;case w:return n.key===r?u(e,t,n,i):null;case D:return h(e,t,(r=n._init)(n._payload),i)}if(te(n)||N(n))return null!==r?null:d(e,t,n,i,null);za(e,n)}return null}function f(e,t,n,i,r){if("string"==typeof i&&""!==i||"number"==typeof i)return c(t,e=e.get(n)||null,""+i,r);if("object"==typeof i&&null!==i){switch(i.$$typeof){case A:return l(t,e=e.get(null===i.key?n:i.key)||null,i,r);case w:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case D:return f(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||N(i))return d(t,e=e.get(n)||null,i,r,null);za(t,i)}return null}function m(r,a,s,c){for(var l=null,u=null,d=a,m=a=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=h(r,d,s[m],c);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(r,d),a=o(v,a,m),null===u?l=v:u.sibling=v,u=v,d=g}if(m===s.length)return n(r,d),Da&&xa(r,m),l;if(null===d){for(;m<s.length;m++)null!==(d=p(r,s[m],c))&&(a=o(d,a,m),null===u?l=d:u.sibling=d,u=d);return Da&&xa(r,m),l}for(d=i(r,d);m<s.length;m++)null!==(g=f(d,r,m,s[m],c))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=o(g,a,m),null===u?l=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(r,e)})),Da&&xa(r,m),l}function g(r,s,c,l){var u=N(c);if("function"!=typeof u)throw Error(a(150));if(null==(c=u.call(c)))throw Error(a(151));for(var d=u=null,m=s,g=s=0,v=null,b=c.next();null!==m&&!b.done;g++,b=c.next()){m.index>g?(v=m,m=null):v=m.sibling;var y=h(r,m,b.value,l);if(null===y){null===m&&(m=v);break}e&&m&&null===y.alternate&&t(r,m),s=o(y,s,g),null===d?u=y:d.sibling=y,d=y,m=v}if(b.done)return n(r,m),Da&&xa(r,g),u;if(null===m){for(;!b.done;g++,b=c.next())null!==(b=p(r,b.value,l))&&(s=o(b,s,g),null===d?u=b:d.sibling=b,d=b);return Da&&xa(r,g),u}for(m=i(r,m);!b.done;g++,b=c.next())null!==(b=f(m,r,g,b.value,l))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),s=o(b,s,g),null===d?u=b:d.sibling=b,d=b);return e&&m.forEach((function(e){return t(r,e)})),Da&&xa(r,g),u}return function e(i,a,o,c){if("object"==typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case A:e:{for(var l=o.key,u=a;null!==u;){if(u.key===l){if((l=o.type)===k){if(7===u.tag){n(i,u.sibling),(a=r(u,o.props.children)).return=i,i=a;break e}}else if(u.elementType===l||"object"==typeof l&&null!==l&&l.$$typeof===D&&Va(l)===u.type){n(i,u.sibling),(a=r(u,o.props)).ref=Za(i,u,o),a.return=i,i=a;break e}n(i,u);break}t(i,u),u=u.sibling}o.type===k?((a=Il(o.props.children,i.mode,c,o.key)).return=i,i=a):((c=Ml(o.type,o.key,o.props,null,i.mode,c)).ref=Za(i,a,o),c.return=i,i=c)}return s(i);case w:e:{for(u=o.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(i,a.sibling),(a=r(a,o.children||[])).return=i,i=a;break e}n(i,a);break}t(i,a),a=a.sibling}(a=Bl(o,i.mode,c)).return=i,i=a}return s(i);case D:return e(i,a,(u=o._init)(o._payload),c)}if(te(o))return m(i,a,o,c);if(N(o))return g(i,a,o,c);za(i,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==a&&6===a.tag?(n(i,a.sibling),(a=r(a,o)).return=i,i=a):(n(i,a),(a=Ll(o,i.mode,c)).return=i,i=a),s(i)):n(i,a)}}var Wa=qa(!0),Ha=qa(!1),Qa={},Xa=Sr(Qa),Ya=Sr(Qa),Ga=Sr(Qa);function Ja(e){if(e===Qa)throw Error(a(174));return e}function Ka(e,t){switch(xr(Ga,t),xr(Ya,e),xr(Xa,Qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Cr(Xa),xr(Xa,t)}function eo(){Cr(Xa),Cr(Ya),Cr(Ga)}function to(e){Ja(Ga.current);var t=Ja(Xa.current),n=ce(t,e.type);t!==n&&(xr(Ya,e),xr(Xa,n))}function no(e){Ya.current===e&&(Cr(Xa),Cr(Ya))}var io=Sr(0);function ro(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function oo(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var so=_.ReactCurrentDispatcher,co=_.ReactCurrentBatchConfig,lo=0,uo=null,po=null,ho=null,fo=!1,mo=!1,go=0,vo=0;function bo(){throw Error(a(321))}function yo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!si(e[n],t[n]))return!1;return!0}function _o(e,t,n,i,r,o){if(lo=o,uo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,so.current=null===e||null===e.memoizedState?is:rs,e=n(i,r),mo){o=0;do{if(mo=!1,go=0,25<=o)throw Error(a(301));o+=1,ho=po=null,t.updateQueue=null,so.current=as,e=n(i,r)}while(mo)}if(so.current=ns,t=null!==po&&null!==po.next,lo=0,ho=po=uo=null,fo=!1,t)throw Error(a(300));return e}function Ao(){var e=0!==go;return go=0,e}function wo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ho?uo.memoizedState=ho=e:ho=ho.next=e,ho}function ko(){if(null===po){var e=uo.alternate;e=null!==e?e.memoizedState:null}else e=po.next;var t=null===ho?uo.memoizedState:ho.next;if(null!==t)ho=t,po=e;else{if(null===e)throw Error(a(310));e={memoizedState:(po=e).memoizedState,baseState:po.baseState,baseQueue:po.baseQueue,queue:po.queue,next:null},null===ho?uo.memoizedState=ho=e:ho=ho.next=e}return ho}function So(e,t){return"function"==typeof t?t(e):t}function Co(e){var t=ko(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=po,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var s=r.next;r.next=o.next,o.next=s}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var c=s=null,l=null,u=o;do{var d=u.lane;if((lo&d)===d)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=p,s=i):l=l.next=p,uo.lanes|=d,Mc|=d}u=u.next}while(null!==u&&u!==o);null===l?s=i:l.next=c,si(i,t.memoizedState)||(As=!0),t.memoizedState=i,t.baseState=s,t.baseQueue=l,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{o=r.lane,uo.lanes|=o,Mc|=o,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xo(e){var t=ko(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{o=e(o,s.action),s=s.next}while(s!==r);si(o,t.memoizedState)||(As=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function Eo(){}function To(e,t){var n=uo,i=ko(),r=t(),o=!si(i.memoizedState,r);if(o&&(i.memoizedState=r,As=!0),i=i.queue,jo(Oo.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==ho&&1&ho.memoizedState.tag){if(n.flags|=2048,Io(9,Ro.bind(null,n,i,r,t),void 0,null),null===xc)throw Error(a(349));0!=(30&lo)||Po(n,t,r)}return r}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ro(e,t,n,i){t.value=n,t.getSnapshot=i,Do(t)&&Kc(e,1,-1)}function Oo(e,t,n){return n((function(){Do(t)&&Kc(e,1,-1)}))}function Do(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!si(e,n)}catch(e){return!0}}function Mo(e){var t=wo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:e},t.queue=e,e=e.dispatch=Go.bind(null,uo,e),[t.memoizedState,e]}function Io(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function No(){return ko().memoizedState}function Lo(e,t,n,i){var r=wo();uo.flags|=e,r.memoizedState=Io(1|t,n,void 0,void 0===i?null:i)}function Bo(e,t,n,i){var r=ko();i=void 0===i?null:i;var a=void 0;if(null!==po){var o=po.memoizedState;if(a=o.destroy,null!==i&&yo(i,o.deps))return void(r.memoizedState=Io(t,n,a,i))}uo.flags|=e,r.memoizedState=Io(1|t,n,a,i)}function $o(e,t){return Lo(8390656,8,e,t)}function jo(e,t){return Bo(2048,8,e,t)}function Uo(e,t){return Bo(4,2,e,t)}function Fo(e,t){return Bo(4,4,e,t)}function Zo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zo(e,t,n){return n=null!=n?n.concat([e]):null,Bo(4,4,Zo.bind(null,t,e),n)}function Vo(){}function qo(e,t){var n=ko();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&yo(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Wo(e,t){var n=ko();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&yo(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0==(21&lo)?(e.baseState&&(e.baseState=!1,As=!0),e.memoizedState=n):(si(n,t)||(n=mt(),uo.lanes|=n,Mc|=n,e.baseState=!0),t)}function Qo(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var i=co.transition;co.transition={};try{e(!1),t()}finally{yt=n,co.transition=i}}function Xo(){return ko().memoizedState}function Yo(e,t,n){var i=Jc(e);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Jo(e)?Ko(t,n):(es(e,t,n),null!==(e=Kc(e,i,n=Gc()))&&ts(e,t,i))}function Go(e,t,n){var i=Jc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jo(e))Ko(t,r);else{es(e,t,r);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(r.hasEagerState=!0,r.eagerState=s,si(s,o))return}catch(e){}null!==(e=Kc(e,i,n=Gc()))&&ts(e,t,i)}}function Jo(e){var t=e.alternate;return e===uo||null!==t&&t===uo}function Ko(e,t){mo=fo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function es(e,t,n){tl(e)?(null===(e=t.interleaved)?(n.next=n,null===ea?ea=[t]:ea.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function ts(e,t,n){if(0!=(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,bt(e,n)}}var ns={readContext:Kr,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useInsertionEffect:bo,useLayoutEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useMutableSource:bo,useSyncExternalStore:bo,useId:bo,unstable_isNewReconciler:!1},is={readContext:Kr,useCallback:function(e,t){return wo().memoizedState=[e,void 0===t?null:t],e},useContext:Kr,useEffect:$o,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Lo(4194308,4,Zo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Lo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Lo(4,2,e,t)},useMemo:function(e,t){var n=wo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=wo();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Yo.bind(null,uo,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},wo().memoizedState=e},useState:Mo,useDebugValue:Vo,useDeferredValue:function(e){return wo().memoizedState=e},useTransition:function(){var e=Mo(!1),t=e[0];return e=Qo.bind(null,e[1]),wo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=uo,r=wo();if(Da){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===xc)throw Error(a(349));0!=(30&lo)||Po(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,$o(Oo.bind(null,i,o,e),[e]),i.flags|=2048,Io(9,Ro.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=wo(),t=xc.identifierPrefix;if(Da){var n=Ca;t=":"+t+"R"+(n=(Sa&~(1<<32-ot(Sa)-1)).toString(32)+n),0<(n=go++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=vo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rs={readContext:Kr,useCallback:qo,useContext:Kr,useEffect:jo,useImperativeHandle:zo,useInsertionEffect:Uo,useLayoutEffect:Fo,useMemo:Wo,useReducer:Co,useRef:No,useState:function(){return Co(So)},useDebugValue:Vo,useDeferredValue:function(e){return Ho(ko(),po.memoizedState,e)},useTransition:function(){return[Co(So)[0],ko().memoizedState]},useMutableSource:Eo,useSyncExternalStore:To,useId:Xo,unstable_isNewReconciler:!1},as={readContext:Kr,useCallback:qo,useContext:Kr,useEffect:jo,useImperativeHandle:zo,useInsertionEffect:Uo,useLayoutEffect:Fo,useMemo:Wo,useReducer:xo,useRef:No,useState:function(){return xo(So)},useDebugValue:Vo,useDeferredValue:function(e){var t=ko();return null===po?t.memoizedState=e:Ho(t,po.memoizedState,e)},useTransition:function(){return[xo(So)[0],ko().memoizedState]},useMutableSource:Eo,useSyncExternalStore:To,useId:Xo,unstable_isNewReconciler:!1};function os(e,t){try{var n="",i=t;do{n+=F(i),i=i.return}while(i);var r=n}catch(e){r="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:r}}function ss(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var cs,ls,us,ds="function"==typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=ra(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Fc||(Fc=!0,Zc=i),ss(0,t)},n}function hs(e,t,n){(n=ra(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"==typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){ss(0,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){ss(0,t),"function"!=typeof i&&(null===zc?zc=new Set([this]):zc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fs(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ds;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Sl.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,i,r){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ra(-1,1)).tag=2,aa(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}function vs(e,t){if(!Da)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function bs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function ys(e,t,n){var i=t.pendingProps;switch(Pa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bs(t),null;case 1:case 17:return Dr(t.type)&&Mr(),bs(t),null;case 3:return i=t.stateNode,eo(),Cr(Pr),Cr(Tr),oo(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ja(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==Ma&&(al(Ma),Ma=null))),bs(t),null;case 5:no(t);var r=Ja(Ga.current);if(n=t.type,null!==e&&null!=t.stateNode)ls(e,t,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(a(166));return bs(t),null}if(e=Ja(Xa.current),ja(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[pr]=t,i[hr]=o,e=0!=(1&t.mode),n){case"dialog":ji("cancel",i),ji("close",i);break;case"iframe":case"object":case"embed":ji("load",i);break;case"video":case"audio":for(r=0;r<Ni.length;r++)ji(Ni[r],i);break;case"source":ji("error",i);break;case"img":case"image":case"link":ji("error",i),ji("load",i);break;case"details":ji("toggle",i);break;case"input":Y(i,o),ji("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},ji("invalid",i);break;case"textarea":re(i,o),ji("invalid",i)}for(var c in be(n,o),r=null,o)if(o.hasOwnProperty(c)){var l=o[c];"children"===c?"string"==typeof l?i.textContent!==l&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,l,e),r=["children",l]):"number"==typeof l&&i.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,l,e),r=["children",""+l]):s.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&ji("scroll",i)}switch(n){case"input":W(i),K(i,o,!0);break;case"textarea":W(i),oe(i);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(i.onclick=Ki)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{c=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof i.is?e=c.createElement(n,{is:i.is}):(e=c.createElement(n),"select"===n&&(c=e,i.multiple?c.multiple=!0:i.size&&(c.size=i.size))):e=c.createElementNS(e,n),e[pr]=t,e[hr]=i,cs(e,t),t.stateNode=e;e:{switch(c=ye(n,i),n){case"dialog":ji("cancel",e),ji("close",e),r=i;break;case"iframe":case"object":case"embed":ji("load",e),r=i;break;case"video":case"audio":for(r=0;r<Ni.length;r++)ji(Ni[r],e);r=i;break;case"source":ji("error",e),r=i;break;case"img":case"image":case"link":ji("error",e),ji("load",e),r=i;break;case"details":ji("toggle",e),r=i;break;case"input":Y(e,i),r=X(e,i),ji("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=B({},i,{value:void 0}),ji("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),ji("invalid",e)}for(o in be(n,r),l=r)if(l.hasOwnProperty(o)){var u=l[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"==typeof u?("textarea"!==n||""!==u)&&pe(e,u):"number"==typeof u&&pe(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=u&&"onScroll"===o&&ji("scroll",e):null!=u&&y(e,o,u,c))}switch(n){case"input":W(e),K(e,i,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=i.value&&e.setAttribute("value",""+V(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?ne(e,!!i.multiple,o,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"==typeof r.onClick&&(e.onclick=Ki)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return bs(t),null;case 6:if(e&&null!=t.stateNode)us(0,t,e.memoizedProps,i);else{if("string"!=typeof i&&null===t.stateNode)throw Error(a(166));if(n=Ja(Ga.current),Ja(Xa.current),ja(t)){if(i=t.stateNode,n=t.memoizedProps,i[pr]=t,(o=i.nodeValue!==n)&&null!==(e=Ra))switch(e.tag){case 3:Ji(i.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!=(1&e.mode))}o&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[pr]=t,t.stateNode=i}return bs(t),null;case 13:if(Cr(io),i=t.memoizedState,Da&&null!==Oa&&0!=(1&t.mode)&&0==(128&t.flags)){for(i=Oa;i;)i=lr(i.nextSibling);return Ua(),t.flags|=98560,t}if(null!==i&&null!==i.dehydrated){if(i=ja(t),null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[pr]=t}else Ua(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return bs(t),null}return null!==Ma&&(al(Ma),Ma=null),0!=(128&t.flags)?(t.lanes=n,t):(i=null!==i,n=!1,null===e?ja(t):n=null!==e.memoizedState,i!==n&&i&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&io.current)?0===Oc&&(Oc=3):fl())),null!==t.updateQueue&&(t.flags|=4),bs(t),null);case 4:return eo(),null===e&&Zi(t.stateNode.containerInfo),bs(t),null;case 10:return Yr(t.type._context),bs(t),null;case 19:if(Cr(io),null===(o=t.memoizedState))return bs(t),null;if(i=0!=(128&t.flags),null===(c=o.rendering))if(i)vs(o,!1);else{if(0!==Oc||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=ro(e))){for(t.flags|=128,vs(o,!1),null!==(i=c.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(o=n).flags&=14680066,null===(c=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xr(io,1&io.current|2),t.child}e=e.sibling}null!==o.tail&&Ge()>jc&&(t.flags|=128,i=!0,vs(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ro(c))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),vs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!c.alternate&&!Da)return bs(t),null}else 2*Ge()-o.renderingStartTime>jc&&1073741824!==n&&(t.flags|=128,i=!0,vs(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=o.last)?n.sibling=c:t.child=c,o.last=c)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ge(),t.sibling=null,n=io.current,xr(io,i?1&n|2:1&n),t):(bs(t),null);case 22:case 23:return ul(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!=(1&t.mode)?0!=(1073741824&Pc)&&(bs(t),6&t.subtreeFlags&&(t.flags|=8192)):bs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}cs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ls=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Ja(Xa.current);var a,o=null;switch(n){case"input":r=X(e,r),i=X(e,i),o=[];break;case"select":r=B({},r,{value:void 0}),i=B({},i,{value:void 0}),o=[];break;case"textarea":r=ie(e,r),i=ie(e,i),o=[];break;default:"function"!=typeof r.onClick&&"function"==typeof i.onClick&&(e.onclick=Ki)}for(u in be(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var c=r[u];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var l=i[u];if(c=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(a in c)!c.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&c[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(o=o||[]).push(u,l)):"children"===u?"string"!=typeof l&&"number"!=typeof l||(o=o||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&ji("scroll",e),o||c===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},us=function(e,t,n,i){n!==i&&(t.flags|=4)};var _s=_.ReactCurrentOwner,As=!1;function ws(e,t,n,i){t.child=null===e?Ha(t,null,n,i):Wa(t,e.child,n,i)}function ks(e,t,n,i,r){n=n.render;var a=t.ref;return Jr(t,r),i=_o(e,t,n,i,a,r),n=Ao(),null===e||As?(Da&&n&&Ta(t),t.flags|=1,ws(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Vs(e,t,r))}function Ss(e,t,n,i,r){if(null===e){var a=n.type;return"function"!=typeof a||Ol(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ml(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Cs(e,t,a,i,r))}if(a=e.child,0==(e.lanes&r)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ci)(o,i)&&e.ref===t.ref)return Vs(e,t,r)}return t.flags|=1,(e=Dl(a,i)).ref=t.ref,e.return=t,t.child=e}function Cs(e,t,n,i,r){if(null!==e){var a=e.memoizedProps;if(ci(a,i)&&e.ref===t.ref){if(As=!1,t.pendingProps=i=a,0==(e.lanes&r))return t.lanes=e.lanes,Vs(e,t,r);0!=(131072&e.flags)&&(As=!0)}}return Ts(e,t,n,i,r)}function xs(e,t,n){var i=t.pendingProps,r=i.children,a=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xr(Rc,Pc),Pc|=n;else{if(0==(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xr(Rc,Pc),Pc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==a?a.baseLanes:n,xr(Rc,Pc),Pc|=i}else null!==a?(i=a.baseLanes|n,t.memoizedState=null):i=n,xr(Rc,Pc),Pc|=i;return ws(e,t,r,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,i,r){var a=Dr(n)?Rr:Tr.current;return a=Or(t,a),Jr(t,r),n=_o(e,t,n,i,a,r),i=Ao(),null===e||As?(Da&&i&&Ta(t),t.flags|=1,ws(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Vs(e,t,r))}function Ps(e,t,n,i,r){if(Dr(n)){var a=!0;Lr(t)}else a=!1;if(Jr(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),fa(t,n,i),ga(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var c=o.context,l=n.contextType;l="object"==typeof l&&null!==l?Kr(l):Or(t,l=Dr(n)?Rr:Tr.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==i||c!==l)&&ma(t,o,i,l),ta=!1;var p=t.memoizedState;o.state=p,ca(t,i,o,r),c=t.memoizedState,s!==i||p!==c||Pr.current||ta?("function"==typeof u&&(da(t,n,u,i),c=t.memoizedState),(s=ta||ha(t,n,s,i,p,c,l))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),o.props=i,o.state=c,o.context=l,i=s):("function"==typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,ia(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Vr(t.type,s),o.props=l,d=t.pendingProps,p=o.context,c="object"==typeof(c=n.contextType)&&null!==c?Kr(c):Or(t,c=Dr(n)?Rr:Tr.current);var h=n.getDerivedStateFromProps;(u="function"==typeof h||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==d||p!==c)&&ma(t,o,i,c),ta=!1,p=t.memoizedState,o.state=p,ca(t,i,o,r);var f=t.memoizedState;s!==d||p!==f||Pr.current||ta?("function"==typeof h&&(da(t,n,h,i),f=t.memoizedState),(l=ta||ha(t,n,l,i,p,f,c)||!1)?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(i,f,c),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,f,c)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),o.props=i,o.state=f,o.context=c,i=l):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),i=!1)}return Rs(e,t,n,i,a,r)}function Rs(e,t,n,i,r,a){Es(e,t);var o=0!=(128&t.flags);if(!i&&!o)return r&&Br(t,n,!1),Vs(e,t,a);i=t.stateNode,_s.current=t;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=Wa(t,e.child,null,a),t.child=Wa(t,null,s,a)):ws(e,t,s,a),t.memoizedState=i.state,r&&Br(t,n,!0),t.child}function Os(e){var t=e.stateNode;t.pendingContext?Ir(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ir(0,t.context,!1),Ka(e,t.containerInfo)}function Ds(e,t,n,i,r){return Ua(),Fa(r),t.flags|=256,ws(e,t,n,i),t.child}var Ms={dehydrated:null,treeContext:null,retryLane:0};function Is(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ns(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Ls(e,t,n){var i,r=t.pendingProps,o=io.current,s=!1,c=0!=(128&t.flags);if((i=c)||(i=(null===e||null!==e.memoizedState)&&0!=(2&o)),i?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),xr(io,1&o),null===e)return Ba(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},0==(1&r)&&null!==s?(s.childLanes=0,s.pendingProps=o):s=Nl(o,r,0,null),e=Il(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Is(n),t.memoizedState=Ms,e):Bs(t,o));if(null!==(o=e.memoizedState)){if(null!==(i=o.dehydrated)){if(c)return 256&t.flags?(t.flags&=-257,Us(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=Nl({mode:"visible",children:r.children},o,0,null),(s=Il(s,o,n,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!=(1&t.mode)&&Wa(t,e.child,null,n),t.child.memoizedState=Is(n),t.memoizedState=Ms,s);if(0==(1&t.mode))t=Us(e,t,n,null);else if("$!"===i.data)t=Us(e,t,n,Error(a(419)));else if(r=0!=(n&e.childLanes),As||r){if(null!==(r=xc)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(r=0!=(s&(r.suspendedLanes|n))?0:s)&&r!==o.retryLane&&(o.retryLane=r,Kc(e,r,-1))}fl(),t=Us(e,t,n,Error(a(421)))}else"$?"===i.data?(t.flags|=128,t.child=e.child,t=xl.bind(null,e),i._reactRetry=t,t=null):(n=o.treeContext,Oa=lr(i.nextSibling),Ra=t,Da=!0,Ma=null,null!==n&&(Aa[wa++]=Sa,Aa[wa++]=Ca,Aa[wa++]=ka,Sa=n.id,Ca=n.overflow,ka=t),(t=Bs(t,t.pendingProps.children)).flags|=4096);return t}return s?(r=js(e,t,r.children,r.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Is(n):Ns(o,n),s.childLanes=e.childLanes&~n,t.memoizedState=Ms,r):(n=$s(e,t,r.children,n),t.memoizedState=null,n)}return s?(r=js(e,t,r.children,r.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Is(n):Ns(o,n),s.childLanes=e.childLanes&~n,t.memoizedState=Ms,r):(n=$s(e,t,r.children,n),t.memoizedState=null,n)}function Bs(e,t){return(t=Nl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function $s(e,t,n,i){var r=e.child;return e=r.sibling,n=Dl(r,{mode:"visible",children:n}),0==(1&t.mode)&&(n.lanes=i),n.return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n}function js(e,t,n,i,r){var a=t.mode,o=(e=e.child).sibling,s={mode:"hidden",children:n};return 0==(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=s,t.deletions=null):(n=Dl(e,s)).subtreeFlags=14680064&e.subtreeFlags,null!==o?i=Dl(o,i):(i=Il(i,a,r,null)).flags|=2,i.return=t,n.return=t,n.sibling=i,t.child=n,i}function Us(e,t,n,i){return null!==i&&Fa(i),Wa(t,e.child,null,n),(e=Bs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fs(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Gr(e.return,t,n)}function Zs(e,t,n,i,r){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r)}function zs(e,t,n){var i=t.pendingProps,r=i.revealOrder,a=i.tail;if(ws(e,t,i.children,n),0!=(2&(i=io.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fs(e,n,t);else if(19===e.tag)Fs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(xr(io,i),0==(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ro(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Zs(t,!1,r,n,a);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ro(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Zs(t,!0,n,null,a);break;case"together":Zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mc|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qs(e,t){switch(Pa(t),t.tag){case 1:return Dr(t.type)&&Mr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Cr(Pr),Cr(Tr),oo(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Cr(io),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Ua()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Cr(io),null;case 4:return eo(),null;case 10:return Yr(t.type._context),null;case 22:case 23:return ul(),null;default:return null}}var Ws=!1,Hs=!1,Qs="function"==typeof WeakSet?WeakSet:Set,Xs=null;function Ys(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){kl(e,t,n)}else n.current=null}function Gs(e,t,n){try{n()}catch(n){kl(e,t,n)}}var Js=!1;function Ks(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var a=r.destroy;r.destroy=void 0,void 0!==a&&Gs(t,n,a)}r=r.next}while(r!==i)}}function ec(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function tc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function nc(e){var t=e.alternate;null!==t&&(e.alternate=null,nc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[pr],delete t[hr],delete t[mr],delete t[gr],delete t[vr]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ic(e){return 5===e.tag||3===e.tag||4===e.tag}function rc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ic(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ac(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Ki));else if(4!==i&&null!==(e=e.child))for(ac(e,t,n),e=e.sibling;null!==e;)ac(e,t,n),e=e.sibling}function oc(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(oc(e,t,n),e=e.sibling;null!==e;)oc(e,t,n),e=e.sibling}var sc=null,cc=!1;function lc(e,t,n){for(n=n.child;null!==n;)uc(e,t,n),n=n.sibling}function uc(e,t,n){if(at&&"function"==typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(rt,n)}catch(e){}switch(n.tag){case 5:Hs||Ys(n,t);case 6:var i=sc,r=cc;sc=null,lc(e,t,n),cc=r,null!==(sc=i)&&(cc?(e=sc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):sc.removeChild(n.stateNode));break;case 18:null!==sc&&(cc?(e=sc,n=n.stateNode,8===e.nodeType?cr(e.parentNode,n):1===e.nodeType&&cr(e,n),Zt(e)):cr(sc,n.stateNode));break;case 4:i=sc,r=cc,sc=n.stateNode.containerInfo,cc=!0,lc(e,t,n),sc=i,cc=r;break;case 0:case 11:case 14:case 15:if(!Hs&&null!==(i=n.updateQueue)&&null!==(i=i.lastEffect)){r=i=i.next;do{var a=r,o=a.destroy;a=a.tag,void 0!==o&&(0!=(2&a)||0!=(4&a))&&Gs(n,t,o),r=r.next}while(r!==i)}lc(e,t,n);break;case 1:if(!Hs&&(Ys(n,t),"function"==typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(e){kl(n,t,e)}lc(e,t,n);break;case 21:lc(e,t,n);break;case 22:1&n.mode?(Hs=(i=Hs)||null!==n.memoizedState,lc(e,t,n),Hs=i):lc(e,t,n);break;default:lc(e,t,n)}}function dc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qs),t.forEach((function(t){var i=El.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function pc(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,s=t,c=s;e:for(;null!==c;){switch(c.tag){case 5:sc=c.stateNode,cc=!1;break e;case 3:case 4:sc=c.stateNode.containerInfo,cc=!0;break e}c=c.return}if(null===sc)throw Error(a(160));uc(o,s,r),sc=null,cc=!1;var l=r.alternate;null!==l&&(l.return=null),r.return=null}catch(e){kl(r,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)hc(t,e),t=t.sibling}function hc(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pc(t,e),fc(e),4&i){try{Ks(3,e,e.return),ec(3,e)}catch(t){kl(e,e.return,t)}try{Ks(5,e,e.return)}catch(t){kl(e,e.return,t)}}break;case 1:pc(t,e),fc(e),512&i&&null!==n&&Ys(n,n.return);break;case 5:if(pc(t,e),fc(e),512&i&&null!==n&&Ys(n,n.return),32&e.flags){var r=e.stateNode;try{pe(r,"")}catch(t){kl(e,e.return,t)}}if(4&i&&null!=(r=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===o.type&&null!=o.name&&G(r,o),ye(c,s);var u=ye(c,o);for(s=0;s<l.length;s+=2){var d=l[s],p=l[s+1];"style"===d?ge(r,p):"dangerouslySetInnerHTML"===d?de(r,p):"children"===d?pe(r,p):y(r,d,p,u)}switch(c){case"input":J(r,o);break;case"textarea":ae(r,o);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(r,!!o.multiple,f,!1):h!==!!o.multiple&&(null!=o.defaultValue?ne(r,!!o.multiple,o.defaultValue,!0):ne(r,!!o.multiple,o.multiple?[]:"",!1))}r[hr]=o}catch(t){kl(e,e.return,t)}}break;case 6:if(pc(t,e),fc(e),4&i){if(null===e.stateNode)throw Error(a(162));u=e.stateNode,d=e.memoizedProps;try{u.nodeValue=d}catch(t){kl(e,e.return,t)}}break;case 3:if(pc(t,e),fc(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Zt(t.containerInfo)}catch(t){kl(e,e.return,t)}break;case 4:default:pc(t,e),fc(e);break;case 13:pc(t,e),fc(e),8192&(u=e.child).flags&&null!==u.memoizedState&&(null===u.alternate||null===u.alternate.memoizedState)&&($c=Ge()),4&i&&dc(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Hs=(d=Hs)||u,pc(t,e),Hs=d):pc(t,e),fc(e),8192&i){d=null!==e.memoizedState;e:for(p=null,h=e;;){if(5===h.tag){if(null===p){p=h;try{r=h.stateNode,d?"function"==typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(c=h.stateNode,s=null!=(l=h.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,c.style.display=me("display",s))}catch(t){kl(e,e.return,t)}}}else if(6===h.tag){if(null===p)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(t){kl(e,e.return,t)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;p===h&&(p=null),h=h.return}p===h&&(p=null),h.sibling.return=h.return,h=h.sibling}if(d&&!u&&0!=(1&e.mode))for(Xs=e,e=e.child;null!==e;){for(u=Xs=e;null!==Xs;){switch(p=(d=Xs).child,d.tag){case 0:case 11:case 14:case 15:Ks(4,d,d.return);break;case 1:if(Ys(d,d.return),"function"==typeof(o=d.stateNode).componentWillUnmount){h=d,f=d.return;try{r=h,o.props=r.memoizedProps,o.state=r.memoizedState,o.componentWillUnmount()}catch(e){kl(h,f,e)}}break;case 5:Ys(d,d.return);break;case 22:if(null!==d.memoizedState){bc(u);continue}}null!==p?(p.return=d,Xs=p):bc(u)}e=e.sibling}}break;case 19:pc(t,e),fc(e),4&i&&dc(e);case 21:}}function fc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ic(n)){var i=n;break e}n=n.return}throw Error(a(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(pe(r,""),i.flags&=-33),oc(e,rc(e),r);break;case 3:case 4:var o=i.stateNode.containerInfo;ac(e,rc(e),o);break;default:throw Error(a(161))}}catch(t){kl(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function mc(e,t,n){Xs=e,gc(e,t,n)}function gc(e,t,n){for(var i=0!=(1&e.mode);null!==Xs;){var r=Xs,a=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||Ws;if(!o){var s=r.alternate,c=null!==s&&null!==s.memoizedState||Hs;s=Ws;var l=Hs;if(Ws=o,(Hs=c)&&!l)for(Xs=r;null!==Xs;)c=(o=Xs).child,22===o.tag&&null!==o.memoizedState?yc(r):null!==c?(c.return=o,Xs=c):yc(r);for(;null!==a;)Xs=a,gc(a,t,n),a=a.sibling;Xs=r,Ws=s,Hs=l}vc(e)}else 0!=(8772&r.subtreeFlags)&&null!==a?(a.return=r,Xs=a):vc(e)}}function vc(e){for(;null!==Xs;){var t=Xs;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Hs||ec(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Hs)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Vr(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&la(t,o,i);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}la(t,s,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var p=d.dehydrated;null!==p&&Zt(p)}}}break;default:throw Error(a(163))}Hs||512&t.flags&&tc(t)}catch(e){kl(t,t.return,e)}}if(t===e){Xs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xs=n;break}Xs=t.return}}function bc(e){for(;null!==Xs;){var t=Xs;if(t===e){Xs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xs=n;break}Xs=t.return}}function yc(e){for(;null!==Xs;){var t=Xs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ec(4,t)}catch(e){kl(t,n,e)}break;case 1:var i=t.stateNode;if("function"==typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(e){kl(t,r,e)}}var a=t.return;try{tc(t)}catch(e){kl(t,a,e)}break;case 5:var o=t.return;try{tc(t)}catch(e){kl(t,o,e)}}}catch(e){kl(t,t.return,e)}if(t===e){Xs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Xs=s;break}Xs=t.return}}var _c,Ac=Math.ceil,wc=_.ReactCurrentDispatcher,kc=_.ReactCurrentOwner,Sc=_.ReactCurrentBatchConfig,Cc=0,xc=null,Ec=null,Tc=0,Pc=0,Rc=Sr(0),Oc=0,Dc=null,Mc=0,Ic=0,Nc=0,Lc=null,Bc=null,$c=0,jc=1/0,Uc=null,Fc=!1,Zc=null,zc=null,Vc=!1,qc=null,Wc=0,Hc=0,Qc=null,Xc=-1,Yc=0;function Gc(){return 0!=(6&Cc)?Ge():-1!==Xc?Xc:Xc=Ge()}function Jc(e){return 0==(1&e.mode)?1:0!=(2&Cc)&&0!==Tc?Tc&-Tc:null!==zr.transition?(0===Yc&&(Yc=mt()),Yc):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function Kc(e,t,n){if(50<Hc)throw Hc=0,Qc=null,Error(a(185));var i=el(e,t);return null===i?null:(vt(i,t,n),0!=(2&Cc)&&i===xc||(i===xc&&(0==(2&Cc)&&(Ic|=t),4===Oc&&ol(i,Tc)),nl(i,n),1===t&&0===Cc&&0==(1&e.mode)&&(jc=Ge()+500,jr&&Zr())),i)}function el(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function tl(e){return(null!==xc||null!==ea)&&0!=(1&e.mode)&&0==(2&Cc)}function nl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,c=r[o];-1===c?0!=(s&n)&&0==(s&i)||(r[o]=ht(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var i=pt(e,e===xc?Tc:0);if(0===i)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){jr=!0,Fr(e)}(sl.bind(null,e)):Fr(sl.bind(null,e)),or((function(){0===Cc&&Zr()})),n=null;else{switch(_t(i)){case 1:n=Ke;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Tl(n,il.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function il(e,t){if(Xc=-1,Yc=0,0!=(6&Cc))throw Error(a(327));var n=e.callbackNode;if(Al()&&e.callbackNode!==n)return null;var i=pt(e,e===xc?Tc:0);if(0===i)return null;if(0!=(30&i)||0!=(i&e.expiredLanes)||t)t=ml(e,i);else{t=i;var r=Cc;Cc|=2;var o=hl();for(xc===e&&Tc===t||(Uc=null,jc=Ge()+500,dl(e,t));;)try{vl();break}catch(t){pl(e,t)}Xr(),wc.current=o,Cc=r,null!==Ec?t=0:(xc=null,Tc=0,t=Oc)}if(0!==t){if(2===t&&0!==(r=ft(e))&&(i=r,t=rl(e,r)),1===t)throw n=Dc,dl(e,0),ol(e,i),nl(e,Ge()),n;if(6===t)ol(e,i);else{if(r=e.current.alternate,0==(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!si(a(),r))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=ml(e,i))&&0!==(o=ft(e))&&(i=o,t=rl(e,o)),1===t))throw n=Dc,dl(e,0),ol(e,i),nl(e,Ge()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(a(345));case 2:case 5:_l(e,Bc,Uc);break;case 3:if(ol(e,i),(130023424&i)===i&&10<(t=$c+500-Ge())){if(0!==pt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){Gc(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(_l.bind(null,e,Bc,Uc),t);break}_l(e,Bc,Uc);break;case 4:if(ol(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var s=31-ot(i);o=1<<s,(s=t[s])>r&&(r=s),i&=~o}if(i=r,10<(i=(120>(i=Ge()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ac(i/1960))-i)){e.timeoutHandle=ir(_l.bind(null,e,Bc,Uc),i);break}_l(e,Bc,Uc);break;default:throw Error(a(329))}}}return nl(e,Ge()),e.callbackNode===n?il.bind(null,e):null}function rl(e,t){var n=Lc;return e.current.memoizedState.isDehydrated&&(dl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=Bc,Bc=n,null!==t&&al(t)),e}function al(e){null===Bc?Bc=e:Bc.push.apply(Bc,e)}function ol(e,t){for(t&=~Nc,t&=~Ic,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),i=1<<n;e[n]=-1,t&=~i}}function sl(e){if(0!=(6&Cc))throw Error(a(327));Al();var t=pt(e,0);if(0==(1&t))return nl(e,Ge()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=rl(e,i))}if(1===n)throw n=Dc,dl(e,0),ol(e,t),nl(e,Ge()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_l(e,Bc,Uc),nl(e,Ge()),null}function cl(e,t){var n=Cc;Cc|=1;try{return e(t)}finally{0===(Cc=n)&&(jc=Ge()+500,jr&&Zr())}}function ll(e){null!==qc&&0===qc.tag&&0==(6&Cc)&&Al();var t=Cc;Cc|=1;var n=Sc.transition,i=yt;try{if(Sc.transition=null,yt=1,e)return e()}finally{yt=i,Sc.transition=n,0==(6&(Cc=t))&&Zr()}}function ul(){Pc=Rc.current,Cr(Rc)}function dl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Ec)for(n=Ec.return;null!==n;){var i=n;switch(Pa(i),i.tag){case 1:null!=(i=i.type.childContextTypes)&&Mr();break;case 3:eo(),Cr(Pr),Cr(Tr),oo();break;case 5:no(i);break;case 4:eo();break;case 13:case 19:Cr(io);break;case 10:Yr(i.type._context);break;case 22:case 23:ul()}n=n.return}if(xc=e,Ec=e=Dl(e.current,null),Tc=Pc=t,Oc=0,Dc=null,Nc=Ic=Mc=0,Bc=Lc=null,null!==ea){for(t=0;t<ea.length;t++)if(null!==(i=(n=ea[t]).interleaved)){n.interleaved=null;var r=i.next,a=n.pending;if(null!==a){var o=a.next;a.next=r,i.next=o}n.pending=i}ea=null}return e}function pl(e,t){for(;;){var n=Ec;try{if(Xr(),so.current=ns,fo){for(var i=uo.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}fo=!1}if(lo=0,ho=po=uo=null,mo=!1,go=0,kc.current=null,null===n||null===n.return){Oc=1,Dc=t,Ec=null;break}e:{var o=e,s=n.return,c=n,l=t;if(t=Tc,c.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l,d=c,p=d.tag;if(0==(1&d.mode)&&(0===p||11===p||15===p)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=ms(s);if(null!==f){f.flags&=-257,gs(f,s,c,0,t),1&f.mode&&fs(o,u,t),l=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0==(1&t)){fs(o,u,t),fl();break e}l=Error(a(426))}else if(Da&&1&c.mode){var v=ms(s);if(null!==v){0==(65536&v.flags)&&(v.flags|=256),gs(v,s,c,0,t),Fa(l);break e}}o=l,4!==Oc&&(Oc=2),null===Lc?Lc=[o]:Lc.push(o),l=os(l,c),c=s;do{switch(c.tag){case 3:c.flags|=65536,t&=-t,c.lanes|=t,sa(c,ps(0,l,t));break e;case 1:o=l;var b=c.type,y=c.stateNode;if(0==(128&c.flags)&&("function"==typeof b.getDerivedStateFromError||null!==y&&"function"==typeof y.componentDidCatch&&(null===zc||!zc.has(y)))){c.flags|=65536,t&=-t,c.lanes|=t,sa(c,hs(c,o,t));break e}}c=c.return}while(null!==c)}yl(n)}catch(e){t=e,Ec===n&&null!==n&&(Ec=n=n.return);continue}break}}function hl(){var e=wc.current;return wc.current=ns,null===e?ns:e}function fl(){0!==Oc&&3!==Oc&&2!==Oc||(Oc=4),null===xc||0==(268435455&Mc)&&0==(268435455&Ic)||ol(xc,Tc)}function ml(e,t){var n=Cc;Cc|=2;var i=hl();for(xc===e&&Tc===t||(Uc=null,dl(e,t));;)try{gl();break}catch(t){pl(e,t)}if(Xr(),Cc=n,wc.current=i,null!==Ec)throw Error(a(261));return xc=null,Tc=0,Oc}function gl(){for(;null!==Ec;)bl(Ec)}function vl(){for(;null!==Ec&&!Xe();)bl(Ec)}function bl(e){var t=_c(e.alternate,e,Pc);e.memoizedProps=e.pendingProps,null===t?yl(e):Ec=t,kc.current=null}function yl(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=ys(n,t,Pc)))return void(Ec=n)}else{if(null!==(n=qs(n,t)))return n.flags&=32767,void(Ec=n);if(null===e)return Oc=6,void(Ec=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ec=t);Ec=t=e}while(null!==t);0===Oc&&(Oc=5)}function _l(e,t,n){var i=yt,r=Sc.transition;try{Sc.transition=null,yt=1,function(e,t,n,i){do{Al()}while(null!==qc);if(0!=(6&Cc))throw Error(a(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-ot(n),a=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~a}}(e,o),e===xc&&(Ec=xc=null,Tc=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||Vc||(Vc=!0,Tl(tt,(function(){return Al(),null}))),o=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||o){o=Sc.transition,Sc.transition=null;var s=yt;yt=1;var c=Cc;Cc|=4,kc.current=null,function(e,t){if(er=Vt,hi(e=pi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break e}var s=0,c=-1,l=-1,u=0,d=0,p=e,h=null;t:for(;;){for(var f;p!==n||0!==r&&3!==p.nodeType||(c=s+r),p!==o||0!==i&&3!==p.nodeType||(l=s+i),3===p.nodeType&&(s+=p.nodeValue.length),null!==(f=p.firstChild);)h=p,p=f;for(;;){if(p===e)break t;if(h===n&&++u===r&&(c=s),h===o&&++d===i&&(l=s),null!==(f=p.nextSibling))break;h=(p=h).parentNode}p=f}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Vt=!1,Xs=t;null!==Xs;)if(e=(t=Xs).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Xs=e;else for(;null!==Xs;){t=Xs;try{var m=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:Vr(t.type,g),v);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=t.stateNode.containerInfo;if(1===_.nodeType)_.textContent="";else if(9===_.nodeType){var A=_.body;null!=A&&(A.textContent="")}break;default:throw Error(a(163))}}catch(e){kl(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Xs=e;break}Xs=t.return}m=Js,Js=!1}(e,n),hc(n,e),fi(tr),Vt=!!er,tr=er=null,e.current=n,mc(n,e,r),Ye(),Cc=c,yt=s,Sc.transition=o}else e.current=n;if(Vc&&(Vc=!1,qc=e,Wc=r),0===(o=e.pendingLanes)&&(zc=null),function(e){if(at&&"function"==typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(rt,e,void 0,128==(128&e.current.flags))}catch(e){}}(n.stateNode),nl(e,Ge()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)i(t[n]);if(Fc)throw Fc=!1,e=Zc,Zc=null,e;0!=(1&Wc)&&0!==e.tag&&Al(),0!=(1&(o=e.pendingLanes))?e===Qc?Hc++:(Hc=0,Qc=e):Hc=0,Zr()}(e,t,n,i)}finally{Sc.transition=r,yt=i}return null}function Al(){if(null!==qc){var e=_t(Wc),t=Sc.transition,n=yt;try{if(Sc.transition=null,yt=16>e?16:e,null===qc)var i=!1;else{if(e=qc,qc=null,Wc=0,0!=(6&Cc))throw Error(a(331));var r=Cc;for(Cc|=4,Xs=e.current;null!==Xs;){var o=Xs,s=o.child;if(0!=(16&Xs.flags)){var c=o.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Xs=u;null!==Xs;){var d=Xs;switch(d.tag){case 0:case 11:case 15:Ks(8,d,o)}var p=d.child;if(null!==p)p.return=d,Xs=p;else for(;null!==Xs;){var h=(d=Xs).sibling,f=d.return;if(nc(d),d===u){Xs=null;break}if(null!==h){h.return=f,Xs=h;break}Xs=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xs=o}}if(0!=(2064&o.subtreeFlags)&&null!==s)s.return=o,Xs=s;else e:for(;null!==Xs;){if(0!=(2048&(o=Xs).flags))switch(o.tag){case 0:case 11:case 15:Ks(9,o,o.return)}var b=o.sibling;if(null!==b){b.return=o.return,Xs=b;break e}Xs=o.return}}var y=e.current;for(Xs=y;null!==Xs;){var _=(s=Xs).child;if(0!=(2064&s.subtreeFlags)&&null!==_)_.return=s,Xs=_;else e:for(s=y;null!==Xs;){if(0!=(2048&(c=Xs).flags))try{switch(c.tag){case 0:case 11:case 15:ec(9,c)}}catch(e){kl(c,c.return,e)}if(c===s){Xs=null;break e}var A=c.sibling;if(null!==A){A.return=c.return,Xs=A;break e}Xs=c.return}}if(Cc=r,Zr(),at&&"function"==typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(rt,e)}catch(e){}i=!0}return i}finally{yt=n,Sc.transition=t}}return!1}function wl(e,t,n){aa(e,t=ps(0,t=os(n,t),1)),t=Gc(),null!==(e=el(e,1))&&(vt(e,1,t),nl(e,t))}function kl(e,t,n){if(3===e.tag)wl(e,e,n);else for(;null!==t;){if(3===t.tag){wl(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===zc||!zc.has(i))){aa(t,e=hs(t,e=os(n,e),1)),e=Gc(),null!==(t=el(t,1))&&(vt(t,1,e),nl(t,e));break}}t=t.return}}function Sl(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=Gc(),e.pingedLanes|=e.suspendedLanes&n,xc===e&&(Tc&n)===n&&(4===Oc||3===Oc&&(130023424&Tc)===Tc&&500>Ge()-$c?dl(e,0):Nc|=n),nl(e,t)}function Cl(e,t){0===t&&(0==(1&e.mode)?t=1:(t=ut,0==(130023424&(ut<<=1))&&(ut=4194304)));var n=Gc();null!==(e=el(e,t))&&(vt(e,t,n),nl(e,n))}function xl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cl(e,n)}function El(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(a(314))}null!==i&&i.delete(t),Cl(e,n)}function Tl(e,t){return He(e,t)}function Pl(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rl(e,t,n,i){return new Pl(e,t,n,i)}function Ol(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dl(e,t){var n=e.alternate;return null===n?((n=Rl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ml(e,t,n,i,r,o){var s=2;if(i=e,"function"==typeof e)Ol(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case k:return Il(n.children,r,o,t);case S:s=8,r|=8;break;case C:return(e=Rl(12,n,t,2|r)).elementType=C,e.lanes=o,e;case P:return(e=Rl(13,n,t,r)).elementType=P,e.lanes=o,e;case R:return(e=Rl(19,n,t,r)).elementType=R,e.lanes=o,e;case M:return Nl(n,r,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case x:s=10;break e;case E:s=9;break e;case T:s=11;break e;case O:s=14;break e;case D:s=16,i=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rl(s,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function Il(e,t,n,i){return(e=Rl(7,e,i,t)).lanes=n,e}function Nl(e,t,n,i){return(e=Rl(22,e,i,t)).elementType=M,e.lanes=n,e.stateNode={},e}function Ll(e,t,n){return(e=Rl(6,e,null,t)).lanes=n,e}function Bl(e,t,n){return(t=Rl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $l(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function jl(e,t,n,i,r,a,o,s,c){return e=new $l(e,t,n,s,c),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rl(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},na(a),e}function Ul(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}function Fl(e){if(!e)return Er;e:{if(Ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Dr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Dr(n))return Nr(e,n,t)}return t}function Zl(e,t,n,i,r,a,o,s,c){return(e=jl(n,i,!0,e,0,a,0,s,c)).context=Fl(null),n=e.current,(a=ra(i=Gc(),r=Jc(n))).callback=null!=t?t:null,aa(n,a),e.current.lanes=r,vt(e,r,i),nl(e,i),e}function zl(e,t,n,i){var r=t.current,a=Gc(),o=Jc(r);return n=Fl(n),null===t.context?t.context=n:t.pendingContext=n,(t=ra(a,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),aa(r,t),null!==(e=Kc(r,o,a))&&oa(e,r,o),o}function Vl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ql(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wl(e,t){ql(e,t),(e=e.alternate)&&ql(e,t)}_c=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pr.current)As=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return As=!1,function(e,t,n){switch(t.tag){case 3:Os(t),Ua();break;case 5:to(t);break;case 1:Dr(t.type)&&Lr(t);break;case 4:Ka(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;xr(qr,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(xr(io,1&io.current),t.flags|=128,null):0!=(n&t.child.childLanes)?Ls(e,t,n):(xr(io,1&io.current),null!==(e=Vs(e,t,n))?e.sibling:null);xr(io,1&io.current);break;case 19:if(i=0!=(n&t.childLanes),0!=(128&e.flags)){if(i)return zs(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),xr(io,io.current),i)break;return null;case 22:case 23:return t.lanes=0,xs(e,t,n)}return Vs(e,t,n)}(e,t,n);As=0!=(131072&e.flags)}else As=!1,Da&&0!=(1048576&t.flags)&&Ea(t,_a,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var r=Or(t,Tr.current);Jr(t,n),r=_o(null,t,i,e,r,n);var o=Ao();return t.flags|=1,"object"==typeof r&&null!==r&&"function"==typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Dr(i)?(o=!0,Lr(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,na(t),r.updater=pa,t.stateNode=r,r._reactInternals=t,ga(t,i,e,n),t=Rs(null,t,i,!0,o,n)):(t.tag=0,Da&&o&&Ta(t),ws(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"==typeof e)return Ol(e)?1:0;if(null!=e){if((e=e.$$typeof)===T)return 11;if(e===O)return 14}return 2}(i),e=Vr(i,e),r){case 0:t=Ts(null,t,i,e,n);break e;case 1:t=Ps(null,t,i,e,n);break e;case 11:t=ks(null,t,i,e,n);break e;case 14:t=Ss(null,t,i,Vr(i.type,e),n);break e}throw Error(a(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Ts(e,t,i,r=t.elementType===i?r:Vr(i,r),n);case 1:return i=t.type,r=t.pendingProps,Ps(e,t,i,r=t.elementType===i?r:Vr(i,r),n);case 3:e:{if(Os(t),null===e)throw Error(a(387));i=t.pendingProps,r=(o=t.memoizedState).element,ia(e,t),ca(t,i,null,n);var s=t.memoizedState;if(i=s.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ds(e,t,i,n,r=Error(a(423)));break e}if(i!==r){t=Ds(e,t,i,n,r=Error(a(424)));break e}for(Oa=lr(t.stateNode.containerInfo.firstChild),Ra=t,Da=!0,Ma=null,n=Ha(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Ua(),i===r){t=Vs(e,t,n);break e}ws(e,t,i,n)}t=t.child}return t;case 5:return to(t),null===e&&Ba(t),i=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,s=r.children,nr(i,r)?s=null:null!==o&&nr(i,o)&&(t.flags|=32),Es(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&Ba(t),null;case 13:return Ls(e,t,n);case 4:return Ka(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Wa(t,null,i,n):ws(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,ks(e,t,i,r=t.elementType===i?r:Vr(i,r),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,s=r.value,xr(qr,i._currentValue),i._currentValue=s,null!==o)if(si(o.value,s)){if(o.children===r.children&&!Pr.current){t=Vs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var c=o.dependencies;if(null!==c){s=o.child;for(var l=c.firstContext;null!==l;){if(l.context===i){if(1===o.tag){(l=ra(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Gr(o.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Gr(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Jr(t,n),i=i(r=Kr(r)),t.flags|=1,ws(e,t,i,n),t.child;case 14:return r=Vr(i=t.type,t.pendingProps),Ss(e,t,i,r=Vr(i.type,r),n);case 15:return Cs(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Vr(i,r),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Dr(i)?(e=!0,Lr(t)):e=!1,Jr(t,n),fa(t,i,r),ga(t,i,r,n),Rs(null,t,i,!0,e,n);case 19:return zs(e,t,n);case 22:return xs(e,t,n)}throw Error(a(156,t.tag))};var Hl="function"==typeof reportError?reportError:function(e){console.error(e)};function Ql(e){this._internalRoot=e}function Xl(e){this._internalRoot=e}function Yl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Gl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jl(){}function Kl(e,t,n,i,r){var a=n._reactRootContainer;if(a){var o=a;if("function"==typeof r){var s=r;r=function(){var e=Vl(o);s.call(e)}}zl(t,o,e,r)}else o=function(e,t,n,i,r){if(r){if("function"==typeof i){var a=i;i=function(){var e=Vl(o);a.call(e)}}var o=Zl(t,i,e,0,null,!1,0,"",Jl);return e._reactRootContainer=o,e[fr]=o.current,Zi(8===e.nodeType?e.parentNode:e),ll(),o}for(;r=e.lastChild;)e.removeChild(r);if("function"==typeof i){var s=i;i=function(){var e=Vl(c);s.call(e)}}var c=jl(e,0,!1,null,0,!1,0,"",Jl);return e._reactRootContainer=c,e[fr]=c.current,Zi(8===e.nodeType?e.parentNode:e),ll((function(){zl(t,c,n,i)})),c}(n,t,e,r,i);return Vl(o)}Xl.prototype.render=Ql.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));zl(e,t,null,null)},Xl.prototype.unmount=Ql.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ll((function(){zl(null,e,null,null)})),t[fr]=null}},Xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&Bt(e)}},At=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(bt(t,1|n),nl(t,Ge()),0==(6&Cc)&&(jc=Ge()+500,Zr()))}break;case 13:var i=Gc();ll((function(){return Kc(e,1,i)})),Wl(e,1)}},wt=function(e){13===e.tag&&(Kc(e,134217728,Gc()),Wl(e,134217728))},kt=function(e){if(13===e.tag){var t=Gc(),n=Jc(e);Kc(e,n,t),Wl(e,n)}},St=function(){return yt},Ct=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},we=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=Ar(i);if(!r)throw Error(a(90));H(i),J(i,r)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cl,Pe=ll;var eu={usingClientEntryPoint:!1,Events:[yr,_r,Ar,xe,Ee,cl]},tu={findFiberByHostInstance:br,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{rt=iu.inject(nu),at=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yl(t))throw Error(a(200));return Ul(e,t,null,n)},t.createRoot=function(e,t){if(!Yl(e))throw Error(a(299));var n=!1,i="",r=Hl;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=jl(e,1,!1,null,0,n,0,i,r),e[fr]=t.current,Zi(8===e.nodeType?e.parentNode:e),new Ql(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return ll(e)},t.hydrate=function(e,t,n){if(!Gl(t))throw Error(a(200));return Kl(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yl(e))throw Error(a(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",s=Hl;if(null!=n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Zl(t,null,e,1,null!=n?n:null,r,0,o,s),e[fr]=t.current,Zi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Xl(t)},t.render=function(e,t,n){if(!Gl(t))throw Error(a(200));return Kl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Gl(e))throw Error(a(40));return!!e._reactRootContainer&&(ll((function(){Kl(null,null,e,!1,(function(){e._reactRootContainer=null,e[fr]=null}))})),!0)},t.unstable_batchedUpdates=cl,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Gl(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Kl(e,t,n,!1,i)},t.version="18.1.0-next-22edb9f77-20220426"},745:(e,t,n)=>{"use strict";var i=n(3935);t.s=i.createRoot,i.hydrateRoot},3935:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(4448)},5668:(e,t,n)=>{"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return d.default}}),t.default=void 0;var r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(7294)),a=f(n(5697)),o=f(n(3935)),s=f(n(6010)),c=n(1825),l=n(2849),u=n(9280),d=f(n(783)),p=f(n(5904)),h=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function f(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},g.apply(this,arguments)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function A(e,t){return A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},A(e,t)}function w(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(m,e);var t,n,i,a,u,f=(a=m,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(a);if(u){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function m(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),C(k(t=f.call(this,e)),"onDragStart",(function(e,n){if((0,p.default)("Draggable: onDragStart: %j",n),!1===t.props.onStart(e,(0,l.createDraggableData)(k(t),n)))return!1;t.setState({dragging:!0,dragged:!0})})),C(k(t),"onDrag",(function(e,n){if(!t.state.dragging)return!1;(0,p.default)("Draggable: onDrag: %j",n);var i,r,a=(0,l.createDraggableData)(k(t),n),o={x:a.x,y:a.y};if(t.props.bounds){var s=o.x,c=o.y;o.x+=t.state.slackX,o.y+=t.state.slackY;var u=(i=(0,l.getBoundPosition)(k(t),o.x,o.y),r=2,function(e){if(Array.isArray(e))return e}(i)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(i,r)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(i,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],h=u[1];o.x=d,o.y=h,o.slackX=t.state.slackX+(s-o.x),o.slackY=t.state.slackY+(c-o.y),a.x=o.x,a.y=o.y,a.deltaX=o.x-t.state.x,a.deltaY=o.y-t.state.y}if(!1===t.props.onDrag(e,a))return!1;t.setState(o)})),C(k(t),"onDragStop",(function(e,n){if(!t.state.dragging)return!1;if(!1===t.props.onStop(e,(0,l.createDraggableData)(k(t),n)))return!1;(0,p.default)("Draggable: onDragStop: %j",n);var i={dragging:!1,slackX:0,slackY:0};if(Boolean(t.props.position)){var r=t.props.position,a=r.x,o=r.y;i.x=a,i.y=o}t.setState(i)})),t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:b({},e.position),slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return t=m,i=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.position,i=t.prevPropsPosition;return!n||i&&n.x===i.x&&n.y===i.y?null:((0,p.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:i}),{x:n.x,y:n.y,prevPropsPosition:b({},n)})}}],(n=[{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current)&&void 0!==e?e:o.default.findDOMNode(this)}},{key:"render",value:function(){var e,t=this.props,n=(t.axis,t.bounds,t.children),i=t.defaultPosition,a=t.defaultClassName,o=t.defaultClassNameDragging,u=t.defaultClassNameDragged,p=t.position,f=t.positionOffset,m=(t.scale,function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(t,h)),v={},y=null,_=!Boolean(p)||this.state.dragging,A=p||i,w={x:(0,l.canDragX)(this)&&_?this.state.x:A.x,y:(0,l.canDragY)(this)&&_?this.state.y:A.y};this.state.isElementSVG?y=(0,c.createSVGTransform)(w,f):v=(0,c.createCSSTransform)(w,f);var k=(0,s.default)(n.props.className||"",a,(C(e={},o,this.state.dragging),C(e,u,this.state.dragged),e));return r.createElement(d.default,g({},m,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),r.cloneElement(r.Children.only(n),{className:k,style:b(b({},n.props.style),v),transform:y}))}}])&&_(t.prototype,n),i&&_(t,i),Object.defineProperty(t,"prototype",{writable:!1}),m}(r.Component);t.default=x,C(x,"displayName","Draggable"),C(x,"propTypes",b(b({},d.default.propTypes),{},{axis:a.default.oneOf(["both","x","y","none"]),bounds:a.default.oneOfType([a.default.shape({left:a.default.number,right:a.default.number,top:a.default.number,bottom:a.default.number}),a.default.string,a.default.oneOf([!1])]),defaultClassName:a.default.string,defaultClassNameDragging:a.default.string,defaultClassNameDragged:a.default.string,defaultPosition:a.default.shape({x:a.default.number,y:a.default.number}),positionOffset:a.default.shape({x:a.default.oneOfType([a.default.number,a.default.string]),y:a.default.oneOfType([a.default.number,a.default.string])}),position:a.default.shape({x:a.default.number,y:a.default.number}),className:u.dontSetMe,style:u.dontSetMe,transform:u.dontSetMe})),C(x,"defaultProps",b(b({},d.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))},783:(e,t,n)=>{"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(7294)),a=d(n(5697)),o=d(n(3935)),s=n(1825),c=n(2849),l=n(9280),u=d(n(5904));function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function b(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w={start:"touchstart",move:"touchmove",stop:"touchend"},k={start:"mousedown",move:"mousemove",stop:"mouseup"},S=k,C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(d,e);var t,n,i,a,l=(i=d,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(i);if(a){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function d(){var e;m(this,d);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return A(y(e=l.call.apply(l,[this].concat(n))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),A(y(e),"mounted",!1),A(y(e),"handleDragStart",(function(t){if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;var n=e.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var i=n.ownerDocument;if(!(e.props.disabled||!(t.target instanceof i.defaultView.Node)||e.props.handle&&!(0,s.matchesSelectorAndParentsTo)(t.target,e.props.handle,n)||e.props.cancel&&(0,s.matchesSelectorAndParentsTo)(t.target,e.props.cancel,n))){"touchstart"===t.type&&t.preventDefault();var r=(0,s.getTouchIdentifier)(t);e.setState({touchIdentifier:r});var a=(0,c.getControlPosition)(t,r,y(e));if(null!=a){var o=a.x,l=a.y,d=(0,c.createCoreData)(y(e),o,l);(0,u.default)("DraggableCore: handleDragStart: %j",d),(0,u.default)("calling",e.props.onStart),!1!==e.props.onStart(t,d)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,s.addUserSelectStyles)(i),e.setState({dragging:!0,lastX:o,lastY:l}),(0,s.addEvent)(i,S.move,e.handleDrag),(0,s.addEvent)(i,S.stop,e.handleDragStop))}}})),A(y(e),"handleDrag",(function(t){var n=(0,c.getControlPosition)(t,e.state.touchIdentifier,y(e));if(null!=n){var i=n.x,r=n.y;if(Array.isArray(e.props.grid)){var a=i-e.state.lastX,o=r-e.state.lastY,s=h((0,c.snapToGrid)(e.props.grid,a,o),2);if(a=s[0],o=s[1],!a&&!o)return;i=e.state.lastX+a,r=e.state.lastY+o}var l=(0,c.createCoreData)(y(e),i,r);if((0,u.default)("DraggableCore: handleDrag: %j",l),!1!==e.props.onDrag(t,l)&&!1!==e.mounted)e.setState({lastX:i,lastY:r});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(t){var d=document.createEvent("MouseEvents");d.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(d)}}})),A(y(e),"handleDragStop",(function(t){if(e.state.dragging){var n=(0,c.getControlPosition)(t,e.state.touchIdentifier,y(e));if(null!=n){var i=n.x,r=n.y;if(Array.isArray(e.props.grid)){var a=i-e.state.lastX||0,o=r-e.state.lastY||0,l=h((0,c.snapToGrid)(e.props.grid,a,o),2);a=l[0],o=l[1],i=e.state.lastX+a,r=e.state.lastY+o}var d=(0,c.createCoreData)(y(e),i,r);if(!1===e.props.onStop(t,d)||!1===e.mounted)return!1;var p=e.findDOMNode();p&&e.props.enableUserSelectHack&&(0,s.removeUserSelectStyles)(p.ownerDocument),(0,u.default)("DraggableCore: handleDragStop: %j",d),e.setState({dragging:!1,lastX:NaN,lastY:NaN}),p&&((0,u.default)("DraggableCore: Removing handlers"),(0,s.removeEvent)(p.ownerDocument,S.move,e.handleDrag),(0,s.removeEvent)(p.ownerDocument,S.stop,e.handleDragStop))}}})),A(y(e),"onMouseDown",(function(t){return S=k,e.handleDragStart(t)})),A(y(e),"onMouseUp",(function(t){return S=k,e.handleDragStop(t)})),A(y(e),"onTouchStart",(function(t){return S=w,e.handleDragStart(t)})),A(y(e),"onTouchEnd",(function(t){return S=w,e.handleDragStop(t)})),e}return t=d,(n=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.findDOMNode();e&&(0,s.addEvent)(e,w.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.findDOMNode();if(e){var t=e.ownerDocument;(0,s.removeEvent)(t,k.move,this.handleDrag),(0,s.removeEvent)(t,w.move,this.handleDrag),(0,s.removeEvent)(t,k.stop,this.handleDragStop),(0,s.removeEvent)(t,w.stop,this.handleDragStop),(0,s.removeEvent)(e,w.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,s.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current:o.default.findDOMNode(this)}},{key:"render",value:function(){return r.cloneElement(r.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&g(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),d}(r.Component);t.default=C,A(C,"displayName","DraggableCore"),A(C,"propTypes",{allowAnyClick:a.default.bool,disabled:a.default.bool,enableUserSelectHack:a.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:a.default.arrayOf(a.default.number),handle:a.default.string,cancel:a.default.string,nodeRef:a.default.object,onStart:a.default.func,onDrag:a.default.func,onStop:a.default.func,onMouseDown:a.default.func,scale:a.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),A(C,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},1193:(e,t,n)=>{"use strict";var i=n(5668),r=i.default,a=i.DraggableCore;e.exports=r,e.exports.default=r,e.exports.DraggableCore=a},1825:(e,t,n)=>{"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.addClassName=h,t.addEvent=function(e,t,n,i){if(e){var r=c({capture:!0},i);e.addEventListener?e.addEventListener(t,n,r):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}},t.addUserSelectStyles=function(e){if(e){var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&h(e.body,"react-draggable-transparent-selection")}},t.createCSSTransform=function(e,t){var n=p(e,t,"px");return l({},(0,a.browserPrefixToKey)("transform",a.default),n)},t.createSVGTransform=function(e,t){return p(e,t,"")},t.getTouch=function(e,t){return e.targetTouches&&(0,r.findInArray)(e.targetTouches,(function(e){return t===e.identifier}))||e.changedTouches&&(0,r.findInArray)(e.changedTouches,(function(e){return t===e.identifier}))},t.getTouchIdentifier=function(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0},t.getTranslation=p,t.innerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return(t-=(0,r.int)(n.paddingTop))-(0,r.int)(n.paddingBottom)},t.innerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return(t-=(0,r.int)(n.paddingLeft))-(0,r.int)(n.paddingRight)},t.matchesSelector=d,t.matchesSelectorAndParentsTo=function(e,t,n){var i=e;do{if(d(i,t))return!0;if(i===n)return!1;i=i.parentNode}while(i);return!1},t.offsetXYFromParent=function(e,t,n){var i=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect();return{x:(e.clientX+t.scrollLeft-i.left)/n,y:(e.clientY+t.scrollTop-i.top)/n}},t.outerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return(t+=(0,r.int)(n.borderTopWidth))+(0,r.int)(n.borderBottomWidth)},t.outerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return(t+=(0,r.int)(n.borderLeftWidth))+(0,r.int)(n.borderRightWidth)},t.removeClassName=f,t.removeEvent=function(e,t,n,i){if(e){var r=c({capture:!0},i);e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}},t.removeUserSelectStyles=function(e){if(e)try{if(e.body&&f(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}};var r=n(9280),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(r,s,c):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(n(8650));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u="";function d(e,t){return u||(u=(0,r.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,r.isFunction)(e[t])}))),!!(0,r.isFunction)(e[u])&&e[u](t)}function p(e,t,n){var i=e.x,r=e.y,a="translate(".concat(i).concat(n,",").concat(r).concat(n,")");if(t){var o="".concat("string"==typeof t.x?t.x:t.x+n),s="".concat("string"==typeof t.y?t.y:t.y+n);a="translate(".concat(o,", ").concat(s,")")+a}return a}function h(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function f(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}},8650:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserPrefixToKey=r,t.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},t.default=void 0,t.getPrefix=i;var n=["Moz","Webkit","O","ms"];function i(){var e,t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";var a=null===(e=window.document)||void 0===e||null===(t=e.documentElement)||void 0===t?void 0:t.style;if(!a)return"";if(i in a)return"";for(var o=0;o<n.length;o++)if(r(i,n[o])in a)return n[o];return""}function r(e,t){return t?"".concat(t).concat(function(e){for(var t="",n=!0,i=0;i<e.length;i++)n?(t+=e[i].toUpperCase(),n=!1):"-"===e[i]?n=!0:t+=e[i];return t}(e)):e}var a=i();t.default=a},5904:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}},2849:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},t.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},t.createCoreData=function(e,t,n){var r=e.state,o=!(0,i.isNum)(r.lastX),s=a(e);return o?{node:s,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:s,deltaX:t-r.lastX,deltaY:n-r.lastY,lastX:r.lastX,lastY:r.lastY,x:t,y:n}},t.createDraggableData=function(e,t){var n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}},t.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];var o=e.props.bounds;o="string"==typeof o?o:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(o);var s=a(e);if("string"==typeof o){var c,l=s.ownerDocument,u=l.defaultView;if(!((c="parent"===o?s.parentNode:l.querySelector(o))instanceof u.HTMLElement))throw new Error('Bounds selector "'+o+'" could not find an element.');var d=c,p=u.getComputedStyle(s),h=u.getComputedStyle(d);o={left:-s.offsetLeft+(0,i.int)(h.paddingLeft)+(0,i.int)(p.marginLeft),top:-s.offsetTop+(0,i.int)(h.paddingTop)+(0,i.int)(p.marginTop),right:(0,r.innerWidth)(d)-(0,r.outerWidth)(s)-s.offsetLeft+(0,i.int)(h.paddingRight)-(0,i.int)(p.marginRight),bottom:(0,r.innerHeight)(d)-(0,r.outerHeight)(s)-s.offsetTop+(0,i.int)(h.paddingBottom)-(0,i.int)(p.marginBottom)}}return(0,i.isNum)(o.right)&&(t=Math.min(t,o.right)),(0,i.isNum)(o.bottom)&&(n=Math.min(n,o.bottom)),(0,i.isNum)(o.left)&&(t=Math.max(t,o.left)),(0,i.isNum)(o.top)&&(n=Math.max(n,o.top)),[t,n]},t.getControlPosition=function(e,t,n){var i="number"==typeof t?(0,r.getTouch)(e,t):null;if("number"==typeof t&&!i)return null;var o=a(n),s=n.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,r.offsetXYFromParent)(i||e,s,n.props.scale)},t.snapToGrid=function(e,t,n){return[Math.round(t/e[0])*e[0],Math.round(n/e[1])*e[1]]};var i=n(9280),r=n(1825);function a(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}},9280:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))},t.findInArray=function(e,t){for(var n=0,i=e.length;n<i;n++)if(t.apply(t,[e[n],n,e]))return e[n]},t.int=function(e){return parseInt(e,10)},t.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},t.isNum=function(e){return"number"==typeof e&&!isNaN(e)}},2827:(e,t,n)=>{"use strict";t.__esModule=!0,t.default=void 0;var i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(7294)),r=n(1193),a=n(9069),o=n(448),s=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l.apply(this,arguments)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}var f=function(e){var t,n;function o(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).handleRefs={},t.lastHandleRect=null,t.slack=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,h(t,n);var c=o.prototype;return c.componentWillUnmount=function(){this.resetData()},c.resetData=function(){this.lastHandleRect=this.slack=null},c.runConstraints=function(e,t){var n=this.props,i=n.minConstraints,r=n.maxConstraints,a=n.lockAspectRatio;if(!i&&!r&&!a)return[e,t];if(a){var o=this.props.width/this.props.height,s=e-this.props.width,c=t-this.props.height;Math.abs(s)>Math.abs(c*o)?t=e/o:e=t*o}var l=e,u=t,d=this.slack||[0,0],p=d[0],h=d[1];return e+=p,t+=h,i&&(e=Math.max(i[0],e),t=Math.max(i[1],t)),r&&(e=Math.min(r[0],e),t=Math.min(r[1],t)),this.slack=[p+(l-e),h+(u-t)],[e,t]},c.resizeHandler=function(e,t){var n=this;return function(i,r){var a=r.node,o=r.deltaX,s=r.deltaY;"onResizeStart"===e&&n.resetData();var c=("both"===n.props.axis||"x"===n.props.axis)&&"n"!==t&&"s"!==t,l=("both"===n.props.axis||"y"===n.props.axis)&&"e"!==t&&"w"!==t;if(c||l){var u=t[0],d=t[t.length-1],p=a.getBoundingClientRect();null!=n.lastHandleRect&&("w"===d&&(o+=p.left-n.lastHandleRect.left),"n"===u&&(s+=p.top-n.lastHandleRect.top)),n.lastHandleRect=p,"w"===d&&(o=-o),"n"===u&&(s=-s);var h=n.props.width+(c?o/n.props.transformScale:0),f=n.props.height+(l?s/n.props.transformScale:0),m=n.runConstraints(h,f);h=m[0],f=m[1];var g=h!==n.props.width||f!==n.props.height,v="function"==typeof n.props[e]?n.props[e]:null;v&&!("onResize"===e&&!g)&&(null==i.persist||i.persist(),v(i,{node:a,size:{width:h,height:f},handle:t})),"onResizeStop"===e&&n.resetData()}}},c.renderResizeHandle=function(e,t){var n=this.props.handle;if(!n)return i.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+e,ref:t});if("function"==typeof n)return n(e,t);var r=d({ref:t},"string"==typeof n.type?{}:{handleAxis:e});return i.cloneElement(n,r)},c.render=function(){var e=this,t=this.props,n=t.children,o=t.className,c=t.draggableOpts,u=(t.width,t.height,t.handle,t.handleSize,t.lockAspectRatio,t.axis,t.minConstraints,t.maxConstraints,t.onResize,t.onResizeStop,t.onResizeStart,t.resizeHandles),p=(t.transformScale,function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(t,s));return(0,a.cloneElement)(n,d(d({},p),{},{className:(o?o+" ":"")+"react-resizable",children:[].concat(n.props.children,u.map((function(t){var n,a=null!=(n=e.handleRefs[t])?n:e.handleRefs[t]=i.createRef();return i.createElement(r.DraggableCore,l({},c,{nodeRef:a,key:"resizableHandle-"+t,onStop:e.resizeHandler("onResizeStop",t),onStart:e.resizeHandler("onResizeStart",t),onDrag:e.resizeHandler("onResize",t)}),e.renderResizeHandle(t,a))})))}))},o}(i.Component);t.default=f,f.propTypes=o.resizableProps,f.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1}},8735:(e,t,n)=>{"use strict";t.default=void 0;var i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(n(7294)),r=c(n(5697)),a=c(n(2827)),o=n(448),s=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function c(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u.apply(this,arguments)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}var m=function(e){var t,n;function r(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).state={width:t.props.width,height:t.props.height,propsWidth:t.props.width,propsHeight:t.props.height},t.onResize=function(e,n){var i=n.size;t.props.onResize?(null==e.persist||e.persist(),t.setState(i,(function(){return t.props.onResize&&t.props.onResize(e,n)}))):t.setState(i)},t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,f(t,n),r.getDerivedStateFromProps=function(e,t){return t.propsWidth!==e.width||t.propsHeight!==e.height?{width:e.width,height:e.height,propsWidth:e.width,propsHeight:e.height}:null},r.prototype.render=function(){var e=this.props,t=e.handle,n=e.handleSize,r=(e.onResize,e.onResizeStart),o=e.onResizeStop,c=e.draggableOpts,l=e.minConstraints,d=e.maxConstraints,h=e.lockAspectRatio,f=e.axis,m=(e.width,e.height,e.resizeHandles),g=e.style,v=e.transformScale,b=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,s);return i.createElement(a.default,{axis:f,draggableOpts:c,handle:t,handleSize:n,height:this.state.height,lockAspectRatio:h,maxConstraints:d,minConstraints:l,onResizeStart:r,onResize:this.onResize,onResizeStop:o,resizeHandles:m,transformScale:v,width:this.state.width},i.createElement("div",u({},b,{style:p(p({},g),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},r}(i.Component);t.default=m,m.propTypes=p(p({},o.resizableProps),{},{children:r.default.element})},448:(e,t,n)=>{"use strict";t.__esModule=!0,t.resizableProps=void 0;var i,r=(i=n(5697))&&i.__esModule?i:{default:i};n(1193);var a={axis:r.default.oneOf(["both","x","y","none"]),className:r.default.string,children:r.default.element.isRequired,draggableOpts:r.default.shape({allowAnyClick:r.default.bool,cancel:r.default.string,children:r.default.node,disabled:r.default.bool,enableUserSelectHack:r.default.bool,offsetParent:r.default.node,grid:r.default.arrayOf(r.default.number),handle:r.default.string,nodeRef:r.default.object,onStart:r.default.func,onDrag:r.default.func,onStop:r.default.func,onMouseDown:r.default.func,scale:r.default.number}),height:r.default.number.isRequired,handle:r.default.oneOfType([r.default.node,r.default.func]),handleSize:r.default.arrayOf(r.default.number),lockAspectRatio:r.default.bool,maxConstraints:r.default.arrayOf(r.default.number),minConstraints:r.default.arrayOf(r.default.number),onResizeStop:r.default.func,onResizeStart:r.default.func,onResize:r.default.func,resizeHandles:r.default.arrayOf(r.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:r.default.number,width:r.default.number.isRequired};t.resizableProps=a},9069:(e,t,n)=>{"use strict";t.__esModule=!0,t.cloneElement=function(e,t){return t.style&&e.props.style&&(t.style=o(o({},e.props.style),t.style)),t.className&&e.props.className&&(t.className=e.props.className+" "+t.className),r.default.cloneElement(e,t)};var i,r=(i=n(7294))&&i.__esModule?i:{default:i};function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},1706:(e,t,n)=>{"use strict";e.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},e.exports.Resizable=n(2827).default,e.exports.ResizableBox=n(8735).default},2408:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator,f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var _=y.prototype=new b;_.constructor=y,m(_,v.prototype),_.isPureReactComponent=!0;var A=Array.isArray,w=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,i){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!S.hasOwnProperty(r)&&(a[r]=t[r]);var c=arguments.length-2;if(1===c)a.children=i;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===a[r]&&(a[r]=c[r]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:k.current}}function x(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function T(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,r,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case i:c=!0}}if(c)return o=o(c=e),e=""===a?"."+T(c,0):a,A(o)?(r="",null!=e&&(r=e.replace(E,"$&/")+"/"),P(o,t,r,"",(function(e){return e}))):null!=o&&(x(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(c=0,a=""===a?".":a+":",A(e))for(var l=0;l<e.length;l++){var u=a+T(s=e[l],l);c+=P(s,t,r,u,o)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),l=0;!(s=e.next()).done;)c+=P(s=s.value,t,r,u=a+T(s,l++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function R(e,t,n){if(null==e)return e;var i=[],r=0;return P(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},M={transition:null},I={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:M,ReactCurrentOwner:k};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=o,t.PureComponent=y,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.cloneElement=function(e,t,i){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=m({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=k.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!S.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=i;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}return{$$typeof:n,type:e.type,key:a,ref:o,props:r,_owner:s}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.1.0"},7294:(e,t,n)=>{"use strict";e.exports=n(2408)},4281:e=>{"use strict";var t={};function n(e,n,i){i||(i=Error);var r=function(e){var t,i;function r(t,i,r){return e.call(this,function(e,t,i){return"string"==typeof n?n:n(e,t,i)}(t,i,r))||this}return i=e,(t=r).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,r}(i);r.prototype.name=i.name,r.prototype.code=e,t[e]=r}function i(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,a,o,s,c;if("string"==typeof t&&(a="not ",t.substr(0,a.length)===a)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))o="The ".concat(e," ").concat(r," ").concat(i(t,"type"));else{var l=("number"!=typeof c&&(c=0),c+".".length>(s=e).length||-1===s.indexOf(".",c)?"argument":"property");o='The "'.concat(e,'" ').concat(l," ").concat(r," ").concat(i(t,"type"))}return o+". Received type ".concat(typeof n)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},6753:(e,t,n)=>{"use strict";var i=n(4155),r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=u;var a=n(9481),o=n(4229);n(5717)(u,a);for(var s=r(o.prototype),c=0;c<s.length;c++){var l=s[c];u.prototype[l]||(u.prototype[l]=o.prototype[l])}function u(e){if(!(this instanceof u))return new u(e);a.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||i.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},2725:(e,t,n)=>{"use strict";e.exports=r;var i=n(4605);function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}n(5717)(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},9481:(e,t,n)=>{"use strict";var i,r=n(4155);e.exports=C,C.ReadableState=S,n(7187).EventEmitter;var a,o=function(e,t){return e.listeners(t).length},s=n(2503),c=n(8764).Buffer,l=global.Uint8Array||function(){},u=n(4616);a=u&&u.debuglog?u.debuglog("stream"):function(){};var d,p,h,f=n(7327),m=n(1195),g=n(2457).getHighWaterMark,v=n(4281).q,b=v.ERR_INVALID_ARG_TYPE,y=v.ERR_STREAM_PUSH_AFTER_EOF,_=v.ERR_METHOD_NOT_IMPLEMENTED,A=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(5717)(C,s);var w=m.errorOrDestroy,k=["error","close","destroy","pause","resume"];function S(e,t,r){i=i||n(6753),e=e||{},"boolean"!=typeof r&&(r=t instanceof i),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",r),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=n(4626).s),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function C(e){if(i=i||n(6753),!(this instanceof C))return new C(e);var t=this instanceof i;this._readableState=new S(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function x(e,t,n,i,r){a("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(a("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?R(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,O(e)))}}(e,s);else if(r||(o=function(e,t){var n,i;return i=t,c.isBuffer(i)||i instanceof l||"string"==typeof t||void 0===t||e.objectMode||(n=new b("chunk",["string","Buffer","Uint8Array"],t)),n}(s,t)),o)w(e,o);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),i)s.endEmitted?w(e,new A):E(e,s,t,!0);else if(s.ended)w(e,new y);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?E(e,s,t,!1):D(e,s)):E(e,s,t,!1)}else i||(s.reading=!1,D(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function E(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&R(e)),D(e,t)}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),C.prototype.destroy=m.destroy,C.prototype._undestroy=m.undestroy,C.prototype._destroy=function(e,t){t(e)},C.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=c.from(e,t),t=""),n=!0),x(this,e,t,!1,n)},C.prototype.unshift=function(e){return x(this,e,null,!0,!1)},C.prototype.isPaused=function(){return!1===this._readableState.flowing},C.prototype.setEncoding=function(e){d||(d=n(4626).s);var t=new d(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,r="";null!==i;)r+=t.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var T=1073741824;function P(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=T?e=T:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function R(e){var t=e._readableState;a("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(a("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(O,e))}function O(e){var t=e._readableState;a("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,B(e)}function D(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(M,e,t))}function M(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(a("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function I(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function N(e){a("readable nexttick read 0"),e.read(0)}function L(e,t){a("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),B(e),t.flowing&&!t.reading&&e.read(0)}function B(e){var t=e._readableState;for(a("flow",t.flowing);t.flowing&&null!==e.read(););}function $(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function j(e){var t=e._readableState;a("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(U,t,e))}function U(e,t){if(a("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function F(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}C.prototype.read=function(e){a("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return a("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?j(this):R(this),null;if(0===(e=P(e,t))&&t.ended)return 0===t.length&&j(this),null;var i,r=t.needReadable;return a("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&a("length less than watermark",r=!0),t.ended||t.reading?a("reading or ended",r=!1):r&&(a("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=P(n,t))),null===(i=e>0?$(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&j(this)),null!==i&&this.emit("data",i),i},C.prototype._read=function(e){w(this,new _("_read()"))},C.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,a("pipe count=%d opts=%j",i.pipesCount,t);var s=t&&!1===t.end||e===r.stdout||e===r.stderr?m:c;function c(){a("onend"),e.end()}i.endEmitted?r.nextTick(s):n.once("end",s),e.on("unpipe",(function t(r,o){a("onunpipe"),r===n&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,a("cleanup"),e.removeListener("close",h),e.removeListener("finish",f),e.removeListener("drain",l),e.removeListener("error",p),e.removeListener("unpipe",t),n.removeListener("end",c),n.removeListener("end",m),n.removeListener("data",d),u=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}));var l=function(e){return function(){var t=e._readableState;a("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,B(e))}}(n);e.on("drain",l);var u=!1;function d(t){a("ondata");var r=e.write(t);a("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==F(i.pipes,e))&&!u&&(a("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function p(t){a("onerror",t),m(),e.removeListener("error",p),0===o(e,"error")&&w(e,t)}function h(){e.removeListener("finish",f),m()}function f(){a("onfinish"),e.removeListener("close",h),m()}function m(){a("unpipe"),n.unpipe(e)}return n.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events.error?Array.isArray(e._events.error)?e._events.error.unshift(n):e._events.error=[n,e._events.error]:e.on(t,n)}(e,"error",p),e.once("close",h),e.once("finish",f),e.emit("pipe",n),i.flowing||(a("pipe resume"),n.resume()),e},C.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<r;a++)i[a].emit("unpipe",this,{hasUnpiped:!1});return this}var o=F(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},C.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,a("on readable",i.length,i.reading),i.length?R(this):i.reading||r.nextTick(N,this))),n},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(I,this),n},C.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(I,this),t},C.prototype.resume=function(){var e=this._readableState;return e.flowing||(a("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(L,e,t))}(this,e)),e.paused=!1,this},C.prototype.pause=function(){return a("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(a("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},C.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var r in e.on("end",(function(){if(a("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(r){a("wrapped data"),n.decoder&&(r=n.decoder.write(r)),n.objectMode&&null==r||(n.objectMode||r&&r.length)&&(t.push(r)||(i=!0,e.pause()))})),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var o=0;o<k.length;o++)e.on(k[o],this.emit.bind(this,k[o]));return this._read=function(t){a("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(C.prototype[Symbol.asyncIterator]=function(){return void 0===p&&(p=n(5850)),p(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),C._fromList=$,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(C.from=function(e,t){return void 0===h&&(h=n(5167)),h(C,e,t)})},4605:(e,t,n)=>{"use strict";e.exports=u;var i=n(4281).q,r=i.ERR_METHOD_NOT_IMPLEMENTED,a=i.ERR_MULTIPLE_CALLBACK,o=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=i.ERR_TRANSFORM_WITH_LENGTH_0,c=n(6753);function l(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new a);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);c.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?p(this,null,null):this._flush((function(t,n){p(e,t,n)}))}function p(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new s;if(e._transformState.transforming)throw new o;return e.push(null)}n(5717)(u,c),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,n){n(new r("_transform()"))},u.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},4229:(e,t,n)=>{"use strict";var i,r=n(4155);function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var i=e.entry;for(e.entry=null;i;){var r=i.callback;t.pendingcb--,r(undefined),i=i.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=C,C.WritableState=S;var o,s={deprecate:n(4927)},c=n(2503),l=n(8764).Buffer,u=global.Uint8Array||function(){},d=n(1195),p=n(2457).getHighWaterMark,h=n(4281).q,f=h.ERR_INVALID_ARG_TYPE,m=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_MULTIPLE_CALLBACK,v=h.ERR_STREAM_CANNOT_PIPE,b=h.ERR_STREAM_DESTROYED,y=h.ERR_STREAM_NULL_VALUES,_=h.ERR_STREAM_WRITE_AFTER_END,A=h.ERR_UNKNOWN_ENCODING,w=d.errorOrDestroy;function k(){}function S(e,t,o){i=i||n(6753),e=e||{},"boolean"!=typeof o&&(o=t instanceof i),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=p(this,e,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,a=n.writecb;if("function"!=typeof a)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,a){--t.pendingcb,n?(r.nextTick(a,i),r.nextTick(O,e,t),e._writableState.errorEmitted=!0,w(e,i)):(a(i),e._writableState.errorEmitted=!0,w(e,i),O(e,t))}(e,n,i,t,a);else{var o=P(n)||e.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||T(e,n),i?r.nextTick(E,e,n,o,a):E(e,n,o,a)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function C(e){var t=this instanceof(i=i||n(6753));if(!t&&!o.call(C,this))return new C(e);this._writableState=new S(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),c.call(this)}function x(e,t,n,i,r,a,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new b("write")):n?e._writev(r,t.onwrite):e._write(r,a,t.onwrite),t.sync=!1}function E(e,t,n,i){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),O(e,t)}function T(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=new Array(i),o=t.corkedRequestsFree;o.entry=n;for(var s=0,c=!0;n;)r[s]=n,n.isBuf||(c=!1),n=n.next,s+=1;r.allBuffers=c,x(e,t,!0,t.length,r,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,u=n.encoding,d=n.callback;if(x(e,t,!1,t.objectMode?1:l.length,l,u,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function P(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function R(e,t){e._final((function(n){t.pendingcb--,n&&w(e,n),t.prefinished=!0,e.emit("prefinish"),O(e,t)}))}function O(e,t){var n=P(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(R,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}n(5717)(C,c),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(e){return!!o.call(this,e)||this===C&&e&&e._writableState instanceof S}})):o=function(e){return e instanceof this},C.prototype.pipe=function(){w(this,new v)},C.prototype.write=function(e,t,n){var i,a=this._writableState,o=!1,s=!a.objectMode&&(i=e,l.isBuffer(i)||i instanceof u);return s&&!l.isBuffer(e)&&(e=function(e){return l.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=a.defaultEncoding),"function"!=typeof n&&(n=k),a.ending?function(e,t){var n=new _;w(e,n),r.nextTick(t,n)}(this,n):(s||function(e,t,n,i){var a;return null===n?a=new y:"string"==typeof n||t.objectMode||(a=new f("chunk",["string","Buffer"],n)),!a||(w(e,a),r.nextTick(i,a),!1)}(this,a,e,n))&&(a.pendingcb++,o=function(e,t,n,i,r,a){if(!n){var o=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,n)),t}(t,i,r);i!==o&&(n=!0,r="buffer",i=o)}var s=t.objectMode?1:i.length;t.length+=s;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:a,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else x(e,t,!1,s,i,r,a);return c}(this,a,s,e,t,n)),o},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||T(this,e))},C.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new A(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),C.prototype._write=function(e,t,n){n(new m("_write()"))},C.prototype._writev=null,C.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,O(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),C.prototype.destroy=d.destroy,C.prototype._undestroy=d.undestroy,C.prototype._destroy=function(e,t){t(e)}},5850:(e,t,n)=>{"use strict";var i,r=n(4155);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(8610),s=Symbol("lastResolve"),c=Symbol("lastReject"),l=Symbol("error"),u=Symbol("ended"),d=Symbol("lastPromise"),p=Symbol("handlePromise"),h=Symbol("stream");function f(e,t){return{value:e,done:t}}function m(e){var t=e[s];if(null!==t){var n=e[h].read();null!==n&&(e[d]=null,e[s]=null,e[c]=null,t(f(n,!1)))}}function g(e){r.nextTick(m,e)}var v=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((a(i={get stream(){return this[h]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(f(void 0,!0));if(this[h].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[l]?n(e[l]):t(f(void 0,!0))}))}));var n,i=this[d];if(i)n=new Promise(function(e,t){return function(n,i){e.then((function(){t[u]?n(f(void 0,!0)):t[p](n,i)}),i)}}(i,this));else{var a=this[h].read();if(null!==a)return Promise.resolve(f(a,!1));n=new Promise(this[p])}return this[d]=n,n}},Symbol.asyncIterator,(function(){return this})),a(i,"return",(function(){var e=this;return new Promise((function(t,n){e[h].destroy(null,(function(e){e?n(e):t(f(void 0,!0))}))}))})),i),v);e.exports=function(e){var t,n=Object.create(b,(a(t={},h,{value:e,writable:!0}),a(t,s,{value:null,writable:!0}),a(t,c,{value:null,writable:!0}),a(t,l,{value:null,writable:!0}),a(t,u,{value:e._readableState.endEmitted,writable:!0}),a(t,p,{value:function(e,t){var i=n[h].read();i?(n[d]=null,n[s]=null,n[c]=null,e(f(i,!1))):(n[s]=e,n[c]=t)},writable:!0}),t));return n[d]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[c];return null!==t&&(n[d]=null,n[s]=null,n[c]=null,t(e)),void(n[l]=e)}var i=n[s];null!==i&&(n[d]=null,n[s]=null,n[c]=null,i(f(void 0,!0))),n[u]=!0})),e.on("readable",g.bind(null,n)),n}},7327:(e,t,n)=>{"use strict";function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=n(8764).Buffer,s=n(2361).inspect,c=s&&s.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n;return t=e,n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return o.alloc(0);for(var t,n,i,r=o.allocUnsafe(e>>>0),a=this.head,s=0;a;)t=a.data,n=r,i=s,o.prototype.copy.call(t,n,i),s+=a.data.length,a=a.next;return r}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,i=t.data;for(e-=i.length;t=t.next;){var r=t.data,a=e>r.length?r.length:e;if(a===r.length?i+=r:i+=r.slice(0,e),0==(e-=a)){a===r.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=r.slice(a));break}++n}return this.length-=n,i}},{key:"_getBuffer",value:function(e){var t=o.allocUnsafe(e),n=this.head,i=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var r=n.data,a=e>r.length?r.length:e;if(r.copy(t,t.length-e,0,a),0==(e-=a)){a===r.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=r.slice(a));break}++i}return this.length-=i,t}},{key:c,value:function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],n&&a(t.prototype,n),e}()},1195:(e,t,n)=>{"use strict";var i=n(4155);function r(e,t){o(e,t),a(e)}function a(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function o(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,s=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return s||c?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(o,this,e)):i.nextTick(o,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?n._writableState?n._writableState.errorEmitted?i.nextTick(a,n):(n._writableState.errorEmitted=!0,i.nextTick(r,n,e)):i.nextTick(r,n,e):t?(i.nextTick(a,n),t(e)):i.nextTick(a,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,i=e._writableState;n&&n.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}}},8610:(e,t,n)=>{"use strict";var i=n(4281).q.ERR_STREAM_PREMATURE_CLOSE;function r(){}e.exports=function e(t,n,a){if("function"==typeof n)return e(t,null,n);n||(n={}),a=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.apply(this,i)}}}(a||r);var o=n.readable||!1!==n.readable&&t.readable,s=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||u()},l=t._writableState&&t._writableState.finished,u=function(){s=!1,l=!0,o||a.call(t)},d=t._readableState&&t._readableState.endEmitted,p=function(){o=!1,d=!0,s||a.call(t)},h=function(e){a.call(t,e)},f=function(){var e;return o&&!d?(t._readableState&&t._readableState.ended||(e=new i),a.call(t,e)):s&&!l?(t._writableState&&t._writableState.ended||(e=new i),a.call(t,e)):void 0},m=function(){t.req.on("finish",u)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",u),t.on("abort",f),t.req?m():t.on("request",m)):s&&!t._writableState&&(t.on("end",c),t.on("close",c)),t.on("end",p),t.on("finish",u),!1!==n.error&&t.on("error",h),t.on("close",f),function(){t.removeListener("complete",u),t.removeListener("abort",f),t.removeListener("request",m),t.req&&t.req.removeListener("finish",u),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",u),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",f)}}},5167:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},9946:(e,t,n)=>{"use strict";var i,r=n(4281).q,a=r.ERR_MISSING_ARGS,o=r.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function c(e,t,r,a){a=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(a);var s=!1;e.on("close",(function(){s=!0})),void 0===i&&(i=n(8610)),i(e,{readable:t,writable:r},(function(e){if(e)return a(e);s=!0,a()}));var c=!1;return function(t){if(!s&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void a(t||new o("pipe"))}}function l(e){e()}function u(e,t){return e.pipe(t)}function d(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i,r=d(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new a("streams");var o=t.map((function(e,n){var a=n<t.length-1;return c(e,a,n>0,(function(e){i||(i=e),e&&o.forEach(l),a||(o.forEach(l),r(i))}))}));return t.reduce(u)}},2457:(e,t,n)=>{"use strict";var i=n(4281).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,r){var a=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,r,n);if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||a<0)throw new i(r?n:"highWaterMark",a);return Math.floor(a)}return e.objectMode?16:16384}}},2503:(e,t,n)=>{e.exports=n(7187).EventEmitter},4626:(e,t,n)=>{"use strict";var i=n(9509).Buffer,r=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=p,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.s=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},a.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var r=o(t[i]);return r>=0?(r>0&&(e.lastNeed=r-1),r):--i<n||-2===r?0:(r=o(t[i]))>=0?(r>0&&(e.lastNeed=r-2),r):--i<n||-2===r?0:(r=o(t[i]))>=0?(r>0&&(2===r?r=0:e.lastNeed=r-3),r):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},8473:(e,t,n)=>{(t=e.exports=n(9481)).Stream=t,t.Readable=t,t.Writable=n(4229),t.Duplex=n(6753),t.Transform=n(4605),t.PassThrough=n(2725),t.finished=n(8610),t.pipeline=n(9946)},5666:e=>{var t=function(e){"use strict";var t,n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var r=t&&t.prototype instanceof g?t:g,a=Object.create(r.prototype),o=new T(i||[]);return a._invoke=function(e,t,n){var i=d;return function(r,a){if(i===h)throw new Error("Generator is already running");if(i===f){if("throw"===r)throw a;return R()}for(n.method=r,n.arg=a;;){var o=n.delegate;if(o){var s=C(o,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=h;var c=u(e,t,n);if("normal"===c.type){if(i=n.done?f:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=f,n.method="throw",n.arg=c.arg)}}}(e,n,o),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d="suspendedStart",p="suspendedYield",h="executing",f="completed",m={};function g(){}function v(){}function b(){}var y={};c(y,a,(function(){return this}));var _=Object.getPrototypeOf,A=_&&_(_(P([])));A&&A!==n&&i.call(A,a)&&(y=A);var w=b.prototype=g.prototype=Object.create(y);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(r,a,o,s){var c=u(e[r],e,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(d).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var r;this._invoke=function(e,i){function a(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(a,a):a()}}function C(e,n){var i=e.iterator[n.method];if(i===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=u(i,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,m;var a=r.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:R}}function R(){return{value:t,done:!0}}return v.prototype=b,c(w,"constructor",b),c(b,"constructor",v),v.displayName=c(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(S.prototype),c(S.prototype,o,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,i,r,a){void 0===a&&(a=Promise);var o=new S(l(t,n,i,r),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(w),c(w,s,"Generator"),c(w,a,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=P,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return s.type="throw",s.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;E(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:P(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},9509:(e,t,n)=>{var i=n(8764),r=i.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=i:(a(i,t),t.Buffer=o),o.prototype=Object.create(r.prototype),a(r,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},53:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<a(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var s=2*(i+1)-1,c=e[s],l=s+1,u=e[l];if(0>a(c,n))l<r&&0>a(u,c)?(e[i]=u,e[l]=n,i=l):(e[i]=c,e[s]=n,i=s);else{if(!(l<r&&0>a(u,n)))break e;e[i]=u,e[l]=n,i=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var l=[],u=[],d=1,p=null,h=3,f=!1,m=!1,g=!1,v="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function _(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(l,t)}t=i(u)}}function A(e){if(g=!1,_(e),!m)if(null!==i(l))m=!0,M(w);else{var t=i(u);null!==t&&I(A,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,b(x),x=-1),f=!0;var a=h;try{for(_(n),p=i(l);null!==p&&(!(p.expirationTime>n)||e&&!P());){var o=p.callback;if("function"==typeof o){p.callback=null,h=p.priorityLevel;var s=o(p.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?p.callback=s:p===i(l)&&r(l),_(n)}else r(l);p=i(l)}if(null!==p)var c=!0;else{var d=i(u);null!==d&&I(A,d.startTime-n),c=!1}return c}finally{p=null,h=a,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,C=null,x=-1,E=5,T=-1;function P(){return!(t.unstable_now()-T<E)}function R(){if(null!==C){var e=t.unstable_now();T=e;var n=!0;try{n=C(!0,e)}finally{n?k():(S=!1,C=null)}}else S=!1}if("function"==typeof y)k=function(){y(R)};else if("undefined"!=typeof MessageChannel){var O=new MessageChannel,D=O.port2;O.port1.onmessage=R,k=function(){D.postMessage(null)}}else k=function(){v(R,0)};function M(e){C=e,S||(S=!0,k())}function I(e,n){x=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,M(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return i(l)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,r,a){var o=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?o+a:o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(u,e),null===i(l)&&e===i(u)&&(g?(b(x),x=-1):g=!0,I(A,a-o))):(e.sortIndex=s,n(l,e),m||f||(m=!0,M(w))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},3840:(e,t,n)=>{"use strict";e.exports=n(53)},5069:function(e,t,n){var i,r;i=function(){var e=function(e,t){this.items=e,this.settings=t||{diacritics:!0}};e.prototype.tokenize=function(e){if(!(e=r(String(e||"").toLowerCase()))||!e.length)return[];var t,n,i,o,c=[],l=e.split(/ +/);for(t=0,n=l.length;t<n;t++){if(i=a(l[t]),this.settings.diacritics)for(o in s)s.hasOwnProperty(o)&&(i=i.replace(new RegExp(o,"g"),s[o]));c.push({string:l[t],regex:new RegExp(i,"i")})}return c},e.prototype.iterator=function(e,t){var n;n=o(e)?Array.prototype.forEach||function(e){for(var t=0,n=this.length;t<n;t++)e(this[t],t,this)}:function(e){for(var t in this)this.hasOwnProperty(t)&&e(this[t],t,this)},n.apply(e,[t])},e.prototype.getScoreFunction=function(e,t){var n,r,a,o;e=this.prepareSearch(e,t),r=e.tokens,n=e.options.fields,a=r.length,o=e.options.nesting;var s,c=function(e,t){var n,i;return e?-1===(i=(e=String(e||"")).search(t.regex))?0:(n=t.string.length/e.length,0===i&&(n+=.5),n):0},l=(s=n.length)?1===s?function(e,t){return c(i(t,n[0],o),e)}:function(e,t){for(var r=0,a=0;r<s;r++)a+=c(i(t,n[r],o),e);return a/s}:function(){return 0};return a?1===a?function(e){return l(r[0],e)}:"and"===e.options.conjunction?function(e){for(var t,n=0,i=0;n<a;n++){if((t=l(r[n],e))<=0)return 0;i+=t}return i/a}:function(e){for(var t=0,n=0;t<a;t++)n+=l(r[t],e);return n/a}:function(){return 0}},e.prototype.getSortFunction=function(e,n){var r,a,o,s,c,l,u,d,p,h,f;if(f=!(e=(o=this).prepareSearch(e,n)).query&&n.sort_empty||n.sort,p=function(e,t){return"$score"===e?t.score:i(o.items[t.id],e,n.nesting)},c=[],f)for(r=0,a=f.length;r<a;r++)(e.query||"$score"!==f[r].field)&&c.push(f[r]);if(e.query){for(h=!0,r=0,a=c.length;r<a;r++)if("$score"===c[r].field){h=!1;break}h&&c.unshift({field:"$score",direction:"desc"})}else for(r=0,a=c.length;r<a;r++)if("$score"===c[r].field){c.splice(r,1);break}for(d=[],r=0,a=c.length;r<a;r++)d.push("desc"===c[r].direction?-1:1);return(l=c.length)?1===l?(s=c[0].field,u=d[0],function(e,n){return u*t(p(s,e),p(s,n))}):function(e,n){var i,r,a;for(i=0;i<l;i++)if(a=c[i].field,r=d[i]*t(p(a,e),p(a,n)))return r;return 0}:null},e.prototype.prepareSearch=function(e,t){if("object"==typeof e)return e;var i=(t=n({},t)).fields,r=t.sort,a=t.sort_empty;return i&&!o(i)&&(t.fields=[i]),r&&!o(r)&&(t.sort=[r]),a&&!o(a)&&(t.sort_empty=[a]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e),total:0,items:[]}},e.prototype.search=function(e,t){var n,i,r,a,o=this;return i=this.prepareSearch(e,t),t=i.options,e=i.query,a=t.score||o.getScoreFunction(i),e.length?o.iterator(o.items,(function(e,r){n=a(e),(!1===t.filter||n>0)&&i.items.push({score:n,id:r})})):o.iterator(o.items,(function(e,t){i.items.push({score:1,id:t})})),(r=o.getSortFunction(i,t))&&i.items.sort(r),i.total=i.items.length,"number"==typeof t.limit&&(i.items=i.items.slice(0,t.limit)),i};var t=function(e,t){return"number"==typeof e&&"number"==typeof t?e>t?1:e<t?-1:0:(e=c(String(e||"")))>(t=c(String(t||"")))?1:t>e?-1:0},n=function(e,t){var n,i,r,a;for(n=1,i=arguments.length;n<i;n++)if(a=arguments[n])for(r in a)a.hasOwnProperty(r)&&(e[r]=a[r]);return e},i=function(e,t,n){if(e&&t){if(!n)return e[t];for(var i=t.split(".");i.length&&(e=e[i.shift()]););return e}},r=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},a=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},o=Array.isArray||"undefined"!=typeof $&&$.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s={a:"[a]",b:"[bB]",c:"[cCc]",d:"[dDd]",e:"[e]",f:"[f]",g:"[g]",h:"[h]",i:"[iiI]",j:"[j]",k:"[k]",l:"[l]",n:"[nNn]",o:"[o]",p:"[p]",q:"[qq]",r:"[r]",s:"[sSs]",t:"[t]",u:"[u]",v:"[v]",w:"[w]",x:"[x]",y:"[y]",z:"[z]"},c=function(){var e,t,n,i,r="",a={};for(n in s)if(s.hasOwnProperty(n))for(r+=i=s[n].substring(2,s[n].length-1),e=0,t=i.length;e<t;e++)a[i.charAt(e)]=n;var o=new RegExp("["+r+"]","g");return function(e){return e.replace(o,(function(e){return a[e]})).toLowerCase()}}();return e},void 0===(r=i.call(t,n,t,e))||(e.exports=r)},8971:(e,t,n)=>{var i=n(2195),r=n(9015),a=[n(9257)];e.exports=i.createStore(r,a)},9257:(e,t,n)=>{e.exports=function(){return n(5703),{}}},5703:()=>{"object"!=typeof JSON&&(JSON={}),function(){"use strict";var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta,rep;function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,(function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function str(e,t){var n,i,r,a,o,s=gap,c=t[e];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(c)){for(a=c.length,n=0;n<a;n+=1)o[n]=str(n,c)||"null";return r=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,r}if(rep&&"object"==typeof rep)for(a=rep.length,n=0;n<a;n+=1)"string"==typeof rep[n]&&(r=str(i=rep[n],c))&&o.push(quote(i)+(gap?": ":":")+r);else for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(r=str(i,c))&&o.push(quote(i)+(gap?": ":":")+r);return r=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;i<n;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var n,i,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(void 0!==(i=walk(r,n))?r[n]=i:delete r[n]);return reviver.call(e,t,r)}if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()},2195:(e,t,n)=>{var i=n(9078),r=i.slice,a=i.pluck,o=i.each,s=i.bind,c=i.create,l=i.isList,u=i.isFunction,d=i.isObject;e.exports={createStore:h};var p={version:"2.0.12",enabled:!1,get:function(e,t){var n=this.storage.read(this._namespacePrefix+e);return this._deserialize(n,t)},set:function(e,t){return void 0===t?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(e){var t=this;this.storage.each((function(n,i){e.call(t,t._deserialize(n),(i||"").replace(t._namespaceRegexp,""))}))},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},createStore:function(){return h.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return h(this.storage,this.plugins,e)}};function h(e,t,n){n||(n=""),e&&!l(e)&&(e=[e]),t&&!l(t)&&(t=[t]);var i=n?"__storejs_"+n+"_":"",h=n?new RegExp("^"+i):null;if(!/^[a-zA-Z0-9_\-]*$/.test(n))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var f={_namespacePrefix:i,_namespaceRegexp:h,_testStorage:function(e){try{var t="__storejs__test__";e.write(t,t);var n=e.read(t)===t;return e.remove(t),n}catch(e){return!1}},_assignPluginFnProp:function(e,t){var n=this[t];this[t]=function(){var t=r(arguments,0),i=this;function a(){if(n)return o(arguments,(function(e,n){t[n]=e})),n.apply(i,t)}var s=[a].concat(t);return e.apply(i,s)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(e,t){if(!e)return t;var n="";try{n=JSON.parse(e)}catch(t){n=e}return void 0!==n?n:t},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(e){var t=this;if(l(e))o(e,(function(e){t._addPlugin(e)}));else if(!a(this.plugins,(function(t){return e===t}))){if(this.plugins.push(e),!u(e))throw new Error("Plugins must be function values that return objects");var n=e.call(this);if(!d(n))throw new Error("Plugins must return an object of function properties");o(n,(function(n,i){if(!u(n))throw new Error("Bad plugin property: "+i+" from plugin "+e.name+". Plugins should only return functions.");t._assignPluginFnProp(n,i)}))}},addStorage:function(e){!function(){var e="undefined"==typeof console?null:console;e&&(e.warn?e.warn:e.log).apply(e,arguments)}("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},m=c(f,p,{plugins:[]});return m.raw={},o(m,(function(e,t){u(e)&&(m.raw[t]=s(m,e))})),o(e,(function(e){m._addStorage(e)})),o(t,(function(e){m._addPlugin(e)})),m}},9078:e=>{var t=Object.assign?Object.assign:function(e,t,n,i){for(var r=1;r<arguments.length;r++)o(Object(arguments[r]),(function(t,n){e[n]=t}));return e},n=function(){if(Object.create)return function(e,n,i,r){var o=a(arguments,1);return t.apply(this,[Object.create(e)].concat(o))};{function e(){}return function(n,i,r,o){var s=a(arguments,1);return e.prototype=n,t.apply(this,[new e].concat(s))}}}(),i=String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},r="undefined"!=typeof window?window:global;function a(e,t){return Array.prototype.slice.call(e,t||0)}function o(e,t){s(e,(function(e,n){return t(e,n),!1}))}function s(e,t){if(c(e)){for(var n=0;n<e.length;n++)if(t(e[n],n))return e[n]}else for(var i in e)if(e.hasOwnProperty(i)&&t(e[i],i))return e[i]}function c(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}e.exports={assign:t,create:n,trim:i,bind:function(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}},slice:a,each:o,map:function(e,t){var n=c(e)?[]:{};return s(e,(function(e,i){return n[i]=t(e,i),!1})),n},pluck:s,isList:c,isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},isObject:function(e){return e&&"[object Object]"==={}.toString.call(e)},Global:r}},9015:(e,t,n)=>{e.exports=[n(9627),n(5347),n(4524),n(5580),n(8855),n(8728)]},5580:(e,t,n)=>{var i=n(9078),r=i.Global,a=i.trim;e.exports={name:"cookieStorage",read:function(e){if(!e||!l(e))return null;var t="(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(o.cookie.replace(new RegExp(t),"$1"))},write:function(e,t){e&&(o.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")},each:s,remove:c,clearAll:function(){s((function(e,t){c(t)}))}};var o=r.document;function s(e){for(var t=o.cookie.split(/; ?/g),n=t.length-1;n>=0;n--)if(a(t[n])){var i=t[n].split("="),r=unescape(i[0]);e(unescape(i[1]),r)}}function c(e){e&&l(e)&&(o.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function l(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(o.cookie)}},9627:(e,t,n)=>{var i=n(9078).Global;function r(){return i.localStorage}function a(e){return r().getItem(e)}e.exports={name:"localStorage",read:a,write:function(e,t){return r().setItem(e,t)},each:function(e){for(var t=r().length-1;t>=0;t--){var n=r().key(t);e(a(n),n)}},remove:function(e){return r().removeItem(e)},clearAll:function(){return r().clear()}}},8728:e=>{e.exports={name:"memoryStorage",read:function(e){return t[e]},write:function(e,n){t[e]=n},each:function(e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},remove:function(e){delete t[e]},clearAll:function(e){t={}}};var t={}},5347:(e,t,n)=>{var i=n(9078).Global;e.exports={name:"oldFF-globalStorage",read:function(e){return r[e]},write:function(e,t){r[e]=t},each:a,remove:function(e){return r.removeItem(e)},clearAll:function(){a((function(e,t){delete r[e]}))}};var r=i.globalStorage;function a(e){for(var t=r.length-1;t>=0;t--){var n=r.key(t);e(r[n],n)}}},4524:(e,t,n)=>{var i=n(9078).Global;e.exports={name:"oldIE-userDataStorage",write:function(e,t){if(!s){var n=l(e);o((function(e){e.setAttribute(n,t),e.save(r)}))}},read:function(e){if(!s){var t=l(e),n=null;return o((function(e){n=e.getAttribute(t)})),n}},each:function(e){o((function(t){for(var n=t.XMLDocument.documentElement.attributes,i=n.length-1;i>=0;i--){var r=n[i];e(t.getAttribute(r.name),r.name)}}))},remove:function(e){var t=l(e);o((function(e){e.removeAttribute(t),e.save(r)}))},clearAll:function(){o((function(e){var t=e.XMLDocument.documentElement.attributes;e.load(r);for(var n=t.length-1;n>=0;n--)e.removeAttribute(t[n].name);e.save(r)}))}};var r="storejs",a=i.document,o=function(){if(!a||!a.documentElement||!a.documentElement.addBehavior)return null;var e,t,n;try{(t=new ActiveXObject("htmlfile")).open(),t.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></iframe>'),t.close(),e=t.w.frames[0].document,n=e.createElement("div")}catch(t){n=a.createElement("div"),e=a.body}return function(t){var i=[].slice.call(arguments,0);i.unshift(n),e.appendChild(n),n.addBehavior("#default#userData"),n.load(r),t.apply(this,i),e.removeChild(n)}}(),s=(i.navigator?i.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./),c=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function l(e){return e.replace(/^\d/,"___$&").replace(c,"___")}},8855:(e,t,n)=>{var i=n(9078).Global;function r(){return i.sessionStorage}function a(e){return r().getItem(e)}e.exports={name:"sessionStorage",read:a,write:function(e,t){return r().setItem(e,t)},each:function(e){for(var t=r().length-1;t>=0;t--){var n=r().key(t);e(a(n),n)}},remove:function(e){return r().removeItem(e)},clearAll:function(){return r().clear()}}},5088:(e,t,n)=>{"use strict";n.d(t,{XB:()=>q,ZP:()=>W});var i=n(3086),r=n(7824),a="tippy-content",o="tippy-arrow",s="tippy-svg-arrow",c={passive:!0,capture:!0},l=function(){return document.body};function u(e,t,n){if(Array.isArray(e)){var i=e[t];return null==i?Array.isArray(n)?n[t]:n:i}return e}function d(e,t){var n={}.toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function p(e,t){return"function"==typeof e?e.apply(void 0,t):e}function h(e,t){return 0===t?e:function(i){clearTimeout(n),n=setTimeout((function(){e(i)}),t)};var n}function f(e){return[].concat(e)}function m(e,t){-1===e.indexOf(t)&&e.push(t)}function g(e){return[].slice.call(e)}function v(e){return Object.keys(e).reduce((function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t}),{})}function b(){return document.createElement("div")}function y(e){return["Element","Fragment"].some((function(t){return d(e,t)}))}function _(e,t){e.forEach((function(e){e&&(e.style.transitionDuration=t+"ms")}))}function A(e,t){e.forEach((function(e){e&&e.setAttribute("data-state",t)}))}function w(e,t,n){var i=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(t){e[i](t,n)}))}function k(e,t){for(var n=t;n;){var i;if(e.contains(n))return!0;n=null==n.getRootNode||null==(i=n.getRootNode())?void 0:i.host}return!1}var S={isTouch:!1},C=0;function x(){S.isTouch||(S.isTouch=!0,window.performance&&document.addEventListener("mousemove",E))}function E(){var e=performance.now();e-C<20&&(S.isTouch=!1,document.removeEventListener("mousemove",E)),C=e}function T(){var e,t=document.activeElement;if((e=t)&&e._tippy&&e._tippy.reference===e){var n=t._tippy;t.blur&&!n.state.isVisible&&t.blur()}}var P=!("undefined"==typeof window||"undefined"==typeof document||!window.msCrypto),R=Object.assign({appendTo:l,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),O=Object.keys(R);function D(e){var t=(e.plugins||[]).reduce((function(t,n){var i,r=n.name,a=n.defaultValue;return r&&(t[r]=void 0!==e[r]?e[r]:null!=(i=R[r])?i:a),t}),{});return Object.assign({},e,t)}function M(e,t){var n=Object.assign({},t,{content:p(t.content,[e])},t.ignoreAttributes?{}:function(e,t){return(t?Object.keys(D(Object.assign({},R,{plugins:t}))):O).reduce((function(t,n){var i=(e.getAttribute("data-tippy-"+n)||"").trim();if(!i)return t;if("content"===n)t[n]=i;else try{t[n]=JSON.parse(i)}catch(e){t[n]=i}return t}),{})}(e,t.plugins));return n.aria=Object.assign({},R.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?t.interactive:n.aria.expanded,content:"auto"===n.aria.content?t.interactive?null:"describedby":n.aria.content},n}function I(e,t){e.innerHTML=t}function N(e){var t=b();return!0===e?t.className=o:(t.className=s,y(e)?t.appendChild(e):I(t,e)),t}function L(e,t){y(t.content)?(I(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?I(e,t.content):e.textContent=t.content)}function B(e){var t=e.firstElementChild,n=g(t.children);return{box:t,content:n.find((function(e){return e.classList.contains(a)})),arrow:n.find((function(e){return e.classList.contains(o)||e.classList.contains(s)})),backdrop:n.find((function(e){return e.classList.contains("tippy-backdrop")}))}}function $(e){var t=b(),n=b();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var i=b();function r(n,i){var r=B(t),a=r.box,o=r.content,s=r.arrow;i.theme?a.setAttribute("data-theme",i.theme):a.removeAttribute("data-theme"),"string"==typeof i.animation?a.setAttribute("data-animation",i.animation):a.removeAttribute("data-animation"),i.inertia?a.setAttribute("data-inertia",""):a.removeAttribute("data-inertia"),a.style.maxWidth="number"==typeof i.maxWidth?i.maxWidth+"px":i.maxWidth,i.role?a.setAttribute("role",i.role):a.removeAttribute("role"),n.content===i.content&&n.allowHTML===i.allowHTML||L(o,e.props),i.arrow?s?n.arrow!==i.arrow&&(a.removeChild(s),a.appendChild(N(i.arrow))):a.appendChild(N(i.arrow)):s&&a.removeChild(s)}return i.className=a,i.setAttribute("data-state","hidden"),L(i,e.props),t.appendChild(n),n.appendChild(i),r(e.props,e.props),{popper:t,onUpdate:r}}$.$$tippy=!0;var j=1,U=[],F=[];function Z(e,t){var n,r,a,o,s,y,C,x,E=M(e,Object.assign({},R,D(v(t)))),T=!1,O=!1,I=!1,N=!1,L=[],$=h(be,E.interactiveDebounce),Z=j++,z=(x=E.plugins).filter((function(e,t){return x.indexOf(e)===t})),V={id:Z,reference:e,popper:b(),popperInstance:null,props:E,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:z,clearDelayTimeouts:function(){clearTimeout(n),clearTimeout(r),cancelAnimationFrame(a)},setProps:function(t){if(!V.state.isDestroyed){re("onBeforeUpdate",[V,t]),ge();var n=V.props,i=M(e,Object.assign({},n,v(t),{ignoreAttributes:!0}));V.props=i,me(),n.interactiveDebounce!==i.interactiveDebounce&&(se(),$=h(be,i.interactiveDebounce)),n.triggerTarget&&!i.triggerTarget?f(n.triggerTarget).forEach((function(e){e.removeAttribute("aria-expanded")})):i.triggerTarget&&e.removeAttribute("aria-expanded"),oe(),ie(),H&&H(n,i),V.popperInstance&&(we(),Se().forEach((function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)}))),re("onAfterUpdate",[V,t])}},setContent:function(e){V.setProps({content:e})},show:function(){var e=V.state.isVisible,t=V.state.isDestroyed,n=!V.state.isEnabled,i=S.isTouch&&!V.props.touch,r=u(V.props.duration,0,R.duration);if(!(e||t||n||i||K().hasAttribute("disabled")||(re("onShow",[V],!1),!1===V.props.onShow(V)))){if(V.state.isVisible=!0,J()&&(W.style.visibility="visible"),ie(),de(),V.state.isMounted||(W.style.transition="none"),J()){var a=te();_([a.box,a.content],0)}var o,s,c;y=function(){var e;if(V.state.isVisible&&!N){if(N=!0,W.offsetHeight,W.style.transition=V.props.moveTransition,J()&&V.props.animation){var t=te(),n=t.box,i=t.content;_([n,i],r),A([n,i],"visible")}ae(),oe(),m(F,V),null==(e=V.popperInstance)||e.forceUpdate(),re("onMount",[V]),V.props.animation&&J()&&function(e,t){he(e,(function(){V.state.isShown=!0,re("onShown",[V])}))}(r)}},s=V.props.appendTo,c=K(),(o=V.props.interactive&&s===l||"parent"===s?c.parentNode:p(s,[c])).contains(W)||o.appendChild(W),V.state.isMounted=!0,we()}},hide:function(){var e=!V.state.isVisible,t=V.state.isDestroyed,n=!V.state.isEnabled,i=u(V.props.duration,1,R.duration);if(!(e||t||n)&&(re("onHide",[V],!1),!1!==V.props.onHide(V))){if(V.state.isVisible=!1,V.state.isShown=!1,N=!1,T=!1,J()&&(W.style.visibility="hidden"),se(),pe(),ie(!0),J()){var r=te(),a=r.box,o=r.content;V.props.animation&&(_([a,o],i),A([a,o],"hidden"))}ae(),oe(),V.props.animation?J()&&function(e,t){he(e,(function(){!V.state.isVisible&&W.parentNode&&W.parentNode.contains(W)&&t()}))}(i,V.unmount):V.unmount()}},hideWithInteractivity:function(e){ee().addEventListener("mousemove",$),m(U,$),$(e)},enable:function(){V.state.isEnabled=!0},disable:function(){V.hide(),V.state.isEnabled=!1},unmount:function(){V.state.isVisible&&V.hide(),V.state.isMounted&&(ke(),Se().forEach((function(e){e._tippy.unmount()})),W.parentNode&&W.parentNode.removeChild(W),F=F.filter((function(e){return e!==V})),V.state.isMounted=!1,re("onHidden",[V]))},destroy:function(){V.state.isDestroyed||(V.clearDelayTimeouts(),V.unmount(),ge(),delete e._tippy,V.state.isDestroyed=!0,re("onDestroy",[V]))}};if(!E.render)return V;var q=E.render(V),W=q.popper,H=q.onUpdate;W.setAttribute("data-tippy-root",""),W.id="tippy-"+V.id,V.popper=W,e._tippy=V,W._tippy=V;var Q=z.map((function(e){return e.fn(V)})),X=e.hasAttribute("aria-expanded");return me(),oe(),ie(),re("onCreate",[V]),E.showOnCreate&&Ce(),W.addEventListener("mouseenter",(function(){V.props.interactive&&V.state.isVisible&&V.clearDelayTimeouts()})),W.addEventListener("mouseleave",(function(){V.props.interactive&&V.props.trigger.indexOf("mouseenter")>=0&&ee().addEventListener("mousemove",$)})),V;function Y(){var e=V.props.touch;return Array.isArray(e)?e:[e,0]}function G(){return"hold"===Y()[0]}function J(){var e;return!(null==(e=V.props.render)||!e.$$tippy)}function K(){return C||e}function ee(){var e=K().parentNode;return e?function(e){var t,n=f(e)[0];return null!=n&&null!=(t=n.ownerDocument)&&t.body?n.ownerDocument:document}(e):document}function te(){return B(W)}function ne(e){return V.state.isMounted&&!V.state.isVisible||S.isTouch||o&&"focus"===o.type?0:u(V.props.delay,e?0:1,R.delay)}function ie(e){void 0===e&&(e=!1),W.style.pointerEvents=V.props.interactive&&!e?"":"none",W.style.zIndex=""+V.props.zIndex}function re(e,t,n){var i;void 0===n&&(n=!0),Q.forEach((function(n){n[e]&&n[e].apply(n,t)})),n&&(i=V.props)[e].apply(i,t)}function ae(){var t=V.props.aria;if(t.content){var n="aria-"+t.content,i=W.id;f(V.props.triggerTarget||e).forEach((function(e){var t=e.getAttribute(n);if(V.state.isVisible)e.setAttribute(n,t?t+" "+i:i);else{var r=t&&t.replace(i,"").trim();r?e.setAttribute(n,r):e.removeAttribute(n)}}))}}function oe(){!X&&V.props.aria.expanded&&f(V.props.triggerTarget||e).forEach((function(e){V.props.interactive?e.setAttribute("aria-expanded",V.state.isVisible&&e===K()?"true":"false"):e.removeAttribute("aria-expanded")}))}function se(){ee().removeEventListener("mousemove",$),U=U.filter((function(e){return e!==$}))}function ce(t){if(!S.isTouch||!I&&"mousedown"!==t.type){var n=t.composedPath&&t.composedPath()[0]||t.target;if(!V.props.interactive||!k(W,n)){if(f(V.props.triggerTarget||e).some((function(e){return k(e,n)}))){if(S.isTouch)return;if(V.state.isVisible&&V.props.trigger.indexOf("click")>=0)return}else re("onClickOutside",[V,t]);!0===V.props.hideOnClick&&(V.clearDelayTimeouts(),V.hide(),O=!0,setTimeout((function(){O=!1})),V.state.isMounted||pe())}}}function le(){I=!0}function ue(){I=!1}function de(){var e=ee();e.addEventListener("mousedown",ce,!0),e.addEventListener("touchend",ce,c),e.addEventListener("touchstart",ue,c),e.addEventListener("touchmove",le,c)}function pe(){var e=ee();e.removeEventListener("mousedown",ce,!0),e.removeEventListener("touchend",ce,c),e.removeEventListener("touchstart",ue,c),e.removeEventListener("touchmove",le,c)}function he(e,t){var n=te().box;function i(e){e.target===n&&(w(n,"remove",i),t())}if(0===e)return t();w(n,"remove",s),w(n,"add",i),s=i}function fe(t,n,i){void 0===i&&(i=!1),f(V.props.triggerTarget||e).forEach((function(e){e.addEventListener(t,n,i),L.push({node:e,eventType:t,handler:n,options:i})}))}function me(){var e;G()&&(fe("touchstart",ve,{passive:!0}),fe("touchend",ye,{passive:!0})),(e=V.props.trigger,e.split(/\s+/).filter(Boolean)).forEach((function(e){if("manual"!==e)switch(fe(e,ve),e){case"mouseenter":fe("mouseleave",ye);break;case"focus":fe(P?"focusout":"blur",_e);break;case"focusin":fe("focusout",_e)}}))}function ge(){L.forEach((function(e){var t=e.node,n=e.eventType,i=e.handler,r=e.options;t.removeEventListener(n,i,r)})),L=[]}function ve(e){var t,n=!1;if(V.state.isEnabled&&!Ae(e)&&!O){var i="focus"===(null==(t=o)?void 0:t.type);o=e,C=e.currentTarget,oe(),!V.state.isVisible&&d(e,"MouseEvent")&&U.forEach((function(t){return t(e)})),"click"===e.type&&(V.props.trigger.indexOf("mouseenter")<0||T)&&!1!==V.props.hideOnClick&&V.state.isVisible?n=!0:Ce(e),"click"===e.type&&(T=!n),n&&!i&&xe(e)}}function be(e){var t=e.target,n=K().contains(t)||W.contains(t);if("mousemove"!==e.type||!n){var i=Se().concat(W).map((function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:E}:null})).filter(Boolean);(function(e,t){var n=t.clientX,i=t.clientY;return e.every((function(e){var t=e.popperRect,r=e.popperState,a=e.props.interactiveBorder,o=r.placement.split("-")[0],s=r.modifiersData.offset;if(!s)return!0;var c="bottom"===o?s.top.y:0,l="top"===o?s.bottom.y:0,u="right"===o?s.left.x:0,d="left"===o?s.right.x:0,p=t.top-i+c>a,h=i-t.bottom-l>a,f=t.left-n+u>a,m=n-t.right-d>a;return p||h||f||m}))})(i,e)&&(se(),xe(e))}}function ye(e){Ae(e)||V.props.trigger.indexOf("click")>=0&&T||(V.props.interactive?V.hideWithInteractivity(e):xe(e))}function _e(e){V.props.trigger.indexOf("focusin")<0&&e.target!==K()||V.props.interactive&&e.relatedTarget&&W.contains(e.relatedTarget)||xe(e)}function Ae(e){return!!S.isTouch&&G()!==e.type.indexOf("touch")>=0}function we(){ke();var t=V.props,n=t.popperOptions,r=t.placement,a=t.offset,o=t.getReferenceClientRect,s=t.moveTransition,c=J()?B(W).arrow:null,l=o?{getBoundingClientRect:o,contextElement:o.contextElement||K()}:e,u=[{name:"offset",options:{offset:a}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!s}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(J()){var n=te().box;["placement","reference-hidden","escaped"].forEach((function(e){"placement"===e?n.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?n.setAttribute("data-"+e,""):n.removeAttribute("data-"+e)})),t.attributes.popper={}}}}];J()&&c&&u.push({name:"arrow",options:{element:c,padding:3}}),u.push.apply(u,(null==n?void 0:n.modifiers)||[]),V.popperInstance=(0,i.fi)(l,W,Object.assign({},n,{placement:r,onFirstUpdate:y,modifiers:u}))}function ke(){V.popperInstance&&(V.popperInstance.destroy(),V.popperInstance=null)}function Se(){return g(W.querySelectorAll("[data-tippy-root]"))}function Ce(e){V.clearDelayTimeouts(),e&&re("onTrigger",[V,e]),de();var t=ne(!0),i=Y(),r=i[0],a=i[1];S.isTouch&&"hold"===r&&a&&(t=a),t?n=setTimeout((function(){V.show()}),t):V.show()}function xe(e){if(V.clearDelayTimeouts(),re("onUntrigger",[V,e]),V.state.isVisible){if(!(V.props.trigger.indexOf("mouseenter")>=0&&V.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&T)){var t=ne(!1);t?r=setTimeout((function(){V.state.isVisible&&V.hide()}),t):a=requestAnimationFrame((function(){V.hide()}))}}else pe()}}function z(e,t){void 0===t&&(t={});var n=R.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",x,c),window.addEventListener("blur",T);var i,r=Object.assign({},t,{plugins:n}),a=(i=e,y(i)?[i]:function(e){return d(e,"NodeList")}(i)?g(i):Array.isArray(i)?i:g(document.querySelectorAll(i))).reduce((function(e,t){var n=t&&Z(t,r);return n&&e.push(n),e}),[]);return y(e)?a[0]:a}z.defaultProps=R,z.setDefaultProps=function(e){Object.keys(e).forEach((function(t){R[t]=e[t]}))},z.currentInput=S;var V=Object.assign({},r.Z,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}}),q=function(e,t){var n;void 0===t&&(t={});var i,r=e,a=[],o=[],s=t.overrides,c=[],l=!1;function u(){o=r.map((function(e){return f(e.props.triggerTarget||e.reference)})).reduce((function(e,t){return e.concat(t)}),[])}function d(){a=r.map((function(e){return e.reference}))}function p(e){r.forEach((function(t){e?t.enable():t.disable()}))}function h(e){return r.map((function(t){var n=t.setProps;return t.setProps=function(r){n(r),t.reference===i&&e.setProps(r)},function(){t.setProps=n}}))}function m(e,t){var n=o.indexOf(t);if(t!==i){i=t;var c=(s||[]).concat("content").reduce((function(e,t){return e[t]=r[n].props[t],e}),{});e.setProps(Object.assign({},c,{getReferenceClientRect:"function"==typeof c.getReferenceClientRect?c.getReferenceClientRect:function(){var e;return null==(e=a[n])?void 0:e.getBoundingClientRect()}}))}}p(!1),d(),u();var g,v,y,_={fn:function(){return{onDestroy:function(){p(!0)},onHidden:function(){i=null},onClickOutside:function(e){e.props.showOnCreate&&!l&&(l=!0,i=null)},onShow:function(e){e.props.showOnCreate&&!l&&(l=!0,m(e,a[0]))},onTrigger:function(e,t){m(e,t.currentTarget)}}}},A=z(b(),Object.assign({},(g=t,v=["overrides"],y=Object.assign({},g),v.forEach((function(e){delete y[e]})),y),{plugins:[_].concat(t.plugins||[]),triggerTarget:o,popperOptions:Object.assign({},t.popperOptions,{modifiers:[].concat((null==(n=t.popperOptions)?void 0:n.modifiers)||[],[V])})})),w=A.show;A.show=function(e){if(w(),!i&&null==e)return m(A,a[0]);if(!i||null!=e){if("number"==typeof e)return a[e]&&m(A,a[e]);if(r.indexOf(e)>=0){var t=e.reference;return m(A,t)}return a.indexOf(e)>=0?m(A,e):void 0}},A.showNext=function(){var e=a[0];if(!i)return A.show(0);var t=a.indexOf(i);A.show(a[t+1]||e)},A.showPrevious=function(){var e=a[a.length-1];if(!i)return A.show(e);var t=a.indexOf(i),n=a[t-1]||e;A.show(n)};var k=A.setProps;return A.setProps=function(e){s=e.overrides||s,k(e)},A.setInstances=function(e){p(!0),c.forEach((function(e){return e()})),r=e,p(!1),d(),u(),c=h(A),A.setProps({triggerTarget:o})},c=h(A),A};z.setDefaultProps({render:$});const W=z},4927:e=>{function t(e){try{if(!global.localStorage)return!1}catch(e){return!1}var t=global.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,n){if(t("noDeprecation"))return e;var i=!1;return function(){if(!i){if(t("throwDeprecation"))throw new Error(n);t("traceDeprecation")?console.trace(n):console.warn(n),i=!0}return e.apply(this,arguments)}}},2361:()=>{},4616:()=>{},907:(e,t,n)=>{"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}n.d(t,{Z:()=>i})},7326:(e,t,n)=>{"use strict";function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:()=>i})},5861:(e,t,n)=>{"use strict";function i(e,t,n,i,r,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,c,"next",e)}function c(e){i(o,r,a,s,c,"throw",e)}s(void 0)}))}}n.d(t,{Z:()=>r})},5671:(e,t,n)=>{"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:()=>i})},3144:(e,t,n)=>{"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Z:()=>r})},4942:(e,t,n)=>{"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:()=>i})},1120:(e,t,n)=>{"use strict";function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}n.d(t,{Z:()=>i})},9340:(e,t,n)=>{"use strict";function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}n.d(t,{Z:()=>r})},2963:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(1002),r=n(7326);function a(e,t){if(t&&("object"===(0,i.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,r.Z)(e)}},1037:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(181);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(e,t)||(0,i.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2982:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(907),r=n(181);function a(e){return function(e){if(Array.isArray(e))return(0,i.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,r.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1002:(e,t,n)=>{"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}n.d(t,{Z:()=>i})},181:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(907);function r(e,t){if(e){if("string"==typeof e)return(0,i.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,i.Z)(e,t):void 0}}},5591:(e,t,n)=>{"use strict";function i(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}n.d(t,{Ai:()=>fa,OM:()=>Ti,TQ:()=>xn,du:()=>ha,fQ:()=>li,gJ:()=>ma,s:()=>bi,s1:()=>ga});var r,a,o,s,c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},l={exports:{}};a=c,o=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"];function r(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function o(i){return"debug"===i&&(i="log"),typeof console!==t&&("trace"===i&&n?a:void 0!==console[i]?r(console,i):void 0!==console.log?r(console,"log"):e)}function s(t,n){for(var r=0;r<i.length;r++){var a=i[r];this[a]=r<t?e:this.methodFactory(a,t,n)}this.log=this.debug}function c(e,n,i){return function(){typeof console!==t&&(s.call(this,n,i),this[e].apply(this,arguments))}}function l(e,t,n){return o(e)||c.apply(this,arguments)}function u(e,n,r){var a,o=this;n=null==n?"WARN":n;var c="loglevel";function u(){var e;if(typeof window!==t&&c){try{e=window.localStorage[c]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,i=n.indexOf(encodeURIComponent(c)+"=");-1!==i&&(e=/^([^;]+)/.exec(n.slice(i))[1])}catch(e){}return void 0===o.levels[e]&&(e=void 0),e}}"string"==typeof e?c+=":"+e:"symbol"==typeof e&&(c=void 0),o.name=e,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=r||l,o.getLevel=function(){return a},o.setLevel=function(n,r){if("string"==typeof n&&void 0!==o.levels[n.toUpperCase()]&&(n=o.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=o.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(a=n,!1!==r&&function(e){var n=(i[e]||"silent").toUpperCase();if(typeof window!==t&&c){try{return void(window.localStorage[c]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"="+n+";"}catch(e){}}}(n),s.call(o,n,e),typeof console===t&&n<o.levels.SILENT)return"No console available for logging"},o.setDefaultLevel=function(e){n=e,u()||o.setLevel(e,!1)},o.resetLevel=function(){o.setLevel(n,!1),function(){if(typeof window!==t&&c){try{return void window.localStorage.removeItem(c)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}()},o.enableAll=function(e){o.setLevel(o.levels.TRACE,e)},o.disableAll=function(e){o.setLevel(o.levels.SILENT,e)};var d=u();null==d&&(d=n),o.setLevel(d,!1)}var d=new u,p={};d.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=p[e];return t||(t=p[e]=new u(e,d.getLevel(),d.methodFactory)),t};var h=typeof window!==t?window.log:void 0;return d.noConflict=function(){return typeof window!==t&&window.log===d&&(window.log=h),d},d.getLoggers=function(){return p},d.default=d,d},(r=l).exports?r.exports=o():a.log=o(),function(e){e[e.trace=0]="trace",e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.silent=5]="silent"}(s||(s={}));const u=l.exports.getLogger("livekit");u.setLevel(s.info);var d=h,p=null;try{p=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function h(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function f(e){return!0===(e&&e.__isLong__)}h.prototype.__isLong__,Object.defineProperty(h.prototype,"__isLong__",{value:!0}),h.isLong=f;var m={},g={};function v(e,t){var n,i,r;return t?(r=0<=(e>>>=0)&&e<256)&&(i=g[e])?i:(n=y(e,(0|e)<0?-1:0,!0),r&&(g[e]=n),n):(r=-128<=(e|=0)&&e<128)&&(i=m[e])?i:(n=y(e,e<0?-1:0,!1),r&&(m[e]=n),n)}function b(e,t){if(isNaN(e))return t?T:E;if(t){if(e<0)return T;if(e>=S)return M}else{if(e<=-C)return I;if(e+1>=C)return D}return e<0?b(-e,t).neg():y(e%k|0,e/k|0,t)}function y(e,t,n){return new h(e,t,n)}h.fromInt=v,h.fromNumber=b,h.fromBits=y;var _=Math.pow;function A(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return E;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var i;if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return A(e.substring(1),t,n).neg();for(var r=b(_(n,8)),a=E,o=0;o<e.length;o+=8){var s=Math.min(8,e.length-o),c=parseInt(e.substring(o,o+s),n);if(s<8){var l=b(_(n,s));a=a.mul(l).add(b(c))}else a=(a=a.mul(r)).add(b(c))}return a.unsigned=t,a}function w(e,t){return"number"==typeof e?b(e,t):"string"==typeof e?A(e,t):y(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}h.fromString=A,h.fromValue=w;var k=4294967296,S=k*k,C=S/2,x=v(1<<24),E=v(0);h.ZERO=E;var T=v(0,!0);h.UZERO=T;var P=v(1);h.ONE=P;var R=v(1,!0);h.UONE=R;var O=v(-1);h.NEG_ONE=O;var D=y(-1,2147483647,!1);h.MAX_VALUE=D;var M=y(-1,-1,!0);h.MAX_UNSIGNED_VALUE=M;var I=y(0,-2147483648,!1);h.MIN_VALUE=I;var N=h.prototype;N.toInt=function(){return this.unsigned?this.low>>>0:this.low},N.toNumber=function(){return this.unsigned?(this.high>>>0)*k+(this.low>>>0):this.high*k+(this.low>>>0)},N.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(I)){var t=b(e),n=this.div(t),i=n.mul(t).sub(this);return n.toString(e)+i.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var r=b(_(e,6),this.unsigned),a=this,o="";;){var s=a.div(r),c=(a.sub(s.mul(r)).toInt()>>>0).toString(e);if((a=s).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},N.getHighBits=function(){return this.high},N.getHighBitsUnsigned=function(){return this.high>>>0},N.getLowBits=function(){return this.low},N.getLowBitsUnsigned=function(){return this.low>>>0},N.getNumBitsAbs=function(){if(this.isNegative())return this.eq(I)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},N.isZero=function(){return 0===this.high&&0===this.low},N.eqz=N.isZero,N.isNegative=function(){return!this.unsigned&&this.high<0},N.isPositive=function(){return this.unsigned||this.high>=0},N.isOdd=function(){return 1==(1&this.low)},N.isEven=function(){return 0==(1&this.low)},N.equals=function(e){return f(e)||(e=w(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},N.eq=N.equals,N.notEquals=function(e){return!this.eq(e)},N.neq=N.notEquals,N.ne=N.notEquals,N.lessThan=function(e){return this.comp(e)<0},N.lt=N.lessThan,N.lessThanOrEqual=function(e){return this.comp(e)<=0},N.lte=N.lessThanOrEqual,N.le=N.lessThanOrEqual,N.greaterThan=function(e){return this.comp(e)>0},N.gt=N.greaterThan,N.greaterThanOrEqual=function(e){return this.comp(e)>=0},N.gte=N.greaterThanOrEqual,N.ge=N.greaterThanOrEqual,N.compare=function(e){if(f(e)||(e=w(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},N.comp=N.compare,N.negate=function(){return!this.unsigned&&this.eq(I)?I:this.not().add(P)},N.neg=N.negate,N.add=function(e){f(e)||(e=w(e));var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,r=65535&this.low,a=e.high>>>16,o=65535&e.high,s=e.low>>>16,c=0,l=0,u=0,d=0;return u+=(d+=r+(65535&e.low))>>>16,l+=(u+=i+s)>>>16,c+=(l+=n+o)>>>16,c+=t+a,y((u&=65535)<<16|(d&=65535),(c&=65535)<<16|(l&=65535),this.unsigned)},N.subtract=function(e){return f(e)||(e=w(e)),this.add(e.neg())},N.sub=N.subtract,N.multiply=function(e){if(this.isZero())return E;if(f(e)||(e=w(e)),p)return y(p.mul(this.low,this.high,e.low,e.high),p.get_high(),this.unsigned);if(e.isZero())return E;if(this.eq(I))return e.isOdd()?I:E;if(e.eq(I))return this.isOdd()?I:E;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(x)&&e.lt(x))return b(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,r=65535&this.low,a=e.high>>>16,o=65535&e.high,s=e.low>>>16,c=65535&e.low,l=0,u=0,d=0,h=0;return d+=(h+=r*c)>>>16,u+=(d+=i*c)>>>16,d&=65535,u+=(d+=r*s)>>>16,l+=(u+=n*c)>>>16,u&=65535,l+=(u+=i*s)>>>16,u&=65535,l+=(u+=r*o)>>>16,l+=t*c+n*s+i*o+r*a,y((d&=65535)<<16|(h&=65535),(l&=65535)<<16|(u&=65535),this.unsigned)},N.mul=N.multiply,N.divide=function(e){if(f(e)||(e=w(e)),e.isZero())throw Error("division by zero");var t,n,i;if(p)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?y((this.unsigned?p.div_u:p.div_s)(this.low,this.high,e.low,e.high),p.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?T:E;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return T;if(e.gt(this.shru(1)))return R;i=T}else{if(this.eq(I))return e.eq(P)||e.eq(O)?I:e.eq(I)?P:(t=this.shr(1).div(e).shl(1)).eq(E)?e.isNegative()?P:O:(n=this.sub(e.mul(t)),i=t.add(n.div(e)));if(e.eq(I))return this.unsigned?T:E;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=E}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var r=Math.ceil(Math.log(t)/Math.LN2),a=r<=48?1:_(2,r-48),o=b(t),s=o.mul(e);s.isNegative()||s.gt(n);)s=(o=b(t-=a,this.unsigned)).mul(e);o.isZero()&&(o=P),i=i.add(o),n=n.sub(s)}return i},N.div=N.divide,N.modulo=function(e){return f(e)||(e=w(e)),p?y((this.unsigned?p.rem_u:p.rem_s)(this.low,this.high,e.low,e.high),p.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},N.mod=N.modulo,N.rem=N.modulo,N.not=function(){return y(~this.low,~this.high,this.unsigned)},N.and=function(e){return f(e)||(e=w(e)),y(this.low&e.low,this.high&e.high,this.unsigned)},N.or=function(e){return f(e)||(e=w(e)),y(this.low|e.low,this.high|e.high,this.unsigned)},N.xor=function(e){return f(e)||(e=w(e)),y(this.low^e.low,this.high^e.high,this.unsigned)},N.shiftLeft=function(e){return f(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?y(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):y(0,this.low<<e-32,this.unsigned)},N.shl=N.shiftLeft,N.shiftRight=function(e){return f(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?y(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):y(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},N.shr=N.shiftRight,N.shiftRightUnsigned=function(e){if(f(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?y(this.low>>>e|t<<32-e,t>>>e,this.unsigned):y(32===e?t:t>>>e-32,0,this.unsigned)},N.shru=N.shiftRightUnsigned,N.shr_u=N.shiftRightUnsigned,N.toSigned=function(){return this.unsigned?y(this.low,this.high,!1):this},N.toUnsigned=function(){return this.unsigned?this:y(this.low,this.high,!0)},N.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},N.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},N.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},h.fromBytes=function(e,t,n){return n?h.fromBytesLE(e,t):h.fromBytesBE(e,t)},h.fromBytesLE=function(e,t){return new h(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},h.fromBytesBE=function(e,t){return new h(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var L={},B={},$=function(e,t){for(var n=new Array(arguments.length-1),i=0,r=2,a=!0;r<arguments.length;)n[i++]=arguments[r++];return new Promise((function(r,o){n[i]=function(e){if(a)if(a=!1,e)o(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];r.apply(null,t)}};try{e.apply(t||null,n)}catch(e){a&&(a=!1,o(e))}}))},j={};!function(e){var t=e;t.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var n=new Array(64),i=new Array(123),r=0;r<64;)i[n[r]=r<26?r+65:r<52?r+71:r<62?r-4:r-59|43]=r++;t.encode=function(e,t,i){for(var r,a=null,o=[],s=0,c=0;t<i;){var l=e[t++];switch(c){case 0:o[s++]=n[l>>2],r=(3&l)<<4,c=1;break;case 1:o[s++]=n[r|l>>4],r=(15&l)<<2,c=2;break;case 2:o[s++]=n[r|l>>6],o[s++]=n[63&l],c=0}s>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,o)),s=0)}return c&&(o[s++]=n[r],o[s++]=61,1===c&&(o[s++]=61)),a?(s&&a.push(String.fromCharCode.apply(String,o.slice(0,s))),a.join("")):String.fromCharCode.apply(String,o.slice(0,s))};var a="invalid encoding";t.decode=function(e,t,n){for(var r,o=n,s=0,c=0;c<e.length;){var l=e.charCodeAt(c++);if(61===l&&s>1)break;if(void 0===(l=i[l]))throw Error(a);switch(s){case 0:r=l,s=1;break;case 1:t[n++]=r<<2|(48&l)>>4,r=l,s=2;break;case 2:t[n++]=(15&r)<<4|(60&l)>>2,r=l,s=3;break;case 3:t[n++]=(3&r)<<6|l,s=0}}if(1===s)throw Error(a);return n-o},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}(j);var U=F;function F(){this._listeners={}}F.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},F.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this},F.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this};var Z=z(z);function z(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),i=128===n[3];function r(e,i,r){t[0]=e,i[r]=n[0],i[r+1]=n[1],i[r+2]=n[2],i[r+3]=n[3]}function a(e,i,r){t[0]=e,i[r]=n[3],i[r+1]=n[2],i[r+2]=n[1],i[r+3]=n[0]}function o(e,i){return n[0]=e[i],n[1]=e[i+1],n[2]=e[i+2],n[3]=e[i+3],t[0]}function s(e,i){return n[3]=e[i],n[2]=e[i+1],n[1]=e[i+2],n[0]=e[i+3],t[0]}e.writeFloatLE=i?r:a,e.writeFloatBE=i?a:r,e.readFloatLE=i?o:s,e.readFloatBE=i?s:o}():function(){function t(e,t,n,i){var r=t<0?1:0;if(r&&(t=-t),0===t)e(1/t>0?0:2147483648,n,i);else if(isNaN(t))e(2143289344,n,i);else if(t>34028234663852886e22)e((r<<31|2139095040)>>>0,n,i);else if(t<11754943508222875e-54)e((r<<31|Math.round(t/1401298464324817e-60))>>>0,n,i);else{var a=Math.floor(Math.log(t)/Math.LN2);e((r<<31|a+127<<23|8388607&Math.round(t*Math.pow(2,-a)*8388608))>>>0,n,i)}}function n(e,t,n){var i=e(t,n),r=2*(i>>31)+1,a=i>>>23&255,o=8388607&i;return 255===a?o?NaN:r*(1/0):0===a?1401298464324817e-60*r*o:r*Math.pow(2,a-150)*(o+8388608)}e.writeFloatLE=t.bind(null,V),e.writeFloatBE=t.bind(null,q),e.readFloatLE=n.bind(null,W),e.readFloatBE=n.bind(null,H)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),i=128===n[7];function r(e,i,r){t[0]=e,i[r]=n[0],i[r+1]=n[1],i[r+2]=n[2],i[r+3]=n[3],i[r+4]=n[4],i[r+5]=n[5],i[r+6]=n[6],i[r+7]=n[7]}function a(e,i,r){t[0]=e,i[r]=n[7],i[r+1]=n[6],i[r+2]=n[5],i[r+3]=n[4],i[r+4]=n[3],i[r+5]=n[2],i[r+6]=n[1],i[r+7]=n[0]}function o(e,i){return n[0]=e[i],n[1]=e[i+1],n[2]=e[i+2],n[3]=e[i+3],n[4]=e[i+4],n[5]=e[i+5],n[6]=e[i+6],n[7]=e[i+7],t[0]}function s(e,i){return n[7]=e[i],n[6]=e[i+1],n[5]=e[i+2],n[4]=e[i+3],n[3]=e[i+4],n[2]=e[i+5],n[1]=e[i+6],n[0]=e[i+7],t[0]}e.writeDoubleLE=i?r:a,e.writeDoubleBE=i?a:r,e.readDoubleLE=i?o:s,e.readDoubleBE=i?s:o}():function(){function t(e,t,n,i,r,a){var o=i<0?1:0;if(o&&(i=-i),0===i)e(0,r,a+t),e(1/i>0?0:2147483648,r,a+n);else if(isNaN(i))e(0,r,a+t),e(2146959360,r,a+n);else if(i>17976931348623157e292)e(0,r,a+t),e((o<<31|2146435072)>>>0,r,a+n);else{var s;if(i<22250738585072014e-324)e((s=i/5e-324)>>>0,r,a+t),e((o<<31|s/4294967296)>>>0,r,a+n);else{var c=Math.floor(Math.log(i)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(s=i*Math.pow(2,-c))>>>0,r,a+t),e((o<<31|c+1023<<20|1048576*s&1048575)>>>0,r,a+n)}}}function n(e,t,n,i,r){var a=e(i,r+t),o=e(i,r+n),s=2*(o>>31)+1,c=o>>>20&2047,l=4294967296*(1048575&o)+a;return 2047===c?l?NaN:s*(1/0):0===c?5e-324*s*l:s*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,V,0,4),e.writeDoubleBE=t.bind(null,q,4,0),e.readDoubleLE=n.bind(null,W,0,4),e.readDoubleBE=n.bind(null,H,4,0)}(),e}function V(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function q(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function W(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function H(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var Q=function(e){try{}catch(e){}return null},X={};!function(e){var t=e;t.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)(n=e.charCodeAt(i))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(i+1))?(++i,t+=4):t+=3;return t},t.read=function(e,t,n){if(n-t<1)return"";for(var i,r=null,a=[],o=0;t<n;)(i=e[t++])<128?a[o++]=i:i>191&&i<224?a[o++]=(31&i)<<6|63&e[t++]:i>239&&i<365?(i=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,a[o++]=55296+(i>>10),a[o++]=56320+(1023&i)):a[o++]=(15&i)<<12|(63&e[t++])<<6|63&e[t++],o>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,a)),o=0);return r?(o&&r.push(String.fromCharCode.apply(String,a.slice(0,o))),r.join("")):String.fromCharCode.apply(String,a.slice(0,o))},t.write=function(e,t,n){for(var i,r,a=n,o=0;o<e.length;++o)(i=e.charCodeAt(o))<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&56320==(64512&(r=e.charCodeAt(o+1)))?(i=65536+((1023&i)<<10)+(1023&r),++o,t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128);return n-a}}(X);var Y=function(e,t,n){var i=n||8192,r=i>>>1,a=null,o=i;return function(n){if(n<1||n>r)return e(n);o+n>i&&(a=e(i),o=0);var s=t.call(a,o,o+=n);return 7&o&&(o=1+(7|o)),s}},G=K,J=B;function K(e,t){this.lo=e>>>0,this.hi=t>>>0}var ee=K.zero=new K(0,0);ee.toNumber=function(){return 0},ee.zzEncode=ee.zzDecode=function(){return this},ee.length=function(){return 1};var te=K.zeroHash="\0\0\0\0\0\0\0\0";K.fromNumber=function(e){if(0===e)return ee;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new K(n,i)},K.from=function(e){if("number"==typeof e)return K.fromNumber(e);if(J.isString(e)){if(!J.Long)return K.fromNumber(parseInt(e,10));e=J.Long.fromString(e)}return e.low||e.high?new K(e.low>>>0,e.high>>>0):ee},K.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},K.prototype.toLong=function(e){return J.Long?new J.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var ne=String.prototype.charCodeAt;K.fromHash=function(e){return e===te?ee:new K((ne.call(e,0)|ne.call(e,1)<<8|ne.call(e,2)<<16|ne.call(e,3)<<24)>>>0,(ne.call(e,4)|ne.call(e,5)<<8|ne.call(e,6)<<16|ne.call(e,7)<<24)>>>0)},K.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},K.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},K.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},K.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10},function(e){var t=e;function n(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;++r)void 0!==e[i[r]]&&n||(e[i[r]]=t[i[r]]);return e}function i(e){function t(e,i){if(!(this instanceof t))return new t(e,i);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),i&&n(this,i)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}t.asPromise=$,t.base64=j,t.EventEmitter=U,t.float=Z,t.inquire=Q,t.utf8=X,t.pool=Y,t.LongBits=G,t.isNode=Boolean(void 0!==c&&c&&c.process&&c.process.versions&&c.process.versions.node),t.global=t.isNode&&c||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||c,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isObject=function(e){return e&&"object"==typeof e},t.isset=t.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},t.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash},t.longFromHash=function(e,n){var i=t.LongBits.fromHash(e);return t.Long?t.Long.fromBits(i.lo,i.hi,n):i.toNumber(Boolean(n))},t.merge=n,t.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},t.newError=i,t.ProtocolError=i("ProtocolError"),t.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},t.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):t._Buffer_from=t._Buffer_allocUnsafe=null}}(B);var ie,re=pe,ae=B,oe=ae.LongBits,se=ae.base64,ce=ae.utf8;function le(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function ue(){}function de(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function pe(){this.len=0,this.head=new le(ue,0,0),this.tail=this.head,this.states=null}var he=function(){return ae.Buffer?function(){return(pe.create=function(){return new ie})()}:function(){return new pe}};function fe(e,t,n){t[n]=255&e}function me(e,t){this.len=e,this.next=void 0,this.val=t}function ge(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function ve(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}pe.create=he(),pe.alloc=function(e){return new ae.Array(e)},ae.Array!==Array&&(pe.alloc=ae.pool(pe.alloc,ae.Array.prototype.subarray)),pe.prototype._push=function(e,t,n){return this.tail=this.tail.next=new le(e,t,n),this.len+=t,this},me.prototype=Object.create(le.prototype),me.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},pe.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new me((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},pe.prototype.int32=function(e){return e<0?this._push(ge,10,oe.fromNumber(e)):this.uint32(e)},pe.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},pe.prototype.uint64=function(e){var t=oe.from(e);return this._push(ge,t.length(),t)},pe.prototype.int64=pe.prototype.uint64,pe.prototype.sint64=function(e){var t=oe.from(e).zzEncode();return this._push(ge,t.length(),t)},pe.prototype.bool=function(e){return this._push(fe,1,e?1:0)},pe.prototype.fixed32=function(e){return this._push(ve,4,e>>>0)},pe.prototype.sfixed32=pe.prototype.fixed32,pe.prototype.fixed64=function(e){var t=oe.from(e);return this._push(ve,4,t.lo)._push(ve,4,t.hi)},pe.prototype.sfixed64=pe.prototype.fixed64,pe.prototype.float=function(e){return this._push(ae.float.writeFloatLE,4,e)},pe.prototype.double=function(e){return this._push(ae.float.writeDoubleLE,8,e)};var be=ae.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};pe.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(fe,1,0);if(ae.isString(e)){var n=pe.alloc(t=se.length(e));se.decode(e,n,0),e=n}return this.uint32(t)._push(be,t,e)},pe.prototype.string=function(e){var t=ce.length(e);return t?this.uint32(t)._push(ce.write,t,e):this._push(fe,1,0)},pe.prototype.fork=function(){return this.states=new de(this),this.head=this.tail=new le(ue,0,0),this.len=0,this},pe.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new le(ue,0,0),this.len=0),this},pe.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},pe.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},pe._configure=function(e){ie=e,pe.create=he(),ie._configure()};var ye=we,_e=re;(we.prototype=Object.create(_e.prototype)).constructor=we;var Ae=B;function we(){_e.call(this)}function ke(e,t,n){e.length<40?Ae.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}we._configure=function(){we.alloc=Ae._Buffer_allocUnsafe,we.writeBytesBuffer=Ae.Buffer&&Ae.Buffer.prototype instanceof Uint8Array&&"set"===Ae.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]}},we.prototype.bytes=function(e){Ae.isString(e)&&(e=Ae._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(we.writeBytesBuffer,t,e),this},we.prototype.string=function(e){var t=Ae.Buffer.byteLength(e);return this.uint32(t),t&&this._push(ke,t,e),this},we._configure();var Se,Ce=Re,xe=B,Ee=xe.LongBits,Te=xe.utf8;function Pe(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Re(e){this.buf=e,this.pos=0,this.len=e.length}var Oe,De="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Re(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Re(e);throw Error("illegal buffer")},Me=function(){return xe.Buffer?function(e){return(Re.create=function(e){return xe.Buffer.isBuffer(e)?new Se(e):De(e)})(e)}:De};function Ie(){var e=new Ee(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw Pe(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw Pe(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function Ne(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function Le(){if(this.pos+8>this.len)throw Pe(this,8);return new Ee(Ne(this.buf,this.pos+=4),Ne(this.buf,this.pos+=4))}Re.create=Me(),Re.prototype._slice=xe.Array.prototype.subarray||xe.Array.prototype.slice,Re.prototype.uint32=(Oe=4294967295,function(){if(Oe=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return Oe;if(Oe=(Oe|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return Oe;if(Oe=(Oe|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return Oe;if(Oe=(Oe|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return Oe;if(Oe=(Oe|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return Oe;if((this.pos+=5)>this.len)throw this.pos=this.len,Pe(this,10);return Oe}),Re.prototype.int32=function(){return 0|this.uint32()},Re.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},Re.prototype.bool=function(){return 0!==this.uint32()},Re.prototype.fixed32=function(){if(this.pos+4>this.len)throw Pe(this,4);return Ne(this.buf,this.pos+=4)},Re.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Pe(this,4);return 0|Ne(this.buf,this.pos+=4)},Re.prototype.float=function(){if(this.pos+4>this.len)throw Pe(this,4);var e=xe.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Re.prototype.double=function(){if(this.pos+8>this.len)throw Pe(this,4);var e=xe.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Re.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw Pe(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},Re.prototype.string=function(){var e=this.bytes();return Te.read(e,0,e.length)},Re.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw Pe(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw Pe(this)}while(128&this.buf[this.pos++]);return this},Re.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Re._configure=function(e){Se=e,Re.create=Me(),Se._configure();var t=xe.Long?"toLong":"toNumber";xe.merge(Re.prototype,{int64:function(){return Ie.call(this)[t](!1)},uint64:function(){return Ie.call(this)[t](!0)},sint64:function(){return Ie.call(this).zzDecode()[t](!1)},fixed64:function(){return Le.call(this)[t](!0)},sfixed64:function(){return Le.call(this)[t](!1)}})};var Be=Ue,$e=Ce;(Ue.prototype=Object.create($e.prototype)).constructor=Ue;var je=B;function Ue(e){$e.call(this,e)}Ue._configure=function(){je.Buffer&&(Ue.prototype._slice=je.Buffer.prototype.slice)},Ue.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},Ue._configure();var Fe={},Ze=Ve,ze=B;function Ve(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");ze.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(Ve.prototype=Object.create(ze.EventEmitter.prototype)).constructor=Ve,Ve.prototype.rpcCall=function e(t,n,i,r,a){if(!r)throw TypeError("request must be specified");var o=this;if(!a)return ze.asPromise(e,o,t,n,i,r);if(o.rpcImpl)try{return o.rpcImpl(t,n[o.requestDelimited?"encodeDelimited":"encode"](r).finish(),(function(e,n){if(e)return o.emit("error",e,t),a(e);if(null!==n){if(!(n instanceof i))try{n=i[o.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return o.emit("error",e,t),a(e)}return o.emit("data",n,t),a(null,n)}o.end(!0)}))}catch(e){return o.emit("error",e,t),void setTimeout((function(){a(e)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},Ve.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},Fe.Service=Ze;var qe={};!function(e){var t=e;function n(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}t.build="minimal",t.Writer=re,t.BufferWriter=ye,t.Reader=Ce,t.BufferReader=Be,t.util=B,t.rpc=Fe,t.roots=qe,t.configure=n,n()}(L);var We,He,Qe,Xe,Ye,Ge,Je,Ke,et=L,tt=(()=>{if(void 0!==tt)return tt;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw"Unable to locate global object"})();function nt(e){switch(e){case 0:case"AUDIO":return We.AUDIO;case 1:case"VIDEO":return We.VIDEO;case 2:case"DATA":return We.DATA;default:return We.UNRECOGNIZED}}function it(e){switch(e){case We.AUDIO:return"AUDIO";case We.VIDEO:return"VIDEO";case We.DATA:return"DATA";default:return"UNKNOWN"}}function rt(e){switch(e){case 0:case"UNKNOWN":return He.UNKNOWN;case 1:case"CAMERA":return He.CAMERA;case 2:case"MICROPHONE":return He.MICROPHONE;case 3:case"SCREEN_SHARE":return He.SCREEN_SHARE;case 4:case"SCREEN_SHARE_AUDIO":return He.SCREEN_SHARE_AUDIO;default:return He.UNRECOGNIZED}}function at(e){switch(e){case He.UNKNOWN:return"UNKNOWN";case He.CAMERA:return"CAMERA";case He.MICROPHONE:return"MICROPHONE";case He.SCREEN_SHARE:return"SCREEN_SHARE";case He.SCREEN_SHARE_AUDIO:return"SCREEN_SHARE_AUDIO";default:return"UNKNOWN"}}function ot(e){switch(e){case 0:case"LOW":return Qe.LOW;case 1:case"MEDIUM":return Qe.MEDIUM;case 2:case"HIGH":return Qe.HIGH;case 3:case"OFF":return Qe.OFF;default:return Qe.UNRECOGNIZED}}function st(e){switch(e){case Qe.LOW:return"LOW";case Qe.MEDIUM:return"MEDIUM";case Qe.HIGH:return"HIGH";case Qe.OFF:return"OFF";default:return"UNKNOWN"}}function ct(e){switch(e){case 0:case"POOR":return Xe.POOR;case 1:case"GOOD":return Xe.GOOD;case 2:case"EXCELLENT":return Xe.EXCELLENT;default:return Xe.UNRECOGNIZED}}function lt(e){switch(e){case 0:case"UNSET":return Ye.UNSET;case 1:case"DISABLED":return Ye.DISABLED;case 2:case"ENABLED":return Ye.ENABLED;default:return Ye.UNRECOGNIZED}}function ut(e){switch(e){case Ye.UNSET:return"UNSET";case Ye.DISABLED:return"DISABLED";case Ye.ENABLED:return"ENABLED";default:return"UNKNOWN"}}function dt(e){switch(e){case 0:case"JOINING":return Ge.JOINING;case 1:case"JOINED":return Ge.JOINED;case 2:case"ACTIVE":return Ge.ACTIVE;case 3:case"DISCONNECTED":return Ge.DISCONNECTED;default:return Ge.UNRECOGNIZED}}function pt(e){switch(e){case 0:case"RELIABLE":return Je.RELIABLE;case 1:case"LOSSY":return Je.LOSSY;default:return Je.UNRECOGNIZED}}function ht(e){switch(e){case 0:case"UNKNOWN":return Ke.UNKNOWN;case 1:case"JS":return Ke.JS;case 2:case"SWIFT":return Ke.SWIFT;case 3:case"ANDROID":return Ke.ANDROID;case 4:case"FLUTTER":return Ke.FLUTTER;case 5:case"GO":return Ke.GO;case 6:case"UNITY":return Ke.UNITY;default:return Ke.UNRECOGNIZED}}et.util.Long!==d&&(et.util.Long=d,et.configure()),function(e){e[e.AUDIO=0]="AUDIO",e[e.VIDEO=1]="VIDEO",e[e.DATA=2]="DATA",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(We||(We={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CAMERA=1]="CAMERA",e[e.MICROPHONE=2]="MICROPHONE",e[e.SCREEN_SHARE=3]="SCREEN_SHARE",e[e.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(He||(He={})),function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH",e[e.OFF=3]="OFF",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(Qe||(Qe={})),function(e){e[e.POOR=0]="POOR",e[e.GOOD=1]="GOOD",e[e.EXCELLENT=2]="EXCELLENT",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(Xe||(Xe={})),function(e){e[e.UNSET=0]="UNSET",e[e.DISABLED=1]="DISABLED",e[e.ENABLED=2]="ENABLED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(Ye||(Ye={})),function(e){e[e.JOINING=0]="JOINING",e[e.JOINED=1]="JOINED",e[e.ACTIVE=2]="ACTIVE",e[e.DISCONNECTED=3]="DISCONNECTED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(Ge||(Ge={})),function(e){e[e.RELIABLE=0]="RELIABLE",e[e.LOSSY=1]="LOSSY",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(Je||(Je={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JS=1]="JS",e[e.SWIFT=2]="SWIFT",e[e.ANDROID=3]="ANDROID",e[e.FLUTTER=4]="FLUTTER",e[e.GO=5]="GO",e[e.UNITY=6]="UNITY",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(Ke||(Ke={}));const ft={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();""!==e.sid&&t.uint32(10).string(e.sid),""!==e.name&&t.uint32(18).string(e.name),0!==e.emptyTimeout&&t.uint32(24).uint32(e.emptyTimeout),0!==e.maxParticipants&&t.uint32(32).uint32(e.maxParticipants),0!==e.creationTime&&t.uint32(40).int64(e.creationTime),""!==e.turnPassword&&t.uint32(50).string(e.turnPassword);for(const n of e.enabledCodecs)mt.encode(n,t.uint32(58).fork()).ldelim();return""!==e.metadata&&t.uint32(66).string(e.metadata),0!==e.numParticipants&&t.uint32(72).uint32(e.numParticipants),!0===e.activeRecording&&t.uint32(80).bool(e.activeRecording),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:"",enabledCodecs:[],metadata:"",numParticipants:0,activeRecording:!1};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.sid=n.string();break;case 2:r.name=n.string();break;case 3:r.emptyTimeout=n.uint32();break;case 4:r.maxParticipants=n.uint32();break;case 5:r.creationTime=Mt(n.int64());break;case 6:r.turnPassword=n.string();break;case 7:r.enabledCodecs.push(mt.decode(n,n.uint32()));break;case 8:r.metadata=n.string();break;case 9:r.numParticipants=n.uint32();break;case 10:r.activeRecording=n.bool();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({sid:It(e.sid)?String(e.sid):"",name:It(e.name)?String(e.name):"",emptyTimeout:It(e.emptyTimeout)?Number(e.emptyTimeout):0,maxParticipants:It(e.maxParticipants)?Number(e.maxParticipants):0,creationTime:It(e.creationTime)?Number(e.creationTime):0,turnPassword:It(e.turnPassword)?String(e.turnPassword):"",enabledCodecs:Array.isArray(null==e?void 0:e.enabledCodecs)?e.enabledCodecs.map((e=>mt.fromJSON(e))):[],metadata:It(e.metadata)?String(e.metadata):"",numParticipants:It(e.numParticipants)?Number(e.numParticipants):0,activeRecording:!!It(e.activeRecording)&&Boolean(e.activeRecording)}),toJSON(e){const t={};return void 0!==e.sid&&(t.sid=e.sid),void 0!==e.name&&(t.name=e.name),void 0!==e.emptyTimeout&&(t.emptyTimeout=Math.round(e.emptyTimeout)),void 0!==e.maxParticipants&&(t.maxParticipants=Math.round(e.maxParticipants)),void 0!==e.creationTime&&(t.creationTime=Math.round(e.creationTime)),void 0!==e.turnPassword&&(t.turnPassword=e.turnPassword),e.enabledCodecs?t.enabledCodecs=e.enabledCodecs.map((e=>e?mt.toJSON(e):void 0)):t.enabledCodecs=[],void 0!==e.metadata&&(t.metadata=e.metadata),void 0!==e.numParticipants&&(t.numParticipants=Math.round(e.numParticipants)),void 0!==e.activeRecording&&(t.activeRecording=e.activeRecording),t},fromPartial(e){var t,n,i,r,a,o,s,c,l,u;const d={sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:"",enabledCodecs:[],metadata:"",numParticipants:0,activeRecording:!1};return d.sid=null!==(t=e.sid)&&void 0!==t?t:"",d.name=null!==(n=e.name)&&void 0!==n?n:"",d.emptyTimeout=null!==(i=e.emptyTimeout)&&void 0!==i?i:0,d.maxParticipants=null!==(r=e.maxParticipants)&&void 0!==r?r:0,d.creationTime=null!==(a=e.creationTime)&&void 0!==a?a:0,d.turnPassword=null!==(o=e.turnPassword)&&void 0!==o?o:"",d.enabledCodecs=(null===(s=e.enabledCodecs)||void 0===s?void 0:s.map((e=>mt.fromPartial(e))))||[],d.metadata=null!==(c=e.metadata)&&void 0!==c?c:"",d.numParticipants=null!==(l=e.numParticipants)&&void 0!==l?l:0,d.activeRecording=null!==(u=e.activeRecording)&&void 0!==u&&u,d}},mt={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return""!==e.mime&&t.uint32(10).string(e.mime),""!==e.fmtpLine&&t.uint32(18).string(e.fmtpLine),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={mime:"",fmtpLine:""};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.mime=n.string();break;case 2:r.fmtpLine=n.string();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({mime:It(e.mime)?String(e.mime):"",fmtpLine:It(e.fmtpLine)?String(e.fmtpLine):""}),toJSON(e){const t={};return void 0!==e.mime&&(t.mime=e.mime),void 0!==e.fmtpLine&&(t.fmtpLine=e.fmtpLine),t},fromPartial(e){var t,n;const i={mime:"",fmtpLine:""};return i.mime=null!==(t=e.mime)&&void 0!==t?t:"",i.fmtpLine=null!==(n=e.fmtpLine)&&void 0!==n?n:"",i}},gt={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return!0===e.canSubscribe&&t.uint32(8).bool(e.canSubscribe),!0===e.canPublish&&t.uint32(16).bool(e.canPublish),!0===e.canPublishData&&t.uint32(24).bool(e.canPublishData),!0===e.hidden&&t.uint32(56).bool(e.hidden),!0===e.recorder&&t.uint32(64).bool(e.recorder),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={canSubscribe:!1,canPublish:!1,canPublishData:!1,hidden:!1,recorder:!1};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.canSubscribe=n.bool();break;case 2:r.canPublish=n.bool();break;case 3:r.canPublishData=n.bool();break;case 7:r.hidden=n.bool();break;case 8:r.recorder=n.bool();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({canSubscribe:!!It(e.canSubscribe)&&Boolean(e.canSubscribe),canPublish:!!It(e.canPublish)&&Boolean(e.canPublish),canPublishData:!!It(e.canPublishData)&&Boolean(e.canPublishData),hidden:!!It(e.hidden)&&Boolean(e.hidden),recorder:!!It(e.recorder)&&Boolean(e.recorder)}),toJSON(e){const t={};return void 0!==e.canSubscribe&&(t.canSubscribe=e.canSubscribe),void 0!==e.canPublish&&(t.canPublish=e.canPublish),void 0!==e.canPublishData&&(t.canPublishData=e.canPublishData),void 0!==e.hidden&&(t.hidden=e.hidden),void 0!==e.recorder&&(t.recorder=e.recorder),t},fromPartial(e){var t,n,i,r,a;const o={canSubscribe:!1,canPublish:!1,canPublishData:!1,hidden:!1,recorder:!1};return o.canSubscribe=null!==(t=e.canSubscribe)&&void 0!==t&&t,o.canPublish=null!==(n=e.canPublish)&&void 0!==n&&n,o.canPublishData=null!==(i=e.canPublishData)&&void 0!==i&&i,o.hidden=null!==(r=e.hidden)&&void 0!==r&&r,o.recorder=null!==(a=e.recorder)&&void 0!==a&&a,o}},vt={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();""!==e.sid&&t.uint32(10).string(e.sid),""!==e.identity&&t.uint32(18).string(e.identity),0!==e.state&&t.uint32(24).int32(e.state);for(const n of e.tracks)bt.encode(n,t.uint32(34).fork()).ldelim();return""!==e.metadata&&t.uint32(42).string(e.metadata),0!==e.joinedAt&&t.uint32(48).int64(e.joinedAt),""!==e.name&&t.uint32(74).string(e.name),0!==e.version&&t.uint32(80).uint32(e.version),void 0!==e.permission&&gt.encode(e.permission,t.uint32(90).fork()).ldelim(),""!==e.region&&t.uint32(98).string(e.region),!0===e.isPublisher&&t.uint32(104).bool(e.isPublisher),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={sid:"",identity:"",state:0,tracks:[],metadata:"",joinedAt:0,name:"",version:0,permission:void 0,region:"",isPublisher:!1};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.sid=n.string();break;case 2:r.identity=n.string();break;case 3:r.state=n.int32();break;case 4:r.tracks.push(bt.decode(n,n.uint32()));break;case 5:r.metadata=n.string();break;case 6:r.joinedAt=Mt(n.int64());break;case 9:r.name=n.string();break;case 10:r.version=n.uint32();break;case 11:r.permission=gt.decode(n,n.uint32());break;case 12:r.region=n.string();break;case 13:r.isPublisher=n.bool();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({sid:It(e.sid)?String(e.sid):"",identity:It(e.identity)?String(e.identity):"",state:It(e.state)?dt(e.state):0,tracks:Array.isArray(null==e?void 0:e.tracks)?e.tracks.map((e=>bt.fromJSON(e))):[],metadata:It(e.metadata)?String(e.metadata):"",joinedAt:It(e.joinedAt)?Number(e.joinedAt):0,name:It(e.name)?String(e.name):"",version:It(e.version)?Number(e.version):0,permission:It(e.permission)?gt.fromJSON(e.permission):void 0,region:It(e.region)?String(e.region):"",isPublisher:!!It(e.isPublisher)&&Boolean(e.isPublisher)}),toJSON(e){const t={};return void 0!==e.sid&&(t.sid=e.sid),void 0!==e.identity&&(t.identity=e.identity),void 0!==e.state&&(t.state=function(e){switch(e){case Ge.JOINING:return"JOINING";case Ge.JOINED:return"JOINED";case Ge.ACTIVE:return"ACTIVE";case Ge.DISCONNECTED:return"DISCONNECTED";default:return"UNKNOWN"}}(e.state)),e.tracks?t.tracks=e.tracks.map((e=>e?bt.toJSON(e):void 0)):t.tracks=[],void 0!==e.metadata&&(t.metadata=e.metadata),void 0!==e.joinedAt&&(t.joinedAt=Math.round(e.joinedAt)),void 0!==e.name&&(t.name=e.name),void 0!==e.version&&(t.version=Math.round(e.version)),void 0!==e.permission&&(t.permission=e.permission?gt.toJSON(e.permission):void 0),void 0!==e.region&&(t.region=e.region),void 0!==e.isPublisher&&(t.isPublisher=e.isPublisher),t},fromPartial(e){var t,n,i,r,a,o,s,c,l,u;const d={sid:"",identity:"",state:0,tracks:[],metadata:"",joinedAt:0,name:"",version:0,permission:void 0,region:"",isPublisher:!1};return d.sid=null!==(t=e.sid)&&void 0!==t?t:"",d.identity=null!==(n=e.identity)&&void 0!==n?n:"",d.state=null!==(i=e.state)&&void 0!==i?i:0,d.tracks=(null===(r=e.tracks)||void 0===r?void 0:r.map((e=>bt.fromPartial(e))))||[],d.metadata=null!==(a=e.metadata)&&void 0!==a?a:"",d.joinedAt=null!==(o=e.joinedAt)&&void 0!==o?o:0,d.name=null!==(s=e.name)&&void 0!==s?s:"",d.version=null!==(c=e.version)&&void 0!==c?c:0,d.permission=void 0!==e.permission&&null!==e.permission?gt.fromPartial(e.permission):void 0,d.region=null!==(l=e.region)&&void 0!==l?l:"",d.isPublisher=null!==(u=e.isPublisher)&&void 0!==u&&u,d}},bt={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();""!==e.sid&&t.uint32(10).string(e.sid),0!==e.type&&t.uint32(16).int32(e.type),""!==e.name&&t.uint32(26).string(e.name),!0===e.muted&&t.uint32(32).bool(e.muted),0!==e.width&&t.uint32(40).uint32(e.width),0!==e.height&&t.uint32(48).uint32(e.height),!0===e.simulcast&&t.uint32(56).bool(e.simulcast),!0===e.disableDtx&&t.uint32(64).bool(e.disableDtx),0!==e.source&&t.uint32(72).int32(e.source);for(const n of e.layers)yt.encode(n,t.uint32(82).fork()).ldelim();return""!==e.mimeType&&t.uint32(90).string(e.mimeType),""!==e.mid&&t.uint32(98).string(e.mid),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1,disableDtx:!1,source:0,layers:[],mimeType:"",mid:""};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.sid=n.string();break;case 2:r.type=n.int32();break;case 3:r.name=n.string();break;case 4:r.muted=n.bool();break;case 5:r.width=n.uint32();break;case 6:r.height=n.uint32();break;case 7:r.simulcast=n.bool();break;case 8:r.disableDtx=n.bool();break;case 9:r.source=n.int32();break;case 10:r.layers.push(yt.decode(n,n.uint32()));break;case 11:r.mimeType=n.string();break;case 12:r.mid=n.string();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({sid:It(e.sid)?String(e.sid):"",type:It(e.type)?nt(e.type):0,name:It(e.name)?String(e.name):"",muted:!!It(e.muted)&&Boolean(e.muted),width:It(e.width)?Number(e.width):0,height:It(e.height)?Number(e.height):0,simulcast:!!It(e.simulcast)&&Boolean(e.simulcast),disableDtx:!!It(e.disableDtx)&&Boolean(e.disableDtx),source:It(e.source)?rt(e.source):0,layers:Array.isArray(null==e?void 0:e.layers)?e.layers.map((e=>yt.fromJSON(e))):[],mimeType:It(e.mimeType)?String(e.mimeType):"",mid:It(e.mid)?String(e.mid):""}),toJSON(e){const t={};return void 0!==e.sid&&(t.sid=e.sid),void 0!==e.type&&(t.type=it(e.type)),void 0!==e.name&&(t.name=e.name),void 0!==e.muted&&(t.muted=e.muted),void 0!==e.width&&(t.width=Math.round(e.width)),void 0!==e.height&&(t.height=Math.round(e.height)),void 0!==e.simulcast&&(t.simulcast=e.simulcast),void 0!==e.disableDtx&&(t.disableDtx=e.disableDtx),void 0!==e.source&&(t.source=at(e.source)),e.layers?t.layers=e.layers.map((e=>e?yt.toJSON(e):void 0)):t.layers=[],void 0!==e.mimeType&&(t.mimeType=e.mimeType),void 0!==e.mid&&(t.mid=e.mid),t},fromPartial(e){var t,n,i,r,a,o,s,c,l,u,d,p;const h={sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1,disableDtx:!1,source:0,layers:[],mimeType:"",mid:""};return h.sid=null!==(t=e.sid)&&void 0!==t?t:"",h.type=null!==(n=e.type)&&void 0!==n?n:0,h.name=null!==(i=e.name)&&void 0!==i?i:"",h.muted=null!==(r=e.muted)&&void 0!==r&&r,h.width=null!==(a=e.width)&&void 0!==a?a:0,h.height=null!==(o=e.height)&&void 0!==o?o:0,h.simulcast=null!==(s=e.simulcast)&&void 0!==s&&s,h.disableDtx=null!==(c=e.disableDtx)&&void 0!==c&&c,h.source=null!==(l=e.source)&&void 0!==l?l:0,h.layers=(null===(u=e.layers)||void 0===u?void 0:u.map((e=>yt.fromPartial(e))))||[],h.mimeType=null!==(d=e.mimeType)&&void 0!==d?d:"",h.mid=null!==(p=e.mid)&&void 0!==p?p:"",h}},yt={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return 0!==e.quality&&t.uint32(8).int32(e.quality),0!==e.width&&t.uint32(16).uint32(e.width),0!==e.height&&t.uint32(24).uint32(e.height),0!==e.bitrate&&t.uint32(32).uint32(e.bitrate),0!==e.ssrc&&t.uint32(40).uint32(e.ssrc),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={quality:0,width:0,height:0,bitrate:0,ssrc:0};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.quality=n.int32();break;case 2:r.width=n.uint32();break;case 3:r.height=n.uint32();break;case 4:r.bitrate=n.uint32();break;case 5:r.ssrc=n.uint32();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({quality:It(e.quality)?ot(e.quality):0,width:It(e.width)?Number(e.width):0,height:It(e.height)?Number(e.height):0,bitrate:It(e.bitrate)?Number(e.bitrate):0,ssrc:It(e.ssrc)?Number(e.ssrc):0}),toJSON(e){const t={};return void 0!==e.quality&&(t.quality=st(e.quality)),void 0!==e.width&&(t.width=Math.round(e.width)),void 0!==e.height&&(t.height=Math.round(e.height)),void 0!==e.bitrate&&(t.bitrate=Math.round(e.bitrate)),void 0!==e.ssrc&&(t.ssrc=Math.round(e.ssrc)),t},fromPartial(e){var t,n,i,r,a;const o={quality:0,width:0,height:0,bitrate:0,ssrc:0};return o.quality=null!==(t=e.quality)&&void 0!==t?t:0,o.width=null!==(n=e.width)&&void 0!==n?n:0,o.height=null!==(i=e.height)&&void 0!==i?i:0,o.bitrate=null!==(r=e.bitrate)&&void 0!==r?r:0,o.ssrc=null!==(a=e.ssrc)&&void 0!==a?a:0,o}},_t={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return 0!==e.kind&&t.uint32(8).int32(e.kind),void 0!==e.user&&St.encode(e.user,t.uint32(18).fork()).ldelim(),void 0!==e.speaker&&At.encode(e.speaker,t.uint32(26).fork()).ldelim(),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={kind:0,user:void 0,speaker:void 0};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.kind=n.int32();break;case 2:r.user=St.decode(n,n.uint32());break;case 3:r.speaker=At.decode(n,n.uint32());break;default:n.skipType(7&e)}}return r},fromJSON:e=>({kind:It(e.kind)?pt(e.kind):0,user:It(e.user)?St.fromJSON(e.user):void 0,speaker:It(e.speaker)?At.fromJSON(e.speaker):void 0}),toJSON(e){const t={};return void 0!==e.kind&&(t.kind=function(e){switch(e){case Je.RELIABLE:return"RELIABLE";case Je.LOSSY:return"LOSSY";default:return"UNKNOWN"}}(e.kind)),void 0!==e.user&&(t.user=e.user?St.toJSON(e.user):void 0),void 0!==e.speaker&&(t.speaker=e.speaker?At.toJSON(e.speaker):void 0),t},fromPartial(e){var t;const n={kind:0,user:void 0,speaker:void 0};return n.kind=null!==(t=e.kind)&&void 0!==t?t:0,n.user=void 0!==e.user&&null!==e.user?St.fromPartial(e.user):void 0,n.speaker=void 0!==e.speaker&&null!==e.speaker?At.fromPartial(e.speaker):void 0,n}},At={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();for(const n of e.speakers)wt.encode(n,t.uint32(10).fork()).ldelim();return t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={speakers:[]};for(;n.pos<i;){const e=n.uint32();e>>>3==1?r.speakers.push(wt.decode(n,n.uint32())):n.skipType(7&e)}return r},fromJSON:e=>({speakers:Array.isArray(null==e?void 0:e.speakers)?e.speakers.map((e=>wt.fromJSON(e))):[]}),toJSON(e){const t={};return e.speakers?t.speakers=e.speakers.map((e=>e?wt.toJSON(e):void 0)):t.speakers=[],t},fromPartial(e){var t;const n={speakers:[]};return n.speakers=(null===(t=e.speakers)||void 0===t?void 0:t.map((e=>wt.fromPartial(e))))||[],n}},wt={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return""!==e.sid&&t.uint32(10).string(e.sid),0!==e.level&&t.uint32(21).float(e.level),!0===e.active&&t.uint32(24).bool(e.active),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={sid:"",level:0,active:!1};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.sid=n.string();break;case 2:r.level=n.float();break;case 3:r.active=n.bool();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({sid:It(e.sid)?String(e.sid):"",level:It(e.level)?Number(e.level):0,active:!!It(e.active)&&Boolean(e.active)}),toJSON(e){const t={};return void 0!==e.sid&&(t.sid=e.sid),void 0!==e.level&&(t.level=e.level),void 0!==e.active&&(t.active=e.active),t},fromPartial(e){var t,n,i;const r={sid:"",level:0,active:!1};return r.sid=null!==(t=e.sid)&&void 0!==t?t:"",r.level=null!==(n=e.level)&&void 0!==n?n:0,r.active=null!==(i=e.active)&&void 0!==i&&i,r}};function kt(){return{participantSid:"",payload:new Uint8Array,destinationSids:[]}}const St={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();""!==e.participantSid&&t.uint32(10).string(e.participantSid),0!==e.payload.length&&t.uint32(18).bytes(e.payload);for(const n of e.destinationSids)t.uint32(26).string(n);return t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=kt();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.participantSid=n.string();break;case 2:r.payload=n.bytes();break;case 3:r.destinationSids.push(n.string());break;default:n.skipType(7&e)}}return r},fromJSON:e=>({participantSid:It(e.participantSid)?String(e.participantSid):"",payload:It(e.payload)?Ot(e.payload):new Uint8Array,destinationSids:Array.isArray(null==e?void 0:e.destinationSids)?e.destinationSids.map((e=>String(e))):[]}),toJSON(e){const t={};return void 0!==e.participantSid&&(t.participantSid=e.participantSid),void 0!==e.payload&&(t.payload=function(e){const t=[];return e.forEach((e=>{t.push(String.fromCharCode(e))})),Dt(t.join(""))}(void 0!==e.payload?e.payload:new Uint8Array)),e.destinationSids?t.destinationSids=e.destinationSids.map((e=>e)):t.destinationSids=[],t},fromPartial(e){var t,n,i;const r=kt();return r.participantSid=null!==(t=e.participantSid)&&void 0!==t?t:"",r.payload=null!==(n=e.payload)&&void 0!==n?n:new Uint8Array,r.destinationSids=(null===(i=e.destinationSids)||void 0===i?void 0:i.map((e=>e)))||[],r}},Ct={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();""!==e.participantSid&&t.uint32(10).string(e.participantSid);for(const n of e.trackSids)t.uint32(18).string(n);return t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={participantSid:"",trackSids:[]};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.participantSid=n.string();break;case 2:r.trackSids.push(n.string());break;default:n.skipType(7&e)}}return r},fromJSON:e=>({participantSid:It(e.participantSid)?String(e.participantSid):"",trackSids:Array.isArray(null==e?void 0:e.trackSids)?e.trackSids.map((e=>String(e))):[]}),toJSON(e){const t={};return void 0!==e.participantSid&&(t.participantSid=e.participantSid),e.trackSids?t.trackSids=e.trackSids.map((e=>e)):t.trackSids=[],t},fromPartial(e){var t,n;const i={participantSid:"",trackSids:[]};return i.participantSid=null!==(t=e.participantSid)&&void 0!==t?t:"",i.trackSids=(null===(n=e.trackSids)||void 0===n?void 0:n.map((e=>e)))||[],i}},xt={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return 0!==e.sdk&&t.uint32(8).int32(e.sdk),""!==e.version&&t.uint32(18).string(e.version),0!==e.protocol&&t.uint32(24).int32(e.protocol),""!==e.os&&t.uint32(34).string(e.os),""!==e.osVersion&&t.uint32(42).string(e.osVersion),""!==e.deviceModel&&t.uint32(50).string(e.deviceModel),""!==e.browser&&t.uint32(58).string(e.browser),""!==e.browserVersion&&t.uint32(66).string(e.browserVersion),""!==e.address&&t.uint32(74).string(e.address),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={sdk:0,version:"",protocol:0,os:"",osVersion:"",deviceModel:"",browser:"",browserVersion:"",address:""};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.sdk=n.int32();break;case 2:r.version=n.string();break;case 3:r.protocol=n.int32();break;case 4:r.os=n.string();break;case 5:r.osVersion=n.string();break;case 6:r.deviceModel=n.string();break;case 7:r.browser=n.string();break;case 8:r.browserVersion=n.string();break;case 9:r.address=n.string();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({sdk:It(e.sdk)?ht(e.sdk):0,version:It(e.version)?String(e.version):"",protocol:It(e.protocol)?Number(e.protocol):0,os:It(e.os)?String(e.os):"",osVersion:It(e.osVersion)?String(e.osVersion):"",deviceModel:It(e.deviceModel)?String(e.deviceModel):"",browser:It(e.browser)?String(e.browser):"",browserVersion:It(e.browserVersion)?String(e.browserVersion):"",address:It(e.address)?String(e.address):""}),toJSON(e){const t={};return void 0!==e.sdk&&(t.sdk=function(e){switch(e){case Ke.UNKNOWN:return"UNKNOWN";case Ke.JS:return"JS";case Ke.SWIFT:return"SWIFT";case Ke.ANDROID:return"ANDROID";case Ke.FLUTTER:return"FLUTTER";case Ke.GO:return"GO";case Ke.UNITY:return"UNITY";default:return"UNKNOWN"}}(e.sdk)),void 0!==e.version&&(t.version=e.version),void 0!==e.protocol&&(t.protocol=Math.round(e.protocol)),void 0!==e.os&&(t.os=e.os),void 0!==e.osVersion&&(t.osVersion=e.osVersion),void 0!==e.deviceModel&&(t.deviceModel=e.deviceModel),void 0!==e.browser&&(t.browser=e.browser),void 0!==e.browserVersion&&(t.browserVersion=e.browserVersion),void 0!==e.address&&(t.address=e.address),t},fromPartial(e){var t,n,i,r,a,o,s,c,l;const u={sdk:0,version:"",protocol:0,os:"",osVersion:"",deviceModel:"",browser:"",browserVersion:"",address:""};return u.sdk=null!==(t=e.sdk)&&void 0!==t?t:0,u.version=null!==(n=e.version)&&void 0!==n?n:"",u.protocol=null!==(i=e.protocol)&&void 0!==i?i:0,u.os=null!==(r=e.os)&&void 0!==r?r:"",u.osVersion=null!==(a=e.osVersion)&&void 0!==a?a:"",u.deviceModel=null!==(o=e.deviceModel)&&void 0!==o?o:"",u.browser=null!==(s=e.browser)&&void 0!==s?s:"",u.browserVersion=null!==(c=e.browserVersion)&&void 0!==c?c:"",u.address=null!==(l=e.address)&&void 0!==l?l:"",u}},Et={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return void 0!==e.video&&Tt.encode(e.video,t.uint32(10).fork()).ldelim(),void 0!==e.screen&&Tt.encode(e.screen,t.uint32(18).fork()).ldelim(),0!==e.resumeConnection&&t.uint32(24).int32(e.resumeConnection),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={video:void 0,screen:void 0,resumeConnection:0};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.video=Tt.decode(n,n.uint32());break;case 2:r.screen=Tt.decode(n,n.uint32());break;case 3:r.resumeConnection=n.int32();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({video:It(e.video)?Tt.fromJSON(e.video):void 0,screen:It(e.screen)?Tt.fromJSON(e.screen):void 0,resumeConnection:It(e.resumeConnection)?lt(e.resumeConnection):0}),toJSON(e){const t={};return void 0!==e.video&&(t.video=e.video?Tt.toJSON(e.video):void 0),void 0!==e.screen&&(t.screen=e.screen?Tt.toJSON(e.screen):void 0),void 0!==e.resumeConnection&&(t.resumeConnection=ut(e.resumeConnection)),t},fromPartial(e){var t;const n={video:void 0,screen:void 0,resumeConnection:0};return n.video=void 0!==e.video&&null!==e.video?Tt.fromPartial(e.video):void 0,n.screen=void 0!==e.screen&&null!==e.screen?Tt.fromPartial(e.screen):void 0,n.resumeConnection=null!==(t=e.resumeConnection)&&void 0!==t?t:0,n}},Tt={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return 0!==e.hardwareEncoder&&t.uint32(8).int32(e.hardwareEncoder),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={hardwareEncoder:0};for(;n.pos<i;){const e=n.uint32();e>>>3==1?r.hardwareEncoder=n.int32():n.skipType(7&e)}return r},fromJSON:e=>({hardwareEncoder:It(e.hardwareEncoder)?lt(e.hardwareEncoder):0}),toJSON(e){const t={};return void 0!==e.hardwareEncoder&&(t.hardwareEncoder=ut(e.hardwareEncoder)),t},fromPartial(e){var t;const n={hardwareEncoder:0};return n.hardwareEncoder=null!==(t=e.hardwareEncoder)&&void 0!==t?t:0,n}};var Pt=(()=>{if(void 0!==Pt)return Pt;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw"Unable to locate global object"})();const Rt=Pt.atob||(e=>Pt.Buffer.from(e,"base64").toString("binary"));function Ot(e){const t=Rt(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}const Dt=Pt.btoa||(e=>Pt.Buffer.from(e,"binary").toString("base64"));function Mt(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new Pt.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}function It(e){return null!=e}function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(n),!0).forEach((function(t){Bt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $t,jt;function Ut(e){switch(e){case 0:case"PUBLISHER":return $t.PUBLISHER;case 1:case"SUBSCRIBER":return $t.SUBSCRIBER;default:return $t.UNRECOGNIZED}}function Ft(e){switch(e){case $t.PUBLISHER:return"PUBLISHER";case $t.SUBSCRIBER:return"SUBSCRIBER";default:return"UNKNOWN"}}function Zt(e){switch(e){case 0:case"ACTIVE":return jt.ACTIVE;case 1:case"PAUSED":return jt.PAUSED;default:return jt.UNRECOGNIZED}}et.util.Long!==d&&(et.util.Long=d,et.configure()),function(e){e[e.PUBLISHER=0]="PUBLISHER",e[e.SUBSCRIBER=1]="SUBSCRIBER",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}($t||($t={})),function(e){e[e.ACTIVE=0]="ACTIVE",e[e.PAUSED=1]="PAUSED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(jt||(jt={}));const zt={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return void 0!==e.offer&&Gt.encode(e.offer,t.uint32(10).fork()).ldelim(),void 0!==e.answer&&Gt.encode(e.answer,t.uint32(18).fork()).ldelim(),void 0!==e.trickle&&Wt.encode(e.trickle,t.uint32(26).fork()).ldelim(),void 0!==e.addTrack&&qt.encode(e.addTrack,t.uint32(34).fork()).ldelim(),void 0!==e.mute&&Ht.encode(e.mute,t.uint32(42).fork()).ldelim(),void 0!==e.subscription&&Kt.encode(e.subscription,t.uint32(50).fork()).ldelim(),void 0!==e.trackSetting&&en.encode(e.trackSetting,t.uint32(58).fork()).ldelim(),void 0!==e.leave&&tn.encode(e.leave,t.uint32(66).fork()).ldelim(),void 0!==e.updateLayers&&nn.encode(e.updateLayers,t.uint32(82).fork()).ldelim(),void 0!==e.subscriptionPermission&&fn.encode(e.subscriptionPermission,t.uint32(90).fork()).ldelim(),void 0!==e.syncState&&gn.encode(e.syncState,t.uint32(98).fork()).ldelim(),void 0!==e.simulate&&bn.encode(e.simulate,t.uint32(106).fork()).ldelim(),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={offer:void 0,answer:void 0,trickle:void 0,addTrack:void 0,mute:void 0,subscription:void 0,trackSetting:void 0,leave:void 0,updateLayers:void 0,subscriptionPermission:void 0,syncState:void 0,simulate:void 0};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.offer=Gt.decode(n,n.uint32());break;case 2:r.answer=Gt.decode(n,n.uint32());break;case 3:r.trickle=Wt.decode(n,n.uint32());break;case 4:r.addTrack=qt.decode(n,n.uint32());break;case 5:r.mute=Ht.decode(n,n.uint32());break;case 6:r.subscription=Kt.decode(n,n.uint32());break;case 7:r.trackSetting=en.decode(n,n.uint32());break;case 8:r.leave=tn.decode(n,n.uint32());break;case 10:r.updateLayers=nn.decode(n,n.uint32());break;case 11:r.subscriptionPermission=fn.decode(n,n.uint32());break;case 12:r.syncState=gn.decode(n,n.uint32());break;case 13:r.simulate=bn.decode(n,n.uint32());break;default:n.skipType(7&e)}}return r},fromJSON:e=>({offer:yn(e.offer)?Gt.fromJSON(e.offer):void 0,answer:yn(e.answer)?Gt.fromJSON(e.answer):void 0,trickle:yn(e.trickle)?Wt.fromJSON(e.trickle):void 0,addTrack:yn(e.addTrack)?qt.fromJSON(e.addTrack):void 0,mute:yn(e.mute)?Ht.fromJSON(e.mute):void 0,subscription:yn(e.subscription)?Kt.fromJSON(e.subscription):void 0,trackSetting:yn(e.trackSetting)?en.fromJSON(e.trackSetting):void 0,leave:yn(e.leave)?tn.fromJSON(e.leave):void 0,updateLayers:yn(e.updateLayers)?nn.fromJSON(e.updateLayers):void 0,subscriptionPermission:yn(e.subscriptionPermission)?fn.fromJSON(e.subscriptionPermission):void 0,syncState:yn(e.syncState)?gn.fromJSON(e.syncState):void 0,simulate:yn(e.simulate)?bn.fromJSON(e.simulate):void 0}),toJSON(e){const t={};return void 0!==e.offer&&(t.offer=e.offer?Gt.toJSON(e.offer):void 0),void 0!==e.answer&&(t.answer=e.answer?Gt.toJSON(e.answer):void 0),void 0!==e.trickle&&(t.trickle=e.trickle?Wt.toJSON(e.trickle):void 0),void 0!==e.addTrack&&(t.addTrack=e.addTrack?qt.toJSON(e.addTrack):void 0),void 0!==e.mute&&(t.mute=e.mute?Ht.toJSON(e.mute):void 0),void 0!==e.subscription&&(t.subscription=e.subscription?Kt.toJSON(e.subscription):void 0),void 0!==e.trackSetting&&(t.trackSetting=e.trackSetting?en.toJSON(e.trackSetting):void 0),void 0!==e.leave&&(t.leave=e.leave?tn.toJSON(e.leave):void 0),void 0!==e.updateLayers&&(t.updateLayers=e.updateLayers?nn.toJSON(e.updateLayers):void 0),void 0!==e.subscriptionPermission&&(t.subscriptionPermission=e.subscriptionPermission?fn.toJSON(e.subscriptionPermission):void 0),void 0!==e.syncState&&(t.syncState=e.syncState?gn.toJSON(e.syncState):void 0),void 0!==e.simulate&&(t.simulate=e.simulate?bn.toJSON(e.simulate):void 0),t},fromPartial(e){const t={offer:void 0,answer:void 0,trickle:void 0,addTrack:void 0,mute:void 0,subscription:void 0,trackSetting:void 0,leave:void 0,updateLayers:void 0,subscriptionPermission:void 0,syncState:void 0,simulate:void 0};return t.offer=void 0!==e.offer&&null!==e.offer?Gt.fromPartial(e.offer):void 0,t.answer=void 0!==e.answer&&null!==e.answer?Gt.fromPartial(e.answer):void 0,t.trickle=void 0!==e.trickle&&null!==e.trickle?Wt.fromPartial(e.trickle):void 0,t.addTrack=void 0!==e.addTrack&&null!==e.addTrack?qt.fromPartial(e.addTrack):void 0,t.mute=void 0!==e.mute&&null!==e.mute?Ht.fromPartial(e.mute):void 0,t.subscription=void 0!==e.subscription&&null!==e.subscription?Kt.fromPartial(e.subscription):void 0,t.trackSetting=void 0!==e.trackSetting&&null!==e.trackSetting?en.fromPartial(e.trackSetting):void 0,t.leave=void 0!==e.leave&&null!==e.leave?tn.fromPartial(e.leave):void 0,t.updateLayers=void 0!==e.updateLayers&&null!==e.updateLayers?nn.fromPartial(e.updateLayers):void 0,t.subscriptionPermission=void 0!==e.subscriptionPermission&&null!==e.subscriptionPermission?fn.fromPartial(e.subscriptionPermission):void 0,t.syncState=void 0!==e.syncState&&null!==e.syncState?gn.fromPartial(e.syncState):void 0,t.simulate=void 0!==e.simulate&&null!==e.simulate?bn.fromPartial(e.simulate):void 0,t}},Vt={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return void 0!==e.join&&Qt.encode(e.join,t.uint32(10).fork()).ldelim(),void 0!==e.answer&&Gt.encode(e.answer,t.uint32(18).fork()).ldelim(),void 0!==e.offer&&Gt.encode(e.offer,t.uint32(26).fork()).ldelim(),void 0!==e.trickle&&Wt.encode(e.trickle,t.uint32(34).fork()).ldelim(),void 0!==e.update&&Jt.encode(e.update,t.uint32(42).fork()).ldelim(),void 0!==e.trackPublished&&Xt.encode(e.trackPublished,t.uint32(50).fork()).ldelim(),void 0!==e.leave&&tn.encode(e.leave,t.uint32(66).fork()).ldelim(),void 0!==e.mute&&Ht.encode(e.mute,t.uint32(74).fork()).ldelim(),void 0!==e.speakersChanged&&an.encode(e.speakersChanged,t.uint32(82).fork()).ldelim(),void 0!==e.roomUpdate&&on.encode(e.roomUpdate,t.uint32(90).fork()).ldelim(),void 0!==e.connectionQuality&&cn.encode(e.connectionQuality,t.uint32(98).fork()).ldelim(),void 0!==e.streamStateUpdate&&un.encode(e.streamStateUpdate,t.uint32(106).fork()).ldelim(),void 0!==e.subscribedQualityUpdate&&pn.encode(e.subscribedQualityUpdate,t.uint32(114).fork()).ldelim(),void 0!==e.subscriptionPermissionUpdate&&mn.encode(e.subscriptionPermissionUpdate,t.uint32(122).fork()).ldelim(),void 0!==e.refreshToken&&t.uint32(130).string(e.refreshToken),void 0!==e.trackUnpublished&&Yt.encode(e.trackUnpublished,t.uint32(138).fork()).ldelim(),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={join:void 0,answer:void 0,offer:void 0,trickle:void 0,update:void 0,trackPublished:void 0,leave:void 0,mute:void 0,speakersChanged:void 0,roomUpdate:void 0,connectionQuality:void 0,streamStateUpdate:void 0,subscribedQualityUpdate:void 0,subscriptionPermissionUpdate:void 0,refreshToken:void 0,trackUnpublished:void 0};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.join=Qt.decode(n,n.uint32());break;case 2:r.answer=Gt.decode(n,n.uint32());break;case 3:r.offer=Gt.decode(n,n.uint32());break;case 4:r.trickle=Wt.decode(n,n.uint32());break;case 5:r.update=Jt.decode(n,n.uint32());break;case 6:r.trackPublished=Xt.decode(n,n.uint32());break;case 8:r.leave=tn.decode(n,n.uint32());break;case 9:r.mute=Ht.decode(n,n.uint32());break;case 10:r.speakersChanged=an.decode(n,n.uint32());break;case 11:r.roomUpdate=on.decode(n,n.uint32());break;case 12:r.connectionQuality=cn.decode(n,n.uint32());break;case 13:r.streamStateUpdate=un.decode(n,n.uint32());break;case 14:r.subscribedQualityUpdate=pn.decode(n,n.uint32());break;case 15:r.subscriptionPermissionUpdate=mn.decode(n,n.uint32());break;case 16:r.refreshToken=n.string();break;case 17:r.trackUnpublished=Yt.decode(n,n.uint32());break;default:n.skipType(7&e)}}return r},fromJSON:e=>({join:yn(e.join)?Qt.fromJSON(e.join):void 0,answer:yn(e.answer)?Gt.fromJSON(e.answer):void 0,offer:yn(e.offer)?Gt.fromJSON(e.offer):void 0,trickle:yn(e.trickle)?Wt.fromJSON(e.trickle):void 0,update:yn(e.update)?Jt.fromJSON(e.update):void 0,trackPublished:yn(e.trackPublished)?Xt.fromJSON(e.trackPublished):void 0,leave:yn(e.leave)?tn.fromJSON(e.leave):void 0,mute:yn(e.mute)?Ht.fromJSON(e.mute):void 0,speakersChanged:yn(e.speakersChanged)?an.fromJSON(e.speakersChanged):void 0,roomUpdate:yn(e.roomUpdate)?on.fromJSON(e.roomUpdate):void 0,connectionQuality:yn(e.connectionQuality)?cn.fromJSON(e.connectionQuality):void 0,streamStateUpdate:yn(e.streamStateUpdate)?un.fromJSON(e.streamStateUpdate):void 0,subscribedQualityUpdate:yn(e.subscribedQualityUpdate)?pn.fromJSON(e.subscribedQualityUpdate):void 0,subscriptionPermissionUpdate:yn(e.subscriptionPermissionUpdate)?mn.fromJSON(e.subscriptionPermissionUpdate):void 0,refreshToken:yn(e.refreshToken)?String(e.refreshToken):void 0,trackUnpublished:yn(e.trackUnpublished)?Yt.fromJSON(e.trackUnpublished):void 0}),toJSON(e){const t={};return void 0!==e.join&&(t.join=e.join?Qt.toJSON(e.join):void 0),void 0!==e.answer&&(t.answer=e.answer?Gt.toJSON(e.answer):void 0),void 0!==e.offer&&(t.offer=e.offer?Gt.toJSON(e.offer):void 0),void 0!==e.trickle&&(t.trickle=e.trickle?Wt.toJSON(e.trickle):void 0),void 0!==e.update&&(t.update=e.update?Jt.toJSON(e.update):void 0),void 0!==e.trackPublished&&(t.trackPublished=e.trackPublished?Xt.toJSON(e.trackPublished):void 0),void 0!==e.leave&&(t.leave=e.leave?tn.toJSON(e.leave):void 0),void 0!==e.mute&&(t.mute=e.mute?Ht.toJSON(e.mute):void 0),void 0!==e.speakersChanged&&(t.speakersChanged=e.speakersChanged?an.toJSON(e.speakersChanged):void 0),void 0!==e.roomUpdate&&(t.roomUpdate=e.roomUpdate?on.toJSON(e.roomUpdate):void 0),void 0!==e.connectionQuality&&(t.connectionQuality=e.connectionQuality?cn.toJSON(e.connectionQuality):void 0),void 0!==e.streamStateUpdate&&(t.streamStateUpdate=e.streamStateUpdate?un.toJSON(e.streamStateUpdate):void 0),void 0!==e.subscribedQualityUpdate&&(t.subscribedQualityUpdate=e.subscribedQualityUpdate?pn.toJSON(e.subscribedQualityUpdate):void 0),void 0!==e.subscriptionPermissionUpdate&&(t.subscriptionPermissionUpdate=e.subscriptionPermissionUpdate?mn.toJSON(e.subscriptionPermissionUpdate):void 0),void 0!==e.refreshToken&&(t.refreshToken=e.refreshToken),void 0!==e.trackUnpublished&&(t.trackUnpublished=e.trackUnpublished?Yt.toJSON(e.trackUnpublished):void 0),t},fromPartial(e){var t;const n={join:void 0,answer:void 0,offer:void 0,trickle:void 0,update:void 0,trackPublished:void 0,leave:void 0,mute:void 0,speakersChanged:void 0,roomUpdate:void 0,connectionQuality:void 0,streamStateUpdate:void 0,subscribedQualityUpdate:void 0,subscriptionPermissionUpdate:void 0,refreshToken:void 0,trackUnpublished:void 0};return n.join=void 0!==e.join&&null!==e.join?Qt.fromPartial(e.join):void 0,n.answer=void 0!==e.answer&&null!==e.answer?Gt.fromPartial(e.answer):void 0,n.offer=void 0!==e.offer&&null!==e.offer?Gt.fromPartial(e.offer):void 0,n.trickle=void 0!==e.trickle&&null!==e.trickle?Wt.fromPartial(e.trickle):void 0,n.update=void 0!==e.update&&null!==e.update?Jt.fromPartial(e.update):void 0,n.trackPublished=void 0!==e.trackPublished&&null!==e.trackPublished?Xt.fromPartial(e.trackPublished):void 0,n.leave=void 0!==e.leave&&null!==e.leave?tn.fromPartial(e.leave):void 0,n.mute=void 0!==e.mute&&null!==e.mute?Ht.fromPartial(e.mute):void 0,n.speakersChanged=void 0!==e.speakersChanged&&null!==e.speakersChanged?an.fromPartial(e.speakersChanged):void 0,n.roomUpdate=void 0!==e.roomUpdate&&null!==e.roomUpdate?on.fromPartial(e.roomUpdate):void 0,n.connectionQuality=void 0!==e.connectionQuality&&null!==e.connectionQuality?cn.fromPartial(e.connectionQuality):void 0,n.streamStateUpdate=void 0!==e.streamStateUpdate&&null!==e.streamStateUpdate?un.fromPartial(e.streamStateUpdate):void 0,n.subscribedQualityUpdate=void 0!==e.subscribedQualityUpdate&&null!==e.subscribedQualityUpdate?pn.fromPartial(e.subscribedQualityUpdate):void 0,n.subscriptionPermissionUpdate=void 0!==e.subscriptionPermissionUpdate&&null!==e.subscriptionPermissionUpdate?mn.fromPartial(e.subscriptionPermissionUpdate):void 0,n.refreshToken=null!==(t=e.refreshToken)&&void 0!==t?t:void 0,n.trackUnpublished=void 0!==e.trackUnpublished&&null!==e.trackUnpublished?Yt.fromPartial(e.trackUnpublished):void 0,n}},qt={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();""!==e.cid&&t.uint32(10).string(e.cid),""!==e.name&&t.uint32(18).string(e.name),0!==e.type&&t.uint32(24).int32(e.type),0!==e.width&&t.uint32(32).uint32(e.width),0!==e.height&&t.uint32(40).uint32(e.height),!0===e.muted&&t.uint32(48).bool(e.muted),!0===e.disableDtx&&t.uint32(56).bool(e.disableDtx),0!==e.source&&t.uint32(64).int32(e.source);for(const n of e.layers)yt.encode(n,t.uint32(74).fork()).ldelim();return t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={cid:"",name:"",type:0,width:0,height:0,muted:!1,disableDtx:!1,source:0,layers:[]};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.cid=n.string();break;case 2:r.name=n.string();break;case 3:r.type=n.int32();break;case 4:r.width=n.uint32();break;case 5:r.height=n.uint32();break;case 6:r.muted=n.bool();break;case 7:r.disableDtx=n.bool();break;case 8:r.source=n.int32();break;case 9:r.layers.push(yt.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return r},fromJSON:e=>({cid:yn(e.cid)?String(e.cid):"",name:yn(e.name)?String(e.name):"",type:yn(e.type)?nt(e.type):0,width:yn(e.width)?Number(e.width):0,height:yn(e.height)?Number(e.height):0,muted:!!yn(e.muted)&&Boolean(e.muted),disableDtx:!!yn(e.disableDtx)&&Boolean(e.disableDtx),source:yn(e.source)?rt(e.source):0,layers:Array.isArray(null==e?void 0:e.layers)?e.layers.map((e=>yt.fromJSON(e))):[]}),toJSON(e){const t={};return void 0!==e.cid&&(t.cid=e.cid),void 0!==e.name&&(t.name=e.name),void 0!==e.type&&(t.type=it(e.type)),void 0!==e.width&&(t.width=Math.round(e.width)),void 0!==e.height&&(t.height=Math.round(e.height)),void 0!==e.muted&&(t.muted=e.muted),void 0!==e.disableDtx&&(t.disableDtx=e.disableDtx),void 0!==e.source&&(t.source=at(e.source)),e.layers?t.layers=e.layers.map((e=>e?yt.toJSON(e):void 0)):t.layers=[],t},fromPartial(e){var t,n,i,r,a,o,s,c,l;const u={cid:"",name:"",type:0,width:0,height:0,muted:!1,disableDtx:!1,source:0,layers:[]};return u.cid=null!==(t=e.cid)&&void 0!==t?t:"",u.name=null!==(n=e.name)&&void 0!==n?n:"",u.type=null!==(i=e.type)&&void 0!==i?i:0,u.width=null!==(r=e.width)&&void 0!==r?r:0,u.height=null!==(a=e.height)&&void 0!==a?a:0,u.muted=null!==(o=e.muted)&&void 0!==o&&o,u.disableDtx=null!==(s=e.disableDtx)&&void 0!==s&&s,u.source=null!==(c=e.source)&&void 0!==c?c:0,u.layers=(null===(l=e.layers)||void 0===l?void 0:l.map((e=>yt.fromPartial(e))))||[],u}},Wt={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return""!==e.candidateInit&&t.uint32(10).string(e.candidateInit),0!==e.target&&t.uint32(16).int32(e.target),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={candidateInit:"",target:0};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.candidateInit=n.string();break;case 2:r.target=n.int32();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({candidateInit:yn(e.candidateInit)?String(e.candidateInit):"",target:yn(e.target)?Ut(e.target):0}),toJSON(e){const t={};return void 0!==e.candidateInit&&(t.candidateInit=e.candidateInit),void 0!==e.target&&(t.target=Ft(e.target)),t},fromPartial(e){var t,n;const i={candidateInit:"",target:0};return i.candidateInit=null!==(t=e.candidateInit)&&void 0!==t?t:"",i.target=null!==(n=e.target)&&void 0!==n?n:0,i}},Ht={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return""!==e.sid&&t.uint32(10).string(e.sid),!0===e.muted&&t.uint32(16).bool(e.muted),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={sid:"",muted:!1};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.sid=n.string();break;case 2:r.muted=n.bool();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({sid:yn(e.sid)?String(e.sid):"",muted:!!yn(e.muted)&&Boolean(e.muted)}),toJSON(e){const t={};return void 0!==e.sid&&(t.sid=e.sid),void 0!==e.muted&&(t.muted=e.muted),t},fromPartial(e){var t,n;const i={sid:"",muted:!1};return i.sid=null!==(t=e.sid)&&void 0!==t?t:"",i.muted=null!==(n=e.muted)&&void 0!==n&&n,i}},Qt={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();void 0!==e.room&&ft.encode(e.room,t.uint32(10).fork()).ldelim(),void 0!==e.participant&&vt.encode(e.participant,t.uint32(18).fork()).ldelim();for(const n of e.otherParticipants)vt.encode(n,t.uint32(26).fork()).ldelim();""!==e.serverVersion&&t.uint32(34).string(e.serverVersion);for(const n of e.iceServers)rn.encode(n,t.uint32(42).fork()).ldelim();return!0===e.subscriberPrimary&&t.uint32(48).bool(e.subscriberPrimary),""!==e.alternativeUrl&&t.uint32(58).string(e.alternativeUrl),void 0!==e.clientConfiguration&&Et.encode(e.clientConfiguration,t.uint32(66).fork()).ldelim(),""!==e.serverRegion&&t.uint32(74).string(e.serverRegion),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={room:void 0,participant:void 0,otherParticipants:[],serverVersion:"",iceServers:[],subscriberPrimary:!1,alternativeUrl:"",clientConfiguration:void 0,serverRegion:""};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.room=ft.decode(n,n.uint32());break;case 2:r.participant=vt.decode(n,n.uint32());break;case 3:r.otherParticipants.push(vt.decode(n,n.uint32()));break;case 4:r.serverVersion=n.string();break;case 5:r.iceServers.push(rn.decode(n,n.uint32()));break;case 6:r.subscriberPrimary=n.bool();break;case 7:r.alternativeUrl=n.string();break;case 8:r.clientConfiguration=Et.decode(n,n.uint32());break;case 9:r.serverRegion=n.string();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({room:yn(e.room)?ft.fromJSON(e.room):void 0,participant:yn(e.participant)?vt.fromJSON(e.participant):void 0,otherParticipants:Array.isArray(null==e?void 0:e.otherParticipants)?e.otherParticipants.map((e=>vt.fromJSON(e))):[],serverVersion:yn(e.serverVersion)?String(e.serverVersion):"",iceServers:Array.isArray(null==e?void 0:e.iceServers)?e.iceServers.map((e=>rn.fromJSON(e))):[],subscriberPrimary:!!yn(e.subscriberPrimary)&&Boolean(e.subscriberPrimary),alternativeUrl:yn(e.alternativeUrl)?String(e.alternativeUrl):"",clientConfiguration:yn(e.clientConfiguration)?Et.fromJSON(e.clientConfiguration):void 0,serverRegion:yn(e.serverRegion)?String(e.serverRegion):""}),toJSON(e){const t={};return void 0!==e.room&&(t.room=e.room?ft.toJSON(e.room):void 0),void 0!==e.participant&&(t.participant=e.participant?vt.toJSON(e.participant):void 0),e.otherParticipants?t.otherParticipants=e.otherParticipants.map((e=>e?vt.toJSON(e):void 0)):t.otherParticipants=[],void 0!==e.serverVersion&&(t.serverVersion=e.serverVersion),e.iceServers?t.iceServers=e.iceServers.map((e=>e?rn.toJSON(e):void 0)):t.iceServers=[],void 0!==e.subscriberPrimary&&(t.subscriberPrimary=e.subscriberPrimary),void 0!==e.alternativeUrl&&(t.alternativeUrl=e.alternativeUrl),void 0!==e.clientConfiguration&&(t.clientConfiguration=e.clientConfiguration?Et.toJSON(e.clientConfiguration):void 0),void 0!==e.serverRegion&&(t.serverRegion=e.serverRegion),t},fromPartial(e){var t,n,i,r,a,o;const s={room:void 0,participant:void 0,otherParticipants:[],serverVersion:"",iceServers:[],subscriberPrimary:!1,alternativeUrl:"",clientConfiguration:void 0,serverRegion:""};return s.room=void 0!==e.room&&null!==e.room?ft.fromPartial(e.room):void 0,s.participant=void 0!==e.participant&&null!==e.participant?vt.fromPartial(e.participant):void 0,s.otherParticipants=(null===(t=e.otherParticipants)||void 0===t?void 0:t.map((e=>vt.fromPartial(e))))||[],s.serverVersion=null!==(n=e.serverVersion)&&void 0!==n?n:"",s.iceServers=(null===(i=e.iceServers)||void 0===i?void 0:i.map((e=>rn.fromPartial(e))))||[],s.subscriberPrimary=null!==(r=e.subscriberPrimary)&&void 0!==r&&r,s.alternativeUrl=null!==(a=e.alternativeUrl)&&void 0!==a?a:"",s.clientConfiguration=void 0!==e.clientConfiguration&&null!==e.clientConfiguration?Et.fromPartial(e.clientConfiguration):void 0,s.serverRegion=null!==(o=e.serverRegion)&&void 0!==o?o:"",s}},Xt={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return""!==e.cid&&t.uint32(10).string(e.cid),void 0!==e.track&&bt.encode(e.track,t.uint32(18).fork()).ldelim(),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={cid:"",track:void 0};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.cid=n.string();break;case 2:r.track=bt.decode(n,n.uint32());break;default:n.skipType(7&e)}}return r},fromJSON:e=>({cid:yn(e.cid)?String(e.cid):"",track:yn(e.track)?bt.fromJSON(e.track):void 0}),toJSON(e){const t={};return void 0!==e.cid&&(t.cid=e.cid),void 0!==e.track&&(t.track=e.track?bt.toJSON(e.track):void 0),t},fromPartial(e){var t;const n={cid:"",track:void 0};return n.cid=null!==(t=e.cid)&&void 0!==t?t:"",n.track=void 0!==e.track&&null!==e.track?bt.fromPartial(e.track):void 0,n}},Yt={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return""!==e.trackSid&&t.uint32(10).string(e.trackSid),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={trackSid:""};for(;n.pos<i;){const e=n.uint32();e>>>3==1?r.trackSid=n.string():n.skipType(7&e)}return r},fromJSON:e=>({trackSid:yn(e.trackSid)?String(e.trackSid):""}),toJSON(e){const t={};return void 0!==e.trackSid&&(t.trackSid=e.trackSid),t},fromPartial(e){var t;const n={trackSid:""};return n.trackSid=null!==(t=e.trackSid)&&void 0!==t?t:"",n}},Gt={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return""!==e.type&&t.uint32(10).string(e.type),""!==e.sdp&&t.uint32(18).string(e.sdp),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={type:"",sdp:""};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.type=n.string();break;case 2:r.sdp=n.string();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({type:yn(e.type)?String(e.type):"",sdp:yn(e.sdp)?String(e.sdp):""}),toJSON(e){const t={};return void 0!==e.type&&(t.type=e.type),void 0!==e.sdp&&(t.sdp=e.sdp),t},fromPartial(e){var t,n;const i={type:"",sdp:""};return i.type=null!==(t=e.type)&&void 0!==t?t:"",i.sdp=null!==(n=e.sdp)&&void 0!==n?n:"",i}},Jt={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();for(const n of e.participants)vt.encode(n,t.uint32(10).fork()).ldelim();return t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={participants:[]};for(;n.pos<i;){const e=n.uint32();e>>>3==1?r.participants.push(vt.decode(n,n.uint32())):n.skipType(7&e)}return r},fromJSON:e=>({participants:Array.isArray(null==e?void 0:e.participants)?e.participants.map((e=>vt.fromJSON(e))):[]}),toJSON(e){const t={};return e.participants?t.participants=e.participants.map((e=>e?vt.toJSON(e):void 0)):t.participants=[],t},fromPartial(e){var t;const n={participants:[]};return n.participants=(null===(t=e.participants)||void 0===t?void 0:t.map((e=>vt.fromPartial(e))))||[],n}},Kt={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();for(const n of e.trackSids)t.uint32(10).string(n);!0===e.subscribe&&t.uint32(16).bool(e.subscribe);for(const n of e.participantTracks)Ct.encode(n,t.uint32(26).fork()).ldelim();return t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={trackSids:[],subscribe:!1,participantTracks:[]};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.trackSids.push(n.string());break;case 2:r.subscribe=n.bool();break;case 3:r.participantTracks.push(Ct.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return r},fromJSON:e=>({trackSids:Array.isArray(null==e?void 0:e.trackSids)?e.trackSids.map((e=>String(e))):[],subscribe:!!yn(e.subscribe)&&Boolean(e.subscribe),participantTracks:Array.isArray(null==e?void 0:e.participantTracks)?e.participantTracks.map((e=>Ct.fromJSON(e))):[]}),toJSON(e){const t={};return e.trackSids?t.trackSids=e.trackSids.map((e=>e)):t.trackSids=[],void 0!==e.subscribe&&(t.subscribe=e.subscribe),e.participantTracks?t.participantTracks=e.participantTracks.map((e=>e?Ct.toJSON(e):void 0)):t.participantTracks=[],t},fromPartial(e){var t,n,i;const r={trackSids:[],subscribe:!1,participantTracks:[]};return r.trackSids=(null===(t=e.trackSids)||void 0===t?void 0:t.map((e=>e)))||[],r.subscribe=null!==(n=e.subscribe)&&void 0!==n&&n,r.participantTracks=(null===(i=e.participantTracks)||void 0===i?void 0:i.map((e=>Ct.fromPartial(e))))||[],r}},en={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();for(const n of e.trackSids)t.uint32(10).string(n);return!0===e.disabled&&t.uint32(24).bool(e.disabled),0!==e.quality&&t.uint32(32).int32(e.quality),0!==e.width&&t.uint32(40).uint32(e.width),0!==e.height&&t.uint32(48).uint32(e.height),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={trackSids:[],disabled:!1,quality:0,width:0,height:0};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.trackSids.push(n.string());break;case 3:r.disabled=n.bool();break;case 4:r.quality=n.int32();break;case 5:r.width=n.uint32();break;case 6:r.height=n.uint32();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({trackSids:Array.isArray(null==e?void 0:e.trackSids)?e.trackSids.map((e=>String(e))):[],disabled:!!yn(e.disabled)&&Boolean(e.disabled),quality:yn(e.quality)?ot(e.quality):0,width:yn(e.width)?Number(e.width):0,height:yn(e.height)?Number(e.height):0}),toJSON(e){const t={};return e.trackSids?t.trackSids=e.trackSids.map((e=>e)):t.trackSids=[],void 0!==e.disabled&&(t.disabled=e.disabled),void 0!==e.quality&&(t.quality=st(e.quality)),void 0!==e.width&&(t.width=Math.round(e.width)),void 0!==e.height&&(t.height=Math.round(e.height)),t},fromPartial(e){var t,n,i,r,a;const o={trackSids:[],disabled:!1,quality:0,width:0,height:0};return o.trackSids=(null===(t=e.trackSids)||void 0===t?void 0:t.map((e=>e)))||[],o.disabled=null!==(n=e.disabled)&&void 0!==n&&n,o.quality=null!==(i=e.quality)&&void 0!==i?i:0,o.width=null!==(r=e.width)&&void 0!==r?r:0,o.height=null!==(a=e.height)&&void 0!==a?a:0,o}},tn={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return!0===e.canReconnect&&t.uint32(8).bool(e.canReconnect),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={canReconnect:!1};for(;n.pos<i;){const e=n.uint32();e>>>3==1?r.canReconnect=n.bool():n.skipType(7&e)}return r},fromJSON:e=>({canReconnect:!!yn(e.canReconnect)&&Boolean(e.canReconnect)}),toJSON(e){const t={};return void 0!==e.canReconnect&&(t.canReconnect=e.canReconnect),t},fromPartial(e){var t;const n={canReconnect:!1};return n.canReconnect=null!==(t=e.canReconnect)&&void 0!==t&&t,n}},nn={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();""!==e.trackSid&&t.uint32(10).string(e.trackSid);for(const n of e.layers)yt.encode(n,t.uint32(18).fork()).ldelim();return t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={trackSid:"",layers:[]};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.trackSid=n.string();break;case 2:r.layers.push(yt.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return r},fromJSON:e=>({trackSid:yn(e.trackSid)?String(e.trackSid):"",layers:Array.isArray(null==e?void 0:e.layers)?e.layers.map((e=>yt.fromJSON(e))):[]}),toJSON(e){const t={};return void 0!==e.trackSid&&(t.trackSid=e.trackSid),e.layers?t.layers=e.layers.map((e=>e?yt.toJSON(e):void 0)):t.layers=[],t},fromPartial(e){var t,n;const i={trackSid:"",layers:[]};return i.trackSid=null!==(t=e.trackSid)&&void 0!==t?t:"",i.layers=(null===(n=e.layers)||void 0===n?void 0:n.map((e=>yt.fromPartial(e))))||[],i}},rn={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();for(const n of e.urls)t.uint32(10).string(n);return""!==e.username&&t.uint32(18).string(e.username),""!==e.credential&&t.uint32(26).string(e.credential),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={urls:[],username:"",credential:""};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.urls.push(n.string());break;case 2:r.username=n.string();break;case 3:r.credential=n.string();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({urls:Array.isArray(null==e?void 0:e.urls)?e.urls.map((e=>String(e))):[],username:yn(e.username)?String(e.username):"",credential:yn(e.credential)?String(e.credential):""}),toJSON(e){const t={};return e.urls?t.urls=e.urls.map((e=>e)):t.urls=[],void 0!==e.username&&(t.username=e.username),void 0!==e.credential&&(t.credential=e.credential),t},fromPartial(e){var t,n,i;const r={urls:[],username:"",credential:""};return r.urls=(null===(t=e.urls)||void 0===t?void 0:t.map((e=>e)))||[],r.username=null!==(n=e.username)&&void 0!==n?n:"",r.credential=null!==(i=e.credential)&&void 0!==i?i:"",r}},an={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();for(const n of e.speakers)wt.encode(n,t.uint32(10).fork()).ldelim();return t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={speakers:[]};for(;n.pos<i;){const e=n.uint32();e>>>3==1?r.speakers.push(wt.decode(n,n.uint32())):n.skipType(7&e)}return r},fromJSON:e=>({speakers:Array.isArray(null==e?void 0:e.speakers)?e.speakers.map((e=>wt.fromJSON(e))):[]}),toJSON(e){const t={};return e.speakers?t.speakers=e.speakers.map((e=>e?wt.toJSON(e):void 0)):t.speakers=[],t},fromPartial(e){var t;const n={speakers:[]};return n.speakers=(null===(t=e.speakers)||void 0===t?void 0:t.map((e=>wt.fromPartial(e))))||[],n}},on={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return void 0!==e.room&&ft.encode(e.room,t.uint32(10).fork()).ldelim(),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={room:void 0};for(;n.pos<i;){const e=n.uint32();e>>>3==1?r.room=ft.decode(n,n.uint32()):n.skipType(7&e)}return r},fromJSON:e=>({room:yn(e.room)?ft.fromJSON(e.room):void 0}),toJSON(e){const t={};return void 0!==e.room&&(t.room=e.room?ft.toJSON(e.room):void 0),t},fromPartial(e){const t={room:void 0};return t.room=void 0!==e.room&&null!==e.room?ft.fromPartial(e.room):void 0,t}},sn={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return""!==e.participantSid&&t.uint32(10).string(e.participantSid),0!==e.quality&&t.uint32(16).int32(e.quality),0!==e.score&&t.uint32(29).float(e.score),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={participantSid:"",quality:0,score:0};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.participantSid=n.string();break;case 2:r.quality=n.int32();break;case 3:r.score=n.float();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({participantSid:yn(e.participantSid)?String(e.participantSid):"",quality:yn(e.quality)?ct(e.quality):0,score:yn(e.score)?Number(e.score):0}),toJSON(e){const t={};return void 0!==e.participantSid&&(t.participantSid=e.participantSid),void 0!==e.quality&&(t.quality=function(e){switch(e){case Xe.POOR:return"POOR";case Xe.GOOD:return"GOOD";case Xe.EXCELLENT:return"EXCELLENT";default:return"UNKNOWN"}}(e.quality)),void 0!==e.score&&(t.score=e.score),t},fromPartial(e){var t,n,i;const r={participantSid:"",quality:0,score:0};return r.participantSid=null!==(t=e.participantSid)&&void 0!==t?t:"",r.quality=null!==(n=e.quality)&&void 0!==n?n:0,r.score=null!==(i=e.score)&&void 0!==i?i:0,r}},cn={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();for(const n of e.updates)sn.encode(n,t.uint32(10).fork()).ldelim();return t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={updates:[]};for(;n.pos<i;){const e=n.uint32();e>>>3==1?r.updates.push(sn.decode(n,n.uint32())):n.skipType(7&e)}return r},fromJSON:e=>({updates:Array.isArray(null==e?void 0:e.updates)?e.updates.map((e=>sn.fromJSON(e))):[]}),toJSON(e){const t={};return e.updates?t.updates=e.updates.map((e=>e?sn.toJSON(e):void 0)):t.updates=[],t},fromPartial(e){var t;const n={updates:[]};return n.updates=(null===(t=e.updates)||void 0===t?void 0:t.map((e=>sn.fromPartial(e))))||[],n}},ln={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return""!==e.participantSid&&t.uint32(10).string(e.participantSid),""!==e.trackSid&&t.uint32(18).string(e.trackSid),0!==e.state&&t.uint32(24).int32(e.state),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={participantSid:"",trackSid:"",state:0};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.participantSid=n.string();break;case 2:r.trackSid=n.string();break;case 3:r.state=n.int32();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({participantSid:yn(e.participantSid)?String(e.participantSid):"",trackSid:yn(e.trackSid)?String(e.trackSid):"",state:yn(e.state)?Zt(e.state):0}),toJSON(e){const t={};return void 0!==e.participantSid&&(t.participantSid=e.participantSid),void 0!==e.trackSid&&(t.trackSid=e.trackSid),void 0!==e.state&&(t.state=function(e){switch(e){case jt.ACTIVE:return"ACTIVE";case jt.PAUSED:return"PAUSED";default:return"UNKNOWN"}}(e.state)),t},fromPartial(e){var t,n,i;const r={participantSid:"",trackSid:"",state:0};return r.participantSid=null!==(t=e.participantSid)&&void 0!==t?t:"",r.trackSid=null!==(n=e.trackSid)&&void 0!==n?n:"",r.state=null!==(i=e.state)&&void 0!==i?i:0,r}},un={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();for(const n of e.streamStates)ln.encode(n,t.uint32(10).fork()).ldelim();return t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={streamStates:[]};for(;n.pos<i;){const e=n.uint32();e>>>3==1?r.streamStates.push(ln.decode(n,n.uint32())):n.skipType(7&e)}return r},fromJSON:e=>({streamStates:Array.isArray(null==e?void 0:e.streamStates)?e.streamStates.map((e=>ln.fromJSON(e))):[]}),toJSON(e){const t={};return e.streamStates?t.streamStates=e.streamStates.map((e=>e?ln.toJSON(e):void 0)):t.streamStates=[],t},fromPartial(e){var t;const n={streamStates:[]};return n.streamStates=(null===(t=e.streamStates)||void 0===t?void 0:t.map((e=>ln.fromPartial(e))))||[],n}},dn={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return 0!==e.quality&&t.uint32(8).int32(e.quality),!0===e.enabled&&t.uint32(16).bool(e.enabled),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={quality:0,enabled:!1};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.quality=n.int32();break;case 2:r.enabled=n.bool();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({quality:yn(e.quality)?ot(e.quality):0,enabled:!!yn(e.enabled)&&Boolean(e.enabled)}),toJSON(e){const t={};return void 0!==e.quality&&(t.quality=st(e.quality)),void 0!==e.enabled&&(t.enabled=e.enabled),t},fromPartial(e){var t,n;const i={quality:0,enabled:!1};return i.quality=null!==(t=e.quality)&&void 0!==t?t:0,i.enabled=null!==(n=e.enabled)&&void 0!==n&&n,i}},pn={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();""!==e.trackSid&&t.uint32(10).string(e.trackSid);for(const n of e.subscribedQualities)dn.encode(n,t.uint32(18).fork()).ldelim();return t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={trackSid:"",subscribedQualities:[]};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.trackSid=n.string();break;case 2:r.subscribedQualities.push(dn.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return r},fromJSON:e=>({trackSid:yn(e.trackSid)?String(e.trackSid):"",subscribedQualities:Array.isArray(null==e?void 0:e.subscribedQualities)?e.subscribedQualities.map((e=>dn.fromJSON(e))):[]}),toJSON(e){const t={};return void 0!==e.trackSid&&(t.trackSid=e.trackSid),e.subscribedQualities?t.subscribedQualities=e.subscribedQualities.map((e=>e?dn.toJSON(e):void 0)):t.subscribedQualities=[],t},fromPartial(e){var t,n;const i={trackSid:"",subscribedQualities:[]};return i.trackSid=null!==(t=e.trackSid)&&void 0!==t?t:"",i.subscribedQualities=(null===(n=e.subscribedQualities)||void 0===n?void 0:n.map((e=>dn.fromPartial(e))))||[],i}},hn={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();""!==e.participantSid&&t.uint32(10).string(e.participantSid),!0===e.allTracks&&t.uint32(16).bool(e.allTracks);for(const n of e.trackSids)t.uint32(26).string(n);return""!==e.participantIdentity&&t.uint32(34).string(e.participantIdentity),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={participantSid:"",allTracks:!1,trackSids:[],participantIdentity:""};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.participantSid=n.string();break;case 2:r.allTracks=n.bool();break;case 3:r.trackSids.push(n.string());break;case 4:r.participantIdentity=n.string();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({participantSid:yn(e.participantSid)?String(e.participantSid):"",allTracks:!!yn(e.allTracks)&&Boolean(e.allTracks),trackSids:Array.isArray(null==e?void 0:e.trackSids)?e.trackSids.map((e=>String(e))):[],participantIdentity:yn(e.participantIdentity)?String(e.participantIdentity):""}),toJSON(e){const t={};return void 0!==e.participantSid&&(t.participantSid=e.participantSid),void 0!==e.allTracks&&(t.allTracks=e.allTracks),e.trackSids?t.trackSids=e.trackSids.map((e=>e)):t.trackSids=[],void 0!==e.participantIdentity&&(t.participantIdentity=e.participantIdentity),t},fromPartial(e){var t,n,i,r;const a={participantSid:"",allTracks:!1,trackSids:[],participantIdentity:""};return a.participantSid=null!==(t=e.participantSid)&&void 0!==t?t:"",a.allTracks=null!==(n=e.allTracks)&&void 0!==n&&n,a.trackSids=(null===(i=e.trackSids)||void 0===i?void 0:i.map((e=>e)))||[],a.participantIdentity=null!==(r=e.participantIdentity)&&void 0!==r?r:"",a}},fn={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();!0===e.allParticipants&&t.uint32(8).bool(e.allParticipants);for(const n of e.trackPermissions)hn.encode(n,t.uint32(18).fork()).ldelim();return t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={allParticipants:!1,trackPermissions:[]};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.allParticipants=n.bool();break;case 2:r.trackPermissions.push(hn.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return r},fromJSON:e=>({allParticipants:!!yn(e.allParticipants)&&Boolean(e.allParticipants),trackPermissions:Array.isArray(null==e?void 0:e.trackPermissions)?e.trackPermissions.map((e=>hn.fromJSON(e))):[]}),toJSON(e){const t={};return void 0!==e.allParticipants&&(t.allParticipants=e.allParticipants),e.trackPermissions?t.trackPermissions=e.trackPermissions.map((e=>e?hn.toJSON(e):void 0)):t.trackPermissions=[],t},fromPartial(e){var t,n;const i={allParticipants:!1,trackPermissions:[]};return i.allParticipants=null!==(t=e.allParticipants)&&void 0!==t&&t,i.trackPermissions=(null===(n=e.trackPermissions)||void 0===n?void 0:n.map((e=>hn.fromPartial(e))))||[],i}},mn={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return""!==e.participantSid&&t.uint32(10).string(e.participantSid),""!==e.trackSid&&t.uint32(18).string(e.trackSid),!0===e.allowed&&t.uint32(24).bool(e.allowed),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={participantSid:"",trackSid:"",allowed:!1};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.participantSid=n.string();break;case 2:r.trackSid=n.string();break;case 3:r.allowed=n.bool();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({participantSid:yn(e.participantSid)?String(e.participantSid):"",trackSid:yn(e.trackSid)?String(e.trackSid):"",allowed:!!yn(e.allowed)&&Boolean(e.allowed)}),toJSON(e){const t={};return void 0!==e.participantSid&&(t.participantSid=e.participantSid),void 0!==e.trackSid&&(t.trackSid=e.trackSid),void 0!==e.allowed&&(t.allowed=e.allowed),t},fromPartial(e){var t,n,i;const r={participantSid:"",trackSid:"",allowed:!1};return r.participantSid=null!==(t=e.participantSid)&&void 0!==t?t:"",r.trackSid=null!==(n=e.trackSid)&&void 0!==n?n:"",r.allowed=null!==(i=e.allowed)&&void 0!==i&&i,r}},gn={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();void 0!==e.answer&&Gt.encode(e.answer,t.uint32(10).fork()).ldelim(),void 0!==e.subscription&&Kt.encode(e.subscription,t.uint32(18).fork()).ldelim();for(const n of e.publishTracks)Xt.encode(n,t.uint32(26).fork()).ldelim();for(const n of e.dataChannels)vn.encode(n,t.uint32(34).fork()).ldelim();return t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={answer:void 0,subscription:void 0,publishTracks:[],dataChannels:[]};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.answer=Gt.decode(n,n.uint32());break;case 2:r.subscription=Kt.decode(n,n.uint32());break;case 3:r.publishTracks.push(Xt.decode(n,n.uint32()));break;case 4:r.dataChannels.push(vn.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return r},fromJSON:e=>({answer:yn(e.answer)?Gt.fromJSON(e.answer):void 0,subscription:yn(e.subscription)?Kt.fromJSON(e.subscription):void 0,publishTracks:Array.isArray(null==e?void 0:e.publishTracks)?e.publishTracks.map((e=>Xt.fromJSON(e))):[],dataChannels:Array.isArray(null==e?void 0:e.dataChannels)?e.dataChannels.map((e=>vn.fromJSON(e))):[]}),toJSON(e){const t={};return void 0!==e.answer&&(t.answer=e.answer?Gt.toJSON(e.answer):void 0),void 0!==e.subscription&&(t.subscription=e.subscription?Kt.toJSON(e.subscription):void 0),e.publishTracks?t.publishTracks=e.publishTracks.map((e=>e?Xt.toJSON(e):void 0)):t.publishTracks=[],e.dataChannels?t.dataChannels=e.dataChannels.map((e=>e?vn.toJSON(e):void 0)):t.dataChannels=[],t},fromPartial(e){var t,n;const i={answer:void 0,subscription:void 0,publishTracks:[],dataChannels:[]};return i.answer=void 0!==e.answer&&null!==e.answer?Gt.fromPartial(e.answer):void 0,i.subscription=void 0!==e.subscription&&null!==e.subscription?Kt.fromPartial(e.subscription):void 0,i.publishTracks=(null===(t=e.publishTracks)||void 0===t?void 0:t.map((e=>Xt.fromPartial(e))))||[],i.dataChannels=(null===(n=e.dataChannels)||void 0===n?void 0:n.map((e=>vn.fromPartial(e))))||[],i}},vn={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return""!==e.label&&t.uint32(10).string(e.label),0!==e.id&&t.uint32(16).uint32(e.id),0!==e.target&&t.uint32(24).int32(e.target),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={label:"",id:0,target:0};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.label=n.string();break;case 2:r.id=n.uint32();break;case 3:r.target=n.int32();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({label:yn(e.label)?String(e.label):"",id:yn(e.id)?Number(e.id):0,target:yn(e.target)?Ut(e.target):0}),toJSON(e){const t={};return void 0!==e.label&&(t.label=e.label),void 0!==e.id&&(t.id=Math.round(e.id)),void 0!==e.target&&(t.target=Ft(e.target)),t},fromPartial(e){var t,n,i;const r={label:"",id:0,target:0};return r.label=null!==(t=e.label)&&void 0!==t?t:"",r.id=null!==(n=e.id)&&void 0!==n?n:0,r.target=null!==(i=e.target)&&void 0!==i?i:0,r}},bn={encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.Writer.create();return void 0!==e.speakerUpdate&&t.uint32(8).int32(e.speakerUpdate),void 0!==e.nodeFailure&&t.uint32(16).bool(e.nodeFailure),void 0!==e.migration&&t.uint32(24).bool(e.migration),void 0!==e.serverLeave&&t.uint32(32).bool(e.serverLeave),t},decode(e,t){const n=e instanceof et.Reader?e:new et.Reader(e);let i=void 0===t?n.len:n.pos+t;const r={speakerUpdate:void 0,nodeFailure:void 0,migration:void 0,serverLeave:void 0};for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.speakerUpdate=n.int32();break;case 2:r.nodeFailure=n.bool();break;case 3:r.migration=n.bool();break;case 4:r.serverLeave=n.bool();break;default:n.skipType(7&e)}}return r},fromJSON:e=>({speakerUpdate:yn(e.speakerUpdate)?Number(e.speakerUpdate):void 0,nodeFailure:yn(e.nodeFailure)?Boolean(e.nodeFailure):void 0,migration:yn(e.migration)?Boolean(e.migration):void 0,serverLeave:yn(e.serverLeave)?Boolean(e.serverLeave):void 0}),toJSON(e){const t={};return void 0!==e.speakerUpdate&&(t.speakerUpdate=Math.round(e.speakerUpdate)),void 0!==e.nodeFailure&&(t.nodeFailure=e.nodeFailure),void 0!==e.migration&&(t.migration=e.migration),void 0!==e.serverLeave&&(t.serverLeave=e.serverLeave),t},fromPartial(e){var t,n,i,r;const a={speakerUpdate:void 0,nodeFailure:void 0,migration:void 0,serverLeave:void 0};return a.speakerUpdate=null!==(t=e.speakerUpdate)&&void 0!==t?t:void 0,a.nodeFailure=null!==(n=e.nodeFailure)&&void 0!==n?n:void 0,a.migration=null!==(i=e.migration)&&void 0!==i?i:void 0,a.serverLeave=null!==(r=e.serverLeave)&&void 0!==r?r:void 0,a}};function yn(e){return null!=e}et.util.Long!==d&&(et.util.Long=d,et.configure());class _n extends Error{constructor(e,t){super(t||"an error has occured"),this.code=e}}class An extends _n{constructor(e){super(1,e)}}class wn extends _n{constructor(e){super(20,e||"Track is invalid")}}class kn extends _n{constructor(e){super(10,e||"Unsupported server")}}class Sn extends _n{constructor(e){super(12,e||"Unexpected connection state")}}var Cn,xn,En,Tn,Pn;!function(e){e.PermissionDenied="PermissionDenied",e.NotFound="NotFound",e.DeviceInUse="DeviceInUse",e.Other="Other"}(Cn||(Cn={})),function(e){e.getFailure=function(t){if(t&&"name"in t)return"NotFoundError"===t.name||"DevicesNotFoundError"===t.name?e.NotFound:"NotAllowedError"===t.name||"PermissionDeniedError"===t.name?e.PermissionDenied:"NotReadableError"===t.name||"TrackStartError"===t.name?e.DeviceInUse:e.Other}}(Cn||(Cn={})),function(e){e.Reconnecting="reconnecting",e.Reconnected="reconnected",e.Disconnected="disconnected",e.StateChanged="stateChanged",e.MediaDevicesChanged="mediaDevicesChanged",e.ParticipantConnected="participantConnected",e.ParticipantDisconnected="participantDisconnected",e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.ActiveSpeakersChanged="activeSpeakersChanged",e.MetadataChanged="metadataChanged",e.ParticipantMetadataChanged="participantMetadataChanged",e.RoomMetadataChanged="roomMetadataChanged",e.DataReceived="dataReceived",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.AudioPlaybackStatusChanged="audioPlaybackChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged"}(xn||(xn={})),function(e){e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.MetadataChanged="metadataChanged",e.ParticipantMetadataChanged="participantMetadataChanged",e.DataReceived="dataReceived",e.IsSpeakingChanged="isSpeakingChanged",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged"}(En||(En={})),function(e){e.TransportsCreated="transportsCreated",e.Connected="connected",e.Disconnected="disconnected",e.Resuming="resuming",e.Resumed="resumed",e.Restarting="restarting",e.Restarted="restarted",e.SignalResumed="signalResumed",e.MediaTrackAdded="mediaTrackAdded",e.ActiveSpeakersUpdate="activeSpeakersUpdate",e.DataPacketReceived="dataPacketReceived"}(Tn||(Tn={})),function(e){e.Message="message",e.Muted="muted",e.Unmuted="unmuted",e.Ended="ended",e.UpdateSettings="updateSettings",e.UpdateSubscription="updateSubscription",e.AudioPlaybackStarted="audioPlaybackStarted",e.AudioPlaybackFailed="audioPlaybackFailed",e.AudioSilenceDetected="audioSilenceDetected",e.VisibilityChanged="visibilityChanged",e.VideoDimensionsChanged="videoDimensionsChanged",e.ElementAttached="elementAttached",e.ElementDetached="elementDetached",e.UpstreamPaused="upstreamPaused",e.UpstreamResumed="upstreamResumed"}(Pn||(Pn={}));const Rn=2e3;function On(e,t){if(!t)return 0;let n,i;return"bytesReceived"in e?(n=e.bytesReceived,i=t.bytesReceived):"bytesSent"in e&&(n=e.bytesSent,i=t.bytesSent),void 0===n||void 0===i||void 0===e.timestamp||void 0===t.timestamp?0:8*(n-i)*1e3/(e.timestamp-t.timestamp)}const Dn="default";class Mn{static getInstance(){return void 0===this.instance&&(this.instance=new Mn),this.instance}async getDevices(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=await navigator.mediaDevices.enumerateDevices();if(t&&(0===n.length||n.some((t=>{const n=""===t.label,i=!e||t.kind===e;return n&&i})))){const t={video:"audioinput"!==e&&"audiooutput"!==e,audio:"videoinput"!==e};await navigator.mediaDevices.getUserMedia(t),n=await navigator.mediaDevices.enumerateDevices()}if(e&&(n=n.filter((t=>t.kind===e))),n.length>1&&n[0].deviceId===Dn){const e=n[0];for(let t=1;t<n.length;t+=1)if(n[t].groupId===e.groupId){const e=n[0];n[0]=n[t],n[t]=e;break}return n.filter((t=>t!==e))}return n}async normalizeDeviceId(e,t,n){if(t!==Dn)return t;const i=(await this.getDevices(e)).find((e=>e.groupId===n&&e.deviceId!==Dn));return null==i?void 0:i.deviceId}}async function In(e){return new Promise((t=>setTimeout(t,e)))}function Nn(){return!!Bn()&&-1!==navigator.userAgent.indexOf("Firefox")}function Ln(){return!!Bn()&&/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent)}function Bn(){return"undefined"!=typeof document}function $n(e){for(const t of e)t.target.handleResize(t)}function jn(e){for(const t of e)t.target.handleVisibilityChanged(t)}Mn.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];let Un=null;const Fn=()=>(Un||(Un=new ResizeObserver($n)),Un);let Zn=null;const zn=()=>(Zn||(Zn=new IntersectionObserver(jn,{root:document,rootMargin:"0px"})),Zn);let Vn,qn;var Wn,Hn={exports:{}},Qn="object"==typeof Reflect?Reflect:null,Xn=Qn&&"function"==typeof Qn.apply?Qn.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};Wn=Qn&&"function"==typeof Qn.ownKeys?Qn.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var Yn=Number.isNaN||function(e){return e!=e};function Gn(){Gn.init.call(this)}Hn.exports=Gn,Hn.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,a),i(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}si(e,t,a,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&si(e,"error",t,{once:!0})}(e,r)}))},Gn.EventEmitter=Gn,Gn.prototype._events=void 0,Gn.prototype._eventsCount=0,Gn.prototype._maxListeners=void 0;var Jn=10;function Kn(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function ei(e){return void 0===e._maxListeners?Gn.defaultMaxListeners:e._maxListeners}function ti(e,t,n,i){var r,a,o,s;if(Kn(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"==typeof o?o=a[t]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),(r=ei(e))>0&&o.length>r&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,s=c,console&&console.warn&&console.warn(s)}return e}function ni(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ii(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=ni.bind(i);return r.listener=n,i.wrapFn=r,r}function ri(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):oi(r,r.length)}function ai(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function oi(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function si(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(a){i.once&&e.removeEventListener(t,r),n(a)}))}}Object.defineProperty(Gn,"defaultMaxListeners",{enumerable:!0,get:function(){return Jn},set:function(e){if("number"!=typeof e||e<0||Yn(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Jn=e}}),Gn.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Gn.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||Yn(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},Gn.prototype.getMaxListeners=function(){return ei(this)},Gn.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var s=r[e];if(void 0===s)return!1;if("function"==typeof s)Xn(s,this,t);else{var c=s.length,l=oi(s,c);for(n=0;n<c;++n)Xn(l[n],this,t)}return!0},Gn.prototype.addListener=function(e,t){return ti(this,e,t,!1)},Gn.prototype.on=Gn.prototype.addListener,Gn.prototype.prependListener=function(e,t){return ti(this,e,t,!0)},Gn.prototype.once=function(e,t){return Kn(t),this.on(e,ii(this,e,t)),this},Gn.prototype.prependOnceListener=function(e,t){return Kn(t),this.prependListener(e,ii(this,e,t)),this},Gn.prototype.removeListener=function(e,t){var n,i,r,a,o;if(Kn(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,r=a;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},Gn.prototype.off=Gn.prototype.removeListener,Gn.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,a=Object.keys(n);for(i=0;i<a.length;++i)"removeListener"!==(r=a[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},Gn.prototype.listeners=function(e){return ri(this,e,!0)},Gn.prototype.rawListeners=function(e){return ri(this,e,!1)},Gn.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):ai.call(e,t)},Gn.prototype.listenerCount=ai,Gn.prototype.eventNames=function(){return this._eventsCount>0?Wn(this._events):[]};const ci=[];class li extends Hn.exports.EventEmitter{constructor(e,t){super(),this.attachedElements=[],this.isMuted=!1,this._currentBitrate=0,this.appVisibilityChangedListener=()=>{this.handleAppVisibilityChanged()},this.kind=t,this._mediaStreamTrack=e,this.source=li.Source.Unknown,Bn()?(this.isInBackground="hidden"===document.visibilityState,document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}attach(e){let t="audio";return this.kind===li.Kind.Video&&(t="video"),e||("audio"===t&&(ci.forEach((t=>{null!==t.parentElement||e||(e=t)})),e&&ci.splice(ci.indexOf(e),1)),e||(e=document.createElement(t))),this.attachedElements.includes(e)||this.attachedElements.push(e),ui(this._mediaStreamTrack,e),e instanceof HTMLAudioElement&&e.play().then((()=>{this.emit(Pn.AudioPlaybackStarted)})).catch((e=>{this.emit(Pn.AudioPlaybackFailed,e)})),this.emit(Pn.ElementAttached,e),e}detach(e){if(e){di(this._mediaStreamTrack,e);const t=this.attachedElements.indexOf(e);return t>=0&&(this.attachedElements.splice(t,1),this.recycleElement(e),this.emit(Pn.ElementDetached,e)),e}const t=[];return this.attachedElements.forEach((e=>{di(this._mediaStreamTrack,e),t.push(e),this.recycleElement(e),this.emit(Pn.ElementDetached,e)})),this.attachedElements=[],t}stop(){this._mediaStreamTrack.stop(),Bn()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}recycleElement(e){if(e instanceof HTMLAudioElement){let t=!0;e.pause(),ci.forEach((e=>{e.parentElement||(t=!1)})),t&&ci.push(e)}}async handleAppVisibilityChanged(){this.isInBackground="hidden"===document.visibilityState}}function ui(e,t){let n,i;n=t.srcObject instanceof MediaStream?t.srcObject:new MediaStream,i="audio"===e.kind?n.getAudioTracks():n.getVideoTracks(),i.includes(e)||(i.forEach((e=>{n.removeTrack(e)})),n.addTrack(e)),t.srcObject!==n&&(t.srcObject=n,(Bn()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||Nn())&&t instanceof HTMLVideoElement&&setTimeout((()=>{t.srcObject=n,t.play().catch((()=>{}))}),0)),t.autoplay=!0,t instanceof HTMLVideoElement&&(t.playsInline=!0)}function di(e,t){if(t.srcObject instanceof MediaStream){const n=t.srcObject;n.removeTrack(e),n.getTracks().length>0?t.srcObject=n:t.srcObject=null}}!function(e){let t,n,i;!function(e){e.Audio="audio",e.Video="video",e.Unknown="unknown"}(t=e.Kind||(e.Kind={})),function(e){e.Camera="camera",e.Microphone="microphone",e.ScreenShare="screen_share",e.ScreenShareAudio="screen_share_audio",e.Unknown="unknown"}(n=e.Source||(e.Source={})),function(e){e.Active="active",e.Paused="paused",e.Unknown="unknown"}(i=e.StreamState||(e.StreamState={})),e.kindToProto=function(e){switch(e){case t.Audio:return We.AUDIO;case t.Video:return We.VIDEO;default:return We.UNRECOGNIZED}},e.kindFromProto=function(e){switch(e){case We.AUDIO:return t.Audio;case We.VIDEO:return t.Video;default:return t.Unknown}},e.sourceToProto=function(e){switch(e){case n.Camera:return He.CAMERA;case n.Microphone:return He.MICROPHONE;case n.ScreenShare:return He.SCREEN_SHARE;case n.ScreenShareAudio:return He.SCREEN_SHARE_AUDIO;default:return He.UNRECOGNIZED}},e.sourceFromProto=function(e){switch(e){case He.CAMERA:return n.Camera;case He.MICROPHONE:return n.Microphone;case He.SCREEN_SHARE:return n.ScreenShare;case He.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}},e.streamStateFromProto=function(e){switch(e){case jt.ACTIVE:return i.Active;case jt.PAUSED:return i.Paused;default:return i.Unknown}}}(li||(li={}));class pi extends li{constructor(e,t,n){super(e,t),this._isUpstreamPaused=!1,this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this.emit(Pn.Ended,this)},this._mediaStreamTrack.addEventListener("ended",this.handleEnded),this.constraints=null!=n?n:e.getConstraints(),this.reacquireTrack=!1,this.wasMuted=!1}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==li.Kind.Video)return;const{width:e,height:t}=this._mediaStreamTrack.getSettings();return e&&t?{width:e,height:t}:void 0}get isUpstreamPaused(){return this._isUpstreamPaused}async getDeviceId(){if(this.source===li.Source.ScreenShare)return;const{deviceId:e,groupId:t}=this._mediaStreamTrack.getSettings(),n=this.kind===li.Kind.Audio?"audioinput":"videoinput";return Mn.getInstance().normalizeDeviceId(n,e,t)}async mute(){return this.setTrackMuted(!0),this}async unmute(){return this.setTrackMuted(!1),this}async replaceTrack(e){if(!this.sender)throw new wn("unable to replace an unpublished track");return this.attachedElements.forEach((e=>{di(this._mediaStreamTrack,e)})),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop(),e.addEventListener("ended",this.handleEnded),u.debug("replace MediaStreamTrack"),await this.sender.replaceTrack(e),this._mediaStreamTrack=e,this.attachedElements.forEach((t=>{ui(e,t)})),this.mediaStream=new MediaStream([e]),this}async restart(e){if(!this.sender)throw new wn("unable to restart an unpublished track");e||(e=this.constraints),u.debug("restarting track with constraints",e);const t={audio:!1,video:!1};this.kind===li.Kind.Video?t.video=e:t.audio=e,this.attachedElements.forEach((e=>{di(this._mediaStreamTrack,e)})),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const n=await navigator.mediaDevices.getUserMedia(t),i=n.getTracks()[0];return i.addEventListener("ended",this.handleEnded),u.debug("re-acquired MediaStreamTrack"),await this.sender.replaceTrack(i),this._mediaStreamTrack=i,this.attachedElements.forEach((e=>{ui(i,e)})),this.mediaStream=n,this.constraints=e,this}setTrackMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?Pn.Muted:Pn.Unmuted,this))}get needsReAcquisition(){return"live"!==this._mediaStreamTrack.readyState||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}async handleAppVisibilityChanged(){await super.handleAppVisibilityChanged(),Ln()&&(u.debug("visibility changed, is in Background: ".concat(this.isInBackground)),!this.isInBackground&&this.needsReAcquisition&&(u.debug("track needs to be reaquired, restarting ".concat(this.source)),await this.restart(),this.reacquireTrack=!1,this.setTrackMuted(this.wasMuted)),this.isInBackground&&(this.wasMuted=this.isMuted))}async pauseUpstream(){if(!0===this._isUpstreamPaused)return;if(!this.sender)return void u.warn("unable to pause upstream for an unpublished track");this._isUpstreamPaused=!0,this.emit(Pn.UpstreamPaused,this);const e=this.kind===li.Kind.Audio?function(){if(!qn){const e=new AudioContext,t=e.createOscillator(),n=e.createMediaStreamDestination();if(t.connect(n),t.start(),[qn]=n.stream.getAudioTracks(),!qn)throw Error("Could not get empty media stream audio track");qn.enabled=!1}return qn}():function(){var e;if(!Vn){const t=document.createElement("canvas");t.width=2,t.height=2,null===(e=t.getContext("2d"))||void 0===e||e.fillRect(0,0,t.width,t.height);const n=t.captureStream();if([Vn]=n.getTracks(),!Vn)throw Error("Could not get empty media stream video track");Vn.enabled=!1}return Vn}();await this.sender.replaceTrack(e)}async resumeUpstream(){!1!==this._isUpstreamPaused&&(this.sender?(this._isUpstreamPaused=!1,this.emit(Pn.UpstreamResumed,this),await this.sender.replaceTrack(this._mediaStreamTrack)):u.warn("unable to resume upstream for an unpublished track"))}}function hi(e,t,n){const i=Lt({},e);return!0===i.audio&&(i.audio={}),!0===i.video&&(i.video={}),i.audio&&fi(i.audio,t),i.video&&fi(i.video,n),i}function fi(e,t){return Object.keys(t).forEach((n=>{void 0===e[n]&&(e[n]=t[n])})),e}function mi(e){const t={};if(e.video)if("object"==typeof e.video){const n={},i=n,r=e.video;Object.keys(r).forEach((e=>{"resolution"===e?fi(i,r.resolution):i[e]=r[e]})),t.video=n}else t.video=e.video;else t.video=!1;return e.audio?"object"==typeof e.audio?t.audio=e.audio:t.audio=!0:t.audio=!1,t}function gi(){const e=window.AudioContext||window.webkitAudioContext;if(e)return new e}class vi extends pi{constructor(e,t){super(e,li.Kind.Audio,t),this.stopOnMute=!1,this.monitorSender=async()=>{if(!this.sender)return void(this._currentBitrate=0);let e;try{e=await this.getSenderStats()}catch(e){return void u.error("could not get audio sender stats",{error:e})}e&&this.prevStats&&(this._currentBitrate=On(e,this.prevStats)),this.prevStats=e,setTimeout((()=>{this.monitorSender()}),Rn)},this.checkForSilence()}async setDeviceId(e){this.constraints.deviceId!==e&&(this.constraints.deviceId=e,this.isMuted||await this.restartTrack())}async mute(){return this.source===li.Source.Microphone&&this.stopOnMute&&(u.debug("stopping mic track"),this._mediaStreamTrack.stop()),await super.mute(),this}async unmute(){return this.source===li.Source.Microphone&&this.stopOnMute&&(u.debug("reacquiring mic track"),await this.restartTrack()),await super.unmute(),this}async restartTrack(e){let t;if(e){const n=mi({audio:e});"boolean"!=typeof n.audio&&(t=n.audio)}await this.restart(t)}async restart(e){const t=await super.restart(e);return this.checkForSilence(),t}startMonitor(){setTimeout((()=>{this.monitorSender()}),Rn)}async getSenderStats(){if(!this.sender)return;let e;return(await this.sender.getStats()).forEach((t=>{"outbound-rtp"===t.type&&(e={type:"audio",streamId:t.id,packetsSent:t.packetsSent,packetsLost:t.packetsLost,bytesSent:t.bytesSent,timestamp:t.timestamp,roundTripTime:t.roundTripTime,jitter:t.jitter})})),e}async checkForSilence(){const e=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;const n=gi();if(n){const i=n.createAnalyser();i.fftSize=2048;const r=i.frequencyBinCount,a=new Uint8Array(r);n.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(i),await In(t),i.getByteTimeDomainData(a);const o=a.some((e=>128!==e&&0!==e));return n.close(),!o}return!1}(this);e&&(this.isMuted||u.warn("silence detected on local audio track"),this.emit(Pn.AudioSilenceDetected))}}class bi extends pi{constructor(e,t){super(e,li.Kind.Video,t),this.monitorSender=async()=>{if(!this.sender)return void(this._currentBitrate=0);let e;try{e=await this.getSenderStats()}catch(e){return void u.error("could not get audio sender stats",{error:e})}const t=new Map(e.map((e=>[e.rid,e])));if(this.prevStats){let e=0;t.forEach(((t,n)=>{var i;const r=null===(i=this.prevStats)||void 0===i?void 0:i.get(n);e+=On(t,r)})),this._currentBitrate=e}this.prevStats=t,setTimeout((()=>{this.monitorSender()}),Rn)}}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var t;this.signalClient=e;const n=null===(t=this.sender)||void 0===t?void 0:t.getParameters();n&&(this.encodings=n.encodings),setTimeout((()=>{this.monitorSender()}),Rn)}stop(){this.sender=void 0,this._mediaStreamTrack.getConstraints(),super.stop()}async mute(){return this.source===li.Source.Camera&&(u.debug("stopping camera track"),this._mediaStreamTrack.stop()),await super.mute(),this}async unmute(){return this.source===li.Source.Camera&&(u.debug("reacquiring camera track"),await this.restartTrack()),await super.unmute(),this}async getSenderStats(){if(!this.sender)return[];const e=[],t=await this.sender.getStats();return t.forEach((n=>{var i;if("outbound-rtp"===n.type){const r={type:"video",streamId:n.id,frameHeight:n.frameHeight,frameWidth:n.frameWidth,firCount:n.firCount,pliCount:n.pliCount,nackCount:n.nackCount,packetsSent:n.packetsSent,bytesSent:n.bytesSent,framesSent:n.framesSent,timestamp:n.timestamp,rid:null!==(i=n.rid)&&void 0!==i?i:"",retransmittedPacketsSent:n.retransmittedPacketsSent,qualityLimitationReason:n.qualityLimitationReason,qualityLimitationResolutionChanges:n.qualityLimitationResolutionChanges},a=t.get(n.remoteId);a&&(r.jitter=a.jitter,r.packetsLost=a.packetsLost,r.roundTripTime=a.roundTripTime),e.push(r)}})),e}setPublishingQuality(e){const t=[];for(let n=Qe.LOW;n<=Qe.HIGH;n+=1)t.push({quality:n,enabled:n<=e});u.debug("setting publishing quality. max quality ".concat(e)),this.setPublishingLayers(t)}async setDeviceId(e){this.constraints.deviceId!==e&&(this.constraints.deviceId=e,this.isMuted||await this.restartTrack())}async restartTrack(e){let t;if(e){const n=mi({video:e});"boolean"!=typeof n.video&&(t=n.video)}await this.restart(t)}async setPublishingLayers(e){if(u.debug("setting publishing layers",e),!this.sender||!this.encodings)return;const t=this.sender.getParameters(),{encodings:n}=t;if(!n)return;if(n.length!==this.encodings.length)return void u.warn("cannot set publishing layers, encodings mismatch");let i=!1;n.forEach(((t,n)=>{var r;let a=null!==(r=t.rid)&&void 0!==r?r:"";""===a&&(a="q");const o=yi(a),s=e.find((e=>e.quality===o));s&&t.active!==s.enabled&&(i=!0,t.active=s.enabled,u.debug("setting layer ".concat(s.quality," to ").concat(t.active?"enabled":"disabled")),Nn()&&(s.enabled?(t.scaleResolutionDownBy=this.encodings[n].scaleResolutionDownBy,t.maxBitrate=this.encodings[n].maxBitrate,t.maxFrameRate=this.encodings[n].maxFrameRate):(t.scaleResolutionDownBy=4,t.maxBitrate=10,t.maxFrameRate=2)))})),i&&(t.encodings=n,await this.sender.setParameters(t))}async handleAppVisibilityChanged(){await super.handleAppVisibilityChanged(),Ln()&&this.isInBackground&&this.source===li.Source.Camera&&(this._mediaStreamTrack.enabled=!1)}}function yi(e){switch(e){case"f":return Qe.HIGH;case"h":return Qe.MEDIUM;case"q":return Qe.LOW;default:return Qe.UNRECOGNIZED}}class _i extends li{constructor(e,t,n,i){super(e,n),this.streamState=li.StreamState.Active,this.sid=t,this.receiver=i}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this.emit(e?Pn.Muted:Pn.Unmuted,this))}setMediaStream(e){this.mediaStream=e,e.onremovetrack=()=>{this.receiver=void 0,this._currentBitrate=0,this.emit(Pn.Ended,this)}}start(){this.startMonitor(),super.enable()}stop(){super.disable()}startMonitor(){setTimeout((()=>{this.monitorReceiver()}),Rn)}}class Ai extends _i{constructor(e,t,n){super(e,t,li.Kind.Audio,n),this.monitorReceiver=async()=>{if(!this.receiver)return void(this._currentBitrate=0);const e=await this.getReceiverStats();e&&this.prevStats&&this.receiver&&(this._currentBitrate=On(e,this.prevStats)),this.prevStats=e,setTimeout((()=>{this.monitorReceiver()}),Rn)},this.elementVolume=1}setVolume(e){for(const t of this.attachedElements)t.volume=e;this.elementVolume=e}getVolume(){return this.elementVolume}attach(e){return e?super.attach(e):e=super.attach(),e.volume=this.elementVolume,e}async getReceiverStats(){if(!this.receiver)return;let e;return(await this.receiver.getStats()).forEach((t=>{"inbound-rtp"===t.type&&(e={type:"audio",timestamp:t.timestamp,jitter:t.jitter,bytesReceived:t.bytesReceived,concealedSamples:t.concealedSamples,concealmentEvents:t.concealmentEvents,silentConcealedSamples:t.silentConcealedSamples,silentConcealmentEvents:t.silentConcealmentEvents,totalAudioEnergy:t.totalAudioEnergy,totalSamplesDuration:t.totalSamplesDuration})})),e}}function wi(e,t,n){var i,r,a;void 0===t&&(t=50),void 0===n&&(n={});var o=null!=(i=n.isImmediate)&&i,s=null!=(r=n.callback)&&r,c=n.maxWait,l=Date.now(),u=[];function d(){if(void 0!==c){var e=Date.now()-l;if(e+t>=c)return c-e}return t}var p=function(){var t=[].slice.call(arguments),n=this;return new Promise((function(i,r){var c=o&&void 0===a;if(void 0!==a&&clearTimeout(a),a=setTimeout((function(){if(a=void 0,l=Date.now(),!o){var i=e.apply(n,t);s&&s(i),u.forEach((function(e){return(0,e.resolve)(i)})),u=[]}}),d()),c){var p=e.apply(n,t);return s&&s(p),i(p)}u.push({resolve:i,reject:r})}))};return p.cancel=function(e){void 0!==a&&clearTimeout(a),u.forEach((function(t){return(0,t.reject)(e)})),u=[]},p}class ki extends _i{constructor(e,t,n,i){super(e,t,li.Kind.Video,n),this.elementInfos=[],this.monitorReceiver=async()=>{if(!this.receiver)return void(this._currentBitrate=0);const e=await this.getReceiverStats();e&&this.prevStats&&this.receiver&&(this._currentBitrate=On(e,this.prevStats)),this.prevStats=e,setTimeout((()=>{this.monitorReceiver()}),Rn)},this.handleVisibilityChanged=e=>{const{target:t,isIntersecting:n}=e,i=this.elementInfos.find((e=>e.element===t));i&&(i.visible=n,i.visibilityChangedAt=Date.now()),this.updateVisibility()},this.debouncedHandleResize=wi((()=>{this.updateDimensions()}),100),this.adaptiveStreamSettings=i,this.isAdaptiveStream&&(this.streamState=li.StreamState.Paused)}get isAdaptiveStream(){return void 0!==this.adaptiveStreamSettings}get mediaStreamTrack(){if(this.isAdaptiveStream&&0===this.attachedElements.length)throw Error("When using adaptiveStream, you need to use remoteVideoTrack.attach() to add the track to a HTMLVideoElement, direct usage of mediaStreamTrack is unsupported in this case");return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach((t=>{e?di(this._mediaStreamTrack,t):ui(this._mediaStreamTrack,t)}))}attach(e){return e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&void 0===this.elementInfos.find((t=>t.element===e))&&(this.elementInfos.push({element:e,visible:!0}),e.handleResize=this.debouncedHandleResize,e.handleVisibilityChanged=this.handleVisibilityChanged,zn().observe(e),Fn().observe(e),this.debouncedHandleResize()),e}detach(e){let t=[];if(e)return this.stopObservingElement(e),super.detach(e);t=super.detach();for(const e of t)this.stopObservingElement(e);return t}async getReceiverStats(){if(!this.receiver)return;let e;return(await this.receiver.getStats()).forEach((t=>{"inbound-rtp"===t.type&&(e={type:"video",framesDecoded:t.framesDecoded,framesDropped:t.framesDropped,framesReceived:t.framesReceived,packetsReceived:t.packetsReceived,packetsLost:t.packetsLost,frameWidth:t.frameWidth,frameHeight:t.frameHeight,pliCount:t.pliCount,firCount:t.firCount,nackCount:t.nackCount,jitter:t.jitter,timestamp:t.timestamp,bytesReceived:t.bytesReceived})})),e}stopObservingElement(e){var t,n;null===(t=zn())||void 0===t||t.unobserve(e),null===(n=Fn())||void 0===n||n.unobserve(e),this.elementInfos=this.elementInfos.filter((t=>t.element!==e))}async handleAppVisibilityChanged(){await super.handleAppVisibilityChanged(),this.isAdaptiveStream&&Ln()&&this.updateVisibility()}updateVisibility(){const e=this.elementInfos.reduce(((e,t)=>Math.max(e,t.visibilityChangedAt||0)),0),t=this.elementInfos.some((e=>e.visible))&&!this.isInBackground;this.lastVisible!==t&&(!t&&Date.now()-e<100?setTimeout((()=>{this.updateVisibility()}),100):(this.lastVisible=t,this.emit(Pn.VisibilityChanged,t,this)))}updateDimensions(){var e,t,n,i;let r=0,a=0;for(const n of this.elementInfos){const i=null!==(t=null===(e=this.adaptiveStreamSettings)||void 0===e?void 0:e.pixelDensity)&&void 0!==t?t:1,o="screen"===i?window.devicePixelRatio:i,s=n.element.clientWidth*o,c=n.element.clientHeight*o;s+c>r+a&&(r=s,a=c)}(null===(n=this.lastDimensions)||void 0===n?void 0:n.width)===r&&(null===(i=this.lastDimensions)||void 0===i?void 0:i.height)===a||(this.lastDimensions={width:r,height:a},this.emit(Pn.VideoDimensionsChanged,this.lastDimensions,this))}}class Si extends Hn.exports.EventEmitter{constructor(e,t,n){super(),this.metadataMuted=!1,this.handleMuted=()=>{this.emit(Pn.Muted)},this.handleUnmuted=()=>{this.emit(Pn.Unmuted)},this.kind=e,this.trackSid=t,this.trackName=n,this.source=li.Source.Unknown}setTrack(e){this.track&&(this.track.off(Pn.Muted,this.handleMuted),this.track.off(Pn.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(Pn.Muted,this.handleMuted),e.on(Pn.Unmuted,this.handleUnmuted))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return void 0!==this.track}get audioTrack(){if(this.track instanceof vi||this.track instanceof Ai)return this.track}get videoTrack(){if(this.track instanceof bi||this.track instanceof ki)return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=li.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===li.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.trackInfo=e}}!function(e){var t;(t=e.SubscriptionStatus||(e.SubscriptionStatus={})).Subscribed="subscribed",t.NotAllowed="not_allowed",t.Unsubscribed="unsubscribed"}(Si||(Si={}));class Ci extends Si{constructor(e,t,n){super(e,t.sid,t.name),this.track=void 0,this.handleTrackEnded=()=>{this.emit(Pn.Ended)},this.updateInfo(t),this.setTrack(n)}get isUpstreamPaused(){var e;return null===(e=this.track)||void 0===e?void 0:e.isUpstreamPaused}setTrack(e){this.track&&this.track.off(Pn.Ended,this.handleTrackEnded),super.setTrack(e),e&&e.on(Pn.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}async mute(){var e;return null===(e=this.track)||void 0===e?void 0:e.mute()}async unmute(){var e;return null===(e=this.track)||void 0===e?void 0:e.unmute()}async pauseUpstream(){var e;await(null===(e=this.track)||void 0===e?void 0:e.pauseUpstream())}async resumeUpstream(){var e;await(null===(e=this.track)||void 0===e?void 0:e.resumeUpstream())}}class xi{constructor(e,t,n,i){this.width=e,this.height=t,this.encoding={maxBitrate:n,maxFramerate:i}}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.width/this.height}}}var Ei;!function(e){e.telephone={maxBitrate:12e3},e.speech={maxBitrate:2e4},e.music={maxBitrate:32e3}}(Ei||(Ei={}));const Ti={h90:new xi(160,90,6e4,15),h180:new xi(320,180,12e4,15),h216:new xi(384,216,18e4,15),h360:new xi(640,360,3e5,20),h540:new xi(960,540,6e5,25),h720:new xi(1280,720,2e6,30),h1080:new xi(1920,1080,3e6,30),h1440:new xi(2560,1440,5e6,30),h2160:new xi(3840,2160,8e6,30),qvga:new xi(320,180,12e4,10),vga:new xi(640,360,3e5,20),qhd:new xi(960,540,6e5,25),hd:new xi(1280,720,2e6,30),fhd:new xi(1920,1080,3e6,30)},Pi={h120:new xi(160,120,8e4,15),h180:new xi(240,180,1e5,15),h240:new xi(320,240,15e4,15),h360:new xi(480,360,225e3,20),h480:new xi(640,480,3e5,20),h540:new xi(720,540,45e4,25),h720:new xi(960,720,15e5,30),h1080:new xi(1440,1080,25e5,30),h1440:new xi(1920,1440,35e5,30),qvga:new xi(240,180,9e4,10),vga:new xi(480,360,225e3,20),qhd:new xi(720,540,45e4,25),hd:new xi(960,720,15e5,30),fhd:new xi(1440,1080,28e5,30)},Ri={h360fps3:new xi(640,360,2e5,3),h720fps5:new xi(1280,720,4e5,5),h720fps15:new xi(1280,720,1e6,15),h1080fps15:new xi(1920,1080,15e5,15),h1080fps30:new xi(1920,1080,3e6,30),vga:new xi(640,360,2e5,3),hd_8:new xi(1280,720,4e5,5),hd_15:new xi(1280,720,1e6,15),fhd_15:new xi(1920,1080,15e5,15),fhd_30:new xi(1920,1080,3e6,30)};var Oi;!function(e){e.Excellent="excellent",e.Good="good",e.Poor="poor",e.Unknown="unknown"}(Oi||(Oi={}));class Di extends Hn.exports.EventEmitter{constructor(e,t){super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=Oi.Unknown,this.sid=e,this.identity=t,this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map}getTracks(){return Array.from(this.tracks.values())}getTrack(e){if(e!==li.Source.Unknown)for(const[,t]of this.tracks){if(t.source===e)return t;if(t.source===li.Source.Unknown){if(e===li.Source.Microphone&&t.kind===li.Kind.Audio&&"screen"!==t.trackName)return t;if(e===li.Source.Camera&&t.kind===li.Kind.Video&&"screen"!==t.trackName)return t;if(e===li.Source.ScreenShare&&t.kind===li.Kind.Video&&"screen"===t.trackName)return t;if(e===li.Source.ScreenShareAudio&&t.kind===li.Kind.Audio&&"screen"===t.trackName)return t}}}getTrackByName(e){for(const[,t]of this.tracks)if(t.trackName===e)return t}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const t=this.getTrack(li.Source.Camera);return!(null===(e=null==t?void 0:t.isMuted)||void 0===e||e)}get isMicrophoneEnabled(){var e;const t=this.getTrack(li.Source.Microphone);return!(null===(e=null==t?void 0:t.isMuted)||void 0===e||e)}get isScreenShareEnabled(){return!!this.getTrack(li.Source.ScreenShare)}get joinedAt(){return this.participantInfo?new Date(1e3*this.participantInfo.joinedAt):new Date}updateInfo(e){this.identity=e.identity,this.sid=e.sid,this.name=e.name,this.setMetadata(e.metadata),e.permission&&this.setPermissions(e.permission),this.participantInfo=e}setMetadata(e){const t=this.metadata!==e,n=this.metadata;this.metadata=e,t&&(this.emit(En.MetadataChanged,n),this.emit(En.ParticipantMetadataChanged,n))}setPermissions(e){var t,n,i,r,a;const o=e.canPublish!==(null===(t=this.permissions)||void 0===t?void 0:t.canPublish)||e.canSubscribe!==(null===(n=this.permissions)||void 0===n?void 0:n.canSubscribe)||e.canPublishData!==(null===(i=this.permissions)||void 0===i?void 0:i.canPublishData)||e.hidden!==(null===(r=this.permissions)||void 0===r?void 0:r.hidden)||e.recorder!==(null===(a=this.permissions)||void 0===a?void 0:a.recorder);return this.permissions=e,o}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(En.IsSpeakingChanged,e))}setConnectionQuality(e){const t=this._connectionQuality;this._connectionQuality=function(e){switch(e){case Xe.EXCELLENT:return Oi.Excellent;case Xe.GOOD:return Oi.Good;case Xe.POOR:return Oi.Poor;default:return Oi.Unknown}}(e),t!==this._connectionQuality&&this.emit(En.ConnectionQualityChanged,this._connectionQuality)}addTrackPublication(e){e.on(Pn.Muted,(()=>{this.emit(En.TrackMuted,e)})),e.on(Pn.Unmuted,(()=>{this.emit(En.TrackUnmuted,e)}));const t=e;switch(t.track&&(t.track.sid=e.trackSid),this.tracks.set(e.trackSid,e),e.kind){case li.Kind.Audio:this.audioTracks.set(e.trackSid,e);break;case li.Kind.Video:this.videoTracks.set(e.trackSid,e)}}}function Mi(e,t){switch(e.kind){case"audio":return new vi(e,t);case"video":return new bi(e,t);default:throw new wn("unsupported track type: ".concat(e.kind))}}const Ii=Object.values(Ti),Ni=Object.values(Pi),Li=Object.values(Ri),Bi=[Ti.h180,Ti.h360],$i=[Pi.h180,Pi.h360],ji=["q","h","f"];function Ui(e,t,n,i){var r,a;let o=null==i?void 0:i.videoEncoding;e&&(o=null==i?void 0:i.screenShareEncoding);const s=null==i?void 0:i.simulcast,c=null==i?void 0:i.scalabilityMode;if(!o&&!s&&!c||!t||!n)return[{}];o||(o=function(e,t,n){const i=function(e,t,n){if(e)return Li;const i=t>n?t/n:n/t;return Math.abs(i-16/9)<Math.abs(i-4/3)?Ii:Ni}(e,t,n);let{encoding:r}=i[0];const a=Math.max(t,n);for(let e=0;e<i.length;e+=1){const t=i[e];if(r=t.encoding,t.width>=a)break}return r}(e,t,n),u.debug("using video encoding",o));const l=new xi(t,n,o.maxBitrate,o.maxFramerate);if(u.debug("scalabilityMode ".concat(c)),c){const e=[];if("L3T3"===c){for(let t=0;t<3;t+=1)e.push({rid:ji[2-t],scaleResolutionDownBy:2**t,maxBitrate:o?o.maxBitrate/2**t:0,maxFramerate:l.encoding.maxFramerate,scalabilityMode:"L3T3"});return u.debug("encodings",e),e}throw new Error("unsupported scalabilityMode: ".concat(c))}if(!s)return[o];let d,p=[];p=e?null!==(r=Zi(null==i?void 0:i.screenShareSimulcastLayers))&&void 0!==r?r:Fi(e,l):null!==(a=Zi(null==i?void 0:i.videoSimulcastLayers))&&void 0!==a?a:Fi(e,l);const h=p[0];p.length>1&&([,d]=p);const f=Math.max(t,n);return function(e,t,n){const i=[];return n.forEach(((n,r)=>{if(r>=ji.length)return;const a=Math.min(e,t),o=ji[r];i.push({rid:o,scaleResolutionDownBy:a/Math.min(n.width,n.height),maxBitrate:n.encoding.maxBitrate,maxFramerate:n.encoding.maxFramerate})})),i}(t,n,f>=960&&d?[h,d,l]:f>=480?[h,l]:[l])}function Fi(e,t){if(e)return n=t,[{scaleResolutionDownBy:2,fps:3}].map((e=>{var t;return new xi(Math.floor(n.width/e.scaleResolutionDownBy),Math.floor(n.height/e.scaleResolutionDownBy),Math.max(15e4,Math.floor(n.encoding.maxBitrate/(e.scaleResolutionDownBy**2*((null!==(t=n.encoding.maxFramerate)&&void 0!==t?t:30)/e.fps)))),e.fps)}));var n;const{width:i,height:r}=t,a=i>r?i/r:r/i;return Math.abs(a-16/9)<Math.abs(a-4/3)?Bi:$i}function Zi(e){if(e)return e.sort(((e,t)=>{const{encoding:n}=e,{encoding:i}=t;return n.maxBitrate>i.maxBitrate?1:n.maxBitrate<i.maxBitrate?-1:n.maxBitrate===i.maxBitrate&&n.maxFramerate&&i.maxFramerate?n.maxFramerate>i.maxFramerate?1:-1:0}))}class zi extends Si{constructor(){super(...arguments),this._allowed=!0,this.disabled=!1,this.currentVideoQuality=Qe.HIGH,this.handleEnded=e=>{this.emit(Pn.Ended,e)},this.handleVisibilityChange=e=>{u.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(e),{trackSid:this.trackSid}),this.disabled=!e,this.emitTrackUpdate()},this.handleVideoDimensionsChange=e=>{u.debug("adaptivestream video dimensions ".concat(e.width,"x").concat(e.height),{trackSid:this.trackSid}),this.videoDimensions=e,this.emitTrackUpdate()}}setSubscribed(e){this.subscribed=e;const t={trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[{participantSid:"",trackSids:[this.trackSid]}]};this.emit(Pn.UpdateSubscription,t)}get subscriptionStatus(){return!1!==this.subscribed&&super.isSubscribed?this._allowed?Si.SubscriptionStatus.Subscribed:Si.SubscriptionStatus.NotAllowed:Si.SubscriptionStatus.Unsubscribed}get isSubscribed(){return!1!==this.subscribed&&!!this._allowed&&super.isSubscribed}get isEnabled(){return!this.disabled}setEnabled(e){this.isManualOperationAllowed()&&this.disabled!==!e&&(this.disabled=!e,this.emitTrackUpdate())}setVideoQuality(e){this.isManualOperationAllowed()&&this.currentVideoQuality!==e&&(this.currentVideoQuality=e,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var t,n;this.isManualOperationAllowed()&&((null===(t=this.videoDimensions)||void 0===t?void 0:t.width)===e.width&&(null===(n=this.videoDimensions)||void 0===n?void 0:n.height)===e.height||(this.track instanceof ki&&(this.videoDimensions=e),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}get videoQuality(){return this.currentVideoQuality}setTrack(e){this.track&&(this.track.off(Pn.VideoDimensionsChanged,this.handleVideoDimensionsChange),this.track.off(Pn.VisibilityChanged,this.handleVisibilityChange),this.track.off(Pn.Ended,this.handleEnded)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(Pn.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(Pn.VisibilityChanged,this.handleVisibilityChange),e.on(Pn.Ended,this.handleEnded))}updateInfo(e){var t;super.updateInfo(e),this.metadataMuted=e.muted,null===(t=this.track)||void 0===t||t.setMuted(e.muted)}isManualOperationAllowed(){return this.isAdaptiveStream?(u.warn("adaptive stream is enabled, cannot change track settings",{trackSid:this.trackSid}),!1):!!this.isSubscribed||(u.warn("cannot update track settings when not subscribed",{trackSid:this.trackSid}),!1)}get isAdaptiveStream(){return this.track instanceof ki&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=en.fromPartial({trackSids:[this.trackSid],disabled:this.disabled});this.videoDimensions?(e.width=this.videoDimensions.width,e.height=this.videoDimensions.height):void 0!==this.currentVideoQuality?e.quality=this.currentVideoQuality:e.quality=Qe.HIGH,this.emit(Pn.UpdateSettings,e)}}class Vi extends Di{constructor(e,t,n){super(t,n||""),this.signalClient=e,this.tracks=new Map,this.audioTracks=new Map,this.videoTracks=new Map}static fromParticipantInfo(e,t){const n=new Vi(e,t.sid,t.identity);return n.updateInfo(t),n}addTrackPublication(e){super.addTrackPublication(e),e.on(Pn.UpdateSettings,(e=>{this.signalClient.sendUpdateTrackSettings(e)})),e.on(Pn.UpdateSubscription,(e=>{e.participantTracks.forEach((e=>{e.participantSid=this.sid})),this.signalClient.sendUpdateSubscription(e)})),e.on(Pn.Ended,(t=>{this.emit(En.TrackUnsubscribed,t,e)}))}getTrack(e){const t=super.getTrack(e);if(t)return t}getTrackByName(e){const t=super.getTrackByName(e);if(t)return t}setVolume(e){const t=this.getTrack(li.Source.Microphone);t&&t.track.setVolume(e)}getVolume(){const e=this.getTrack(li.Source.Microphone);if(e)return e.track.getVolume()}addSubscribedMediaTrack(e,t,n,i,r,a){let o,s=this.getTrackPublication(t);return s||t.startsWith("TR")||this.tracks.forEach((t=>{s||e.kind!==t.kind.toString()||(s=t)})),s?(o="video"===e.kind?new ki(e,t,i,r):new Ai(e,t,i),o.source=s.source,o.isMuted=s.isMuted,o.setMediaStream(n),o.start(),s.setTrack(o),this.emit(En.TrackSubscribed,o,s),s):0===a?(u.error("could not find published track",{participant:this.sid,trackSid:t}),void this.emit(En.TrackSubscriptionFailed,t)):(void 0===a&&(a=20),void setTimeout((()=>{this.addSubscribedMediaTrack(e,t,n,i,r,a-1)}),150))}get hasMetadata(){return!!this.participantInfo}getTrackPublication(e){return this.tracks.get(e)}updateInfo(e){const t=this.hasMetadata;super.updateInfo(e);const n=new Map,i=new Map;e.tracks.forEach((e=>{let t=this.getTrackPublication(e.sid);if(t)t.updateInfo(e);else{const n=li.kindFromProto(e.type);if(!n)return;t=new zi(n,e.sid,e.name),t.updateInfo(e),i.set(e.sid,t),this.addTrackPublication(t)}n.set(e.sid,t)})),t&&i.forEach((e=>{this.emit(En.TrackPublished,e)})),this.tracks.forEach((e=>{n.has(e.trackSid)||this.unpublishTrack(e.trackSid,!0)}))}unpublishTrack(e,t){const n=this.tracks.get(e);if(!n)return;switch(this.tracks.delete(e),n.kind){case li.Kind.Audio:this.audioTracks.delete(e);break;case li.Kind.Video:this.videoTracks.delete(e)}const{track:i}=n;if(i){const{isSubscribed:e}=n;i.stop(),n.setTrack(void 0),e&&this.emit(En.TrackUnsubscribed,i,n)}t&&this.emit(En.TrackUnpublished,n)}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return u.trace("participant event",{participant:this.sid,event:e,args:n}),super.emit(e,...n)}}class qi extends Di{constructor(e,t,n,i){super(e,t),this.pendingPublishing=new Set,this.onTrackUnmuted=e=>{this.onTrackMuted(e,e.isUpstreamPaused)},this.onTrackMuted=(e,t)=>{void 0===t&&(t=!0),e.sid?this.engine.updateMuteStatus(e.sid,t):u.error("could not update mute status for unpublished track",e)},this.onTrackUpstreamPaused=e=>{u.debug("upstream paused"),this.onTrackMuted(e,!0)},this.onTrackUpstreamResumed=e=>{u.debug("upstream resumed"),this.onTrackMuted(e,e.isMuted)},this.handleSubscribedQualityUpdate=e=>{var t,n;if(!(null===(t=this.roomOptions)||void 0===t?void 0:t.dynacast))return;const i=this.videoTracks.get(e.trackSid);i?null===(n=i.videoTrack)||void 0===n||n.setPublishingLayers(e.subscribedQualities):u.warn("received subscribed quality update for unknown track",{method:"handleSubscribedQualityUpdate",sid:e.trackSid})},this.handleLocalTrackUnpublished=e=>{const t=this.tracks.get(e.trackSid);t?this.unpublishTrack(t.track):u.warn("received unpublished event for unknown track",{method:"handleLocalTrackUnpublished",trackSid:e.trackSid})},this.onTrackUnpublish=e=>{this.unpublishTrack(e)},this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map,this.engine=n,this.roomOptions=i,this.engine.client.onRemoteMuteChanged=(e,t)=>{const n=this.tracks.get(e);n&&n.track&&(t?n.mute():n.unmute())},this.engine.client.onSubscribedQualityUpdate=this.handleSubscribedQualityUpdate,this.engine.client.onLocalTrackUnpublished=this.handleLocalTrackUnpublished}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}getTrack(e){const t=super.getTrack(e);if(t)return t}getTrackByName(e){const t=super.getTrackByName(e);if(t)return t}setCameraEnabled(e){return this.setTrackEnabled(li.Source.Camera,e)}setMicrophoneEnabled(e){return this.setTrackEnabled(li.Source.Microphone,e)}setScreenShareEnabled(e){return this.setTrackEnabled(li.Source.ScreenShare,e)}setPermissions(e){const t=this.permissions,n=super.setPermissions(e);return n&&t&&this.emit(En.ParticipantPermissionsChanged,t),n}async setTrackEnabled(e,t){u.debug("setTrackEnabled",{source:e,enabled:t});let n=this.getTrack(e);if(t)if(n)await n.unmute();else{let t;if(this.pendingPublishing.has(e))return void u.info("skipping duplicate published source",{source:e});this.pendingPublishing.add(e);try{switch(e){case li.Source.Camera:[t]=await this.createTracks({video:!0});break;case li.Source.Microphone:[t]=await this.createTracks({audio:!0});break;case li.Source.ScreenShare:[t]=await this.createScreenTracks({audio:!1});break;default:throw new wn(e)}n=await this.publishTrack(t)}catch(e){throw e instanceof Error&&!(e instanceof wn)&&this.emit(En.MediaDevicesError,e),e}finally{this.pendingPublishing.delete(e)}}else n&&n.track&&(e===li.Source.ScreenShare?n=this.unpublishTrack(n.track):await n.mute());return n}async enableCameraAndMicrophone(){if(!this.pendingPublishing.has(li.Source.Camera)&&!this.pendingPublishing.has(li.Source.Microphone)){this.pendingPublishing.add(li.Source.Camera),this.pendingPublishing.add(li.Source.Microphone);try{const e=await this.createTracks({audio:!0,video:!0});await Promise.all(e.map((e=>this.publishTrack(e))))}finally{this.pendingPublishing.delete(li.Source.Camera),this.pendingPublishing.delete(li.Source.Microphone)}}}async createTracks(e){var t,n;const i=mi(hi(e,null===(t=this.roomOptions)||void 0===t?void 0:t.audioCaptureDefaults,null===(n=this.roomOptions)||void 0===n?void 0:n.videoCaptureDefaults));let r;try{r=await navigator.mediaDevices.getUserMedia(i)}catch(e){throw e instanceof Error&&(i.audio&&(this.microphoneError=e),i.video&&(this.cameraError=e)),e}return i.audio&&(this.microphoneError=void 0),i.video&&(this.cameraError=void 0),r.getTracks().map((t=>{const n="audio"===t.kind;let a;n?e.audio:e.video;const o=n?i.audio:i.video;"boolean"!=typeof o&&(a=o);const s=Mi(t,a);return s.kind===li.Kind.Video?s.source=li.Source.Camera:s.kind===li.Kind.Audio&&(s.source=li.Source.Microphone),s.mediaStream=r,s}))}async createScreenTracks(e){var t;void 0===e&&(e={}),void 0===e.resolution&&(e.resolution=Ri.h1080fps15.resolution);let n=!0;e.resolution&&(n={width:e.resolution.width,height:e.resolution.height,frameRate:e.resolution.frameRate});const i=await navigator.mediaDevices.getDisplayMedia({audio:null!==(t=e.audio)&&void 0!==t&&t,video:n}),r=i.getVideoTracks();if(0===r.length)throw new wn("no video track found");const a=new bi(r[0]);a.source=li.Source.ScreenShare;const o=[a];if(i.getAudioTracks().length>0){const e=new vi(i.getAudioTracks()[0]);e.source=li.Source.ScreenShareAudio,o.push(e)}return o}async publishTrack(e,t){var n,i,r,a,o,s,c;const l=Lt(Lt({},null===(n=this.roomOptions)||void 0===n?void 0:n.publishDefaults),t);if(e instanceof MediaStreamTrack)switch(e.kind){case"audio":e=new vi(e);break;case"video":e=new bi(e);break;default:throw new wn("unsupported MediaStreamTrack kind ".concat(e.kind))}let d;if(this.tracks.forEach((t=>{t.track&&t.track===e&&(d=t)})),d)return d;l.source&&(e.source=l.source),l.stopMicTrackOnMute&&e instanceof vi&&(e.stopOnMute=!0),e.source===li.Source.ScreenShare&&Nn()&&(l.simulcast=!1),e.on(Pn.Muted,this.onTrackMuted),e.on(Pn.Unmuted,this.onTrackUnmuted),e.on(Pn.Ended,this.onTrackUnpublish),e.on(Pn.UpstreamPaused,this.onTrackUpstreamPaused),e.on(Pn.UpstreamResumed,this.onTrackUpstreamResumed);const p=qt.fromPartial({cid:e.mediaStreamTrack.id,name:null==t?void 0:t.name,type:li.kindToProto(e.kind),muted:e.isMuted,source:li.sourceToProto(e.source),disableDtx:!(null===(i=null==l?void 0:l.dtx)||void 0===i||i)});let h;if(e.kind===li.Kind.Video){const t=e.mediaStreamTrack.getSettings(),n=null!==(r=t.width)&&void 0!==r?r:null===(a=e.dimensions)||void 0===a?void 0:a.width,i=null!==(o=t.height)&&void 0!==o?o:null===(s=e.dimensions)||void 0===s?void 0:s.height;p.width=null!=n?n:0,p.height=null!=i?i:0,e instanceof bi&&("vp9"===(null==l?void 0:l.videoCodec)||"av1"===(null==l?void 0:l.videoCodec)?(l.simulcast=!1,l.scalabilityMode=null!==(c=l.scalabilityMode)&&void 0!==c?c:"L3T3"):l.scalabilityMode=void 0),h=Ui(e.source===li.Source.ScreenShare,n,i,l),p.layers=function(e,t,n){return n?n.map((i=>{var r,a,o;const s=null!==(r=i.scaleResolutionDownBy)&&void 0!==r?r:1;let c=yi(null!==(a=i.rid)&&void 0!==a?a:"");return c===Qe.UNRECOGNIZED&&1===n.length&&(c=Qe.HIGH),{quality:c,width:e/s,height:t/s,bitrate:null!==(o=i.maxBitrate)&&void 0!==o?o:0,ssrc:0}})):[{quality:Qe.HIGH,width:e,height:t,bitrate:0,ssrc:0}]}(p.width,p.height,h)}else e.kind===li.Kind.Audio&&l.audioBitrate&&(h=[{maxBitrate:l.audioBitrate}]);const f=await this.engine.addTrack(p),m=new Ci(e.kind,f,e);if(e.sid=f.sid,!this.engine.publisher)throw new Sn("publisher is closed");u.debug("publishing ".concat(e.kind," with encodings"),{encodings:h,trackInfo:f});const g={direction:"sendonly"};h&&(g.sendEncodings=h);const v=this.engine.publisher.pc.addTransceiver(e.mediaStreamTrack,g);return l.videoCodec&&this.setPreferredCodec(v,e.kind,l.videoCodec),this.engine.negotiate(),e.sender=v.sender,e instanceof bi?e.startMonitor(this.engine.client):e instanceof vi&&e.startMonitor(),this.addTrackPublication(m),this.emit(En.LocalTrackPublished,m),m}unpublishTrack(e,t){var n,i;const r=this.getPublicationForTrack(e);if(u.debug("unpublishing track",{track:e,method:"unpublishTrack"}),!r||!r.track)return void u.warn("track was not unpublished because no publication was found",{track:e,method:"unpublishTrack"});(e=r.track).off(Pn.Muted,this.onTrackMuted),e.off(Pn.Unmuted,this.onTrackUnmuted),e.off(Pn.Ended,this.onTrackUnpublish),e.off(Pn.UpstreamPaused,this.onTrackUpstreamPaused),e.off(Pn.UpstreamResumed,this.onTrackUpstreamResumed),void 0===t&&(t=null===(i=null===(n=this.roomOptions)||void 0===n?void 0:n.stopLocalTrackOnUnpublish)||void 0===i||i),t&&e.stop();const{mediaStreamTrack:a}=e;switch(this.engine.publisher&&this.engine.publisher.pc.getSenders().forEach((e=>{var t;if(e.track===a)try{null===(t=this.engine.publisher)||void 0===t||t.pc.removeTrack(e),this.engine.negotiate()}catch(e){u.warn("failed to remove track",{error:e,method:"unpublishTrack"})}})),this.tracks.delete(r.trackSid),r.kind){case li.Kind.Audio:this.audioTracks.delete(r.trackSid);break;case li.Kind.Video:this.videoTracks.delete(r.trackSid)}return this.emit(En.LocalTrackUnpublished,r),r.setTrack(void 0),r}unpublishTracks(e){const t=[];return e.forEach((e=>{const n=this.unpublishTrack(e);n&&t.push(n)})),t}async publishData(e,t,n){const i=[];void 0!==n&&n.forEach((e=>{e instanceof Vi?i.push(e.sid):i.push(e)}));const r={kind:t,user:{participantSid:this.sid,payload:e,destinationSids:i}};await this.engine.sendDataPacket(r,t)}setTrackSubscriptionPermissions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.engine.client.sendUpdateSubscriptionPermissions(e,t.map((e=>function(e){var t,n,i;if(!e.participantSid&&!e.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return{participantIdentity:null!==(t=e.participantIdentity)&&void 0!==t?t:"",participantSid:null!==(n=e.participantSid)&&void 0!==n?n:"",allTracks:null!==(i=e.allowAll)&&void 0!==i&&i,trackSids:e.allowedTrackSids||[]}}(e))))}getPublicationForTrack(e){let t;return this.tracks.forEach((n=>{const i=n.track;i&&(e instanceof MediaStreamTrack?(i instanceof vi||i instanceof bi)&&i.mediaStreamTrack===e&&(t=n):e===i&&(t=n))})),t}setPreferredCodec(e,t,n){if(!("getCapabilities"in RTCRtpSender))return;const i=RTCRtpSender.getCapabilities(t);if(!i)return;let r;const a=[];i.codecs.forEach((e=>{const t=e.mimeType.toLowerCase(),i=t==="video/".concat(n);void 0===r&&("h264"===n&&e.sdpFmtpLine&&i&&e.sdpFmtpLine.includes("profile-level-id=42e01f")||i||"audio/opus"===t)?r=e:a.push(e)})),r&&"setCodecPreferences"in e&&(a.unshift(r),e.setCodecPreferences(a))}publishedTracksInfo(){const e=[];return this.tracks.forEach((t=>{void 0!==t.track&&e.push({cid:t.track.mediaStreamTrack.id,track:t.trackInfo})})),e}dataChannelsInfo(){const e=[],t=(t,n)=>{void 0!==(null==t?void 0:t.id)&&null!==t.id&&e.push({label:t.label,id:t.id,target:n})};return t(this.engine.dataChannelForKind(Je.LOSSY),$t.PUBLISHER),t(this.engine.dataChannelForKind(Je.RELIABLE),$t.PUBLISHER),t(this.engine.dataChannelForKind(Je.LOSSY,!0),$t.SUBSCRIBER),t(this.engine.dataChannelForKind(Je.RELIABLE,!0),$t.SUBSCRIBER),e}}class Wi{constructor(){this.queue=[],this.running=!1}enqueue(e){u.trace("enqueuing request to fire later"),this.queue.push(e)}dequeue(){const e=this.queue.shift();e&&e(),u.trace("firing request from queue")}async run(){if(!this.running){for(u.trace("start queue"),this.running=!0;this.running&&this.queue.length>0;)this.dequeue();this.running=!1,u.trace("queue finished")}}pause(){u.trace("pausing queue"),this.running=!1}reset(){u.trace("resetting queue"),this.running=!1,this.queue=[]}isRunning(){return this.running}isEmpty(){return 0===this.queue.length}}let Hi=!0,Qi=!0;function Xi(e,t,n){const i=e.match(t);return i&&i.length>=n&&parseInt(i[n],10)}function Yi(e,t,n){if(!e.RTCPeerConnection)return;const i=e.RTCPeerConnection.prototype,r=i.addEventListener;i.addEventListener=function(e,i){if(e!==t)return r.apply(this,arguments);const a=e=>{const t=n(e);t&&(i.handleEvent?i.handleEvent(t):i(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(i,a),r.apply(this,[e,a])};const a=i.removeEventListener;i.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return a.apply(this,arguments);if(!this._eventMap[t].has(n))return a.apply(this,arguments);const i=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,a.apply(this,[e,i])},Object.defineProperty(i,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function Gi(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Hi=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Ji(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Qi=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Ki(){if("object"==typeof window){if(Hi)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function er(e,t){Qi&&console.warn(e+" is deprecated, please use "+t+" instead.")}function tr(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=Xi(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=Xi(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=Xi(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function nr(e){return"[object Object]"===Object.prototype.toString.call(e)}function ir(e){return nr(e)?Object.keys(e).reduce((function(t,n){const i=nr(e[n]),r=i?ir(e[n]):e[n],a=i&&!Object.keys(r).length;return void 0===r||a?t:Object.assign(t,{[n]:r})}),{}):e}function rr(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((i=>{i.endsWith("Id")?rr(e,e.get(t[i]),n):i.endsWith("Ids")&&t[i].forEach((t=>{rr(e,e.get(t),n)}))})))}function ar(e,t,n){const i=n?"outbound-rtp":"inbound-rtp",r=new Map;if(null===t)return r;const a=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&a.push(e)})),a.forEach((t=>{e.forEach((n=>{n.type===i&&n.trackId===t.id&&rr(e,n,r)}))})),r}const or=Ki;function sr(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const i=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const i="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact);const r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];let e={};"number"==typeof i.ideal?(e[r("min",n)]=i.ideal,t.optional.push(e),e={},e[r("max",n)]=i.ideal,t.optional.push(e)):(e[r("",n)]=i.ideal,t.optional.push(e))}void 0!==i.exact&&"number"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[r("",n)]=i.exact):["min","max"].forEach((e=>{void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[r(e,n)]=i[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},r=function(e,r){if(t.version>=61)return r(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=i(e.audio)}if(e&&"object"==typeof e.video){let a=e.video.facingMode;a=a&&("object"==typeof a?a:{ideal:a});const o=t.version<66;if(a&&("user"===a.exact||"environment"===a.exact||"user"===a.ideal||"environment"===a.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||o)){let t;if(delete e.video.facingMode,"environment"===a.exact||"environment"===a.ideal?t=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{let o=(n=n.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!o&&n.length&&t.includes("back")&&(o=n[n.length-1]),o&&(e.video.deviceId=a.exact?{exact:o.deviceId}:{ideal:o.deviceId}),e.video=i(e.video),or("chrome: "+JSON.stringify(e)),r(e)}))}e.video=i(e.video)}return or("chrome: "+JSON.stringify(e)),r(e)},a=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,i){r(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{i&&i(a(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return r(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(a(e))))))}}}function cr(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function lr(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const r=new Event("track");r.track=n.track,r.receiver=i,r.transceiver={receiver:i},r.streams=[t.stream],this.dispatchEvent(r)})),t.stream.getTracks().forEach((n=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const r=new Event("track");r.track=n,r.receiver=i,r.transceiver={receiver:i},r.streams=[t.stream],this.dispatchEvent(r)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Yi(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function ur(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){let r=n.apply(this,arguments);return r||(r=t(this,e),this._senders.push(r)),r};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){i.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function dr(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,i]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const r=function(e){const t={};return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t[n.id]=n})),t},a=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const i=function(e){n(a(r(e)))};return t.apply(this,[i,e])}return new Promise(((e,n)=>{t.apply(this,[function(t){e(a(r(t)))},n])})).then(n,i)}}function pr(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>ar(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Yi(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>ar(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,i;return this.getSenders().forEach((n=>{n.track===e&&(t?i=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?i=!0:n=t),t.track===e))),i||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function hr(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const i=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(i)&&this._shimmedLocalStreams[n.id].push(i):this._shimmedLocalStreams[n.id]=[n,i],i};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const i=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(i)};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],i.apply(this,arguments)};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),r.apply(this,arguments)}}function fr(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return hr(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}i.apply(this,[t])};const r=e.RTCPeerConnection.prototype.removeStream;function a(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const i=e._reverseStreams[t],r=e._streams[i.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function o(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const i=e._reverseStreams[t],r=e._streams[i.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const r=this.getSenders().find((e=>e.track===t));if(r)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const a=this._streams[n.id];if(a)a.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const i=new e.MediaStream([t]);this._streams[n.id]=i,this._reverseStreams[i.id]=n,this.addStream(i)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=a(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>a(this,e)))}};e.RTCPeerConnection.prototype[t]=i[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=o(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=c.get.apply(this);return""===e.type?e:a(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function mr(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]}))}function gr(e,t){Yi(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var vr=Object.freeze({__proto__:null,shimMediaStream:cr,shimOnTrack:lr,shimGetSendersWithDtmf:ur,shimGetStats:dr,shimSenderReceiverGetStats:pr,shimAddTrackRemoveTrackWithNative:hr,shimAddTrackRemoveTrack:fr,shimPeerConnection:mr,fixNegotiationNeeded:gr,shimGetUserMedia:sr,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((t=>{const i=n.video&&n.video.width,r=n.video&&n.video.height,a=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:a||3}},i&&(n.video.mandatory.maxWidth=i),r&&(n.video.mandatory.maxHeight=r),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}});function br(e,t){const n=e&&e.navigator,i=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,i){er("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,i)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},i&&i.prototype.getSettings){const t=i.prototype.getSettings;i.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(i&&i.prototype.applyConstraints){const t=i.prototype.applyConstraints;i.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function yr(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function _r(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,r,a]=arguments;return i.apply(this,[e||null]).then((e=>{if(t.version<53&&!r)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach(((t,i)=>{e.set(i,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(r,a)}}function Ar(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function wr(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Yi(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function kr(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){er("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function Sr(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Cr(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const i=t.apply(this,arguments);if(n){const{sender:t}=i,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return i})}function xr(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function Er(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function Tr(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}var Pr=Object.freeze({__proto__:null,shimOnTrack:yr,shimPeerConnection:_r,shimSenderGetStats:Ar,shimReceiverGetStats:wr,shimRemoveStream:kr,shimRTCDataChannel:Sr,shimAddTransceiver:Cr,shimGetParameters:xr,shimCreateOffer:Er,shimCreateAnswer:Tr,shimGetUserMedia:br,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}});function Rr(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i&&i.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{n.includes(e.track)&&this.removeTrack(e)}))})}}function Or(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function Dr(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,i=t.createAnswer,r=t.setLocalDescription,a=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(e,t){const i=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[i]);return t?(r.then(e,t),Promise.resolve()):r},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r};let s=function(e,t,n){const i=r.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i};t.setLocalDescription=s,s=function(e,t,n){const i=a.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.setRemoteDescription=s,s=function(e,t,n){const i=o.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.addIceCandidate=s}function Mr(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(Ir(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,i){t.mediaDevices.getUserMedia(e).then(n,i)}.bind(t))}function Ir(e){return e&&void 0!==e.video?Object.assign({},e,{video:ir(e.video)}):e}function Nr(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let i=e.iceServers[n];!i.hasOwnProperty("urls")&&i.hasOwnProperty("url")?(er("RTCIceServer.url","RTCIceServer.urls"),i=JSON.parse(JSON.stringify(i)),i.urls=i.url,delete i.url,t.push(i)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function Lr(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Br(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function $r(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var jr=Object.freeze({__proto__:null,shimLocalStreamsAPI:Rr,shimRemoteStreamsAPI:Or,shimCallbacksAPI:Dr,shimGetUserMedia:Mr,shimConstraints:Ir,shimRTCIceServerUrls:Nr,shimTrackEventTransceiver:Lr,shimCreateOfferLegacy:Br,shimAudioContext:$r}),Ur={exports:{}};!function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((e=>0===e.indexOf(n)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let e=8;e<t.length;e+=2)switch(t[e]){case"raddr":n.relatedAddress=t[e+1];break;case"rport":n.relatedPort=parseInt(t[e+1],10);break;case"tcptype":n.tcpType=t[e+1];break;case"ufrag":n.ufrag=t[e+1],n.usernameFragment=t[e+1];break;default:void 0===n[t[e]]&&(n[t[e]]=t[e+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const i=e.type;return t.push("typ"),t.push(i),"host"!==i&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){let t=e.substr(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){const t={};let n;const i=e.substr(e.indexOf(" ")+1).split(";");for(let e=0;e<i.length;e++)n=i[e].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const i=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?i.push(t+"="+e.parameters[t]):i.push(t)})),t+="a=fmtp:"+n+" "+i.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},i=e.indexOf(":",t);return i>-1?(n.attribute=e.substr(t+1,i-t-1),n.value=e.substr(i+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){const t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){const t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){const t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const i=t.matchPrefix(e+n,"a=ice-ufrag:")[0],r=t.matchPrefix(e+n,"a=ice-pwd:")[0];return i&&r?{usernameFragment:i.substr(12),password:r.substr(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(e)[0].split(" ");for(let r=3;r<i.length;r++){const a=i[r],o=t.matchPrefix(e,"a=rtpmap:"+a+" ")[0];if(o){const i=t.parseRtpMap(o),r=t.matchPrefix(e,"a=fmtp:"+a+" ");switch(i.parameters=r.length?t.parseFmtp(r[0]):{},i.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+a+" ").map(t.parseRtcpFb),n.codecs.push(i),i.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(i.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((e=>{n.headerExtensions.push(t.parseExtmap(e))})),n},t.writeRtpDescription=function(e,n){let i="";i+="m="+e+" ",i+=n.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=n.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",i+="c=IN IP4 0.0.0.0\r\n",i+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((e=>{i+=t.writeRtpMap(e),i+=t.writeFmtp(e),i+=t.writeRtcpFb(e)}));let r=0;return n.codecs.forEach((e=>{e.maxptime>r&&(r=e.maxptime)})),r>0&&(i+="a=maxptime:"+r+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((e=>{i+=t.writeExtmap(e)})),i},t.parseRtpEncodingParameters=function(e){const n=[],i=t.parseRtpParameters(e),r=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),o=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),s=o.length>0&&o[0].ssrc;let c;const l=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substr(17).split(" ").map((e=>parseInt(e,10)))));l.length>0&&l[0].length>1&&l[0][0]===s&&(c=l[0][1]),i.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10)};s&&c&&(t.rtx={ssrc:c}),n.push(t),r&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:s,mechanism:a?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&s&&n.push({ssrc:s});let u=t.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,n.forEach((e=>{e.maxBitrate=u}))),n},t.parseRtcpParameters=function(e){const n={},i=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];i&&(n.cname=i.value,n.ssrc=i.ssrc);const r=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=r.length>0,n.compound=0===r.length;const a=t.matchPrefix(e,"a=rtcp-mux");return n.mux=a.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const i=t.matchPrefix(e,"a=msid:");if(1===i.length)return n=i[0].substr(7).split(" "),{stream:n[0],track:n[1]};const r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return r.length>0?(n=r[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),i=t.matchPrefix(e,"a=max-message-size:");let r;i.length>0&&(r=parseInt(i[0].substr(19),10)),isNaN(r)&&(r=65536);const a=t.matchPrefix(e,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substr(12),10),protocol:n.fmt,maxMessageSize:r};const o=t.matchPrefix(e,"a=sctpmap:");if(o.length>0){const e=o[0].substr(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:r}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,i){let r;const a=void 0!==n?n:2;return r=e||t.generateSessionId(),"v=0\r\no="+(i||"thisisadapterortc")+" "+r+" "+a+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const i=t.splitLines(e);for(let e=0;e<i.length;e++)switch(i[e]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[e].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let e=0;e<n.length;e++)if(n[e].length<2||"="!==n[e].charAt(1))return!1;return!0},e.exports=t}(Ur);var Fr=Ur.exports,Zr=i({__proto__:null,default:Fr},[Ur.exports]);function zr(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),i=Fr.parseCandidate(e.candidate),r=Object.assign(n,i);return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,Yi(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function Vr(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=function(e){if(!e||!e.sdp)return!1;const t=Fr.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=Fr.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},i=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n},r=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},a=function(e,n){let i=65536;"firefox"===t.browser&&57===t.version&&(i=65535);const r=Fr.matchPrefix(e.sdp,"a=max-message-size:");return r.length>0?i=parseInt(r[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(i=2147483637),i},o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const e=i(arguments[0]),t=r(e),n=a(arguments[0],e);let o;o=0===t&&0===n?Number.POSITIVE_INFINITY:0===t||0===n?Math.max(t,n):Math.min(t,n);const s={};Object.defineProperty(s,"maxMessageSize",{get:()=>o}),this._sctp=s}return o.apply(this,arguments)}}function qr(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const i=arguments[0],r=i.length||i.size||i.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},Yi(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function Wr(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function Hr(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function Qr(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Xr(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!=typeof e||e.type&&e.sdp)return n.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}if(e.sdp||"offer"!==e.type&&"answer"!==e.type)return n.apply(this,[e]);const t="offer"===e.type?this.createOffer:this.createAnswer;return t.apply(this).then((e=>n.apply(this,[e])))})}var Yr=Object.freeze({__proto__:null,shimRTCIceCandidate:zr,shimMaxMessageSize:Vr,shimSendThrowTypeError:qr,shimConnectionState:Wr,removeExtmapAllowMixed:Hr,shimAddIceCandidateNullOrEmpty:Qr,shimParameterlessSetLocalDescription:Xr});!function(){let{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=Ki,i=tr(e),r={browserDetails:i,commonShim:Yr,extractVersion:Xi,disableLog:Gi,disableWarnings:Ji,sdp:Zr};switch(i.browser){case"chrome":if(!vr||!mr||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),r;if(null===i.version)return n("Chrome shim can not determine version, not shimming."),r;n("adapter.js shimming chrome."),r.browserShim=vr,Qr(e,i),Xr(e),sr(e,i),cr(e),mr(e,i),lr(e),fr(e,i),ur(e),dr(e),pr(e),gr(e,i),zr(e),Wr(e),Vr(e,i),qr(e),Hr(e,i);break;case"firefox":if(!Pr||!_r||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),r;n("adapter.js shimming firefox."),r.browserShim=Pr,Qr(e,i),Xr(e),br(e,i),_r(e,i),yr(e),kr(e),Ar(e),wr(e),Sr(e),Cr(e),xr(e),Er(e),Tr(e),zr(e),Wr(e),Vr(e,i),qr(e);break;case"safari":if(!jr||!t.shimSafari)return n("Safari shim is not included in this adapter release."),r;n("adapter.js shimming safari."),r.browserShim=jr,Qr(e,i),Xr(e),Nr(e),Br(e),Dr(e),Rr(e),Or(e),Lr(e),Mr(e),$r(e),zr(e),Vr(e,i),qr(e),Hr(e,i);break;default:n("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});const Gr=["syncState","trickle","offer","answer","simulate","leave"];class Jr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isConnected=!1,this.isReconnecting=!1,this.useJSON=e,this.requestQueue=new Wi}async join(e,t,n){return this.isConnected=!1,await this.connect(e,t,{autoSubscribe:null==n?void 0:n.autoSubscribe,publishOnly:null==n?void 0:n.publishOnly,adaptiveStream:null==n?void 0:n.adaptiveStream})}async reconnect(e,t){this.isReconnecting=!0,await this.connect(e,t,{reconnect:!0})}connect(e,t,n){e.startsWith("http")&&(e=e.replace("http","ws")),e=e.replace(/\/$/,""),e+="/rtc";const i=function(e,t,n){const i=new URLSearchParams;return i.set("access_token",e),(null==n?void 0:n.reconnect)&&i.set("reconnect","1"),void 0!==(null==n?void 0:n.autoSubscribe)&&i.set("auto_subscribe",n.autoSubscribe?"1":"0"),i.set("sdk","js"),i.set("version",t.version),i.set("protocol",t.protocol.toString()),t.deviceModel&&i.set("device_model",t.deviceModel),t.os&&i.set("os",t.os),t.osVersion&&i.set("os_version",t.osVersion),t.browser&&i.set("browser",t.browser),t.browserVersion&&i.set("browser_version",t.browserVersion),void 0!==(null==n?void 0:n.publishOnly)&&i.set("publish",n.publishOnly),(null==n?void 0:n.adaptiveStream)&&i.set("adaptive_stream","1"),"?".concat(i.toString())}(t,xt.fromPartial({sdk:Ke.JS,protocol:7,version:"0.18.5"}),n);return new Promise(((t,r)=>{u.debug("connecting to ".concat(e+i)),this.ws=void 0;const a=new WebSocket(e+i);a.binaryType="arraybuffer",a.onerror=async t=>{if(this.ws)this.handleWSError(t);else try{const t=await fetch("http".concat(e.substring(2),"/validate").concat(i));if(t.ok)r(new An("Internal error"));else{const e=await t.text();r(new An(e))}}catch(e){r(new An("server was not reachable"))}},a.onopen=()=>{this.ws=a,n.reconnect&&(this.isConnected=!0,t())},a.onmessage=async e=>{let n;if("string"==typeof e.data){const t=JSON.parse(e.data);n=Vt.fromJSON(t)}else{if(!(e.data instanceof ArrayBuffer))return void u.error("could not decode websocket message: ".concat(typeof e.data));n=Vt.decode(new Uint8Array(e.data))}this.isConnected?(this.signalLatency&&await In(this.signalLatency),this.handleSignalResponse(n)):n.join?(this.isConnected=!0,t(n.join)):r(new An("did not receive join response"))},a.onclose=e=>{this.isConnected&&this.ws===a&&(u.debug("websocket connection closed: ".concat(e.reason)),this.isConnected=!1,this.onClose&&this.onClose(e.reason),this.ws===a&&(this.ws=void 0))}}))}close(){var e;this.isConnected=!1,this.ws&&(this.ws.onclose=null),null===(e=this.ws)||void 0===e||e.close(),this.ws=void 0}sendOffer(e){u.debug("sending offer",e),this.sendRequest({offer:ea(e)})}sendAnswer(e){u.debug("sending answer"),this.sendRequest({answer:ea(e)})}sendIceCandidate(e,t){u.trace("sending ice candidate",e),this.sendRequest({trickle:{candidateInit:JSON.stringify(e),target:t}})}sendMuteTrack(e,t){this.sendRequest({mute:{sid:e,muted:t}})}sendAddTrack(e){this.sendRequest({addTrack:qt.fromPartial(e)})}sendUpdateTrackSettings(e){this.sendRequest({trackSetting:e})}sendUpdateSubscription(e){this.sendRequest({subscription:e})}sendSyncState(e){this.sendRequest({syncState:e})}sendUpdateVideoLayers(e,t){this.sendRequest({updateLayers:{trackSid:e,layers:t}})}sendUpdateSubscriptionPermissions(e,t){this.sendRequest({subscriptionPermission:{allParticipants:e,trackPermissions:t}})}sendSimulateScenario(e){this.sendRequest({simulate:e})}sendLeave(){this.sendRequest(zt.fromPartial({leave:{}}))}async sendRequest(e){const t=!(arguments.length>1&&void 0!==arguments[1]&&arguments[1]||function(e){const t=void 0!==Object.keys(e).find((e=>Gr.includes(e)));return u.trace("request allowed to bypass queue:",{canPass:t,req:e}),t}(e));if(!t||!this.isReconnecting&&this.requestQueue.isEmpty())if(this.signalLatency&&await In(this.signalLatency),this.ws)try{this.useJSON?this.ws.send(JSON.stringify(zt.toJSON(e))):this.ws.send(zt.encode(e).finish())}catch(e){u.error("error sending signal message",{error:e})}else u.error("cannot send signal request before connected");else this.requestQueue.enqueue((()=>this.sendRequest(e,!0)))}handleSignalResponse(e){if(e.answer){const t=Kr(e.answer);this.onAnswer&&this.onAnswer(t)}else if(e.offer){const t=Kr(e.offer);this.onOffer&&this.onOffer(t)}else if(e.trickle){const t=JSON.parse(e.trickle.candidateInit);this.onTrickle&&this.onTrickle(t,e.trickle.target)}else e.update?this.onParticipantUpdate&&this.onParticipantUpdate(e.update.participants):e.trackPublished?this.onLocalTrackPublished&&this.onLocalTrackPublished(e.trackPublished):e.speakersChanged?this.onSpeakersChanged&&this.onSpeakersChanged(e.speakersChanged.speakers):e.leave?this.onLeave&&this.onLeave(e.leave):e.mute?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(e.mute.sid,e.mute.muted):e.roomUpdate?this.onRoomUpdate&&this.onRoomUpdate(e.roomUpdate.room):e.connectionQuality?this.onConnectionQuality&&this.onConnectionQuality(e.connectionQuality):e.streamStateUpdate?this.onStreamStateUpdate&&this.onStreamStateUpdate(e.streamStateUpdate):e.subscribedQualityUpdate?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(e.subscribedQualityUpdate):e.subscriptionPermissionUpdate?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(e.subscriptionPermissionUpdate):e.refreshToken?this.onTokenRefresh&&this.onTokenRefresh(e.refreshToken):e.trackUnpublished?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(e.trackUnpublished):u.debug("unsupported message",e)}setReconnected(){this.isReconnecting=!1,this.requestQueue.run()}handleWSError(e){u.error("websocket error",e)}}function Kr(e){const t={type:"offer",sdp:e.sdp};switch(e.type){case"answer":case"offer":case"pranswer":case"rollback":t.type=e.type}return t}function ea(e){return{sdp:e.sdp,type:e.type}}class ta{constructor(e){this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.negotiate=wi((()=>{this.createAndSendOffer()}),100),this.pc=new RTCPeerConnection(e)}get isICEConnected(){return"connected"===this.pc.iceConnectionState||"completed"===this.pc.iceConnectionState}async addIceCandidate(e){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)}async setRemoteDescription(e){await this.pc.setRemoteDescription(e),this.pendingCandidates.forEach((e=>{this.pc.addIceCandidate(e)})),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate&&(this.renegotiate=!1,this.createAndSendOffer())}async createAndSendOffer(e){if(void 0===this.onOffer)return;if((null==e?void 0:e.iceRestart)&&(u.debug("restarting ICE"),this.restartingIce=!0),"have-local-offer"===this.pc.signalingState){const t=this.pc.remoteDescription;if(!(null==e?void 0:e.iceRestart)||!t)return void(this.renegotiate=!0);await this.pc.setRemoteDescription(t)}else if("closed"===this.pc.signalingState)return void u.warn("could not createOffer with closed peer connection");u.debug("starting to negotiate");const t=await this.pc.createOffer(e);await this.pc.setLocalDescription(t),this.onOffer(t)}close(){this.pc.close()}}const na="_lossy",ia="_reliable",ra=15e3;var aa;!function(e){e[e.New=0]="New",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected",e[e.Reconnecting=3]="Reconnecting",e[e.Closed=4]="Closed"}(aa||(aa={}));class oa extends Hn.exports.EventEmitter{constructor(){super(),this.rtcConfig={},this.subscriberPrimary=!1,this.pcState=aa.New,this.isClosed=!0,this.pendingTrackResolvers={},this.hasPublished=!1,this.reconnectAttempts=0,this.reconnectStart=0,this.fullReconnectOnNext=!1,this.handleDataChannel=async e=>{let{channel:t}=e;if(t){if(t.label===ia)this.reliableDCSub=t;else{if(t.label!==na)return;this.lossyDCSub=t}u.debug("on data channel ".concat(t.id,", ").concat(t.label)),t.onmessage=this.handleDataMessage}},this.handleDataMessage=async e=>{let t;if(e.data instanceof ArrayBuffer)t=e.data;else{if(!(e.data instanceof Blob))return void u.error("unsupported data type",e.data);t=await e.data.arrayBuffer()}const n=_t.decode(new Uint8Array(t));n.speaker?this.emit(Tn.ActiveSpeakersUpdate,n.speaker.speakers):n.user&&this.emit(Tn.DataPacketReceived,n.user,n.kind)},this.handleDataError=e=>{const t=0===e.currentTarget.maxRetransmits?"lossy":"reliable";if(e instanceof ErrorEvent){const{error:n}=e.error;u.error("DataChannel error on ".concat(t,": ").concat(e.message),n)}else u.error("Unknown DataChannel Error on ".concat(t),e)},this.handleDisconnect=e=>{if(this.isClosed)return;u.debug("".concat(e," disconnected")),0===this.reconnectAttempts&&(this.reconnectStart=Date.now());const t=this.reconnectAttempts*this.reconnectAttempts*300;setTimeout((async()=>{var e;if(!this.isClosed){(Nn()||(null===(e=this.clientConfiguration)||void 0===e?void 0:e.resumeConnection)===Ye.DISABLED)&&(this.fullReconnectOnNext=!0);try{this.fullReconnectOnNext?await this.restartConnection():await this.resumeConnection(),this.reconnectAttempts=0,this.fullReconnectOnNext=!1}catch(e){this.reconnectAttempts+=1;let t=!0;e instanceof Sn?(u.debug("received unrecoverable error",{error:e}),t=!1):e instanceof ca||(this.fullReconnectOnNext=!0);const n=Date.now()-this.reconnectStart;(this.reconnectAttempts>=10||n>6e4)&&(t=!1),t?this.handleDisconnect("reconnect"):(u.info("could not recover connection after ".concat(10," attempts, ").concat(n,"ms. giving up")),this.emit(Tn.Disconnected),this.close())}}}),t)},this.client=new Jr}async join(e,t,n){this.url=e,this.token=t,this.signalOpts=n;const i=await this.client.join(e,t,n);return this.isClosed=!1,this.subscriberPrimary=i.subscriberPrimary,this.publisher||this.configure(i),this.subscriberPrimary||this.negotiate(),this.clientConfiguration=i.clientConfiguration,i}close(){this.isClosed=!0,this.removeAllListeners(),this.publisher&&"closed"!==this.publisher.pc.signalingState&&(this.publisher.pc.getSenders().forEach((e=>{var t,n;try{(null===(t=this.publisher)||void 0===t?void 0:t.pc.removeTrack)&&(null===(n=this.publisher)||void 0===n||n.pc.removeTrack(e))}catch(e){u.warn("could not removeTrack",{error:e})}})),this.publisher.close(),this.publisher=void 0),this.subscriber&&(this.subscriber.close(),this.subscriber=void 0),this.client.close()}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new wn("a track with the same ID has already been published");return new Promise((t=>{this.pendingTrackResolvers[e.cid]=t,this.client.sendAddTrack(e)}))}updateMuteStatus(e,t){this.client.sendMuteTrack(e,t)}get dataSubscriberReadyState(){var e;return null===(e=this.reliableDCSub)||void 0===e?void 0:e.readyState}get connectedServerAddress(){return this.connectedServerAddr}configure(e){if(this.publisher||this.subscriber)return;if(e.iceServers&&!this.rtcConfig.iceServers){const t=[];e.iceServers.forEach((e=>{const n={urls:e.urls};e.username&&(n.username=e.username),e.credential&&(n.credential=e.credential),t.push(n)})),this.rtcConfig.iceServers=t}this.rtcConfig.sdpSemantics="unified-plan",this.rtcConfig.continualGatheringPolicy="gather_continually",this.publisher=new ta(this.rtcConfig),this.subscriber=new ta(this.rtcConfig),this.emit(Tn.TransportsCreated,this.publisher,this.subscriber),this.publisher.pc.onicecandidate=e=>{e.candidate&&(u.trace("adding ICE candidate for peer",e.candidate),this.client.sendIceCandidate(e.candidate,$t.PUBLISHER))},this.subscriber.pc.onicecandidate=e=>{e.candidate&&this.client.sendIceCandidate(e.candidate,$t.SUBSCRIBER)},this.publisher.onOffer=e=>{this.client.sendOffer(e)};let t=this.publisher.pc,n=this.subscriber.pc;e.subscriberPrimary&&(t=this.subscriber.pc,n=this.publisher.pc,this.subscriber.pc.ondatachannel=this.handleDataChannel),this.primaryPC=t,t.onconnectionstatechange=async()=>{if(u.trace("connection state changed",{state:t.connectionState}),"connected"===t.connectionState){try{this.connectedServerAddr=await sa(t)}catch(e){u.warn("could not get connected server address",{error:e})}const e=this.pcState===aa.New;this.pcState=aa.Connected,e&&this.emit(Tn.Connected)}else"failed"===t.connectionState&&this.pcState===aa.Connected&&(this.pcState=aa.Disconnected,this.handleDisconnect("primary peerconnection"))},n.onconnectionstatechange=async()=>{"failed"===n.connectionState&&this.handleDisconnect("secondary peerconnection")},Bn()?this.subscriber.pc.ontrack=e=>{this.emit(Tn.MediaTrackAdded,e.track,e.streams[0],e.receiver)}:this.subscriber.pc.onaddstream=e=>{const t=e.stream.getTracks()[0];this.emit(Tn.MediaTrackAdded,t,e.stream)},this.lossyDC=this.publisher.pc.createDataChannel(na,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.publisher.pc.createDataChannel(ia,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.client.onAnswer=async e=>{this.publisher&&(u.debug("received server answer",{RTCSdpType:e.type,signalingState:this.publisher.pc.signalingState}),await this.publisher.setRemoteDescription(e))},this.client.onTrickle=(e,t)=>{this.publisher&&this.subscriber&&(u.trace("got ICE candidate from peer",{candidate:e,target:t}),t===$t.PUBLISHER?this.publisher.addIceCandidate(e):this.subscriber.addIceCandidate(e))},this.client.onOffer=async e=>{if(!this.subscriber)return;u.debug("received server offer",{RTCSdpType:e.type,signalingState:this.subscriber.pc.signalingState}),await this.subscriber.setRemoteDescription(e);const t=await this.subscriber.pc.createAnswer();await this.subscriber.pc.setLocalDescription(t),this.client.sendAnswer(t)},this.client.onLocalTrackPublished=e=>{u.debug("received trackPublishedResponse",e);const t=this.pendingTrackResolvers[e.cid];t?(delete this.pendingTrackResolvers[e.cid],t(e.track)):u.error("missing track resolver for ".concat(e.cid))},this.client.onTokenRefresh=e=>{this.token=e},this.client.onClose=()=>{this.handleDisconnect("signal")},this.client.onLeave=e=>{(null==e?void 0:e.canReconnect)?(this.fullReconnectOnNext=!0,this.primaryPC=void 0):(this.emit(Tn.Disconnected),this.close())}}async restartConnection(){var e,t;if(!this.url||!this.token)throw new Sn("could not reconnect, url or token not saved");let n;u.info("reconnecting, attempt: ".concat(this.reconnectAttempts)),0===this.reconnectAttempts&&this.emit(Tn.Restarting),this.primaryPC=void 0,null===(e=this.publisher)||void 0===e||e.close(),this.publisher=void 0,null===(t=this.subscriber)||void 0===t||t.close(),this.subscriber=void 0;try{n=await this.join(this.url,this.token,this.signalOpts)}catch(e){throw new ca}await this.waitForPCConnected(),this.client.setReconnected(),this.emit(Tn.Restarted,n)}async resumeConnection(){if(!this.url||!this.token)throw new Sn("could not reconnect, url or token not saved");if(!this.publisher||!this.subscriber)throw new Sn("publisher and subscriber connections unset");u.info("resuming signal connection, attempt ".concat(this.reconnectAttempts)),0===this.reconnectAttempts&&this.emit(Tn.Resuming);try{await this.client.reconnect(this.url,this.token)}catch(e){throw new ca}this.emit(Tn.SignalResumed),this.subscriber.restartingIce=!0,this.hasPublished&&await this.publisher.createAndSendOffer({iceRestart:!0}),await this.waitForPCConnected(),this.client.setReconnected(),this.emit(Tn.Resumed)}async waitForPCConnected(){var e;const t=Date.now();let n=t;for(this.pcState=aa.Reconnecting,u.debug("waiting for peer connection to reconnect");n-t<ra&&void 0!==this.primaryPC;){if(n-t>2e3&&"connected"===(null===(e=this.primaryPC)||void 0===e?void 0:e.connectionState)){this.pcState=aa.Connected;try{this.connectedServerAddr=await sa(this.primaryPC)}catch(e){u.warn("could not get connected server address",{error:e})}}if(this.pcState===aa.Connected)return;await In(100),n=Date.now()}throw new An("could not establish PC connection")}async sendDataPacket(e,t){const n=_t.encode(e).finish();await this.ensurePublisherConnected(t),t===Je.LOSSY&&this.lossyDC?this.lossyDC.send(n):t===Je.RELIABLE&&this.reliableDC&&this.reliableDC.send(n)}async ensurePublisherConnected(e){var t,n;if(!this.subscriberPrimary)return;if(!this.publisher)throw new An("publisher connection not set");this.publisher.isICEConnected||"checking"===this.publisher.pc.iceConnectionState||this.negotiate();const i=this.dataChannelForKind(e);if("open"===(null==i?void 0:i.readyState))return;const r=(new Date).getTime()+ra;for(;(new Date).getTime()<r;){if(this.publisher.isICEConnected&&"open"===(null===(t=this.dataChannelForKind(e))||void 0===t?void 0:t.readyState))return;await In(50)}throw new An("could not establish publisher connection, state ".concat(null===(n=this.publisher)||void 0===n?void 0:n.pc.iceConnectionState))}negotiate(){this.publisher&&(this.hasPublished=!0,this.publisher.negotiate())}dataChannelForKind(e,t){if(t){if(e===Je.LOSSY)return this.lossyDCSub;if(e===Je.RELIABLE)return this.reliableDCSub}else{if(e===Je.LOSSY)return this.lossyDC;if(e===Je.RELIABLE)return this.reliableDC}}}async function sa(e){var t;let n="";const i=new Map,r=new Map;if((await e.getStats()).forEach((e=>{switch(e.type){case"transport":n=e.selectedCandidatePairId;break;case"candidate-pair":""===n&&e.selected&&(n=e.id),i.set(e.id,e);break;case"remote-candidate":r.set(e.id,"".concat(e.address,":").concat(e.port))}})),""===n)return;const a=null===(t=i.get(n))||void 0===t?void 0:t.remoteCandidateId;return void 0!==a?r.get(a):void 0}class ca extends Error{}const la={audioBitrate:Ei.speech.maxBitrate,dtx:!0,simulcast:!0,screenShareEncoding:Ri.h1080fps15.encoding,stopMicTrackOnMute:!1},ua={autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},da={resolution:Ti.h720.resolution};var pa;!function(e){e.Disconnected="disconnected",e.Connected="connected",e.Reconnecting="reconnecting"}(pa||(pa={}));class ha extends Hn.exports.EventEmitter{constructor(e){var t,n,i;switch(super(),t=this,this.state=pa.Disconnected,this.activeSpeakers=[],this.sid="",this.name="",this.metadata=void 0,this.audioEnabled=!0,this.connect=async(e,t,n)=>{var i,r;if(this.state===pa.Disconnected){this.createEngine(),this.acquireAudioContext(),(null==n?void 0:n.rtcConfig)&&(this.engine.rtcConfig=n.rtcConfig),this.connOptions=n;try{const a=await this.engine.join(e,t,{autoSubscribe:null==n?void 0:n.autoSubscribe,publishOnly:null==n?void 0:n.publishOnly,adaptiveStream:"object"==typeof(null===(i=this.options)||void 0===i?void 0:i.adaptiveStream)||(null===(r=this.options)||void 0===r?void 0:r.adaptiveStream)});if(u.debug("connected to Livekit Server version: ".concat(a.serverVersion,", region: ").concat(a.serverRegion)),!a.serverVersion)throw new kn("unknown server version");"0.15.1"===a.serverVersion&&this.options.dynacast&&(u.debug("disabling dynacast due to server version"),this.options.dynacast=!1),this.state=pa.Connected;const o=a.participant;this.localParticipant.sid=o.sid,this.localParticipant.identity=o.identity,this.localParticipant.updateInfo(o),this.localParticipant.on(En.MetadataChanged,(e=>{this.emit(xn.MetadataChanged,e,this.localParticipant)})).on(En.ParticipantMetadataChanged,(e=>{this.emit(xn.ParticipantMetadataChanged,e,this.localParticipant)})).on(En.TrackMuted,(e=>{this.emit(xn.TrackMuted,e,this.localParticipant)})).on(En.TrackUnmuted,(e=>{this.emit(xn.TrackUnmuted,e,this.localParticipant)})).on(En.LocalTrackPublished,(e=>{this.emit(xn.LocalTrackPublished,e,this.localParticipant)})).on(En.LocalTrackUnpublished,(e=>{this.emit(xn.LocalTrackUnpublished,e,this.localParticipant)})).on(En.ConnectionQualityChanged,(e=>{this.emit(xn.ConnectionQualityChanged,e,this.localParticipant)})).on(En.MediaDevicesError,(e=>{this.emit(xn.MediaDevicesError,e)})).on(En.ParticipantPermissionsChanged,(e=>{this.emit(xn.ParticipantPermissionsChanged,e,this.localParticipant)})),a.otherParticipants.forEach((e=>{this.getOrCreateParticipant(e.sid,e)})),this.name=a.room.name,this.sid=a.room.sid,this.metadata=a.room.metadata,this.emit(xn.StateChanged,this.state)}catch(e){throw this.engine.close(),e}return new Promise(((e,t)=>{const n=setTimeout((()=>{this.engine.close(),t(new An("could not connect after timeout"))}),ra);this.engine.once(Tn.Connected,(()=>{var t;clearTimeout(n),Bn()&&(window.addEventListener("beforeunload",this.onBeforeUnload),null===(t=navigator.mediaDevices)||void 0===t||t.addEventListener("devicechange",this.handleDeviceChange)),e(this)}))}))}u.warn("already connected to room ".concat(this.name))},this.disconnect=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t.engine&&(t.engine.client.sendLeave(),t.engine.close()),t.handleDisconnect(e),t.engine=void 0},this.onBeforeUnload=()=>{this.disconnect()},this.handleRestarting=()=>{this.state=pa.Reconnecting,this.emit(xn.Reconnecting),this.emit(xn.StateChanged,this.state);for(const e of this.participants.values())this.handleParticipantDisconnected(e.sid,e)},this.handleRestarted=async e=>{u.debug("reconnected to server region ".concat(e.serverRegion)),this.state=pa.Connected,this.emit(xn.Reconnected),this.emit(xn.StateChanged,this.state),e.participant&&(this.localParticipant.sid=e.participant.sid,this.handleParticipantUpdates([e.participant])),this.handleParticipantUpdates(e.otherParticipants);const t=[];this.localParticipant.tracks.forEach((e=>{e.track&&t.push(e)})),await Promise.all(t.map((async e=>{const t=e.track;this.localParticipant.unpublishTrack(t,!1),this.localParticipant.publishTrack(t,e.options)})))},this.handleParticipantUpdates=e=>{e.forEach((e=>{if(e.sid===this.localParticipant.sid||e.identity===this.localParticipant.identity)return void this.localParticipant.updateInfo(e);let t=this.participants.get(e.sid);const n=!t;t=this.getOrCreateParticipant(e.sid,e),e.state===Ge.DISCONNECTED?this.handleParticipantDisconnected(e.sid,t):n?this.emit(xn.ParticipantConnected,t):t.updateInfo(e)}))},this.handleActiveSpeakersUpdate=e=>{const t=[],n={};e.forEach((e=>{if(n[e.sid]=!0,e.sid===this.localParticipant.sid)this.localParticipant.audioLevel=e.level,this.localParticipant.setIsSpeaking(!0),t.push(this.localParticipant);else{const n=this.participants.get(e.sid);n&&(n.audioLevel=e.level,n.setIsSpeaking(!0),t.push(n))}})),n[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.participants.forEach((e=>{n[e.sid]||(e.audioLevel=0,e.setIsSpeaking(!1))})),this.activeSpeakers=t,this.emit(xn.ActiveSpeakersChanged,t)},this.handleSpeakersChanged=e=>{const t=new Map;this.activeSpeakers.forEach((e=>{t.set(e.sid,e)})),e.forEach((e=>{let n=this.participants.get(e.sid);e.sid===this.localParticipant.sid&&(n=this.localParticipant),n&&(n.audioLevel=e.level,n.setIsSpeaking(e.active),e.active?t.set(e.sid,n):t.delete(e.sid))}));const n=Array.from(t.values());n.sort(((e,t)=>t.audioLevel-e.audioLevel)),this.activeSpeakers=n,this.emit(xn.ActiveSpeakersChanged,n)},this.handleStreamStateUpdate=e=>{e.streamStates.forEach((e=>{const t=this.participants.get(e.participantSid);if(!t)return;const n=t.getTrackPublication(e.trackSid);n&&n.track&&(n.track.streamState=li.streamStateFromProto(e.state),t.emit(En.TrackStreamStateChanged,n,n.track.streamState),this.emit(En.TrackStreamStateChanged,n,n.track.streamState,t))}))},this.handleSubscriptionPermissionUpdate=e=>{const t=this.participants.get(e.participantSid);if(!t)return;const n=t.getTrackPublication(e.trackSid);n&&(n._allowed=e.allowed,t.emit(En.TrackSubscriptionPermissionChanged,n,n.subscriptionStatus),this.emit(En.TrackSubscriptionPermissionChanged,n,n.subscriptionStatus,t))},this.handleDataPacket=(e,t)=>{const n=this.participants.get(e.participantSid);this.emit(xn.DataReceived,e.payload,n,t),null==n||n.emit(En.DataReceived,e.payload,t)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(xn.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=e=>{u.warn("could not playback audio",e),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(xn.AudioPlaybackStatusChanged,!1))},this.handleDeviceChange=async()=>{this.emit(xn.MediaDevicesChanged)},this.handleRoomUpdate=e=>{this.metadata=e.metadata,this.emit(xn.RoomMetadataChanged,e.metadata)},this.handleConnectionQualityUpdate=e=>{e.updates.forEach((e=>{if(e.participantSid===this.localParticipant.sid)return void this.localParticipant.setConnectionQuality(e.quality);const t=this.participants.get(e.participantSid);t&&t.setConnectionQuality(e.quality)}))},this.participants=new Map,this.options=e||{},null===(i=null===(n=this.options)||void 0===n?void 0:n.publishDefaults)||void 0===i?void 0:i.videoCodec){case"av1":case"vp9":this.options.publishDefaults.simulcast=void 0}this.options.audioCaptureDefaults=Lt(Lt({},ua),null==e?void 0:e.audioCaptureDefaults),this.options.videoCaptureDefaults=Lt(Lt({},da),null==e?void 0:e.videoCaptureDefaults),this.options.publishDefaults=Lt(Lt({},la),null==e?void 0:e.publishDefaults),this.createEngine(),this.localParticipant=new qi("","",this.engine,this.options)}createEngine(){this.engine||(this.engine=new oa,this.engine.client.signalLatency=this.options.expSignalLatency,this.engine.client.onParticipantUpdate=this.handleParticipantUpdates,this.engine.client.onRoomUpdate=this.handleRoomUpdate,this.engine.client.onSpeakersChanged=this.handleSpeakersChanged,this.engine.client.onStreamStateUpdate=this.handleStreamStateUpdate,this.engine.client.onSubscriptionPermissionUpdate=this.handleSubscriptionPermissionUpdate,this.engine.client.onConnectionQuality=this.handleConnectionQualityUpdate,this.engine.on(Tn.MediaTrackAdded,((e,t,n)=>{this.onTrackAdded(e,t,n)})).on(Tn.Disconnected,(()=>{this.handleDisconnect()})).on(Tn.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(Tn.DataPacketReceived,this.handleDataPacket).on(Tn.Resuming,(()=>{this.state=pa.Reconnecting,this.emit(xn.Reconnecting),this.emit(xn.StateChanged,this.state)})).on(Tn.Resumed,(()=>{this.state=pa.Connected,this.emit(xn.Reconnected),this.emit(xn.StateChanged,this.state),this.updateSubscriptions()})).on(Tn.SignalResumed,(()=>{this.state===pa.Reconnecting&&this.sendSyncState()})).on(Tn.Restarting,this.handleRestarting).on(Tn.Restarted,this.handleRestarted))}static getLocalDevices(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Mn.getInstance().getDevices(e,t)}getParticipantByIdentity(e){for(const[,t]of this.participants)if(t.identity===e)return t;if(this.localParticipant.identity===e)return this.localParticipant}simulateScenario(e){let t;switch(e){case"speaker":t=bn.fromPartial({speakerUpdate:3});break;case"node-failure":t=bn.fromPartial({nodeFailure:!0});break;case"server-leave":t=bn.fromPartial({serverLeave:!0});break;case"migration":t=bn.fromPartial({migration:!0})}t&&this.engine.client.sendSimulateScenario(t)}async startAudio(){this.acquireAudioContext();const e=[];this.participants.forEach((t=>{t.audioTracks.forEach((t=>{t.track&&t.track.attachedElements.forEach((t=>{e.push(t)}))}))}));try{await Promise.all(e.map((e=>e.play()))),this.handleAudioPlaybackStarted()}catch(e){throw this.handleAudioPlaybackFailed(e),e}}get canPlaybackAudio(){return this.audioEnabled}async switchActiveDevice(e,t){if("audioinput"===e){const e=Array.from(this.localParticipant.audioTracks.values()).filter((e=>e.source===li.Source.Microphone));await Promise.all(e.map((e=>{var n;return null===(n=e.audioTrack)||void 0===n?void 0:n.setDeviceId(t)}))),this.options.audioCaptureDefaults.deviceId=t}else if("videoinput"===e){const e=Array.from(this.localParticipant.videoTracks.values()).filter((e=>e.source===li.Source.Camera));await Promise.all(e.map((e=>{var n;return null===(n=e.videoTrack)||void 0===n?void 0:n.setDeviceId(t)}))),this.options.videoCaptureDefaults.deviceId=t}else if("audiooutput"===e){const e=[];this.participants.forEach((t=>{t.audioTracks.forEach((t=>{t.isSubscribed&&t.track&&t.track.attachedElements.forEach((t=>{e.push(t)}))}))})),await Promise.all(e.map((async e=>{"setSinkId"in e&&await e.setSinkId(t)})))}}onTrackAdded(e,t,n){const i=function(e){const t=e.split("|");return t.length>1?[t[0],e.substr(t[0].length+1)]:[e,""]}(t.id),r=i[0];let a=i[1];a&&""!==a||(a=e.id);const o=this.getOrCreateParticipant(r);let s;this.options.adaptiveStream&&(s="object"==typeof this.options.adaptiveStream?this.options.adaptiveStream:{}),o.addSubscribedMediaTrack(e,a,t,n,s)}handleDisconnect(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t;this.state!==pa.Disconnected&&(this.participants.forEach((e=>{e.tracks.forEach((t=>{e.unpublishTrack(t.trackSid)}))})),this.localParticipant.tracks.forEach((t=>{var n,i;t.track&&this.localParticipant.unpublishTrack(t.track),e&&(null===(n=t.track)||void 0===n||n.detach(),null===(i=t.track)||void 0===i||i.stop())})),this.participants.clear(),this.activeSpeakers=[],this.audioContext&&(this.audioContext.close(),this.audioContext=void 0),Bn()&&(window.removeEventListener("beforeunload",this.onBeforeUnload),null===(t=navigator.mediaDevices)||void 0===t||t.removeEventListener("devicechange",this.handleDeviceChange)),this.state=pa.Disconnected,this.emit(xn.Disconnected),this.emit(xn.StateChanged,this.state))}handleParticipantDisconnected(e,t){this.participants.delete(e),t&&(t.tracks.forEach((e=>{t.unpublishTrack(e.trackSid)})),this.emit(xn.ParticipantDisconnected,t))}acquireAudioContext(){this.audioContext&&this.audioContext.close();const e=gi();e&&(this.audioContext=e)}createParticipant(e,t){let n;return n=t?Vi.fromParticipantInfo(this.engine.client,t):new Vi(this.engine.client,e,""),n}getOrCreateParticipant(e,t){if(this.participants.has(e))return this.participants.get(e);const n=this.createParticipant(e,t);return this.participants.set(e,n),n.on(En.TrackPublished,(e=>{this.emit(xn.TrackPublished,e,n)})).on(En.TrackSubscribed,((e,t)=>{e.kind===li.Kind.Audio&&(e.on(Pn.AudioPlaybackStarted,this.handleAudioPlaybackStarted),e.on(Pn.AudioPlaybackFailed,this.handleAudioPlaybackFailed)),this.emit(xn.TrackSubscribed,e,t,n)})).on(En.TrackUnpublished,(e=>{this.emit(xn.TrackUnpublished,e,n)})).on(En.TrackUnsubscribed,((e,t)=>{this.emit(xn.TrackUnsubscribed,e,t,n)})).on(En.TrackSubscriptionFailed,(e=>{this.emit(xn.TrackSubscriptionFailed,e,n)})).on(En.TrackMuted,(e=>{this.emit(xn.TrackMuted,e,n)})).on(En.TrackUnmuted,(e=>{this.emit(xn.TrackUnmuted,e,n)})).on(En.MetadataChanged,(e=>{this.emit(xn.MetadataChanged,e,n)})).on(En.ParticipantMetadataChanged,(e=>{this.emit(xn.ParticipantMetadataChanged,e,n)})).on(En.ConnectionQualityChanged,(e=>{this.emit(xn.ConnectionQualityChanged,e,n)})).on(En.ParticipantPermissionsChanged,(e=>{this.emit(xn.ParticipantPermissionsChanged,e,n)})),n}sendSyncState(){var e;if(void 0===this.engine.subscriber||null===this.engine.subscriber.pc.localDescription)return;const t=this.engine.subscriber.pc.localDescription,n=(null===(e=this.connOptions)||void 0===e?void 0:e.autoSubscribe)||!1,i=new Array;this.participants.forEach((e=>{e.tracks.forEach((e=>{e.isSubscribed!==n&&i.push(e.trackSid)}))})),this.engine.client.sendSyncState({answer:ea({sdp:t.sdp,type:t.type}),subscription:{trackSids:i,subscribe:!n,participantTracks:[]},publishTracks:this.localParticipant.publishedTracksInfo(),dataChannels:this.localParticipant.dataChannelsInfo()})}updateSubscriptions(){for(const e of this.participants.values())for(const t of e.videoTracks.values())t.isSubscribed&&t instanceof zi&&t.emitTrackUpdate()}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return u.debug("room event",{event:e,args:n}),super.emit(e,...n)}}async function fa(e){var t,n;null!=e||(e={}),null!==(t=e.audio)&&void 0!==t||(e.audio=!0),null!==(n=e.video)&&void 0!==n||(e.video=!0);const i=mi(hi(e,ua,da)),r=await navigator.mediaDevices.getUserMedia(i);return r.getTracks().map((t=>{const n="audio"===t.kind;let a;n?e.audio:e.video;const o=n?i.audio:i.video;"boolean"!=typeof o&&(a=o);const s=Mi(t,a);return s.kind===li.Kind.Video?s.source=li.Source.Camera:s.kind===li.Kind.Audio&&(s.source=li.Source.Microphone),s.mediaStream=r,s}))}async function ma(e){return(await fa({audio:!1,video:e}))[0]}async function ga(e){return(await fa({audio:e,video:!1}))[0]}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(3167),t=__webpack_require__(5474),n=__webpack_require__(9299),i=__webpack_require__(5224),r=__webpack_require__(3714),a=__webpack_require__(5425),o=__webpack_require__(885),s=__webpack_require__(1731),c=__webpack_require__(1276),l=__webpack_require__(2380),u=__webpack_require__(2421),d=__webpack_require__(1592),p=t.x6.url.split("?")[1]?"&":"?";function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;"function"==typeof window.BMAppErrorToast?window.BMAppErrorToast("",e,t):(0,i.x)(e,t)}"1"==t.x6.realtime&&(0,r.Nt)(),function(i){if(t.h.enabled&&"1"===t.x6.realtime){var f=t.h.get("bp-better-messages-last-unread");void 0!==f&&parseInt(t.x6.total_unread)!==parseInt(f)&&(0,e.PE)(f)}function m(e){void 0!==e[0].BPemojioneArea&&e[0].BPemojioneArea.trigger("change");var t=e.val();if(0===i(e).next(".bp-emojionearea").length&&0===i(e).prev(".bm-mobile-area").length)return t;var n=function(e){"<p>"!==(e=e.replace(/<p><\/p>/g,"")).substring(0,3)&&(e="<p>"+e),"</p>"!==e.substring(e.length-4)&&(e+="</p>"),e=(e=e.replace(/<div>/g,"<p>")).replace(/<\/div>/g,"</p>");var t=i.parseHTML(e);i.each(t,(function(e,t){var n=i(this);i.each(n.find("img.emojioneemoji,img.emojione"),(function(){var e=i(this);e.replaceWith(e.attr("alt"))})),n.BPBMremoveAttributes(),n.find("*:not(.bm-medium-editor-mention-at)").BPBMremoveAttributes()}));var n="";return i.each(t,(function(){n+=this.outerHTML})),"<p></p>"===n&&(n=""),n=(n=(n=n.replace(/&amp;/g,"&")).replace(/<font>/g,"")).replace(/<\/font>/g,"")}(t);return e.val(n),n}t.Eq.setIdleDuration(3),i.fn.BPBMremoveAttributes=function(){return this.each((function(){var e=i.map(this.attributes,(function(e){return e.name})),t=i(this);i.each(e,(function(e,n){t.removeAttr(n)}))}))},i(window).on("click",(function(){i(".bp-messages-wrap .expandingButtons.expandingButtonsOpen").removeClass("expandingButtonsOpen")})),t.tq&&(i(window).on("touchstart",(function(){})),i(window).on("touchend",(function(){})),t.x6.miniChats="0");var g="bp-better-messages-mobile-holder";t.h.enabled&&(t.Rl.openThreads=t.h.get("bp-better-messages-open-threads")||{},t.Rl.miniChats=t.h.get("bp-better-messages-mini-chats")||{},t.Rl.miniMessages=t.h.get("bp-better-messages-mini-messages")||!1,setInterval(e.v2,1e3)),i(document).ready((function(){!function(){t.Rl.isRtl=0!==i('html[dir="rtl"]').length,t.Rl.bpMessagesWrap=i(".bp-messages-wrap:not(.bp-better-messages-list, .bm-threads-list, #bp-better-messages-mini-mobile-open,.bp-better-messages-secondary)"),t.Rl.miniMobileContainer=i("#bp-better-messages-mini-mobile-container"),t.Rl.mobileViewContainer="#bp-better-messages-mobile-view-container",t.Rl.mobileOpenButton=i("#bp-better-messages-mini-mobile-open"),t.tq||t.Rl.mobileOpenButton.hide();var u=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;function f(){if(u)return!1}t.tq&&"0"!==t.x6.mobileFullScreen&&(i(document).on("touchmove",".bp-messages-wrap .chat-header,.bp-messages-wrap .reply",(function(e){t.Rl.blockScroll&&e.preventDefault()})),i(document).on("focus blur",".bp-messages-wrap textarea, .bp-messages-wrap input",(function(t){setTimeout((function(){f(),(0,e.xq)()}),300)})),i(window).resize((function(){t.Rl.bpMessagesWrap.hasClass("bp-messages-mobile")&&f()})),t.Rl.bpMessagesWrap.addClass("mobile-ready"),"0"===t.x6.disableTapToOpen?(t.Rl.bpMessagesWrap.find(".bp-messages-mobile-tap").css("line-height",t.Rl.bpMessagesWrap.height()+"px"),t.Rl.bpMessagesWrap.on("touchend",".bp-messages-mobile-tap",(function(e){if(1!=t.Rl.touchmoved&&!1===t.Rl.blockOpen){var n=i(e.target).closest(".bp-messages-wrap");n.hasClass("bp-messages-mobile")||(e.preventDefault(),e.stopImmediatePropagation(),(0,o.Q4)(n))}})).on("touchmove",(function(e){t.Rl.touchmoved=!0})).on("touchstart",(function(e){t.Rl.touchmoved=!1}))):t.Rl.bpMessagesWrap.on("touchend",(function(e){if(1!=t.Rl.touchmoved&&!1===t.Rl.blockOpen){var n=i(e.target).closest(".bp-messages-wrap");if(!n.hasClass("bp-messages-mobile")){e.preventDefault(),e.stopImmediatePropagation(),(0,o.Q4)(n);var r=i(e.originalEvent.target).closest(".thread");r.length>0&&r.click()}}})).on("touchmove",(function(e){t.Rl.touchmoved=!0})).on("touchstart",(function(e){t.Rl.touchmoved=!1}))),i(document).on("click",".bp-messages-wrap .bpbm-gif .bpbm-gif-play",(function(e){t.Rl.blockSelect=!0;var n=i(this),r=i(this).parent().find("video");n.remove(),r[0].play(),setTimeout((function(){t.Rl.blockSelect=!1}),500)})),i(document).on("click",".bp-messages-wrap .expandingButtons",(function(e){e.stopPropagation(),i(this).toggleClass("expandingButtonsOpen")})),t.Rl.mobileOpenButton.on("click",(function(e){e.preventDefault();var n=i(".bp-messages-wrap.bp-messages-wrap-main");n.length>0?(0,o.Q4)(n):t.Rl.mobileOpenButton.hasClass("loading")||(t.Rl.mobileOpenButton.addClass("loading"),(0,o.Ld)(t.x6.baseUrl))}));var g=!1,v=!1;if(i(".bp-messages-wrap:not(.bp-better-messages-mini,.bp-better-messages-list,.bp-better-messages-secondary) .thread.scroller.bm-infodiv[data-id]").length>0?g=i(".bp-messages-wrap:not(.bp-better-messages-mini,.bp-better-messages-list,.bp-better-messages-secondary) .thread.bm-infodiv").attr("data-id"):i(".bp-messages-wrap:not(.bp-better-messages-mini,.bp-better-messages-list,.bp-better-messages-secondary,#bp-better-messages-mini-mobile-container,.bm-threads-list) .threads-list").length>0&&(v=!0),t.tq&&"1"===t.x6.autoFullScreen){if(g||v){var y=i(".bp-messages-wrap.mobile-ready.bp-messages-wrap-main, .bp-messages-wrap.mobile-ready.bp-messages-group-thread");(0,o.Q4)(y)}else(y=i(".bp-messages-wrap.bp-messages-wrap-bulk.mobile-ready")).length>0&&(0,o.Q4)(y);!function e(){_++,i(".bp-messages-wrap.bbapp_hide_all, .bp-messages-wrap.bbapp_hide_all *").removeClass("bbapp_hide_all"),_<10&&setTimeout((function(){e()}),500)}()}var _=0;"1"===t.x6.blockScroll&&i(".bp-messages-wrap").on("mousewheel DOMMouseScroll",".bpbm-os-viewport",(function(e){var t=e.originalEvent,n=t.wheelDelta||-t.detail,r=e.currentTarget.scrollHeight-i(e.currentTarget).height();n>0?this.scrollTop<5&&e.preventDefault():r-this.scrollTop<5&&e.preventDefault()})),(0,a.hM)(),void 0===t.x6.socket_server&&setInterval((function(){i.post(t.x6.ajaxUrl,{action:"bp_messages_last_activity_refresh"})}),3e5),t.Rl.bpMessagesWrap.on("click",".threads-list .thread:not(.blocked)",(function(t){if(0===i(t.target).closest(".pic").length&&0===i(t.target).closest(".delete").length&&0===i(t.target).closest(".deleted").length){t.preventDefault();var n=i(this).attr("data-href"),r=i(this).closest(".bp-messages-wrap");(0,e.fy)(n,r)}})),i(document).on("click",t.St+" span.delete",(function(e){e.preventDefault(),e.stopPropagation();var n=i(this).parent().parent(),r=(n.parent().parent(),i(n).attr("data-id")),a=i(n).height(),o=i(this).attr("data-nonce");i.post(t.x6.ajaxUrl,{action:"bp_messages_delete_thread",thread_id:r,nonce:o},(function(e){if(e.result){var t=n.position().top;i(n).addClass("blocked"),i(n).find(".deleted").show().css({height:a,"line-height":a+"px",top:t+"px"})}else h(e.errors[0])}))})),i(document).on("click",t.St+" a.undelete",(function(e){e.preventDefault(),e.stopPropagation();var n=i(this).parent().parent(),r=i(n).attr("data-id");i(n).removeClass("blocked");var a=i(this).attr("data-nonce");i.post(t.x6.ajaxUrl,{action:"bp_messages_un_delete_thread",thread_id:r,nonce:a},(function(e){e.result?(i(n).removeClass("blocked"),i(n).find(".deleted").hide()):h(e.errors[0])}))})),t.Rl.bpMessagesWrap.on("click",".messages-list li .favorite",(function(e){e.preventDefault(),e.stopPropagation();var n=i(this).parentsUntil(".messages-list","li").attr("data-id"),r="star";i(this).hasClass("active")&&(r="unstar"),i(this).toggleClass("active"),i.post(t.x6.ajaxUrl,{action:"bp_messages_favorite",message_id:n,thread_id:t.Rl.thread,type:r,nonce:t.x6.userNonce})})),t.Rl.bpMessagesWrap.on("click",".messages-list li .bpbm-reply",(function(e){e.preventDefault(),e.stopPropagation();var n=i(this).closest("li"),a=n.closest(".messages-stack"),o=a.closest(".bp-messages-threads-wrapper"),s=n.attr("data-id"),c=a.find(".content .info .name a").text(),l="",u="",d=n.find(".bpbm-replied-message-reply");d.length>0?l+=d.text():l+=n.find(".message-content").text();var p=n.find(".message-content > [data-desc]");p.length>0&&p.each((function(){var e=i(this).attr("data-desc");void 0!==e&&(u+='<span class="bpbm-preview-desc">'+atob(e)+"</span>")}));var h='<div class="bpbm-preview-message bpbm-reply-message" style="display:none" data-message-id="'+s+'"><div class="bpbm-preview-message-cancel"><i class="far fa-times-circle"></i></div><div class="bpbm-preview-message-content"><span class="bpbm-preview-message-name"></span><div class="bpbm-preview-message-text"></div></div></div>',f=o.find(".bpbm-preview-message");f.length>0?(f=f.replaceWith(h),(f=o.find(".bpbm-preview-message")).show(),(0,r.zo)()):(f=i(h).insertBefore(o.find(".reply"))).slideDown(100,(function(){(0,r.zo)()})),f.find(".bpbm-preview-message-name").text(c),f.find(".bpbm-preview-message-text").text(l),f.find(".bpbm-preview-message-text").append(u),f.find(".bpbm-gifs-icon").html(t.ci.gif)})),t.Rl.bpMessagesWrap.on("click",".bpbm-preview-message-cancel",(function(e){e.preventDefault(),e.stopPropagation();var t=i(this).closest(".bpbm-preview-message");t.slideUp(100,(function(){t.remove(),(0,r.zo)()}))}));var A,w,k,S=!1,C="";t.Rl.bpMessagesWrap.on("submit",".reply > form",(function(a){if(a.preventDefault(),a.stopImmediatePropagation(),t.Eq.focus(),!0!==S){var o=i(this);if(o.serialize()===C)return!1;var l=i(this).find('textarea[name="message"]');l.trigger("change");var u=m(l),p=i(this).serialize();i(this).find("textarea, .bp-emojionearea-editor").html("").val(""),i(this).find(".bm-mobile-area").html("").addClass("bpbm-medium-editor-placeholder"),l.trigger("change");var f=o.find('input[name="thread_id"]').val(),g=!1,v=!1,b=i(this).parent().parent(),y=b.find(".thread.bm-infodiv"),_=b.find(".bpbm-preview-message.bpbm-reply-message");_.length>0&&(v=!0,p+="&reply=1&message_id="+parseInt(_.attr("data-message-id")));var w=b.find(".bpbm-preview-message.bpbm-edit-message");w.length>0&&(g=!0,p+="&edit=1&message_id="+parseInt(w.attr("data-message-id"))),i(this).closest(".bp-better-messages-mini").length>0&&(f=i(this).closest(".chat").attr("data-thread"));var k="1"===t.x6.realtime;if(!1!==t.Rl.badWords&&t.Rl.badWords.some((function(e){return u.indexOf(e)>=0}))&&(k=!1),u=JSON.stringify({message:u,me:t.x6.me}),"1"===t.x6.encryption){var x=y.data("secret");u=d.encrypt(u,x)}f&&k&&!g&&!v?n.Wb.emit("fast_message",f,u,"",(function(n){C=p,window.clearInterval(A),A=window.setInterval((function(){C=""}),3e3),document.dispatchEvent(new CustomEvent("bp-better-messages-message-sent")),void 0!==s.jX.sent&&s.jX.sent.play(),(0,e.xq)('.bp-messages-wrap[data-thread-id="'+f+'"]'),(0,e.xq)('.bp-better-messages-mini .chats .chat[data-thread="'+f+'"]'),p+="&tempID="+n,i.post(t.x6.ajaxUrl,p,(function(t){void 0!==t.result&&(i.each(t.errors,(function(){h(this)})),void 0!==t.redirect&&"refresh"===t.redirect&&(o.closest(".bp-messages-wrap").hasClass("bp-better-messages-mini")?(i('.bp-better-messages-mini .chats .chat[data-thread="'+f+'"]').remove(),(0,r.TK)(f,!0)):(0,e.fy)(location.href,o.closest(".bp-messages-wrap"))))})).always((function(){S=!1}))})):i.post(t.x6.ajaxUrl,p,(function(n){void 0!==n.result&&(!1!==n.result?((0,c.z9)(),document.dispatchEvent(new CustomEvent("bp-better-messages-message-sent")),g||(void 0!==s.jX.sent&&s.jX.sent.play(),(0,e.xq)('.bp-messages-wrap[data-thread-id="'+f+'"]'),(0,e.xq)('.bp-better-messages-mini .chats .chat[data-thread="'+f+'"]')),C=p,clearInterval(A),A=window.setInterval((function(){C=""}),3e3),v&&_.find(".bpbm-preview-message-cancel").click(),g&&(w.find(".bpbm-preview-message-cancel").click(),"1"!=t.x6.realtime&&(0,e.fy)(location.href,o.closest(".bp-messages-wrap")))):(i.each(n.errors,(function(){h(this)})),void 0!==n.redirect&&"refresh"===n.redirect&&(0,e.fy)(location.href,o.closest(".bp-messages-wrap"))))})).always((function(){S=!1})),document.dispatchEvent(new CustomEvent("bp-better-messages-message-sent-end"))}})),t.Rl.bpMessagesWrap.on("click ",".bpbm-stickers-selector .bpbm-stickers-selector-sticker",(function(n){n.preventDefault(),n.stopPropagation();var r=i(this),a=r.closest(".bpbm-stickers-selector"),o=a.parent().find(".reply form"),s=r.data("sticker-id"),c=r.find("img").attr("src"),l=o.find('input[name="thread_id"]').val(),u=o.find('input[name="_wpnonce"]').val();a.hide(),(0,e.Q2)(),i.post(t.x6.ajaxUrl,{action:"bpbm_messages_send_sticker",thread_id:l,sticker_id:s,sticker_img:c,_wpnonce:u})})),t.Rl.bpMessagesWrap.on("click ",".bpbm-gifs-selector .bpbm-gifs-selector-gif",(function(n){n.preventDefault(),n.stopPropagation();var r=i(this),a=r.closest(".bpbm-gifs-selector"),o=a.parent().find(".reply form"),s=r.data("gif-id"),c=o.find('input[name="thread_id"]').val(),l=o.find('input[name="_wpnonce"]').val();a.hide(),(0,e.Q2)(),i.post(t.x6.ajaxUrl,{action:"bpbm_messages_send_gif",thread_id:c,gif_id:s,_wpnonce:l})})),t.Rl.bpMessagesWrap.on("click touchstartPassive",".reply .bpbm-stickers-btn",(function(e){var t=i(this).closest(".reply"),n=t.parent(),r=t.find("form").find("textarea"),a=n.find(".bpbm-stickers-selector");r.blur(),a.is(":visible")||a.show()})),t.Rl.bpMessagesWrap.on("click touchstartPassive",".reply .bpbm-gifs-btn",(function(e){var t=i(this).closest(".reply"),n=t.parent(),r=t.find("form").find("textarea"),a=n.find(".bpbm-gifs-selector");r.blur(),a.is(":visible")||(a.show(),a.find('.bpbm-gifs-tabs span[data-package-id="trending"]').click())})),t.Rl.bpMessagesWrap.on("click",".bpbm-gifs-selector .bpbm-gifs-close",(function(e){e.preventDefault(),e.stopPropagation();var t=i(this).closest(".bpbm-gifs-selector");t.hide(),t.find(".bpbm-gifs-tabs .bpbm-gifs-tabs-active").removeClass("bpbm-gifs-tabs-active"),t.find(".bpbm-gifs-selector-gif-list").html("")})),t.Rl.bpMessagesWrap.on("click",".bpbm-gifs-selector .bpbm-gifs-head .bpbm-gifs-tabs span",(function(e){e.preventDefault(),e.stopPropagation();var n="bpbm-gifs-tabs-active",r=i(this),a=r.closest(".bpbm-gifs-selector"),o=a.find(".bpbm-gifs-selector-gif-container");if(!r.hasClass(n)){a.find(".bpbm-gifs-tabs span").removeClass(n),r.addClass(n),o.html(t.Rl.loadingHtml);var s=r.data("package-id");i.post(t.x6.ajaxUrl,{action:"bpbm_messages_get_gif_tab",package:s},(function(e){if(o.html(e),"trending"===s){var n="bpbm-loading-gifs";o.on("scroll",(function(e){e.stopImmediatePropagation();var r=i(e.currentTarget),a=r.outerHeight()+150;if(r[0].scrollHeight-r.scrollTop()<=a){var c=o.find(".bpbm-gifs-selector-gif-list");if(!c.hasClass(n)){var l=c.data("pages"),u=c.data("pages-loaded")+1;u<l&&(c.addClass(n),w=i.post(t.x6.ajaxUrl,{action:"bpbm_messages_get_gif_tab",package:s,page:u},(function(e){c.data("pages-loaded",u),i(e).appendTo(c),c.removeClass(n)})))}}}))}}))}})),t.Rl.bpMessagesWrap.on("click",".bpbm-stickers-selector .bpbm-stickers-close",(function(e){e.preventDefault(),e.stopPropagation();var t=i(this).closest(".bpbm-stickers-selector");t.parent(),t.hide()})),t.Rl.bpMessagesWrap.on("click",".bpbm-stickers-selector .bpbm-stickers-head .bpbm-stickers-tabs span",(function(e){e.preventDefault(),e.stopPropagation();var n=i(this),r=n.closest(".bpbm-stickers-selector"),a=r.find(".bpbm-stickers-selector-sticker-container");r.find(".bpbm-stickers-tabs span").removeClass("bpbm-stickers-tabs-active"),n.addClass("bpbm-stickers-tabs-active"),a.html(t.Rl.loadingHtml);var o=n.data("package-id");i.post(t.x6.ajaxUrl,{action:"bpbm_messages_get_sticker_tab",package:o},(function(e){a.html(e)}))})),t.Rl.bpMessagesWrap.on("keyup change",'.bpbm-gifs-tabs input[name="search"]',(function(e){e.preventDefault(),e.stopPropagation();var n=i(this),r=n.closest(".bpbm-gifs-selector"),a=r.find(".bpbm-gifs-selector-gif-container"),o=r.find(".bpbm-gifs-selector-gif-list"),s=n.data("search-term"),c=n.val();if(s!==c){n.data("search-term",c),w&&w.abort();var l="bpbm-loading-gifs";o.addClass(l),w=i.post(t.x6.ajaxUrl,{action:"bpbm_messages_search_gifs",search:c},(function(e){o.replaceWith(e),a.on("scroll",(function(e){e.stopImmediatePropagation();var n=i(e.currentTarget),a=n.outerHeight()+150;if(n[0].scrollHeight-n.scrollTop()<=a&&!(o=r.find(".bpbm-gifs-selector-gif-list")).hasClass(l)){var s=o.data("pages"),u=o.data("pages-loaded")+1;u<s&&(o.addClass(l),w=i.post(t.x6.ajaxUrl,{action:"bpbm_messages_search_gifs",search:c,page:u},(function(e){o.data("pages-loaded",u),i(e).appendTo(o),o.removeClass(l)})))}}))}))}})),t.Rl.bpMessagesWrap.on("keyup change",".bpbm-stickers-selector .bpbm-stickers-search input",(function(e){e.preventDefault(),e.stopPropagation();var n=i(this),r=n.closest(".bpbm-stickers-search"),a=n.closest(".bpbm-stickers-selector"),o=a.find(".bpbm-stickers-selector-sticker-list"),s=r.data("search-term"),c=n.val();s!==c&&(r.data("search-term",c),k&&k.abort(),k=i.post(t.x6.ajaxUrl,{action:"bpbm_messages_search_stickers",search:c},(function(e){o.replaceWith(e),(o=a.find(".bpbm-stickers-selector-sticker-list")).BPBMoverlayScrollbars({sizeAutoCapable:!1,callbacks:{onScroll:function(e){var n=this.scroll(),r=n.position.y;if(n.max.y-r<=10){var a=this.getElements(),o=i(a.host),s="bpbm-loading-stickers";if(!o.hasClass(s)){var l=o.data("pages"),u=o.data("pages-loaded")+1;u<=l&&(o.addClass(s),i.post(t.x6.ajaxUrl,{action:"bpbm_messages_search_stickers",search:c,page:u},(function(e){o.data("pages-loaded",u),i(e).appendTo(i(a.content)),o.removeClass(s)})))}}}}})})))})),t.Rl.bpMessagesWrap.on("submit",".new-message form",(function(n){n.preventDefault(),n.stopPropagation();var a=i(n.target).closest(".bp-messages-wrap"),o=a.hasClass("bp-better-messages-mini");o?(0,e.q7)(i(n.target).closest(".chat")):(0,e.q7)(a);var s=i(this).find('textarea[name="message"]');s.trigger("change"),m(s);var c=i(this),l=c.serialize();document.dispatchEvent(new CustomEvent("bp-better-messages-new-thread-start")),i.post(t.x6.ajaxUrl,l,(function(n){n.result?(document.dispatchEvent(new CustomEvent("bp-better-messages-new-thread-created")),o&&"1"===t.x6.miniChats?(c.closest(".chat").remove(),(0,r.TK)(n.result,!0)):(0,e.fy)(t.x6.threadUrl+n.result,a)):(document.dispatchEvent(new CustomEvent("bp-better-messages-new-thread-error")),c.closest(".bp-messages-wrap").find(".preloader").hide(),i.each(n.errors,(function(){h(this)}))),document.dispatchEvent(new CustomEvent("bp-better-messages-new-thread-end"))})).fail((function(){c.closest(".bp-messages-wrap").find(".preloader").hide(),o&&"1"===t.x6.miniChats&&c.closest(".chat").find(".preloader").hide(),document.dispatchEvent(new CustomEvent("bp-better-messages-new-thread-end"))}))})),t.Rl.bpMessagesWrap.on("click","a.ajax",(function(t){t.preventDefault(),t.stopPropagation();var n=i(this).attr("href"),r=i(this).closest(".bp-messages-wrap");(0,e.fy)(n,r)})),t.Rl.bpMessagesWrap.on("click",".bpbm-search a.search",(function(e){e.preventDefault(),e.stopPropagation(),i(this).hide(),i(".bpbm-search form").show(),i(".bpbm-search form input").trigger("focus"),t.tq&&i(".bp-messages-wrap .chat-header .settings").hide()})),t.Rl.bpMessagesWrap.on("click",".bpbm-search form span.close",(function(e){e.preventDefault(),e.stopPropagation();var t=i(this).closest(".bpbm-search"),n=t.find("form input");t.closest(".bp-messages-side-threads").length>0?(n.val(""),n.trigger("change"),t.find("form .close").hide()):(t.find("form").hide(),t.find("a.search").show(),n.val(""))})),t.Rl.bpMessagesWrap.on("submit",".bpbm-search form",(function(n){n.preventDefault();var r=i(this).closest(".bp-messages-wrap");(0,e.fy)(t.x6.url+p+i(this).serialize(),r)})),!1===("1"===t.x6.disableEnterForTouch&&t.tq||"1"===t.x6.disableEnterForDesktop&&!t.tq)&&(t.Rl.bpMessagesWrap.on("keydown",".reply .bp-emojionearea-editor",(function(e){e.shiftKey||13!=e.keyCode||(e.preventDefault(),e.stopImmediatePropagation(),i(this).trigger("blur"),i(this).parent().parent().trigger("submit"),i(this).trigger("focus"))})),t.Rl.bpMessagesWrap.on("keyup",".reply .bp-emojionearea-editor",(function(e){e.shiftKey||13!=e.keyCode||(e.preventDefault(),e.stopImmediatePropagation())}))),t.Rl.bpMessagesWrap.on("change",".new-message .send-to-input",(function(t){t.preventDefault(),t.stopPropagation();var n=i(this).attr("href"),r=i(this).closest(".bp-messages-wrap");(0,e.fy)(n,r)})),t.tq?t.Rl.bpMessagesWrap.on("touchend",".scroller.starred .messages-list li, .scroller.search .messages-list li",(function(n){if(1!=t.Rl.touchmoved&&!1===t.Rl.blockOpen){n.preventDefault(),n.stopPropagation();var r=i(this).attr("data-thread"),a=i(this).attr("data-id");(0,e.fy)(t.x6.threadUrl+r+"&message_id="+a,i(this).closest(".bp-messages-wrap"))}})).on("touchmove",(function(){t.Rl.touchmoved=!0})).on("touchstart",(function(){t.Rl.touchmoved=!1})):t.Rl.bpMessagesWrap.on("click",".scroller.starred .messages-list li, .scroller.search .messages-list li",(function(n){n.preventDefault(),n.stopPropagation();var r=i(this).attr("data-thread"),a=i(this).attr("data-id");(0,e.fy)(t.x6.threadUrl+r+"&message_id="+a,i(this).closest(".bp-messages-wrap"))})),t.Rl.bpMessagesWrap.on("click",".participants-panel .bp-messages-user-list .user .actions a.remove-from-thread",(function(n){n.preventDefault();var r=i(this).closest(".bp-messages-wrap"),a=i(this).parent().parent(),o=a.data("id"),s=a.data("thread-id"),c=a.find(".name").text(),l=t.x6.strings.exclude;r.hasClass("bp-messages-wrap-chat")&&(l=t.x6.strings.exclude_chat),l=l.replace("%s",c),confirm(l)&&i.post(t.x6.ajaxUrl,{action:"bp_better_messages_exclude_user_from_thread",user_id:o,thread_id:s,nonce:t.x6.userNonce},(function(n){if(!0===n.result){var a=t.x6.url+p+i.param({thread_id:s,participants:"1"});(0,e.fy)(a,r)}}))})),t.Rl.bpMessagesWrap.on("click",".bpbm-mute-thread",(function(n){n.preventDefault();var a,o=i(this).closest(".bp-messages-wrap"),s=i(this).closest(".bp-better-messages-mini").length>0,c=location.href;if(s?a=i(this).closest(".chat").attr("data-thread"):(a=o.attr("data-thread-id"),o.is("#bp-better-messages-mini-mobile-container")&&(a=o.attr("data-thread"),c=t.x6.baseUrl+"?thread_id="+a)),void 0===a)return!1;-1===c.indexOf("?thread_id=")&&(c=t.x6.baseUrl+"?thread_id="+a),confirm(t.x6.strings.mute_thread)&&(s?(0,e.q7)(i(this).closest(".chat")):(0,e.q7)(o),i.post(t.x6.ajaxUrl,{action:"bp_messages_mute_thread",thread_id:a,nonce:t.x6.userNonce},(function(n){s?(0,r.TK)(a,!0,!0):(0,e.fy)(c,o),i(t.St+'[data-id="'+a+'"] .bpbm-counter-row').prepend('<span class="bpbm-thread-muted"><i class="fas fa-bell-slash"></i></span>'),t.x6.mutedThreads[a]=Date.now()})).always((function(){})))})),t.Rl.bpMessagesWrap.on("click",".bpbm-block-user",(function(n){n.preventDefault();var a,o=i(this).closest(".bp-messages-wrap"),s=i(this).closest(".bp-better-messages-mini").length>0,c=location.href,l=parseInt(i(this).attr("data-user-id"));if(s?a=i(this).closest(".chat").attr("data-thread"):(a=o.attr("data-thread-id"),o.is("#bp-better-messages-mini-mobile-container")&&(a=o.attr("data-thread"),c=t.x6.baseUrl+"?thread_id="+a)),void 0===a)return!1;-1===c.indexOf("?thread_id=")&&(c=t.x6.baseUrl+"?thread_id="+a),confirm(t.x6.strings.user_block)&&(s?(0,e.q7)(i(this).closest(".chat")):(0,e.q7)(o),i.post(t.x6.ajaxUrl,{action:"bp_messages_block_user",user_id:l,nonce:t.x6.userNonce},(function(){s?(0,r.TK)(a,!0,!0):(0,e.fy)(c,o)})).always((function(){})))})),t.Rl.bpMessagesWrap.on("click",".bpbm-unblock-user",(function(n){n.preventDefault();var a,o=i(this).closest(".bp-messages-wrap"),s=i(this).closest(".bp-better-messages-mini").length>0,c=location.href,l=parseInt(i(this).attr("data-user-id"));if(s?a=i(this).closest(".chat").attr("data-thread"):(a=o.attr("data-thread-id"),o.is("#bp-better-messages-mini-mobile-container")&&(a=o.attr("data-thread"),c=t.x6.baseUrl+"?thread_id="+a)),void 0===a)return!1;-1===c.indexOf("?thread_id=")&&(c=t.x6.baseUrl+"?thread_id="+a),confirm(t.x6.strings.user_unblock)&&(s?(0,e.q7)(i(this).closest(".chat")):(0,e.q7)(o),i.post(t.x6.ajaxUrl,{action:"bp_messages_unblock_user",user_id:l,nonce:t.x6.userNonce},(function(){s?(0,r.TK)(a,!0,!0):(0,e.fy)(c,o)})).always((function(){})))})),t.Rl.bpMessagesWrap.on("click",".bpbm-leave-thread",(function(r){r.preventDefault();var a,o=i(this).closest(".bp-messages-wrap"),s=i(this).closest(".bp-better-messages-mini").length>0;if(location.href,s?a=i(this).closest(".chat").attr("data-thread"):(a=o.attr("data-thread-id"),o.is("#bp-better-messages-mini-mobile-container")&&(a=o.attr("data-thread"),t.x6.baseUrl)),void 0===a)return!1;confirm(t.x6.strings.leave_thread)&&(s?(0,e.q7)(i(this).closest(".chat")):(0,e.q7)(o),i.post(t.x6.ajaxUrl,{action:"bp_messages_leave_thread",thread_id:a,nonce:t.x6.userNonce},(function(r){r?(void 0!==n.Wb&&(0,e.HL)(a),i(t.St+'[data-id="'+a+'"]').remove(),s?i('.bp-better-messages-mini .chats .chat[data-thread="'+a+'"] > .head .close').click():(0,e.fy)(t.x6.baseUrl,o)):o.find(".preloader").hide()})))})),t.Rl.bpMessagesWrap.on("click",".bpbm-delete-thread",(function(n){n.preventDefault();var r,a=i(this).closest(".bp-messages-wrap"),o=i(this).closest(".bp-better-messages-mini").length>0,s=location.href;if(o?r=i(this).closest(".chat").attr("data-thread"):(r=a.attr("data-thread-id"),a.is("#bp-better-messages-mini-mobile-container")&&(r=a.attr("data-thread"),s=t.x6.baseUrl)),void 0===r)return!1;-1!==s.indexOf("?thread_id=")&&(s=t.x6.baseUrl),confirm(t.x6.strings.delete_thread)&&(o?(0,e.q7)(i(this).closest(".chat")):(0,e.q7)(a),i.post(t.x6.ajaxUrl,{action:"bp_messages_erase_thread",thread_id:r,_wpnonce:t.x6.userNonce},(function(){i('.bp-messages-wrap .threads-list .thread[data-id="'+r+'"]').remove(),i('.bp-better-messages-mini .chats .chat[data-thread="'+r+'"] .head span.close').click(),o||(0,e.fy)(s,a)})).always((function(){})))})),t.Rl.bpMessagesWrap.on("click",".bpbm-clear-thread",(function(n){n.preventDefault();var a,o=i(this).closest(".bp-messages-wrap"),s=o.hasClass("bp-messages-wrap-chat"),c=o.hasClass("bp-messages-group-thread"),l=i(this).closest(".bp-better-messages-mini").length>0,u=location.href;if(l?a=i(this).closest(".chat").attr("data-thread"):(a=o.attr("data-thread-id"),o.is("#bp-better-messages-mini-mobile-container")&&(a=o.attr("data-thread"),u=t.x6.baseUrl)),void 0===a)return!1;-1===u.indexOf("?thread_id=")&&(u=t.x6.baseUrl),(s||c)&&(u=t.x6.baseUrl+"?thread_id="+a),confirm(t.x6.strings.clear_chat_thread)&&(l?(0,e.q7)(i(this).closest(".chat")):(0,e.q7)(o),i.post(t.x6.ajaxUrl,{action:"bp_messages_clear_thread",thread_id:a,_wpnonce:t.x6.userNonce},(function(){l?(0,r.TK)(a,!0,!0):(0,e.fy)(u,o)})).always((function(){})))})),t.Rl.bpMessagesWrap.on("click",".chat-header .bpbm-invite-thread",(function(e){e.preventDefault();var t=i(this).closest(".bp-messages-wrap"),n=t.find(".add-user-panel"),r=t.find(".scroller.thread"),a=t.find(".reply"),o=t.find(".participants-panel");n.hasClass("open")||(n.addClass("open"),o.removeClass("open"),r.hide(),a.hide())})),t.Rl.bpMessagesWrap.on("click",".chat-header .participants",(function(e){e.preventDefault();var n=i(this).closest(".bp-messages-wrap"),r=n.find(".participants-panel"),a=n.find(".scroller.thread"),o=n.find(".add-user-panel"),s=n.find(".reply"),c=parseInt(n.attr("data-thread-id")),l=r.find(".bp-messages-user-list");isNaN(c)&&(c=parseInt(n.attr("data-thread"))),r.hasClass("participants-loaded")||(r.addClass("participants-loaded"),i.post(t.x6.ajaxUrl,{action:"bp_messages_load_thread_participants",thread_id:c},(function(e){l.html(e.html),e.loadMore&&i(e.loadMore).insertAfter(l)})).always((function(){}))),r.hasClass("open")?(r.removeClass("open"),a.show(),s.show()):(r.addClass("open"),o.removeClass("open"),a.hide(),s.hide(),r.BPBMoverlayScrollbars({sizeAutoCapable:!1,overflowBehavior:{x:"hidden"}}))})),t.Rl.bpMessagesWrap.on("click",".bpbm-unmute-thread",(function(n){n.preventDefault();var a,o=i(this).closest(".bp-messages-wrap"),s=i(this).closest(".bp-better-messages-mini").length>0,c=location.href;s?a=i(this).closest(".chat").attr("data-thread"):(a=o.attr("data-thread-id"),o.is("#bp-better-messages-mini-mobile-container")&&(a=o.attr("data-thread"),c=t.x6.baseUrl+"?thread_id="+a)),confirm(t.x6.strings.unmute_thread)&&(s?(0,e.q7)(i(this).closest(".chat")):(0,e.q7)(o),i.post(t.x6.ajaxUrl,{action:"bp_messages_unmute_thread",thread_id:a,nonce:t.x6.userNonce},(function(){void 0!==t.x6.mutedThreads[a]&&delete t.x6.mutedThreads[a],i(t.St+'[data-id="'+a+'"] .bpbm-counter-row .bpbm-thread-muted').remove(),s?(0,r.TK)(a,!0,!0):(0,e.fy)(c,o)})).always((function(){})))})),t.Rl.bpMessagesWrap.on("click",'.add-user button[type="submit"]',(function(n){n.preventDefault();var r=i(this).closest(".bp-messages-wrap"),a=i(this).closest(".add-user"),o=a.data("thread-id"),s=[];a.find('input[name="recipients[]"]').each((function(){s.push(i(this).val())})),(0,e.q7)(r),i.post(t.x6.ajaxUrl,{action:"bp_better_messages_add_user_to_thread",users:s,thread_id:o,nonce:t.x6.userNonce},(function(){var n=t.x6.url+p+i.param({thread_id:o,participants:"1"});(0,e.fy)(n,r)}))})),t.Rl.bpMessagesWrap.on("click",".add-user button.bpbm-close",(function(e){e.preventDefault();var t=i(this).closest(".bp-messages-wrap"),n=t.find(".add-user-panel"),r=t.find(".scroller.thread"),a=t.find(".reply");n.hasClass("open")&&(n.removeClass("open"),r.show(),a.show())})),t.Rl.bpMessagesWrap.on("click",".bpbm-join-to-chat-button",(function(n){n.preventDefault();var r=i(this).closest(".bp-messages-wrap"),a=r.data("chat-id"),o=r.data("thread-id");(0,e.q7)(r),i.post(t.x6.ajaxUrl,{action:"bp_better_messages_join_chat",chat_id:a,nonce:t.x6.userNonce},(function(){var n=t.x6.url+p+i.param({thread_id:o});(0,e.fy)(n,r)}))})),t.Rl.bpMessagesWrap.on("click",".bpbm-leave-chat-room",(function(n){n.preventDefault();var r=i(this).closest(".bp-messages-wrap"),a=r.data("chat-id"),o=r.data("thread-id");(0,e.q7)(r),i.post(t.x6.ajaxUrl,{action:"bp_better_messages_leave_chat",chat_id:a,nonce:t.x6.userNonce},(function(){var n=t.x6.url+p+i.param({thread_id:o});(0,e.fy)(n,r)}))})),t.Rl.bpMessagesWrap.on("click",".participants-panel .bm-load-more-participants",(function(e){e.preventDefault();var n=i(this),r=n.closest(".bp-messages-wrap"),a=n.data("page"),o=n.data("thread-id"),s=n.closest(".bm-load-more-participants-div");n.replaceWith('<i class="fas fa-spinner fa-spin"></i>');var c=r.find(".bp-messages-user-list");i.post(t.x6.ajaxUrl,{action:"bp_messages_load_thread_participants",thread_id:o,page:a},(function(e){c.append(e.html),e.loadMore?s.replaceWith(e.loadMore):s.remove()})).always((function(){}))})),"1"==t.x6.miniChats&&(i(document).on("click",".bp-better-messages-mini .chats .chat > .head",(function(r){var o=i(this).parent(),s=o.attr("data-thread");if(o.toggleClass("open").hasClass("open")){if(t.Rl.miniChats[s]=!0,(0,e.xq)('.bp-messages-wrap.bp-better-messages-mini .chats .chat[data-thread="'+s+'"]'),"1"==t.x6.realtime){(0,a.hM)();var c=i('.bp-messages-wrap.bp-better-messages-mini .chats .chat[data-thread="'+s+'"] .list .messages-stack .content .messages-list li.unread:not(.fast)'),l=[];c.each((function(){var e=i(this).data("id");i(this).data("thread"),i(this).attr("data-time"),l.push(e),i(this).removeClass("unread")})),(0,e.HL)(s),l.length>0&&n.Wb.emit("seen",l)}}else t.Rl.miniChats[s]=!1;(0,e.Wj)("bp-better-messages-mini-chats",t.Rl.miniChats)})),i(document).on("click",".bp-better-messages-mini .chats .chat > .head .video-call",(function(r){r.stopPropagation(),r.stopImmediatePropagation();var a=i(this).data("user-id");if(-1===n.ps.indexOf(a.toString())&&"1"!==t.x6.offlineCalls)h(t.x6.strings.call_offline);else{var o=i(this).parent().parent().parent(),s=o.attr("data-thread");o.fadeOut();var c=t.x6.threadUrl+s+"&videoCall",l=i(".bp-messages-wrap.bp-messages-wrap-main");l.length>0?(0,e.fy)(c,l):location.href=c}})),i(document).on("click",".bp-better-messages-mini .chats .chat > .head .audio-call",(function(r){r.stopPropagation(),r.stopImmediatePropagation();var a=i(this).data("user-id");if(-1===n.ps.indexOf(a.toString())&&"1"!==t.x6.offlineCalls)h(t.x6.strings.call_offline);else{var o=i(this).parent().parent().parent(),s=o.attr("data-thread");o.fadeOut();var c=t.x6.threadUrl+s+"&audioCall",l=i(".bp-messages-wrap.bp-messages-wrap-main");l.length>0?(0,e.fy)(c,l):location.href=c}})),i(document).on("click",".bp-better-messages-mini .chats .chat > .head .open",(function(n){n.stopImmediatePropagation();var r=i(this).parent().parent().parent(),a=parseInt(r.attr("data-thread"));r.fadeOut();var o=t.x6.threadUrl+a+"&scrollToContainer";0===a&&(o=i(".bp-messages-wrap .chat-footer .new-message").attr("href"));var s=i(".bp-messages-wrap.bp-messages-wrap-main");s.length>0?(0,e.fy)(o,s):location.href=o})),i(document).on("click",".bp-better-messages-mini .chats .chat > .head .close",(function(n){n.stopImmediatePropagation();var r=i(this).parent().parent().parent(),a=r.attr("data-thread"),o=-1*(r.height()+100);r.css("bottom",o),window.setTimeout((function(){r.remove()}),650),void 0!==t.Rl.miniChats[a]&&delete t.Rl.miniChats[a],(0,e.Wj)("bp-better-messages-mini-chats",t.Rl.miniChats)})),i(".bp-messages-wrap:not(.bp-better-messages-mini,.bp-better-messages-list,.bp-better-messages-secondary)").on("click",".chat-header > .mini-chat",(function(n){var a=i(this),o=a.closest(".bp-messages-wrap").attr("data-thread-id");void 0!==t.Rl.miniChats[o]&&delete t.Rl.miniChats[o],a.hasClass("group-redirect")?(t.Rl.miniChats[o]=!0,(0,e.Wj)("bp-better-messages-mini-chats",t.Rl.miniChats)):(0,r.TK)(o,!0)}))),"1"==t.x6.miniMessages&&i(document).on("click",".bp-better-messages-list .threads-list .thread:not(.blocked)",(function(n){n.preventDefault();var o=i(this),s=o.data("id");if("1"==t.x6.miniChats){var c=o.parent().parent(),l=i(o).height(),u=o.position().top;u+=c.scrollTop(),o.addClass("blocked loading"),i(o).find(".loading").css({height:l,"line-height":l+"px",top:u+"px"}),(0,r.TK)(s,!0).always((function(){(0,a.hM)(),o.removeClass("blocked loading")}))}else{var d=t.x6.threadUrl+s+"&scrollToContainer",p=i(".bp-messages-wrap.bp-messages-wrap-main");p.length>0?(0,e.fy)(d,p):location.href=d}})),i(document).on("click",".bm-threads-list .threads-list .thread:not(.blocked)",(function(n){n.preventDefault();var o=i(this),s=o.data("id");if("1"==t.x6.miniChats){var c=o.parent().parent(),l=i(o).height(),u=o.position().top;u+=c.scrollTop(),o.addClass("blocked loading"),i(o).find(".loading").css({height:l,"line-height":l+"px",top:u+"px"}),(0,r.TK)(s,!0).always((function(){(0,a.hM)(),o.removeClass("blocked loading")}))}else{var d=t.x6.threadUrl+s+"&scrollToContainer";if(t.tq){var p=i("#bp-better-messages-mini-mobile-open");if(p.length>0){var h=t.x6.baseUrl;t.x6.baseUrl=t.x6.threadUrl+s,p.click(),t.x6.baseUrl=h}else location.href=d}else{var f=i(".bp-messages-wrap.bp-messages-wrap-main");f.length>0?(0,e.fy)(d,f):location.href=d}}})),i(document).on("click",".bp-messages-wrap .chat-tabs > div",(function(n){n.preventDefault();var r=i(this),a=r.closest(".chat-tabs"),o=a.parent(),s=r.data("tab");i(this).hasClass("active")||(a.find("> div").removeClass("active"),r.addClass("active"),a.find("> div").each((function(){var e=i(this).data("tab");o.find("."+e).hide()})),function(n){n.hasClass("bpbm-friends-list")&&(n.hasClass("bpbm-loaded")||(n.addClass("bpbm-loaded"),i.post(t.x6.ajaxUrl,{action:"bp_messages_load_friends_list",nonce:t.x6.userNonce},(function(t){n.html(t),(0,e.a_)(),(0,e.D8)()})))),n.hasClass("bpbm-groups-list")&&(n.hasClass("bpbm-loaded")||(n.addClass("bpbm-loaded"),i.post(t.x6.ajaxUrl,{action:"bp_messages_load_groups_list",nonce:t.x6.userNonce},(function(e){n.html(e)})))),n.hasClass("bpbm-ps-groups-list")&&(n.hasClass("bpbm-loaded")||(n.addClass("bpbm-loaded"),i.post(t.x6.ajaxUrl,{action:"bp_messages_load_ps_groups_list",nonce:t.x6.userNonce},(function(e){n.html(e)})))),n.hasClass("bpbm-bmum-groups-list")&&(n.hasClass("bpbm-loaded")||(n.addClass("bpbm-loaded"),i.post(t.x6.ajaxUrl,{action:"bp_messages_load_um_groups_list",nonce:t.x6.userNonce},(function(e){n.html(e)})))),n.hasClass("bpbm-um-friends-list")&&(n.hasClass("bpbm-loaded")||(n.addClass("bpbm-loaded"),i.post(t.x6.ajaxUrl,{action:"bp_messages_load_um_friends_list",nonce:t.x6.userNonce},(function(t){n.html(t),(0,e.a_)(),(0,e.D8)()})))),n.hasClass("bpbm-ps-friends-list")&&(n.hasClass("bpbm-loaded")||(n.addClass("bpbm-loaded"),i.post(t.x6.ajaxUrl,{action:"bp_messages_load_ps_friends_list",nonce:t.x6.userNonce},(function(t){n.html(t),(0,e.a_)(),(0,e.D8)()})))),n.show()}(o.find("."+s)))})),i(document).on("click",".bp-better-messages-list .tabs > div",(function(n){n.preventDefault();var r=i(this).data("tab");"bpbm-close"===r?(i(".bp-better-messages-list .tabs > div, .bp-better-messages-list .tabs-content > div").removeClass("active"),i('.bp-better-messages-list .tabs > div[data-tab="bpbm-close"]').hide(),t.Rl.miniMessages=!1):i(this).hasClass("active")?(i(this).removeClass("active"),i(".bp-better-messages-list .tabs-content ."+r).removeClass("active"),i('.bp-better-messages-list .tabs > div[data-tab="bpbm-close"]').hide(),t.Rl.miniMessages=!1):(i(".bp-better-messages-list .tabs > div, .bp-better-messages-list .tabs-content > div").removeClass("active"),i(this).addClass("active"),i(".bp-better-messages-list .tabs-content ."+r).addClass("active"),t.Rl.miniMessages=r,i('.bp-better-messages-list .tabs > div[data-tab="bpbm-close"]').show()),(0,l.e)(t.Rl.miniMessages),(0,e.Wj)("bp-better-messages-mini-messages",t.Rl.miniMessages)})),i(document).on("click",".bpbm-deleted-user-link",(function(e){e.preventDefault()})),i(document).on("click",".bp-better-messages-list .new-message",(function(n){var r=i(".bp-messages-wrap.bp-messages-wrap-main"),o=i(".bp-messages-wrap.bp-better-messages-mini");if(r.length>0)n.preventDefault(),(0,e.fy)(i(this).attr("href"),r);else if(o.length>0){n.preventDefault();var s=t.x6.ajaxUrl+"?action=bp_messages_load_via_ajax&new-message&mini=1";i.get(s,(function(n){void 0!==n.total_unread&&(0,e.PE)(n.total_unread),void 0!==n.errors&&i.each(n.errors,(function(){h(this)}));var r=n.html,o=i(r);o.find(".chat-header").remove();var s=o.find("#bm-new-thread-title"),c=s.text();s.remove();var l="chat open";"1"===t.x6.disableEnterForDesktop&&(l+=" enter-disabled");var u='<div class="'+l+'" data-thread="0" style="">';u+='<div class="head"><span class="unread-count count-0"></span><span class="title"><strong>'+c+"</strong></span>",u+='<div class="controls">\n<span class="open" title="'+t.x6.strings.maximize+'"><i class="fas fa-window-maximize" aria-hidden="true"></i></span>\n<span class="close" title="'+t.x6.strings.close+'"><i class="fas fa-times" aria-hidden="true"></i></span>\n</div></div>',u+=o.html(),u+="</div>";var d=i('.bp-better-messages-mini .chats .chat[data-thread="0"]');d.length>0?d.replaceWith(u):i(u).appendTo(".bp-messages-wrap.bp-better-messages-mini .chats"),(0,a.hM)()}),"json")}})),i(document).on("click",".bp-messages-group-list .group:not(.blocked)",(function(n){if(i(n.target).is("div")){n.preventDefault();var a=i(this);if(a.hasClass("bpbm-messages-disabled"))location.href=a.find(".open-group").attr("href");else{var o=a.closest(".bp-messages-column").length>0||a.closest(".bp-messages-side-threads").length>0,s=(a.data("group-id"),a.data("thread-id")),c=a.find(".actions .open-group").attr("href");"1"===t.x6.enableGroups&&(c+=t.x6.groupsSlug+"/?scrollToContainer");var l=a.attr("data-url");void 0!==l&&(c=l);var u=a.parent().parent(),d=a.height(),p=a.position().top;if(p+=u.scrollTop(),a.find(".loading").css({height:d,"line-height":d+"px",top:p+"px"}),o){var h=a.closest(".bp-messages-wrap");h.length>0&&(0,e.fy)(t.x6.threadUrl+s,h)}else"1"===t.x6.enableGroups&&"1"==t.x6.miniChats&&s?(a.addClass("blocked loading"),(0,r.TK)(s,!0).always((function(){a.removeClass("blocked loading")}))):(a.addClass("blocked loading"),location.href=c)}}})),i(document).on("click",".bp-messages-user-list .user:not(.blocked)",(function(n){if(i(n.target).is("div")){n.preventDefault();var r=i(this),a=i(this).data("id"),o=i(this).data("username");if(r.closest(".bp-messages-column").length>0||r.closest(".bp-messages-side-threads").length>0){var s=t.x6.url+p+"new-message&to="+o;"1"===t.x6.fastStart&&(s+="&fast=1"),(d=r.closest(".bp-messages-wrap")).length>0&&(0,e.fy)(s,d)}else if("1"===t.x6.miniChats&&"1"===t.x6.fastStart){var c=r.parent().parent(),l=i(r).height(),u=r.position().top;u+=c.scrollTop(),i(r).find(".loading").css({height:l,"line-height":l+"px",top:u+"px"}),r.addClass("blocked loading"),b(a).always((function(){r.removeClass("blocked loading")}))}else{var d;s=t.x6.url+p+"new-message&to="+o,"1"===t.x6.fastStart&&(s+="&fast=1&scrollToContainer"),(d=i(".bp-messages-wrap.bp-messages-wrap-main")).length>0?(0,e.fy)(s,d):location.href=s}}})),"1"===t.x6.EPN&&"serviceWorker"in navigator&&"PushManager"in window&&!1===t.h.get("bpbm-browser-push-proposal-clicked",!1)&&navigator.serviceWorker.register(t.x6.PNworker+"bpbm-worker.js",{scope:t.x6.PNworker}).then((function(n){n.pushManager.getSubscription().then((function(n){null===n&&i.amaran({theme:"colorful",content:{bgcolor:"black",color:"#fff",message:'<span class="bpbm-browser-push-proposal"><span class="bpbm-browser-push-proposal-text">'+t.x6.strings.push_request+'</span><span class="bpbm-browser-push-proposal-controls"><button class="BPBMenablePushNotifications">'+t.x6.strings.enable+'</button><button class="BPBMdismissPushProposal">'+t.x6.strings.dismiss+"</button></span></span>"},sticky:!0,closeOnClick:!0,closeButton:!1,position:"bottom right",onClick:function(){(0,e.Wj)("bpbm-browser-push-proposal-clicked",!0)}})}))})),i(document).on("click",".bp-messages-wrap .bpbm-user-me",(function(e){e.preventDefault(),i(this).toggleClass("bpbm-open")})),i(document).on("click",".bp-messages-wrap .bpbm-user-me .bpbm-user-me-popup .bpbm-user-me-popup-list-item",(function(e){e.stopImmediatePropagation();var n=i(this);if(!n.is("a")){e.preventDefault();var r=n.closest(".bpbm-user-me-popup"),a=r.closest(".bpbm-user-me"),o=n.attr("data-status");a.removeClass("bpbm-open"),i.post(t.x6.ajaxUrl,{action:"bp_messages_change_user_option",option:"online_status",user_id:t.x6.user_id,value:o,_wpnonce:r.attr("data-nonce")},(function(e){!0===e.result?i(".bpbm-user-me .current-status").html(e.message):h(e.errors.join("\n"))}))}}))}()})),i(document).on("click",".bp-messages-wrap .chat-header .bpbm-maximize",(function(n){n.preventDefault();var r=i(this).closest(".bp-messages-wrap");0===i("."+g).length&&i('<div class="'+g+'"></div>').insertBefore(r);var a=r;a.addClass("bp-messages-full-screen");var o=window.innerHeight;i("html").addClass("bp-messages-full-screen").css("overflow","hidden"),i("body").addClass("bp-messages-full-screen").css("min-height",o),i(".bp-better-messages-mini .chats .chat.open").removeClass("open");var s=a.appendTo(i("body"));s.find(".user-scrolled").removeClass("user-scrolled"),s.show(),(0,e.CL)(s),i(window).trigger("resize"),t.Rl.blockScroll=!0})),i(document).on("click",".bp-messages-wrap .chat-header .bpbm-minimize",(function(n){n.preventDefault();var r=i(this).closest(".bp-messages-wrap");if(r.hasClass("bp-messages-full-screen")){n.preventDefault(),n.stopImmediatePropagation(),i("html").removeClass("bp-messages-full-screen").css("overflow","auto"),r.removeClass("bp-messages-full-screen").css("min-height",""),i("body").removeClass("bp-messages-full-screen").css("min-height",""),t.Rl.blockScroll=!1;var a=r;a.removeClass("bp-messages-full-screen"),a.removeAttr("id");var o=i("."+g);a.insertBefore(o),a.find(".user-scrolled").removeClass("user-scrolled"),o.remove(),i(window).trigger("resize"),(0,e.CL)(a)}t.Rl.blockScroll=!1})),i(document).on("bp-better-messages-update-unread",(function(t){var n=i(".bp-better-messages-unread"),r=parseInt(t.originalEvent.detail.unread);if((isNaN(r)||r<0)&&(r=0),(0,e.Wj)("bp-better-messages-last-unread",r),n.each((function(){var e=i(this),t=e.hasClass("bpbmuc");e.text(r),t?e.attr("data-count",r):0===r?e.addClass("no-count"):e.removeClass("no-count")})),i("body").hasClass("my-account")){var a=i("#user-bp_better_messages_tab");if(a.length>0){var o=a.find("span.count");r>0?o.length>0?o.text(r):i('<span class="count">'+r+"</span>").appendTo(a):o.remove()}}})),jQuery(document).on("bp-better-messages-reinit",(function(e){(0,a.hM)()})),jQuery(document).on("bp-better-messages-ajax-refresh",(function(t){var n=t.originalEvent.detail.url,i=t.originalEvent.detail.container;(0,e.fy)(n,i)})),i(document).on("submit",".side-header > .bpbm-search form",(function(e){e.preventDefault(),e.stopImmediatePropagation()}));var v=!1;function b(e){var n=new i.Deferred;return i.post(t.x6.ajaxUrl,{action:"bp_messages_get_pm_thread",user_id:e},(function(e){if("1"!==t.x6.miniChats||t.tq&&"1"===t.x6.mobileFullScreen){var i=t.x6.threadUrl+e;location.href=i}else(0,r.TK)(e,!0).always((function(){n.resolve(!0)}))})),n.promise()}i(document).on("change keyup",'.side-header > .bpbm-search input[name="search"]',(function(n){var r=i(this),a=r.val().trim(),o=r.closest("form").find(".close"),s=r.closest(".bp-messages-side-threads"),c=s.find(".bpbm-search-results"),l=c.parent().find("> *:not(.bpbm-search-results)"),u=s.find(".chat-tabs");r.data("search-term")!==a&&(""===a?(l.removeClass("bpbm-display-none"),u.show(),c.hide(),o.hide(),r.data("search-term",a)):(c.show(),o.show(),l.addClass("bpbm-display-none"),u.hide(),v&&v.abort(),0===c.find(".loading-messages").length&&c.html(t.Rl.loadingHtml),r.data("search-term",a),v=i.post(t.x6.ajaxUrl,{action:"bp_messages_thread_search",search:a},(function(n){c.html(n),v=!1,(0,e.a_)(),i(".bpbm-gifs-icon").html(t.ci.gif)}))))})),i(document).on("change keyup",".bpbm-search-in-list > input",(function(e){var t=i(this),n=t.val().trim().toLowerCase(),r=t.parent().next();r.hasClass("threads-list")||r.find("> div").each((function(){var e=i(this);-1===e.find(".name").text().toLowerCase().indexOf(n)?e.hide():e.show()}))})),i(document).on("click",".bpbm-send-files.bpbm-has-files",(function(e){var t=i(this).closest(".uppy-Dashboard"),n=parseInt(t.attr("data-thread-id")),r=i("#bpbm-upload-btn-"+n);t.find(".uppy-Dashboard-close").click(),r.closest("form").submit()})),i(document).on("bp-better-messages-open-mini-chat",(function(e,t,n){(0,r.TK)(t,n)})),i(document).on("bp-better-messages-open-private-thread",(function(e,t){b(t)})),"1"===t.x6.EPN&&(i(document).on("click",".BPBMenablePushNotifications",(function(e){(0,u.bq)()})),i(document).on("click",".BPBMdisablePushNotifications",(function(e){(0,u._Q)()})))}(t.$),window.BBPMOpenMiniChat=function(e,n){(0,t.$)(document).trigger("bp-better-messages-open-mini-chat",[e,n])},window.BBPMOpenPeepsoPrivateThread=function(e){(0,t.$)(document).trigger("bp-better-messages-open-private-thread",[e])},window.BPBMGetOnlineUsers=function(){return n.CH}})()})();